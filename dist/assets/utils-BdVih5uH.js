const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-B0OYj6Nu.js","assets/vendor-DITwTD4U.js","assets/index-DZwAEk9I.js","assets/index-BL7PTa8t.css"])))=>i.map(i=>d[i]);
var Ty=Object.defineProperty;var qm=h=>{throw TypeError(h)};var Ry=(h,e,t)=>e in h?Ty(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var re=(h,e,t)=>Ry(h,typeof e!="symbol"?e+"":e,t),r0=(h,e,t)=>e.has(h)||qm("Cannot "+t);var l=(h,e,t)=>(r0(h,e,"read from private field"),t?t.call(h):e.get(h)),O=(h,e,t)=>e.has(h)?qm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(h):e.set(h,t),P=(h,e,t,i)=>(r0(h,e,"write to private field"),i?i.call(h,t):e.set(h,t),t),z=(h,e,t)=>(r0(h,e,"access private method"),t);var _n=(h,e,t,i)=>({set _(n){P(h,e,n,t)},get _(){return l(h,e,i)}});import{c as qp,g as Fy}from"./vendor-DITwTD4U.js";function ze(h){"@babel/helpers - typeof";return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(h)}const My="modulepreload",Dy=function(h){return"/"+h},Um={},_0=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));n=Promise.allSettled(t.map(o=>{if(o=Dy(o),o in Um)return;Um[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":My,c||(p.as="script"),p.crossOrigin="",p.href=o,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((g,f)=>{p.addEventListener("load",g),p.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}function s(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return n.then(r=>{for(const a of r||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var mn=Uint8Array,fs=Uint16Array,X2=Int32Array,ag=new mn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),og=new mn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),x0=new mn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),N5=function(h,e){for(var t=new fs(31),i=0;i<31;++i)t[i]=e+=1<<h[i-1];for(var n=new X2(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)n[s]=s-t[i]<<5|i;return{b:t,r:n}},P5=N5(ag,2),I5=P5.b,S0=P5.r;I5[28]=258,S0[258]=28;var T5=N5(og,0),Oy=T5.b,Hm=T5.r,L0=new fs(32768);for(var Je=0;Je<32768;++Je){var Ja=(Je&43690)>>1|(Je&21845)<<1;Ja=(Ja&52428)>>2|(Ja&13107)<<2,Ja=(Ja&61680)>>4|(Ja&3855)<<4,L0[Je]=((Ja&65280)>>8|(Ja&255)<<8)>>1}var Ur=function(h,e,t){for(var i=h.length,n=0,s=new fs(e);n<i;++n)h[n]&&++s[h[n]-1];var r=new fs(e);for(n=1;n<e;++n)r[n]=r[n-1]+s[n-1]<<1;var a;if(t){a=new fs(1<<e);var o=15-e;for(n=0;n<i;++n)if(h[n])for(var c=n<<4|h[n],d=e-h[n],p=r[h[n]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)a[L0[p]>>o]=c}else for(a=new fs(i),n=0;n<i;++n)h[n]&&(a[n]=L0[r[h[n]-1]++]>>15-h[n]);return a},Mo=new mn(288);for(var Je=0;Je<144;++Je)Mo[Je]=8;for(var Je=144;Je<256;++Je)Mo[Je]=9;for(var Je=256;Je<280;++Je)Mo[Je]=7;for(var Je=280;Je<288;++Je)Mo[Je]=8;var vd=new mn(32);for(var Je=0;Je<32;++Je)vd[Je]=5;var By=Ur(Mo,9,0),jy=Ur(Mo,9,1),zy=Ur(vd,5,0),qy=Ur(vd,5,1),a0=function(h){for(var e=h[0],t=1;t<h.length;++t)h[t]>e&&(e=h[t]);return e},Hs=function(h,e,t){var i=e/8|0;return(h[i]|h[i+1]<<8)>>(e&7)&t},o0=function(h,e){var t=e/8|0;return(h[t]|h[t+1]<<8|h[t+2]<<16)>>(e&7)},Y2=function(h){return(h+7)/8|0},R5=function(h,e,t){return(t==null||t>h.length)&&(t=h.length),new mn(h.subarray(e,t))},Uy=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Vs=function(h,e,t){var i=new Error(e||Uy[h]);if(i.code=h,Error.captureStackTrace&&Error.captureStackTrace(i,Vs),!t)throw i;return i},Hy=function(h,e,t,i){var n=h.length,s=0;if(!n||e.f&&!e.l)return t||new mn(0);var r=!t,a=r||e.i!=2,o=e.i;r&&(t=new mn(n*3));var c=function(It){var zt=t.length;if(It>zt){var jt=new mn(Math.max(zt*2,It));jt.set(t),t=jt}},d=e.f||0,p=e.p||0,g=e.b||0,f=e.l,v=e.d,b=e.m,_=e.n,y=n*8;do{if(!f){d=Hs(h,p,1);var x=Hs(h,p+1,3);if(p+=3,x)if(x==1)f=jy,v=qy,b=9,_=5;else if(x==2){var K=Hs(h,p,31)+257,q=Hs(h,p+10,15)+4,U=K+Hs(h,p+5,31)+1;p+=14;for(var X=new mn(U),rt=new mn(19),M=0;M<q;++M)rt[x0[M]]=Hs(h,p+M*3,7);p+=q*3;for(var E=a0(rt),W=(1<<E)-1,S=Ur(rt,E,1),M=0;M<U;){var nt=S[Hs(h,p,W)];p+=nt&15;var C=nt>>4;if(C<16)X[M++]=C;else{var st=0,tt=0;for(C==16?(tt=3+Hs(h,p,3),p+=2,st=X[M-1]):C==17?(tt=3+Hs(h,p,7),p+=3):C==18&&(tt=11+Hs(h,p,127),p+=7);tt--;)X[M++]=st}}var dt=X.subarray(0,K),ot=X.subarray(K);b=a0(dt),_=a0(ot),f=Ur(dt,b,1),v=Ur(ot,_,1)}else Vs(1);else{var C=Y2(p)+4,I=h[C-4]|h[C-3]<<8,F=C+I;if(F>n){o&&Vs(0);break}a&&c(g+I),t.set(h.subarray(C,F),g),e.b=g+=I,e.p=p=F*8,e.f=d;continue}if(p>y){o&&Vs(0);break}}a&&c(g+131072);for(var At=(1<<b)-1,lt=(1<<_)-1,k=p;;k=p){var st=f[o0(h,p)&At],G=st>>4;if(p+=st&15,p>y){o&&Vs(0);break}if(st||Vs(2),G<256)t[g++]=G;else if(G==256){k=p,f=null;break}else{var Y=G-254;if(G>264){var M=G-257,Z=ag[M];Y=Hs(h,p,(1<<Z)-1)+I5[M],p+=Z}var ct=v[o0(h,p)&lt],gt=ct>>4;ct||Vs(3),p+=ct&15;var ot=Oy[gt];if(gt>3){var Z=og[gt];ot+=o0(h,p)&(1<<Z)-1,p+=Z}if(p>y){o&&Vs(0);break}a&&c(g+131072);var bt=g+Y;if(g<ot){var wt=s-ot,Mt=Math.min(ot,bt);for(wt+g<0&&Vs(3);g<Mt;++g)t[g]=i[wt+g]}for(;g<bt;++g)t[g]=t[g-ot]}}e.l=f,e.p=k,e.b=g,e.f=d,f&&(d=1,e.m=b,e.d=v,e.n=_)}while(!d);return g!=t.length&&r?R5(t,0,g):t.subarray(0,g)},ia=function(h,e,t){t<<=e&7;var i=e/8|0;h[i]|=t,h[i+1]|=t>>8},$u=function(h,e,t){t<<=e&7;var i=e/8|0;h[i]|=t,h[i+1]|=t>>8,h[i+2]|=t>>16},h0=function(h,e){for(var t=[],i=0;i<h.length;++i)h[i]&&t.push({s:i,f:h[i]});var n=t.length,s=t.slice();if(!n)return{t:M5,l:0};if(n==1){var r=new mn(t[0].s+1);return r[t[0].s]=1,{t:r,l:1}}t.sort(function(F,K){return F.f-K.f}),t.push({s:-1,f:25001});var a=t[0],o=t[1],c=0,d=1,p=2;for(t[0]={s:-1,f:a.f+o.f,l:a,r:o};d!=n-1;)a=t[t[c].f<t[p].f?c++:p++],o=t[c!=d&&t[c].f<t[p].f?c++:p++],t[d++]={s:-1,f:a.f+o.f,l:a,r:o};for(var g=s[0].s,i=1;i<n;++i)s[i].s>g&&(g=s[i].s);var f=new fs(g+1),v=k0(t[d-1],f,0);if(v>e){var i=0,b=0,_=v-e,y=1<<_;for(s.sort(function(K,q){return f[q.s]-f[K.s]||K.f-q.f});i<n;++i){var x=s[i].s;if(f[x]>e)b+=y-(1<<v-f[x]),f[x]=e;else break}for(b>>=_;b>0;){var C=s[i].s;f[C]<e?b-=1<<e-f[C]++-1:++i}for(;i>=0&&b;--i){var I=s[i].s;f[I]==e&&(--f[I],++b)}v=e}return{t:new mn(f),l:v}},k0=function(h,e,t){return h.s==-1?Math.max(k0(h.l,e,t+1),k0(h.r,e,t+1)):e[h.s]=t},Wm=function(h){for(var e=h.length;e&&!h[--e];);for(var t=new fs(++e),i=0,n=h[0],s=1,r=function(o){t[i++]=o},a=1;a<=e;++a)if(h[a]==n&&a!=e)++s;else{if(!n&&s>2){for(;s>138;s-=138)r(32754);s>2&&(r(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(r(n),--s;s>6;s-=6)r(8304);s>2&&(r(s-3<<5|8208),s=0)}for(;s--;)r(n);s=1,n=h[a]}return{c:t.subarray(0,i),n:e}},Xu=function(h,e){for(var t=0,i=0;i<e.length;++i)t+=h[i]*e[i];return t},F5=function(h,e,t){var i=t.length,n=Y2(e+2);h[n]=i&255,h[n+1]=i>>8,h[n+2]=h[n]^255,h[n+3]=h[n+1]^255;for(var s=0;s<i;++s)h[n+s+4]=t[s];return(n+4+i)*8},Gm=function(h,e,t,i,n,s,r,a,o,c,d){ia(e,d++,t),++n[256];for(var p=h0(n,15),g=p.t,f=p.l,v=h0(s,15),b=v.t,_=v.l,y=Wm(g),x=y.c,C=y.n,I=Wm(b),F=I.c,K=I.n,q=new fs(19),U=0;U<x.length;++U)++q[x[U]&31];for(var U=0;U<F.length;++U)++q[F[U]&31];for(var X=h0(q,7),rt=X.t,M=X.l,E=19;E>4&&!rt[x0[E-1]];--E);var W=c+5<<3,S=Xu(n,Mo)+Xu(s,vd)+r,nt=Xu(n,g)+Xu(s,b)+r+14+3*E+Xu(q,rt)+2*q[16]+3*q[17]+7*q[18];if(o>=0&&W<=S&&W<=nt)return F5(e,d,h.subarray(o,o+c));var st,tt,dt,ot;if(ia(e,d,1+(nt<S)),d+=2,nt<S){st=Ur(g,f,0),tt=g,dt=Ur(b,_,0),ot=b;var At=Ur(rt,M,0);ia(e,d,C-257),ia(e,d+5,K-1),ia(e,d+10,E-4),d+=14;for(var U=0;U<E;++U)ia(e,d+3*U,rt[x0[U]]);d+=3*E;for(var lt=[x,F],k=0;k<2;++k)for(var G=lt[k],U=0;U<G.length;++U){var Y=G[U]&31;ia(e,d,At[Y]),d+=rt[Y],Y>15&&(ia(e,d,G[U]>>5&127),d+=G[U]>>12)}}else st=By,tt=Mo,dt=zy,ot=vd;for(var U=0;U<a;++U){var Z=i[U];if(Z>255){var Y=Z>>18&31;$u(e,d,st[Y+257]),d+=tt[Y+257],Y>7&&(ia(e,d,Z>>23&31),d+=ag[Y]);var ct=Z&31;$u(e,d,dt[ct]),d+=ot[ct],ct>3&&($u(e,d,Z>>5&8191),d+=og[ct])}else $u(e,d,st[Z]),d+=tt[Z]}return $u(e,d,st[256]),d+tt[256]},Wy=new X2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),M5=new mn(0),Gy=function(h,e,t,i,n,s){var r=s.z||h.length,a=new mn(i+r+5*(1+Math.ceil(r/7e3))+n),o=a.subarray(i,a.length-n),c=s.l,d=(s.r||0)&7;if(e){d&&(o[0]=s.r>>3);for(var p=Wy[e-1],g=p>>13,f=p&8191,v=(1<<t)-1,b=s.p||new fs(32768),_=s.h||new fs(v+1),y=Math.ceil(t/3),x=2*y,C=function(N){return(h[N]^h[N+1]<<y^h[N+2]<<x)&v},I=new X2(25e3),F=new fs(288),K=new fs(32),q=0,U=0,X=s.i||0,rt=0,M=s.w||0,E=0;X+2<r;++X){var W=C(X),S=X&32767,nt=_[W];if(b[S]=nt,_[W]=S,M<=X){var st=r-X;if((q>7e3||rt>24576)&&(st>423||!c)){d=Gm(h,o,0,I,F,K,U,rt,E,X-E,d),rt=q=U=0,E=X;for(var tt=0;tt<286;++tt)F[tt]=0;for(var tt=0;tt<30;++tt)K[tt]=0}var dt=2,ot=0,At=f,lt=S-nt&32767;if(st>2&&W==C(X-lt))for(var k=Math.min(g,st)-1,G=Math.min(32767,X),Y=Math.min(258,st);lt<=G&&--At&&S!=nt;){if(h[X+dt]==h[X+dt-lt]){for(var Z=0;Z<Y&&h[X+Z]==h[X+Z-lt];++Z);if(Z>dt){if(dt=Z,ot=lt,Z>k)break;for(var ct=Math.min(lt,Z-2),gt=0,tt=0;tt<ct;++tt){var bt=X-lt+tt&32767,wt=b[bt],Mt=bt-wt&32767;Mt>gt&&(gt=Mt,nt=bt)}}}S=nt,nt=b[S],lt+=S-nt&32767}if(ot){I[rt++]=268435456|S0[dt]<<18|Hm[ot];var It=S0[dt]&31,zt=Hm[ot]&31;U+=ag[It]+og[zt],++F[257+It],++K[zt],M=X+dt,++q}else I[rt++]=h[X],++F[h[X]]}}for(X=Math.max(X,M);X<r;++X)I[rt++]=h[X],++F[h[X]];d=Gm(h,o,c,I,F,K,U,rt,E,X-E,d),c||(s.r=d&7|o[d/8|0]<<3,d-=7,s.h=_,s.p=b,s.i=X,s.w=M)}else{for(var X=s.w||0;X<r+c;X+=65535){var jt=X+65535;jt>=r&&(o[d/8|0]=c,jt=r),d=F5(o,d+1,h.subarray(X,jt))}s.i=r}return R5(a,0,i+Y2(d)+n)},D5=function(){var h=1,e=0;return{p:function(t){for(var i=h,n=e,s=t.length|0,r=0;r!=s;){for(var a=Math.min(r+2655,s);r<a;++r)n+=i+=t[r];i=(i&65535)+15*(i>>16),n=(n&65535)+15*(n>>16)}h=i,e=n},d:function(){return h%=65521,e%=65521,(h&255)<<24|(h&65280)<<8|(e&255)<<8|e>>8}}},Vy=function(h,e,t,i,n){if(!n&&(n={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),r=new mn(s.length+h.length);r.set(s),r.set(h,s.length),h=r,n.w=s.length}return Gy(h,e.level==null?6:e.level,e.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(h.length)))*1.5):20:12+e.mem,t,i,n)},O5=function(h,e,t){for(;t;++e)h[e]=t,t>>>=8},$y=function(h,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;if(h[0]=120,h[1]=i<<6|(e.dictionary&&32),h[1]|=31-(h[0]<<8|h[1])%31,e.dictionary){var n=D5();n.p(e.dictionary),O5(h,2,n.d())}},Xy=function(h,e){return((h[0]&15)!=8||h[0]>>4>7||(h[0]<<8|h[1])%31)&&Vs(6,"invalid zlib data"),(h[1]>>5&1)==+!e&&Vs(6,"invalid zlib data: "+(h[1]&32?"need":"unexpected")+" dictionary"),(h[1]>>3&4)+2};function E0(h,e){e||(e={});var t=D5();t.p(h);var i=Vy(h,e,e.dictionary?6:2,4);return $y(i,e),O5(i,i.length-4,t.d()),i}function Yy(h,e){return Hy(h.subarray(Xy(h,e),-4),{i:2},e,e)}var Ky=typeof TextDecoder<"u"&&new TextDecoder,Zy=0;try{Ky.decode(M5,{stream:!0}),Zy=1}catch{}var he=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function l0(){he.console&&typeof he.console.log=="function"&&he.console.log.apply(he.console,arguments)}var Ve={log:l0,warn:function(h){he.console&&(typeof he.console.warn=="function"?he.console.warn.apply(he.console,arguments):l0.call(null,arguments))},error:function(h){he.console&&(typeof he.console.error=="function"?he.console.error.apply(he.console,arguments):l0(h))}};function c0(h,e,t){var i=new XMLHttpRequest;i.open("GET",h),i.responseType="blob",i.onload=function(){Qo(i.response,e,t)},i.onerror=function(){Ve.error("could not download file")},i.send()}function Vm(h){var e=new XMLHttpRequest;e.open("HEAD",h,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Up(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(e)}}var gd,C0,Qo=he.saveAs||((typeof window>"u"?"undefined":ze(window))!=="object"||window!==he?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(h,e,t){var i=he.URL||he.webkitURL,n=document.createElement("a");e=e||h.name||"download",n.download=e,n.rel="noopener",typeof h=="string"?(n.href=h,n.origin!==location.origin?Vm(n.href)?c0(h,e,t):Up(n,n.target="_blank"):Up(n)):(n.href=i.createObjectURL(h),setTimeout(function(){i.revokeObjectURL(n.href)},4e4),setTimeout(function(){Up(n)},0))}:"msSaveOrOpenBlob"in navigator?function(h,e,t){if(e=e||h.name||"download",typeof h=="string")if(Vm(h))c0(h,e,t);else{var i=document.createElement("a");i.href=h,i.target="_blank",setTimeout(function(){Up(i)})}else navigator.msSaveOrOpenBlob(function(n,s){return s===void 0?s={autoBom:!1}:ze(s)!=="object"&&(Ve.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(h,t),e)}:function(h,e,t,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof h=="string")return c0(h,e,t);var n=h.type==="application/octet-stream",s=/constructor/i.test(he.HTMLElement)||he.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||n&&s)&&(typeof FileReader>"u"?"undefined":ze(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=r?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=d:location=d,i=null},a.readAsDataURL(h)}else{var o=he.URL||he.webkitURL,c=o.createObjectURL(h);i?i.location=c:location.href=c,i=null,setTimeout(function(){o.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function B5(h){var e;h=h||"",this.ok=!1,h.charAt(0)=="#"&&(h=h.substr(1,6)),h={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[h=(h=h.replace(/ /g,"")).toLowerCase()]||h;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<t.length;i++){var n=t[i].re,s=t[i].process,r=n.exec(h);r&&(e=s(r),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),o=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),"#"+a+o+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function u0(h,e){var t=h[0],i=h[1],n=h[2],s=h[3];t=sn(t,i,n,s,e[0],7,-680876936),s=sn(s,t,i,n,e[1],12,-389564586),n=sn(n,s,t,i,e[2],17,606105819),i=sn(i,n,s,t,e[3],22,-1044525330),t=sn(t,i,n,s,e[4],7,-176418897),s=sn(s,t,i,n,e[5],12,1200080426),n=sn(n,s,t,i,e[6],17,-1473231341),i=sn(i,n,s,t,e[7],22,-45705983),t=sn(t,i,n,s,e[8],7,1770035416),s=sn(s,t,i,n,e[9],12,-1958414417),n=sn(n,s,t,i,e[10],17,-42063),i=sn(i,n,s,t,e[11],22,-1990404162),t=sn(t,i,n,s,e[12],7,1804603682),s=sn(s,t,i,n,e[13],12,-40341101),n=sn(n,s,t,i,e[14],17,-1502002290),t=rn(t,i=sn(i,n,s,t,e[15],22,1236535329),n,s,e[1],5,-165796510),s=rn(s,t,i,n,e[6],9,-1069501632),n=rn(n,s,t,i,e[11],14,643717713),i=rn(i,n,s,t,e[0],20,-373897302),t=rn(t,i,n,s,e[5],5,-701558691),s=rn(s,t,i,n,e[10],9,38016083),n=rn(n,s,t,i,e[15],14,-660478335),i=rn(i,n,s,t,e[4],20,-405537848),t=rn(t,i,n,s,e[9],5,568446438),s=rn(s,t,i,n,e[14],9,-1019803690),n=rn(n,s,t,i,e[3],14,-187363961),i=rn(i,n,s,t,e[8],20,1163531501),t=rn(t,i,n,s,e[13],5,-1444681467),s=rn(s,t,i,n,e[2],9,-51403784),n=rn(n,s,t,i,e[7],14,1735328473),t=an(t,i=rn(i,n,s,t,e[12],20,-1926607734),n,s,e[5],4,-378558),s=an(s,t,i,n,e[8],11,-2022574463),n=an(n,s,t,i,e[11],16,1839030562),i=an(i,n,s,t,e[14],23,-35309556),t=an(t,i,n,s,e[1],4,-1530992060),s=an(s,t,i,n,e[4],11,1272893353),n=an(n,s,t,i,e[7],16,-155497632),i=an(i,n,s,t,e[10],23,-1094730640),t=an(t,i,n,s,e[13],4,681279174),s=an(s,t,i,n,e[0],11,-358537222),n=an(n,s,t,i,e[3],16,-722521979),i=an(i,n,s,t,e[6],23,76029189),t=an(t,i,n,s,e[9],4,-640364487),s=an(s,t,i,n,e[12],11,-421815835),n=an(n,s,t,i,e[15],16,530742520),t=on(t,i=an(i,n,s,t,e[2],23,-995338651),n,s,e[0],6,-198630844),s=on(s,t,i,n,e[7],10,1126891415),n=on(n,s,t,i,e[14],15,-1416354905),i=on(i,n,s,t,e[5],21,-57434055),t=on(t,i,n,s,e[12],6,1700485571),s=on(s,t,i,n,e[3],10,-1894986606),n=on(n,s,t,i,e[10],15,-1051523),i=on(i,n,s,t,e[1],21,-2054922799),t=on(t,i,n,s,e[8],6,1873313359),s=on(s,t,i,n,e[15],10,-30611744),n=on(n,s,t,i,e[6],15,-1560198380),i=on(i,n,s,t,e[13],21,1309151649),t=on(t,i,n,s,e[4],6,-145523070),s=on(s,t,i,n,e[11],10,-1120210379),n=on(n,s,t,i,e[2],15,718787259),i=on(i,n,s,t,e[9],21,-343485551),h[0]=Ro(t,h[0]),h[1]=Ro(i,h[1]),h[2]=Ro(n,h[2]),h[3]=Ro(s,h[3])}function hg(h,e,t,i,n,s){return e=Ro(Ro(e,h),Ro(i,s)),Ro(e<<n|e>>>32-n,t)}function sn(h,e,t,i,n,s,r){return hg(e&t|~e&i,h,e,n,s,r)}function rn(h,e,t,i,n,s,r){return hg(e&i|t&~i,h,e,n,s,r)}function an(h,e,t,i,n,s,r){return hg(e^t^i,h,e,n,s,r)}function on(h,e,t,i,n,s,r){return hg(t^(e|~i),h,e,n,s,r)}function j5(h){var e,t=h.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=h.length;e+=64)u0(i,Jy(h.substring(e-64,e)));h=h.substring(e-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<h.length;e++)n[e>>2]|=h.charCodeAt(e)<<(e%4<<3);if(n[e>>2]|=128<<(e%4<<3),e>55)for(u0(i,n),e=0;e<16;e++)n[e]=0;return n[14]=8*t,u0(i,n),i}function Jy(h){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=h.charCodeAt(e)+(h.charCodeAt(e+1)<<8)+(h.charCodeAt(e+2)<<16)+(h.charCodeAt(e+3)<<24);return t}gd=he.atob.bind(he),C0=he.btoa.bind(he);var $m="0123456789abcdef".split("");function Qy(h){for(var e="",t=0;t<4;t++)e+=$m[h>>8*t+4&15]+$m[h>>8*t&15];return e}function tw(h){return String.fromCharCode((255&h)>>0,(65280&h)>>8,(16711680&h)>>16,(4278190080&h)>>24)}function N0(h){return j5(h).map(tw).join("")}var ew=function(h){for(var e=0;e<h.length;e++)h[e]=Qy(h[e]);return h.join("")}(j5("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ro(h,e){if(ew){var t=(65535&h)+(65535&e);return(h>>16)+(e>>16)+(t>>16)<<16|65535&t}return h+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P0(h,e){var t,i,n,s;if(h!==t){for(var r=(n=h,s=1+(256/h.length>>0),new Array(s+1).join(n)),a=[],o=0;o<256;o++)a[o]=o;var c=0;for(o=0;o<256;o++){var d=a[o];c=(c+d+r.charCodeAt(o))%256,a[o]=a[c],a[c]=d}t=h,i=a}else a=i;var p=e.length,g=0,f=0,v="";for(o=0;o<p;o++)f=(f+(d=a[g=(g+1)%256]))%256,a[g]=a[f],a[f]=d,r=a[(a[g]+a[f])%256],v+=String.fromCharCode(e.charCodeAt(o)^r);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Xm={print:4,modify:8,copy:16,"annot-forms":32};function Xl(h,e,t,i){this.v=1,this.r=2;var n=192;h.forEach(function(a){if(Xm.perm!==void 0)throw new Error("Invalid permission: "+a);n+=Xm[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),r=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,r),this.P=-(1+(255^n)),this.encryptionKey=N0(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=P0(this.encryptionKey,this.padding)}function Yl(h){if(/[^\u0000-\u00ff]/.test(h))throw new Error("Invalid PDF Name Object: "+h+", Only accept ASCII characters.");for(var e="",t=h.length,i=0;i<t;i++){var n=h.charCodeAt(i);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?e+="#"+("0"+n.toString(16)).slice(-2):e+=h[i]}return e}function Ym(h){if(ze(h)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,i,n){if(n=n||!1,typeof t!="string"||typeof i!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[i,!!n],s},this.unsubscribe=function(t){for(var i in e)if(e[i][t])return delete e[i][t],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var i=Array.prototype.slice.call(arguments,1),n=[];for(var s in e[t]){var r=e[t][s];try{r[0].apply(h,i)}catch(a){he.console&&Ve.error("jsPDF PubSub Error",a.message,a)}r[1]&&n.push(s)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function I1(h){if(!(this instanceof I1))return new I1(h);var e="opacity,stroke-opacity".split(",");for(var t in h)h.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=h[t]);this.id="",this.objectNumber=-1}function z5(h,e){this.gState=h,this.matrix=e,this.id="",this.objectNumber=-1}function nh(h,e,t,i,n){if(!(this instanceof nh))return new nh(h,e,t,i,n);this.type=h==="axial"?2:3,this.coords=e,this.colors=t,z5.call(this,i,n)}function nc(h,e,t,i,n){if(!(this instanceof nc))return new nc(h,e,t,i,n);this.boundingBox=h,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,z5.call(this,i,n)}function le(h){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],n=arguments[2],s=arguments[3],r=[],a=1,o=16,c="S",d=null;ze(h=h||{})==="object"&&(t=h.orientation,i=h.unit||i,n=h.format||n,s=h.compress||h.compressPdf||s,(d=h.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof h.userUnit=="number"?Math.abs(h.userUnit):1,h.precision!==void 0&&(e=h.precision),h.floatPrecision!==void 0&&(o=h.floatPrecision),c=h.defaultPathOperation||"S"),r=h.filters||(s===!0?["FlateEncode"]:r),i=i||"mm",t=(""+(t||"P")).toLowerCase();var p=h.putOnlyUsedFonts||!1,g={},f={internal:{},__private__:{}};f.__private__.PubSub=Ym;var v="1.3",b=f.__private__.getPdfVersion=function(){return v};f.__private__.setPdfVersion=function(w){v=w};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return _};var y=f.__private__.getPageFormat=function(w){return _[w]};n=n||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},C=x.COMPAT;function I(){this.saveGraphicsState(),B(new oe(qt,0,0,-qt,0,za()*qt).toString()+" cm"),this.setFontSize(this.getFontSize()/qt),c="n",C=x.ADVANCED}function F(){this.restoreGraphicsState(),c="S",C=x.COMPAT}var K=f.__private__.combineFontStyleAndFontWeight=function(w,R){if(w=="bold"&&R=="normal"||w=="bold"&&R==400||w=="normal"&&R=="italic"||w=="bold"&&R=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return R&&(w=R==400||R==="normal"?w==="italic"?"italic":"normal":R!=700&&R!=="bold"||w!=="normal"?(R==700?"bold":R)+""+w:"bold"),w};f.advancedAPI=function(w){var R=C===x.COMPAT;return R&&I.call(this),typeof w!="function"||(w(this),R&&F.call(this)),this},f.compatAPI=function(w){var R=C===x.ADVANCED;return R&&F.call(this),typeof w!="function"||(w(this),R&&I.call(this)),this},f.isAdvancedAPI=function(){return C===x.ADVANCED};var q,U=function(w){if(C!==x.ADVANCED)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},X=f.roundToPrecision=f.__private__.roundToPrecision=function(w,R){var it=e||R;if(isNaN(w)||isNaN(it))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(it).replace(/0+$/,"")};q=f.hpf=f.__private__.hpf=typeof o=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return X(w,o)}:o==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return X(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return X(w,16)};var rt=f.f2=f.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return X(w,2)},M=f.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return X(w,3)},E=f.scale=f.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return C===x.COMPAT?w*qt:C===x.ADVANCED?w:void 0},W=function(w){return C===x.COMPAT?za()-w:C===x.ADVANCED?w:void 0},S=function(w){return E(W(w))};f.__private__.setPrecision=f.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var nt,st="00000000000000000000000000000000",tt=f.__private__.getFileId=function(){return st},dt=f.__private__.setFileId=function(w){return st=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():st.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(en=new Xl(d.userPermissions,d.userPassword,d.ownerPassword,st)),st};f.setFileId=function(w){return dt(w),this},f.getFileId=function(){return tt()};var ot=f.__private__.convertDateToPDFDate=function(w){var R=w.getTimezoneOffset(),it=R<0?"+":"-",ut=Math.floor(Math.abs(R/60)),xt=Math.abs(R%60),Ct=[it,Y(ut),"'",Y(xt),"'"].join("");return["D:",w.getFullYear(),Y(w.getMonth()+1),Y(w.getDate()),Y(w.getHours()),Y(w.getMinutes()),Y(w.getSeconds()),Ct].join("")},At=f.__private__.convertPDFDateToDate=function(w){var R=parseInt(w.substr(2,4),10),it=parseInt(w.substr(6,2),10)-1,ut=parseInt(w.substr(8,2),10),xt=parseInt(w.substr(10,2),10),Ct=parseInt(w.substr(12,2),10),Ot=parseInt(w.substr(14,2),10);return new Date(R,it,ut,xt,Ct,Ot,0)},lt=f.__private__.setCreationDate=function(w){var R;if(w===void 0&&(w=new Date),w instanceof Date)R=ot(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");R=w}return nt=R},k=f.__private__.getCreationDate=function(w){var R=nt;return w==="jsDate"&&(R=At(nt)),R};f.setCreationDate=function(w){return lt(w),this},f.getCreationDate=function(w){return k(w)};var G,Y=f.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},Z=f.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},ct=0,gt=[],bt=[],wt=0,Mt=[],It=[],zt=!1,jt=bt,N=function(){ct=0,wt=0,bt=[],gt=[],Mt=[],Vr=Ai(),Ms=Ai()};f.__private__.setCustomOutputDestination=function(w){zt=!0,jt=w};var at=function(w){zt||(jt=w)};f.__private__.resetCustomOutputDestination=function(){zt=!1,jt=bt};var B=f.__private__.out=function(w){return w=w.toString(),wt+=w.length+1,jt.push(w),jt},J=f.__private__.write=function(w){return B(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},$=f.__private__.getArrayBuffer=function(w){for(var R=w.length,it=new ArrayBuffer(R),ut=new Uint8Array(it);R--;)ut[R]=w.charCodeAt(R);return it},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return et};var vt=h.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(w){return vt=C===x.ADVANCED?w/qt:w,this};var _t,ht=f.__private__.getFontSize=f.getFontSize=function(){return C===x.COMPAT?vt:vt*qt},kt=h.R2L||!1;f.__private__.setR2L=f.setR2L=function(w){return kt=w,this},f.__private__.getR2L=f.getR2L=function(){return kt};var Ft,Nt=f.__private__.setZoomMode=function(w){var R=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))_t=w;else if(isNaN(w)){if(R.indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');_t=w}else _t=parseInt(w,10)};f.__private__.getZoomMode=function(){return _t};var Bt,Jt=f.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Ft=w};f.__private__.getPageMode=function(){return Ft};var Zt=f.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');Bt=w};f.__private__.getLayoutMode=function(){return Bt},f.__private__.setDisplayMode=f.setDisplayMode=function(w,R,it){return Nt(w),Zt(R),Jt(it),this};var Qt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(w){if(Object.keys(Qt).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qt[w]},f.__private__.getDocumentProperties=function(){return Qt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(w){for(var R in Qt)Qt.hasOwnProperty(R)&&w[R]&&(Qt[R]=w[R]);return this},f.__private__.setDocumentProperty=function(w,R){if(Object.keys(Qt).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qt[w]=R};var ge,qt,oi,ne,tn,Te={},ke={},Vn=[],Pe={},Gr={},Qe={},In={},vn=null,We=0,de=[],Me=new Ym(f),qo=h.hotfixes||[],Gi={},ur={},dr=[],oe=function w(R,it,ut,xt,Ct,Ot){if(!(this instanceof w))return new w(R,it,ut,xt,Ct,Ot);isNaN(R)&&(R=1),isNaN(it)&&(it=0),isNaN(ut)&&(ut=0),isNaN(xt)&&(xt=1),isNaN(Ct)&&(Ct=0),isNaN(Ot)&&(Ot=0),this._matrix=[R,it,ut,xt,Ct,Ot]};Object.defineProperty(oe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(oe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(oe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(oe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(oe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(oe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(oe.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(oe.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(oe.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(oe.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(oe.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(oe.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(oe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(oe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(oe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(oe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),oe.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(q).join(w)},oe.prototype.multiply=function(w){var R=w.sx*this.sx+w.shy*this.shx,it=w.sx*this.shy+w.shy*this.sy,ut=w.shx*this.sx+w.sy*this.shx,xt=w.shx*this.shy+w.sy*this.sy,Ct=w.tx*this.sx+w.ty*this.shx+this.tx,Ot=w.tx*this.shy+w.ty*this.sy+this.ty;return new oe(R,it,ut,xt,Ct,Ot)},oe.prototype.decompose=function(){var w=this.sx,R=this.shy,it=this.shx,ut=this.sy,xt=this.tx,Ct=this.ty,Ot=Math.sqrt(w*w+R*R),Gt=(w/=Ot)*it+(R/=Ot)*ut;it-=w*Gt,ut-=R*Gt;var ie=Math.sqrt(it*it+ut*ut);return Gt/=ie,w*(ut/=ie)<R*(it/=ie)&&(w=-w,R=-R,Gt=-Gt,Ot=-Ot),{scale:new oe(Ot,0,0,ie,0,0),translate:new oe(1,0,0,1,xt,Ct),rotate:new oe(w,R,-R,w,0,0),skew:new oe(1,0,Gt,1,0,0)}},oe.prototype.toString=function(w){return this.join(" ")},oe.prototype.inversed=function(){var w=this.sx,R=this.shy,it=this.shx,ut=this.sy,xt=this.tx,Ct=this.ty,Ot=1/(w*ut-R*it),Gt=ut*Ot,ie=-R*Ot,me=-it*Ot,fe=w*Ot;return new oe(Gt,ie,me,fe,-Gt*xt-me*Ct,-ie*xt-fe*Ct)},oe.prototype.applyToPoint=function(w){var R=w.x*this.sx+w.y*this.shx+this.tx,it=w.x*this.shy+w.y*this.sy+this.ty;return new Pl(R,it)},oe.prototype.applyToRectangle=function(w){var R=this.applyToPoint(w),it=this.applyToPoint(new Pl(w.x+w.w,w.y+w.h));return new Eu(R.x,R.y,it.x-R.x,it.y-R.y)},oe.prototype.clone=function(){var w=this.sx,R=this.shy,it=this.shx,ut=this.sy,xt=this.tx,Ct=this.ty;return new oe(w,R,it,ut,xt,Ct)},f.Matrix=oe;var Fs=f.matrixMult=function(w,R){return R.multiply(w)},fr=new oe(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=fr;var Tn=function(w,R){if(!Gr[w]){var it=(R instanceof nh?"Sh":"P")+(Object.keys(Pe).length+1).toString(10);R.id=it,Gr[w]=it,Pe[it]=R,Me.publish("addPattern",R)}};f.ShadingPattern=nh,f.TilingPattern=nc,f.addShadingPattern=function(w,R){return U("addShadingPattern()"),Tn(w,R),this},f.beginTilingPattern=function(w){U("beginTilingPattern()"),gp(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},f.endTilingPattern=function(w,R){U("endTilingPattern()"),R.stream=It[G].join(`
`),Tn(w,R),Me.publish("endTilingPattern",R),dr.pop().restore()};var Ci=f.__private__.newObject=function(){var w=Ai();return $n(w,!0),w},Ai=f.__private__.newObjectDeferred=function(){return ct++,gt[ct]=function(){return wt},ct},$n=function(w,R){return R=typeof R=="boolean"&&R,gt[w]=wt,R&&B(w+" 0 obj"),w},bl=f.__private__.newAdditionalObject=function(){var w={objId:Ai(),content:""};return Mt.push(w),w},Vr=Ai(),Ms=Ai(),Ds=f.__private__.decodeColorString=function(w){var R=w.split(" ");if(R.length!==2||R[1]!=="g"&&R[1]!=="G")R.length===5&&(R[4]==="k"||R[4]==="K")&&(R=[(1-R[0])*(1-R[3]),(1-R[1])*(1-R[3]),(1-R[2])*(1-R[3]),"r"]);else{var it=parseFloat(R[0]);R=[it,it,it,"r"]}for(var ut="#",xt=0;xt<3;xt++)ut+=("0"+Math.floor(255*parseFloat(R[xt])).toString(16)).slice(-2);return ut},Os=f.__private__.encodeColorString=function(w){var R;typeof w=="string"&&(w={ch1:w});var it=w.ch1,ut=w.ch2,xt=w.ch3,Ct=w.ch4,Ot=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof it=="string"&&it.charAt(0)!=="#"){var Gt=new B5(it);if(Gt.ok)it=Gt.toHex();else if(!/^\d*\.?\d*$/.test(it))throw new Error('Invalid color "'+it+'" passed to jsPDF.encodeColorString.')}if(typeof it=="string"&&/^#[0-9A-Fa-f]{3}$/.test(it)&&(it="#"+it[1]+it[1]+it[2]+it[2]+it[3]+it[3]),typeof it=="string"&&/^#[0-9A-Fa-f]{6}$/.test(it)){var ie=parseInt(it.substr(1),16);it=ie>>16&255,ut=ie>>8&255,xt=255&ie}if(ut===void 0||Ct===void 0&&it===ut&&ut===xt)if(typeof it=="string")R=it+" "+Ot[0];else switch(w.precision){case 2:R=rt(it/255)+" "+Ot[0];break;case 3:default:R=M(it/255)+" "+Ot[0]}else if(Ct===void 0||ze(Ct)==="object"){if(Ct&&!isNaN(Ct.a)&&Ct.a===0)return R=["1.","1.","1.",Ot[1]].join(" ");if(typeof it=="string")R=[it,ut,xt,Ot[1]].join(" ");else switch(w.precision){case 2:R=[rt(it/255),rt(ut/255),rt(xt/255),Ot[1]].join(" ");break;default:case 3:R=[M(it/255),M(ut/255),M(xt/255),Ot[1]].join(" ")}}else if(typeof it=="string")R=[it,ut,xt,Ct,Ot[2]].join(" ");else switch(w.precision){case 2:R=[rt(it),rt(ut),rt(xt),rt(Ct),Ot[2]].join(" ");break;case 3:default:R=[M(it),M(ut),M(xt),M(Ct),Ot[2]].join(" ")}return R},pr=f.__private__.getFilters=function(){return r},gs=f.__private__.putStream=function(w){var R=(w=w||{}).data||"",it=w.filters||pr(),ut=w.alreadyAppliedFilters||[],xt=w.addLength1||!1,Ct=R.length,Ot=w.objectId,Gt=function(nn){return nn};if(d!==null&&Ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Gt=en.encryptor(Ot,0));var ie={};it===!0&&(it=["FlateEncode"]);var me=w.additionalKeyValues||[],fe=(ie=le.API.processDataByFilters!==void 0?le.API.processDataByFilters(R,it):{data:R,reverseChain:[]}).reverseChain+(Array.isArray(ut)?ut.join(" "):ut.toString());if(ie.data.length!==0&&(me.push({key:"Length",value:ie.data.length}),xt===!0&&me.push({key:"Length1",value:Ct})),fe.length!=0)if(fe.split("/").length-1==1)me.push({key:"Filter",value:fe});else{me.push({key:"Filter",value:"["+fe+"]"});for(var Ee=0;Ee<me.length;Ee+=1)if(me[Ee].key==="DecodeParms"){for(var ni=[],hi=0;hi<ie.reverseChain.split("/").length-1;hi+=1)ni.push("null");ni.push(me[Ee].value),me[Ee].value="["+ni.join(" ")+"]"}}B("<<");for(var _i=0;_i<me.length;_i++)B("/"+me[_i].key+" "+me[_i].value);B(">>"),ie.data.length!==0&&(B("stream"),B(Gt(ie.data)),B("endstream"))},gr=f.__private__.putPage=function(w){var R=w.number,it=w.data,ut=w.objId,xt=w.contentsObjId;$n(ut,!0),B("<</Type /Page"),B("/Parent "+w.rootDictionaryObjId+" 0 R"),B("/Resources "+w.resourceDictionaryObjId+" 0 R"),B("/MediaBox ["+parseFloat(q(w.mediaBox.bottomLeftX))+" "+parseFloat(q(w.mediaBox.bottomLeftY))+" "+q(w.mediaBox.topRightX)+" "+q(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&B("/CropBox ["+q(w.cropBox.bottomLeftX)+" "+q(w.cropBox.bottomLeftY)+" "+q(w.cropBox.topRightX)+" "+q(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&B("/BleedBox ["+q(w.bleedBox.bottomLeftX)+" "+q(w.bleedBox.bottomLeftY)+" "+q(w.bleedBox.topRightX)+" "+q(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&B("/TrimBox ["+q(w.trimBox.bottomLeftX)+" "+q(w.trimBox.bottomLeftY)+" "+q(w.trimBox.topRightX)+" "+q(w.trimBox.topRightY)+"]"),w.artBox!==null&&B("/ArtBox ["+q(w.artBox.bottomLeftX)+" "+q(w.artBox.bottomLeftY)+" "+q(w.artBox.topRightX)+" "+q(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&B("/UserUnit "+w.userUnit),Me.publish("putPage",{objId:ut,pageContext:de[R],pageNumber:R,page:it}),B("/Contents "+xt+" 0 R"),B(">>"),B("endobj");var Ct=it.join(`
`);return C===x.ADVANCED&&(Ct+=`
Q`),$n(xt,!0),gs({data:Ct,filters:pr(),objectId:xt}),B("endobj"),ut},Uo=f.__private__.putPages=function(){var w,R,it=[];for(w=1;w<=We;w++)de[w].objId=Ai(),de[w].contentsObjId=Ai();for(w=1;w<=We;w++)it.push(gr({number:w,data:It[w],objId:de[w].objId,contentsObjId:de[w].contentsObjId,mediaBox:de[w].mediaBox,cropBox:de[w].cropBox,bleedBox:de[w].bleedBox,trimBox:de[w].trimBox,artBox:de[w].artBox,userUnit:de[w].userUnit,rootDictionaryObjId:Vr,resourceDictionaryObjId:Ms}));$n(Vr,!0),B("<</Type /Pages");var ut="/Kids [";for(R=0;R<We;R++)ut+=it[R]+" 0 R ";B(ut+"]"),B("/Count "+We),B(">>"),B("endobj"),Me.publish("postPutPages")},vl=function(w){Me.publish("putFont",{font:w,out:B,newObject:Ci,putStream:gs}),w.isAlreadyPutted!==!0&&(w.objectNumber=Ci(),B("<<"),B("/Type /Font"),B("/BaseFont /"+Yl(w.postScriptName)),B("/Subtype /Type1"),typeof w.encoding=="string"&&B("/Encoding /"+w.encoding),B("/FirstChar 32"),B("/LastChar 255"),B(">>"),B("endobj"))},yl=function(){for(var w in Te)Te.hasOwnProperty(w)&&(p===!1||p===!0&&g.hasOwnProperty(w))&&vl(Te[w])},wl=function(w){w.objectNumber=Ci();var R=[];R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Form"}),R.push({key:"BBox",value:"["+[q(w.x),q(w.y),q(w.x+w.width),q(w.y+w.height)].join(" ")+"]"}),R.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var it=w.pages[1].join(`
`);gs({data:it,additionalKeyValues:R,objectId:w.objectNumber}),B("endobj")},Al=function(){for(var w in Gi)Gi.hasOwnProperty(w)&&wl(Gi[w])},Zf=function(w,R){var it,ut=[],xt=1/(R-1);for(it=0;it<1;it+=xt)ut.push(it);if(ut.push(1),w[0].offset!=0){var Ct={offset:0,color:w[0].color};w.unshift(Ct)}if(w[w.length-1].offset!=1){var Ot={offset:1,color:w[w.length-1].color};w.push(Ot)}for(var Gt="",ie=0,me=0;me<ut.length;me++){for(it=ut[me];it>w[ie+1].offset;)ie++;var fe=w[ie].offset,Ee=(it-fe)/(w[ie+1].offset-fe),ni=w[ie].color,hi=w[ie+1].color;Gt+=Z(Math.round((1-Ee)*ni[0]+Ee*hi[0]).toString(16))+Z(Math.round((1-Ee)*ni[1]+Ee*hi[1]).toString(16))+Z(Math.round((1-Ee)*ni[2]+Ee*hi[2]).toString(16))}return Gt.trim()},bg=function(w,R){R||(R=21);var it=Ci(),ut=Zf(w.colors,R),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+R+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gs({data:ut,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:it}),B("endobj"),w.objectNumber=Ci(),B("<< /ShadingType "+w.type),B("/ColorSpace /DeviceRGB");var Ct="/Coords ["+q(parseFloat(w.coords[0]))+" "+q(parseFloat(w.coords[1]))+" ";w.type===2?Ct+=q(parseFloat(w.coords[2]))+" "+q(parseFloat(w.coords[3])):Ct+=q(parseFloat(w.coords[2]))+" "+q(parseFloat(w.coords[3]))+" "+q(parseFloat(w.coords[4]))+" "+q(parseFloat(w.coords[5])),B(Ct+="]"),w.matrix&&B("/Matrix ["+w.matrix.toString()+"]"),B("/Function "+it+" 0 R"),B("/Extend [true true]"),B(">>"),B("endobj")},vg=function(w,R){var it=Ai(),ut=Ci();R.push({resourcesOid:it,objectOid:ut}),w.objectNumber=ut;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+w.boundingBox.map(q).join(" ")+"]"}),xt.push({key:"XStep",value:q(w.xStep)}),xt.push({key:"YStep",value:q(w.yStep)}),xt.push({key:"Resources",value:it+" 0 R"}),w.matrix&&xt.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),gs({data:w.stream,additionalKeyValues:xt,objectId:w.objectNumber}),B("endobj")},_l=function(w){var R;for(R in Pe)Pe.hasOwnProperty(R)&&(Pe[R]instanceof nh?bg(Pe[R]):Pe[R]instanceof nc&&vg(Pe[R],w))},Jf=function(w){for(var R in w.objectNumber=Ci(),B("<<"),w)switch(R){case"opacity":B("/ca "+rt(w[R]));break;case"stroke-opacity":B("/CA "+rt(w[R]))}B(">>"),B("endobj")},yg=function(){var w;for(w in Qe)Qe.hasOwnProperty(w)&&Jf(Qe[w])},bu=function(){for(var w in B("/XObject <<"),Gi)Gi.hasOwnProperty(w)&&Gi[w].objectNumber>=0&&B("/"+w+" "+Gi[w].objectNumber+" 0 R");Me.publish("putXobjectDict"),B(">>")},wg=function(){en.oid=Ci(),B("<<"),B("/Filter /Standard"),B("/V "+en.v),B("/R "+en.r),B("/U <"+en.toHexString(en.U)+">"),B("/O <"+en.toHexString(en.O)+">"),B("/P "+en.P),B(">>"),B("endobj")},Qf=function(){for(var w in B("/Font <<"),Te)Te.hasOwnProperty(w)&&(p===!1||p===!0&&g.hasOwnProperty(w))&&B("/"+w+" "+Te[w].objectNumber+" 0 R");B(">>")},Ag=function(){if(Object.keys(Pe).length>0){for(var w in B("/Shading <<"),Pe)Pe.hasOwnProperty(w)&&Pe[w]instanceof nh&&Pe[w].objectNumber>=0&&B("/"+w+" "+Pe[w].objectNumber+" 0 R");Me.publish("putShadingPatternDict"),B(">>")}},xl=function(w){if(Object.keys(Pe).length>0){for(var R in B("/Pattern <<"),Pe)Pe.hasOwnProperty(R)&&Pe[R]instanceof f.TilingPattern&&Pe[R].objectNumber>=0&&Pe[R].objectNumber<w&&B("/"+R+" "+Pe[R].objectNumber+" 0 R");Me.publish("putTilingPatternDict"),B(">>")}},_g=function(){if(Object.keys(Qe).length>0){var w;for(w in B("/ExtGState <<"),Qe)Qe.hasOwnProperty(w)&&Qe[w].objectNumber>=0&&B("/"+w+" "+Qe[w].objectNumber+" 0 R");Me.publish("putGStateDict"),B(">>")}},di=function(w){$n(w.resourcesOid,!0),B("<<"),B("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Qf(),Ag(),xl(w.objectOid),_g(),bu(),B(">>"),B("endobj")},tp=function(){var w=[];yl(),yg(),Al(),_l(w),Me.publish("putResources"),w.forEach(di),di({resourcesOid:Ms,objectOid:Number.MAX_SAFE_INTEGER}),Me.publish("postPutResources")},ep=function(){Me.publish("putAdditionalObjects");for(var w=0;w<Mt.length;w++){var R=Mt[w];$n(R.objId,!0),B(R.content),B("endobj")}Me.publish("postPutAdditionalObjects")},ip=function(w){ke[w.fontName]=ke[w.fontName]||{},ke[w.fontName][w.fontStyle]=w.id},vu=function(w,R,it,ut,xt){var Ct={id:"F"+(Object.keys(Te).length+1).toString(10),postScriptName:w,fontName:R,fontStyle:it,encoding:ut,isStandardFont:xt||!1,metadata:{}};return Me.publish("addFont",{font:Ct,instance:this}),Te[Ct.id]=Ct,ip(Ct),Ct.id},xg=function(w){for(var R=0,it=et.length;R<it;R++){var ut=vu.call(this,w[R][0],w[R][1],w[R][2],et[R][3],!0);p===!1&&(g[ut]=!0);var xt=w[R][0].split("-");ip({id:ut,fontName:xt[0],fontStyle:xt[1]||""})}Me.publish("addFonts",{fonts:Te,dictionary:ke})},Bs=function(w){return w.foo=function(){try{return w.apply(this,arguments)}catch(ut){var R=ut.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var it="Error in function "+R.split(`
`)[0].split("<")[0]+": "+ut.message;if(!he.console)throw new Error(it);he.console.error(it,ut),he.alert&&alert(it)}},w.foo.bar=w,w.foo},Sl=function(w,R){var it,ut,xt,Ct,Ot,Gt,ie,me,fe;if(xt=(R=R||{}).sourceEncoding||"Unicode",Ot=R.outputEncoding,(R.autoencode||Ot)&&Te[ge].metadata&&Te[ge].metadata[xt]&&Te[ge].metadata[xt].encoding&&(Ct=Te[ge].metadata[xt].encoding,!Ot&&Te[ge].encoding&&(Ot=Te[ge].encoding),!Ot&&Ct.codePages&&(Ot=Ct.codePages[0]),typeof Ot=="string"&&(Ot=Ct[Ot]),Ot)){for(ie=!1,Gt=[],it=0,ut=w.length;it<ut;it++)(me=Ot[w.charCodeAt(it)])?Gt.push(String.fromCharCode(me)):Gt.push(w[it]),Gt[it].charCodeAt(0)>>8&&(ie=!0);w=Gt.join("")}for(it=w.length;ie===void 0&&it!==0;)w.charCodeAt(it-1)>>8&&(ie=!0),it--;if(!ie)return w;for(Gt=R.noBOM?[]:[254,255],it=0,ut=w.length;it<ut;it++){if((fe=(me=w.charCodeAt(it))>>8)>>8)throw new Error("Character at position "+it+" of string '"+w+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Gt.push(fe),Gt.push(me-(fe<<8))}return String.fromCharCode.apply(void 0,Gt)},Rn=f.__private__.pdfEscape=f.pdfEscape=function(w,R){return Sl(w,R).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yu=f.__private__.beginPage=function(w){It[++We]=[],de[We]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},sp(We),at(It[G])},np=function(w,R){var it,ut,xt;switch(t=R||t,typeof w=="string"&&(it=y(w.toLowerCase()),Array.isArray(it)&&(ut=it[0],xt=it[1])),Array.isArray(w)&&(ut=w[0]*qt,xt=w[1]*qt),isNaN(ut)&&(ut=n[0],xt=n[1]),(ut>14400||xt>14400)&&(Ve.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ut=Math.min(14400,ut),xt=Math.min(14400,xt)),n=[ut,xt],t.substr(0,1)){case"l":xt>ut&&(n=[xt,ut]);break;case"p":ut>xt&&(n=[xt,ut])}yu(n),cp(xu),B(js),Lu!==0&&B(Lu+" J"),ku!==0&&B(ku+" j"),Me.publish("addPage",{pageNumber:We})},Sg=function(w){w>0&&w<=We&&(It.splice(w,1),de.splice(w,1),We--,G>We&&(G=We),this.setPage(G))},sp=function(w){w>0&&w<=We&&(G=w)},Lg=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return It.length-1},rp=function(w,R,it){var ut,xt=void 0;return it=it||{},w=w!==void 0?w:Te[ge].fontName,R=R!==void 0?R:Te[ge].fontStyle,ut=w.toLowerCase(),ke[ut]!==void 0&&ke[ut][R]!==void 0?xt=ke[ut][R]:ke[w]!==void 0&&ke[w][R]!==void 0?xt=ke[w][R]:it.disableWarning===!1&&Ve.warn("Unable to look up font label for font '"+w+"', '"+R+"'. Refer to getFontList() for available fonts."),xt||it.noFallback||(xt=ke.times[R])==null&&(xt=ke.times.normal),xt},kg=f.__private__.putInfo=function(){var w=Ci(),R=function(ut){return ut};for(var it in d!==null&&(R=en.encryptor(w,0)),B("<<"),B("/Producer ("+Rn(R("jsPDF "+le.version))+")"),Qt)Qt.hasOwnProperty(it)&&Qt[it]&&B("/"+it.substr(0,1).toUpperCase()+it.substr(1)+" ("+Rn(R(Qt[it]))+")");B("/CreationDate ("+Rn(R(nt))+")"),B(">>"),B("endobj")},wu=f.__private__.putCatalog=function(w){var R=(w=w||{}).rootDictionaryObjId||Vr;switch(Ci(),B("<<"),B("/Type /Catalog"),B("/Pages "+R+" 0 R"),_t||(_t="fullwidth"),_t){case"fullwidth":B("/OpenAction [3 0 R /FitH null]");break;case"fullheight":B("/OpenAction [3 0 R /FitV null]");break;case"fullpage":B("/OpenAction [3 0 R /Fit]");break;case"original":B("/OpenAction [3 0 R /XYZ null null 1]");break;default:var it=""+_t;it.substr(it.length-1)==="%"&&(_t=parseInt(_t)/100),typeof _t=="number"&&B("/OpenAction [3 0 R /XYZ null null "+rt(_t)+"]")}switch(Bt||(Bt="continuous"),Bt){case"continuous":B("/PageLayout /OneColumn");break;case"single":B("/PageLayout /SinglePage");break;case"two":case"twoleft":B("/PageLayout /TwoColumnLeft");break;case"tworight":B("/PageLayout /TwoColumnRight")}Ft&&B("/PageMode /"+Ft),Me.publish("putCatalog"),B(">>"),B("endobj")},Eg=f.__private__.putTrailer=function(){B("trailer"),B("<<"),B("/Size "+(ct+1)),B("/Root "+ct+" 0 R"),B("/Info "+(ct-1)+" 0 R"),d!==null&&B("/Encrypt "+en.oid+" 0 R"),B("/ID [ <"+st+"> <"+st+"> ]"),B(">>")},Cg=f.__private__.putHeader=function(){B("%PDF-"+v),B("%ºß¬à")},Ng=f.__private__.putXRef=function(){var w="0000000000";B("xref"),B("0 "+(ct+1)),B("0000000000 65535 f ");for(var R=1;R<=ct;R++)typeof gt[R]=="function"?B((w+gt[R]()).slice(-10)+" 00000 n "):gt[R]!==void 0?B((w+gt[R]).slice(-10)+" 00000 n "):B("0000000000 00000 n ")},$r=f.__private__.buildDocument=function(){N(),at(bt),Me.publish("buildDocument"),Cg(),Uo(),ep(),tp(),d!==null&&wg(),kg(),wu();var w=wt;return Ng(),Eg(),B("startxref"),B(""+w),B("%%EOF"),at(It[G]),bt.join(`
`)},Ll=f.__private__.getBlob=function(w){return new Blob([$(w)],{type:"application/pdf"})},kl=f.output=f.__private__.output=Bs(function(w,R){switch(typeof(R=R||{})=="string"?R={filename:R}:R.filename=R.filename||"generated.pdf",w){case void 0:return $r();case"save":f.save(R.filename);break;case"arraybuffer":return $($r());case"blob":return Ll($r());case"bloburi":case"bloburl":if(he.URL!==void 0&&typeof he.URL.createObjectURL=="function")return he.URL&&he.URL.createObjectURL(Ll($r()))||void 0;Ve.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var it="",ut=$r();try{it=C0(ut)}catch{it=C0(unescape(encodeURIComponent(ut)))}return"data:application/pdf;filename="+R.filename+";base64,"+it;case"pdfobjectnewwindow":if(Object.prototype.toString.call(he)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';R.pdfObjectUrl&&(xt=R.pdfObjectUrl,Ct="");var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+Ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(R)+");<\/script></body></html>",Gt=he.open();return Gt!==null&&Gt.document.write(Ot),Gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(he)==="[object Window]"){var ie='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(R.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+R.filename+'" width="500px" height="400px" /></body></html>',me=he.open();if(me!==null){me.document.write(ie);var fe=this;me.document.documentElement.querySelector("#pdfViewer").onload=function(){me.document.title=R.filename,me.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(fe.output("bloburl"))}}return me}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(he)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ee='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",R)+'"></iframe></body></html>',ni=he.open();if(ni!==null&&(ni.document.write(Ee),ni.document.title=R.filename),ni||typeof safari>"u")return ni;break;case"datauri":case"dataurl":return he.document.location.href=this.output("datauristring",R);default:return null}}),ap=function(w){return Array.isArray(qo)===!0&&qo.indexOf(w)>-1};switch(i){case"pt":qt=1;break;case"mm":qt=72/25.4;break;case"cm":qt=72/2.54;break;case"in":qt=72;break;case"px":qt=ap("px_scaling")==1?.75:96/72;break;case"pc":case"em":qt=12;break;case"ex":qt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);qt=i}var en=null;lt(),dt();var Pg=function(w){return d!==null?en.encryptor(w,0):function(R){return R}},op=f.__private__.getPageInfo=f.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:de[w].objId,pageNumber:w,pageContext:de[w]}},ue=f.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var R in de)if(de[R].objId===w)break;return op(R)},Ig=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:de[G].objId,pageNumber:G,pageContext:de[G]}};f.addPage=function(){return np.apply(this,arguments),this},f.setPage=function(){return sp.apply(this,arguments),at.call(this,It[G]),this},f.insertPage=function(w){return this.addPage(),this.movePage(G,w),this},f.movePage=function(w,R){var it,ut;if(w>R){it=It[w],ut=de[w];for(var xt=w;xt>R;xt--)It[xt]=It[xt-1],de[xt]=de[xt-1];It[R]=it,de[R]=ut,this.setPage(R)}else if(w<R){it=It[w],ut=de[w];for(var Ct=w;Ct<R;Ct++)It[Ct]=It[Ct+1],de[Ct]=de[Ct+1];It[R]=it,de[R]=ut,this.setPage(R)}return this},f.deletePage=function(){return Sg.apply(this,arguments),this},f.__private__.text=f.text=function(w,R,it,ut,xt){var Ct,Ot,Gt,ie,me,fe,Ee,ni,hi,_i=(ut=ut||{}).scope||this;if(typeof w=="number"&&typeof R=="number"&&(typeof it=="string"||Array.isArray(it))){var nn=it;it=R,R=w,w=nn}if(arguments[3]instanceof oe?(U("The transform parameter of text() with a Matrix value"),hi=xt):(Gt=arguments[4],ie=arguments[5],ze(Ee=arguments[3])==="object"&&Ee!==null||(typeof Gt=="string"&&(ie=Gt,Gt=null),typeof Ee=="string"&&(ie=Ee,Ee=null),typeof Ee=="number"&&(Gt=Ee,Ee=null),ut={flags:Ee,angle:Gt,align:ie})),isNaN(R)||isNaN(it)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return _i;var Mi="",zs=!1,Xn=typeof ut.lineHeightFactor=="number"?ut.lineHeightFactor:Wo,vr=_i.internal.scaleFactor;function mp(Xe){return Xe=Xe.split("	").join(Array(ut.TabLen||9).join(" ")),Rn(Xe,Ee)}function Iu(Xe){for(var Ye,pi=Xe.concat(),Ni=[],Jr=pi.length;Jr--;)typeof(Ye=pi.shift())=="string"?Ni.push(Ye):Array.isArray(Xe)&&(Ye.length===1||Ye[1]===void 0&&Ye[2]===void 0)?Ni.push(Ye[0]):Ni.push([Ye[0],Ye[1],Ye[2]]);return Ni}function Tu(Xe,Ye){var pi;if(typeof Xe=="string")pi=Ye(Xe)[0];else if(Array.isArray(Xe)){for(var Ni,Jr,zu=Xe.concat(),ql=[],Ap=zu.length;Ap--;)typeof(Ni=zu.shift())=="string"?ql.push(Ye(Ni)[0]):Array.isArray(Ni)&&typeof Ni[0]=="string"&&(Jr=Ye(Ni[0],Ni[1],Ni[2]),ql.push([Jr[0],Jr[1],Jr[2]]));pi=ql}return pi}var Tl=!1,Ru=!0;if(typeof w=="string")Tl=!0;else if(Array.isArray(w)){var Fu=w.concat();Ot=[];for(var Rl,Vi=Fu.length;Vi--;)(typeof(Rl=Fu.shift())!="string"||Array.isArray(Rl)&&typeof Rl[0]!="string")&&(Ru=!1);Tl=Ru}if(Tl===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Fl=vt/_i.internal.scaleFactor,Ml=Fl*(Xn-1);switch(ut.baseline){case"bottom":it-=Ml;break;case"top":it+=Fl-Ml;break;case"hanging":it+=Fl-2*Ml;break;case"middle":it+=Fl/2-Ml}if((fe=ut.maxWidth||0)>0&&(typeof w=="string"?w=_i.splitTextToSize(w,fe):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Xe,Ye){return Xe.concat(_i.splitTextToSize(Ye,fe))},[]))),Ct={text:w,x:R,y:it,options:ut,mutex:{pdfEscape:Rn,activeFontKey:ge,fonts:Te,activeFontSize:vt}},Me.publish("preProcessText",Ct),w=Ct.text,Gt=(ut=Ct.options).angle,!(hi instanceof oe)&&Gt&&typeof Gt=="number"){Gt*=Math.PI/180,ut.rotationDirection===0&&(Gt=-Gt),C===x.ADVANCED&&(Gt=-Gt);var Dl=Math.cos(Gt),Mu=Math.sin(Gt);hi=new oe(Dl,Mu,-Mu,Dl,0,0)}else Gt&&Gt instanceof oe&&(hi=Gt);C!==x.ADVANCED||hi||(hi=fr),(me=ut.charSpace||Nl)!==void 0&&(Mi+=q(E(me))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ni=ut.horizontalScale)!==void 0&&(Mi+=q(100*ni)+` Tz
`),ut.lang;var Fn=-1,qg=ut.renderingMode!==void 0?ut.renderingMode:ut.stroke,Du=_i.internal.getCurrentPageInfo().pageContext;switch(qg){case 0:case!1:case"fill":Fn=0;break;case 1:case!0:case"stroke":Fn=1;break;case 2:case"fillThenStroke":Fn=2;break;case 3:case"invisible":Fn=3;break;case 4:case"fillAndAddForClipping":Fn=4;break;case 5:case"strokeAndAddPathForClipping":Fn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fn=6;break;case 7:case"addToPathForClipping":Fn=7}var bp=Du.usedRenderingMode!==void 0?Du.usedRenderingMode:-1;Fn!==-1?Mi+=Fn+` Tr
`:bp!==-1&&(Mi+=`0 Tr
`),Fn!==-1&&(Du.usedRenderingMode=Fn),ie=ut.align||"left";var ms,Ol=vt*Xn,vp=_i.internal.pageSize.getWidth(),yp=Te[ge];me=ut.charSpace||Nl,fe=ut.maxWidth||0,Ee=Object.assign({autoencode:!0,noBOM:!0},ut.flags);var qa=[],$o=function(Xe){return _i.getStringUnitWidth(Xe,{font:yp,charSpace:me,fontSize:vt,doKerning:!1})*vt/vr};if(Object.prototype.toString.call(w)==="[object Array]"){var Mn;Ot=Iu(w),ie!=="left"&&(ms=Ot.map($o));var yn,Ua=0;if(ie==="right"){R-=ms[0],w=[],Vi=Ot.length;for(var Yr=0;Yr<Vi;Yr++)Yr===0?(yn=br(R),Mn=Xr(it)):(yn=E(Ua-ms[Yr]),Mn=-Ol),w.push([Ot[Yr],yn,Mn]),Ua=ms[Yr]}else if(ie==="center"){R-=ms[0]/2,w=[],Vi=Ot.length;for(var Kr=0;Kr<Vi;Kr++)Kr===0?(yn=br(R),Mn=Xr(it)):(yn=E((Ua-ms[Kr])/2),Mn=-Ol),w.push([Ot[Kr],yn,Mn]),Ua=ms[Kr]}else if(ie==="left"){w=[],Vi=Ot.length;for(var Bl=0;Bl<Vi;Bl++)w.push(Ot[Bl])}else if(ie==="justify"&&yp.encoding==="Identity-H"){w=[],Vi=Ot.length,fe=fe!==0?fe:vp;for(var Zr=0,fi=0;fi<Vi;fi++)if(Mn=fi===0?Xr(it):-Ol,yn=fi===0?br(R):Zr,fi<Vi-1){var Ou=E((fe-ms[fi])/(Ot[fi].split(" ").length-1)),wn=Ot[fi].split(" ");w.push([wn[0]+" ",yn,Mn]),Zr=0;for(var bs=1;bs<wn.length;bs++){var jl=($o(wn[bs-1]+" "+wn[bs])-$o(wn[bs]))*vr+Ou;bs==wn.length-1?w.push([wn[bs],jl,0]):w.push([wn[bs]+" ",jl,0]),Zr-=jl}}else w.push([Ot[fi],yn,Mn]);w.push(["",Zr,0])}else{if(ie!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Vi=Ot.length,fe=fe!==0?fe:vp,fi=0;fi<Vi;fi++)Mn=fi===0?Xr(it):-Ol,yn=fi===0?br(R):0,fi<Vi-1?qa.push(q(E((fe-ms[fi])/(Ot[fi].split(" ").length-1)))):qa.push(0),w.push([Ot[fi],yn,Mn])}}var wp=typeof ut.R2L=="boolean"?ut.R2L:kt;wp===!0&&(w=Tu(w,function(Xe,Ye,pi){return[Xe.split("").reverse().join(""),Ye,pi]})),Ct={text:w,x:R,y:it,options:ut,mutex:{pdfEscape:Rn,activeFontKey:ge,fonts:Te,activeFontSize:vt}},Me.publish("postProcessText",Ct),w=Ct.text,zs=Ct.mutex.isHex||!1;var Bu=Te[ge].encoding;Bu!=="WinAnsiEncoding"&&Bu!=="StandardEncoding"||(w=Tu(w,function(Xe,Ye,pi){return[mp(Xe),Ye,pi]})),Ot=Iu(w),w=[];for(var Xo,Yo,Ha,Ko=0,zl=1,Zo=Array.isArray(Ot[0])?zl:Ko,Wa="",ju=function(Xe,Ye,pi){var Ni="";return pi instanceof oe?(pi=typeof ut.angle=="number"?Fs(pi,new oe(1,0,0,1,Xe,Ye)):Fs(new oe(1,0,0,1,Xe,Ye),pi),C===x.ADVANCED&&(pi=Fs(new oe(1,0,0,-1,0,0),pi)),Ni=pi.join(" ")+` Tm
`):Ni=q(Xe)+" "+q(Ye)+` Td
`,Ni},vs=0;vs<Ot.length;vs++){switch(Wa="",Zo){case zl:Ha=(zs?"<":"(")+Ot[vs][0]+(zs?">":")"),Xo=parseFloat(Ot[vs][1]),Yo=parseFloat(Ot[vs][2]);break;case Ko:Ha=(zs?"<":"(")+Ot[vs]+(zs?">":")"),Xo=br(R),Yo=Xr(it)}qa!==void 0&&qa[vs]!==void 0&&(Wa=qa[vs]+` Tw
`),vs===0?w.push(Wa+ju(Xo,Yo,hi)+Ha):Zo===Ko?w.push(Wa+Ha):Zo===zl&&w.push(Wa+ju(Xo,Yo,hi)+Ha)}w=Zo===Ko?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var ys=`BT
/`;return ys+=ge+" "+vt+` Tf
`,ys+=q(vt*Xn)+` TL
`,ys+=Go+`
`,ys+=Mi,ys+=w,B(ys+="ET"),g[ge]=!0,_i};var Tg=f.__private__.clip=f.clip=function(w){return B(w==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Tg("evenodd")},f.__private__.discardPath=f.discardPath=function(){return B("n"),this};var mr=f.__private__.isValidStyle=function(w){var R=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(R=!0),R};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(w){return mr(w)&&(c=w),this};var hp=f.__private__.getStyle=f.getStyle=function(w){var R=c;switch(w){case"D":case"S":R="S";break;case"F":R="f";break;case"FD":case"DF":R="B";break;case"f":case"f*":case"B":case"B*":R=w}return R},lp=f.close=function(){return B("h"),this};f.stroke=function(){return B("S"),this},f.fill=function(w){return El("f",w),this},f.fillEvenOdd=function(w){return El("f*",w),this},f.fillStroke=function(w){return El("B",w),this},f.fillStrokeEvenOdd=function(w){return El("B*",w),this};var El=function(w,R){ze(R)==="object"?Fg(R,w):B(w)},Au=function(w){w===null||C===x.ADVANCED&&w===void 0||(w=hp(w),B(w))};function Rg(w,R,it,ut,xt){var Ct=new nc(R||this.boundingBox,it||this.xStep,ut||this.yStep,this.gState,xt||this.matrix);Ct.stream=this.stream;var Ot=w+"$$"+this.cloneIndex+++"$$";return Tn(Ot,Ct),Ct}var Fg=function(w,R){var it=Gr[w.key],ut=Pe[it];if(ut instanceof nh)B("q"),B(Mg(R)),ut.gState&&f.setGState(ut.gState),B(w.matrix.toString()+" cm"),B("/"+it+" sh"),B("Q");else if(ut instanceof nc){var xt=new oe(1,0,0,-1,0,za());w.matrix&&(xt=xt.multiply(w.matrix||fr),it=Rg.call(ut,w.key,w.boundingBox,w.xStep,w.yStep,xt).id),B("q"),B("/Pattern cs"),B("/"+it+" scn"),ut.gState&&f.setGState(ut.gState),B(R),B("Q")}},Mg=function(w){switch(w){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},_u=f.moveTo=function(w,R){return B(q(E(w))+" "+q(S(R))+" m"),this},Ho=f.lineTo=function(w,R){return B(q(E(w))+" "+q(S(R))+" l"),this},Ba=f.curveTo=function(w,R,it,ut,xt,Ct){return B([q(E(w)),q(S(R)),q(E(it)),q(S(ut)),q(E(xt)),q(S(Ct)),"c"].join(" ")),this};f.__private__.line=f.line=function(w,R,it,ut,xt){if(isNaN(w)||isNaN(R)||isNaN(it)||isNaN(ut)||!mr(xt))throw new Error("Invalid arguments passed to jsPDF.line");return C===x.COMPAT?this.lines([[it-w,ut-R]],w,R,[1,1],xt||"S"):this.lines([[it-w,ut-R]],w,R,[1,1]).stroke()},f.__private__.lines=f.lines=function(w,R,it,ut,xt,Ct){var Ot,Gt,ie,me,fe,Ee,ni,hi,_i,nn,Mi,zs;if(typeof w=="number"&&(zs=it,it=R,R=w,w=zs),ut=ut||[1,1],Ct=Ct||!1,isNaN(R)||isNaN(it)||!Array.isArray(w)||!Array.isArray(ut)||!mr(xt)||typeof Ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_u(R,it),Ot=ut[0],Gt=ut[1],me=w.length,nn=R,Mi=it,ie=0;ie<me;ie++)(fe=w[ie]).length===2?(nn=fe[0]*Ot+nn,Mi=fe[1]*Gt+Mi,Ho(nn,Mi)):(Ee=fe[0]*Ot+nn,ni=fe[1]*Gt+Mi,hi=fe[2]*Ot+nn,_i=fe[3]*Gt+Mi,nn=fe[4]*Ot+nn,Mi=fe[5]*Gt+Mi,Ba(Ee,ni,hi,_i,nn,Mi));return Ct&&lp(),Au(xt),this},f.path=function(w){for(var R=0;R<w.length;R++){var it=w[R],ut=it.c;switch(it.op){case"m":_u(ut[0],ut[1]);break;case"l":Ho(ut[0],ut[1]);break;case"c":Ba.apply(this,ut);break;case"h":lp()}}return this},f.__private__.rect=f.rect=function(w,R,it,ut,xt){if(isNaN(w)||isNaN(R)||isNaN(it)||isNaN(ut)||!mr(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return C===x.COMPAT&&(ut=-ut),B([q(E(w)),q(S(R)),q(E(it)),q(E(ut)),"re"].join(" ")),Au(xt),this},f.__private__.triangle=f.triangle=function(w,R,it,ut,xt,Ct,Ot){if(isNaN(w)||isNaN(R)||isNaN(it)||isNaN(ut)||isNaN(xt)||isNaN(Ct)||!mr(Ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[it-w,ut-R],[xt-it,Ct-ut],[w-xt,R-Ct]],w,R,[1,1],Ot,!0),this},f.__private__.roundedRect=f.roundedRect=function(w,R,it,ut,xt,Ct,Ot){if(isNaN(w)||isNaN(R)||isNaN(it)||isNaN(ut)||isNaN(xt)||isNaN(Ct)||!mr(Ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Gt=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*it),Ct=Math.min(Ct,.5*ut),this.lines([[it-2*xt,0],[xt*Gt,0,xt,Ct-Ct*Gt,xt,Ct],[0,ut-2*Ct],[0,Ct*Gt,-xt*Gt,Ct,-xt,Ct],[2*xt-it,0],[-xt*Gt,0,-xt,-Ct*Gt,-xt,-Ct],[0,2*Ct-ut],[0,-Ct*Gt,xt*Gt,-Ct,xt,-Ct]],w+xt,R,[1,1],Ot,!0),this},f.__private__.ellipse=f.ellipse=function(w,R,it,ut,xt){if(isNaN(w)||isNaN(R)||isNaN(it)||isNaN(ut)||!mr(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ct=4/3*(Math.SQRT2-1)*it,Ot=4/3*(Math.SQRT2-1)*ut;return _u(w+it,R),Ba(w+it,R-Ot,w+Ct,R-ut,w,R-ut),Ba(w-Ct,R-ut,w-it,R-Ot,w-it,R),Ba(w-it,R+Ot,w-Ct,R+ut,w,R+ut),Ba(w+Ct,R+ut,w+it,R+Ot,w+it,R),Au(xt),this},f.__private__.circle=f.circle=function(w,R,it,ut){if(isNaN(w)||isNaN(R)||isNaN(it)||!mr(ut))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,R,it,it,ut)},f.setFont=function(w,R,it){return it&&(R=K(R,it)),ge=rp(w,R,{disableWarning:!1}),this};var Dg=f.__private__.getFont=f.getFont=function(){return Te[rp.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var w,R,it={};for(w in ke)if(ke.hasOwnProperty(w))for(R in it[w]=[],ke[w])ke[w].hasOwnProperty(R)&&it[w].push(R);return it},f.addFont=function(w,R,it,ut,xt){var Ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ct.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&Ct.indexOf(arguments[3])==-1&&(it=K(it,ut)),xt=xt||"Identity-H",vu.call(this,w,R,it,xt)};var Wo,xu=h.lineWidth||.200025,Cl=f.__private__.getLineWidth=f.getLineWidth=function(){return xu},cp=f.__private__.setLineWidth=f.setLineWidth=function(w){return xu=w,B(q(E(w))+" w"),this};f.__private__.setLineDash=le.API.setLineDash=le.API.setLineDashPattern=function(w,R){if(w=w||[],R=R||0,isNaN(R)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(it){return q(E(it))}).join(" "),R=q(E(R)),B("["+w+"] "+R+" d"),this};var up=f.__private__.getLineHeight=f.getLineHeight=function(){return vt*Wo};f.__private__.getLineHeight=f.getLineHeight=function(){return vt*Wo};var dp=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(Wo=w),this},fp=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Wo};dp(h.lineHeight);var br=f.__private__.getHorizontalCoordinate=function(w){return E(w)},Xr=f.__private__.getVerticalCoordinate=function(w){return C===x.ADVANCED?w:de[G].mediaBox.topRightY-de[G].mediaBox.bottomLeftY-E(w)},Og=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(w){return q(br(w))},ja=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(w){return q(Xr(w))},js=h.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ds(js)},f.__private__.setStrokeColor=f.setDrawColor=function(w,R,it,ut){return js=Os({ch1:w,ch2:R,ch3:it,ch4:ut,pdfColorType:"draw",precision:2}),B(js),this};var Su=h.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ds(Su)},f.__private__.setFillColor=f.setFillColor=function(w,R,it,ut){return Su=Os({ch1:w,ch2:R,ch3:it,ch4:ut,pdfColorType:"fill",precision:2}),B(Su),this};var Go=h.textColor||"0 g",Bg=f.__private__.getTextColor=f.getTextColor=function(){return Ds(Go)};f.__private__.setTextColor=f.setTextColor=function(w,R,it,ut){return Go=Os({ch1:w,ch2:R,ch3:it,ch4:ut,pdfColorType:"text",precision:3}),this};var Nl=h.charSpace,jg=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Nl||0)};f.__private__.setCharSpace=f.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Nl=w,this};var Lu=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(w){var R=f.CapJoinStyles[w];if(R===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Lu=R,B(R+" J"),this};var ku=0;f.__private__.setLineJoin=f.setLineJoin=function(w){var R=f.CapJoinStyles[w];if(R===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ku=R,B(R+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return B(q(E(w))+" M"),this},f.GState=I1,f.setGState=function(w){(w=typeof w=="string"?Qe[In[w]]:pp(null,w)).equals(vn)||(B("/"+w.id+" gs"),vn=w)};var pp=function(w,R){if(!w||!In[w]){var it=!1;for(var ut in Qe)if(Qe.hasOwnProperty(ut)&&Qe[ut].equals(R)){it=!0;break}if(it)R=Qe[ut];else{var xt="GS"+(Object.keys(Qe).length+1).toString(10);Qe[xt]=R,R.id=xt}return w&&(In[w]=R.id),Me.publish("addGState",R),R}};f.addGState=function(w,R){return pp(w,R),this},f.saveGraphicsState=function(){return B("q"),Vn.push({key:ge,size:vt,color:Go}),this},f.restoreGraphicsState=function(){B("Q");var w=Vn.pop();return ge=w.key,vt=w.size,Go=w.color,vn=null,this},f.setCurrentTransformationMatrix=function(w){return B(w.toString()+" cm"),this},f.comment=function(w){return B("#"+w),this};var Pl=function(w,R){var it=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return it},set:function(Ct){isNaN(Ct)||(it=parseFloat(Ct))}});var ut=R||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ut},set:function(Ct){isNaN(Ct)||(ut=parseFloat(Ct))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(Ct){xt=Ct.toString()}}),this},Eu=function(w,R,it,ut){Pl.call(this,w,R),this.type="rect";var xt=it||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(Ot){isNaN(Ot)||(xt=parseFloat(Ot))}});var Ct=ut||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ct},set:function(Ot){isNaN(Ot)||(Ct=parseFloat(Ot))}}),this},Cu=function(){this.page=We,this.currentPage=G,this.pages=It.slice(0),this.pagesContext=de.slice(0),this.x=oi,this.y=ne,this.matrix=tn,this.width=Vo(G),this.height=za(G),this.outputDestination=jt,this.id="",this.objectNumber=-1};Cu.prototype.restore=function(){We=this.page,G=this.currentPage,de=this.pagesContext,It=this.pages,oi=this.x,ne=this.y,tn=this.matrix,Nu(G,this.width),Pu(G,this.height),jt=this.outputDestination};var gp=function(w,R,it,ut,xt){dr.push(new Cu),We=G=0,It=[],oi=w,ne=R,tn=xt,yu([it,ut])},zg=function(w){if(ur[w])dr.pop().restore();else{var R=new Cu,it="Xo"+(Object.keys(Gi).length+1).toString(10);R.id=it,ur[w]=it,Gi[it]=R,Me.publish("addFormObject",R),dr.pop().restore()}};for(var Il in f.beginFormObject=function(w,R,it,ut,xt){return gp(w,R,it,ut,xt),this},f.endFormObject=function(w){return zg(w),this},f.doFormObject=function(w,R){var it=Gi[ur[w]];return B("q"),B(R.toString()+" cm"),B("/"+it.id+" Do"),B("Q"),this},f.getFormObject=function(w){var R=Gi[ur[w]];return{x:R.x,y:R.y,width:R.width,height:R.height,matrix:R.matrix}},f.save=function(w,R){return w=w||"generated.pdf",(R=R||{}).returnPromise=R.returnPromise||!1,R.returnPromise===!1?(Qo(Ll($r()),w),typeof Qo.unload=="function"&&he.setTimeout&&setTimeout(Qo.unload,911),this):new Promise(function(it,ut){try{var xt=Qo(Ll($r()),w);typeof Qo.unload=="function"&&he.setTimeout&&setTimeout(Qo.unload,911),it(xt)}catch(Ct){ut(Ct.message)}})},le.API)le.API.hasOwnProperty(Il)&&(Il==="events"&&le.API.events.length?function(w,R){var it,ut,xt;for(xt=R.length-1;xt!==-1;xt--)it=R[xt][0],ut=R[xt][1],w.subscribe.apply(w,[it].concat(typeof ut=="function"?[ut]:ut))}(Me,le.API.events):f[Il]=le.API[Il]);var Vo=f.getPageWidth=function(w){return(de[w=w||G].mediaBox.topRightX-de[w].mediaBox.bottomLeftX)/qt},Nu=f.setPageWidth=function(w,R){de[w].mediaBox.topRightX=R*qt+de[w].mediaBox.bottomLeftX},za=f.getPageHeight=function(w){return(de[w=w||G].mediaBox.topRightY-de[w].mediaBox.bottomLeftY)/qt},Pu=f.setPageHeight=function(w,R){de[w].mediaBox.topRightY=R*qt+de[w].mediaBox.bottomLeftY};return f.internal={pdfEscape:Rn,getStyle:hp,getFont:Dg,getFontSize:ht,getCharSpace:jg,getTextColor:Bg,getLineHeight:up,getLineHeightFactor:fp,getLineWidth:Cl,write:J,getHorizontalCoordinate:br,getVerticalCoordinate:Xr,getCoordinateString:Og,getVerticalCoordinateString:ja,collections:{},newObject:Ci,newAdditionalObject:bl,newObjectDeferred:Ai,newObjectDeferredBegin:$n,getFilters:pr,putStream:gs,events:Me,scaleFactor:qt,pageSize:{getWidth:function(){return Vo(G)},setWidth:function(w){Nu(G,w)},getHeight:function(){return za(G)},setHeight:function(w){Pu(G,w)}},encryptionOptions:d,encryption:en,getEncryptor:Pg,output:kl,getNumberOfPages:Lg,pages:It,out:B,f2:rt,f3:M,getPageInfo:op,getPageInfoByObjId:ue,getCurrentPageInfo:Ig,getPDFVersion:b,Point:Pl,Rectangle:Eu,Matrix:oe,hasHotfix:ap},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Vo(G)},set:function(w){Nu(G,w)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return za(G)},set:function(w){Pu(G,w)},enumerable:!0,configurable:!0}),xg.call(f,et),ge="F1",np(n,t),Me.publish("initialized"),f}Xl.prototype.lsbFirstWord=function(h){return String.fromCharCode(h>>0&255,h>>8&255,h>>16&255,h>>24&255)},Xl.prototype.toHexString=function(h){return h.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Xl.prototype.hexToBytes=function(h){for(var e=[],t=0;t<h.length;t+=2)e.push(String.fromCharCode(parseInt(h.substr(t,2),16)));return e.join("")},Xl.prototype.processOwnerPassword=function(h,e){return P0(N0(e).substr(0,5),h)},Xl.prototype.encryptor=function(h,e){var t=N0(this.encryptionKey+String.fromCharCode(255&h,h>>8&255,h>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return P0(t,i)}},I1.prototype.equals=function(h){var e,t="id,objectNumber,equals";if(!h||ze(h)!==ze(this))return!1;var i=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!h.hasOwnProperty(e)||this[e]!==h[e])return!1;i++}for(e in h)h.hasOwnProperty(e)&&t.indexOf(e)<0&&i--;return i===0},le.API={events:[]},le.version="2.5.2";var ui=le.API,K2=1,gl=function(h){return h.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vl=function(h){return h.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pe=function(h){return h.toFixed(2)},Qa=function(h){return h.toFixed(5)};ui.__acroform__={};var Gn=function(h,e){h.prototype=Object.create(e.prototype),h.prototype.constructor=h},Km=function(h){return h*K2},_r=function(h){var e=new U5,t=Kt.internal.getHeight(h)||0,i=Kt.internal.getWidth(h)||0;return e.BBox=[0,0,Number(pe(i)),Number(pe(t))],e},iw=ui.__acroform__.setBit=function(h,e){if(h=h||0,e=e||0,isNaN(h)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return h|=1<<e},nw=ui.__acroform__.clearBit=function(h,e){if(h=h||0,e=e||0,isNaN(h)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return h&=~(1<<e)},sw=ui.__acroform__.getBit=function(h,e){if(isNaN(h)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return h&1<<e?1:0},bi=ui.__acroform__.getBitForPdf=function(h,e){if(isNaN(h)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return sw(h,e-1)},vi=ui.__acroform__.setBitForPdf=function(h,e){if(isNaN(h)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return iw(h,e-1)},yi=ui.__acroform__.clearBitForPdf=function(h,e){if(isNaN(h)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nw(h,e-1)},rw=ui.__acroform__.calculateCoordinates=function(h,e){var t=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,n=h[0],s=h[1],r=h[2],a=h[3],o={};return o.lowerLeft_X=t(n)||0,o.lowerLeft_Y=i(s+a)||0,o.upperRight_X=t(n+r)||0,o.upperRight_Y=i(s)||0,[Number(pe(o.lowerLeft_X)),Number(pe(o.lowerLeft_Y)),Number(pe(o.upperRight_X)),Number(pe(o.upperRight_Y))]},aw=function(h){if(h.appearanceStreamContent)return h.appearanceStreamContent;if(h.V||h.DV){var e=[],t=h._V||h.DV,i=I0(h,t),n=h.scope.internal.getFont(h.fontName,h.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(h.scope.__private__.encodeColorString(h.color)),e.push("/"+n+" "+pe(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=_r(h);return s.scope=h.scope,s.stream=e.join(`
`),s}},I0=function(h,e){var t=h.fontSize===0?h.maxFontSize:h.fontSize,i={text:"",fontSize:""},n=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");n=h.multiline?n.map(function(M){return M.split(`
`)}):n.map(function(M){return[M]});var s=t,r=Kt.internal.getHeight(h)||0;r=r<0?-r:r;var a=Kt.internal.getWidth(h)||0;a=a<0?-a:a;var o=function(M,E,W){if(M+1<n.length){var S=E+" "+n[M+1][0];return Hp(S,h,W).width<=a-4}return!1};s++;t:for(;s>0;){e="",s--;var c,d,p=Hp("3",h,s).height,g=h.multiline?r-s:(r-p)/2,f=g+=2,v=0,b=0,_=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Hp(e,h,s=12).width+", FieldWidth:"+a+`
`;break}for(var y="",x=0,C=0;C<n.length;C++)if(n.hasOwnProperty(C)){var I=!1;if(n[C].length!==1&&_!==n[C].length-1){if((p+2)*(x+2)+2>r)continue t;y+=n[C][_],I=!0,b=C,C--}else{y=(y+=n[C][_]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var F=parseInt(C),K=o(F,y,s),q=C>=n.length-1;if(K&&!q){y+=" ",_=0;continue}if(K||q){if(q)b=F;else if(h.multiline&&(p+2)*(x+2)+2>r)continue t}else{if(!h.multiline||(p+2)*(x+2)+2>r)continue t;b=F}}for(var U="",X=v;X<=b;X++){var rt=n[X];if(h.multiline){if(X===b){U+=rt[_]+" ",_=(_+1)%rt.length;continue}if(X===v){U+=rt[rt.length-1]+" ";continue}}U+=rt[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,d=Hp(U,h,s).width,h.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=pe(c)+" "+pe(f)+` Td
`,e+="("+gl(U)+`) Tj
`,e+=-pe(c)+` 0 Td
`,f=-(s+2),d=0,v=I?b:b+1,x++,y=""}break}return i.text=e,i.fontSize=s,i},Hp=function(h,e,t){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),n=e.scope.getStringUnitWidth(h,{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:n}},ow={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},hw=function(h,e){var t={type:"reference",object:h};e.internal.getPageInfo(h.page).pageContext.annotations.find(function(i){return i.type===t.type&&i.object===t.object})===void 0&&e.internal.getPageInfo(h.page).pageContext.annotations.push(t)},lw=function(h,e){for(var t in h)if(h.hasOwnProperty(t)){var i=t,n=h[t];e.internal.newObjectDeferredBegin(n.objId,!0),ze(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete h[i]}},cw=function(h,e){if(e.scope=h,h.internal!==void 0&&(h.internal.acroformPlugin===void 0||h.internal.acroformPlugin.isInitialized===!1)){if(lr.FieldNum=0,h.internal.acroformPlugin=JSON.parse(JSON.stringify(ow)),h.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");K2=h.internal.scaleFactor,h.internal.acroformPlugin.acroFormDictionaryRoot=new H5,h.internal.acroformPlugin.acroFormDictionaryRoot.scope=h,h.internal.acroformPlugin.acroFormDictionaryRoot._eventID=h.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(h)}),h.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in i)if(i.hasOwnProperty(n)){var s=i[n];s.objId=void 0,s.hasAnnotation&&hw(s,t)}})(h)}),h.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(h)}),h.internal.events.subscribe("postPutPages",function(t){(function(i,n){var s=!i;for(var r in i||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(r)){var a=i[r],o=[],c=a.Rect;if(a.Rect&&(a.Rect=rw(a.Rect,n)),n.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Kt.createDefaultAppearanceStream(a),ze(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(o=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=aw(a);o.push({key:"AP",value:"<</N "+d+">>"}),n.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var g in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(g)){var f=a.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var r in f)if(f.hasOwnProperty(r)){var v=f[r];typeof v=="function"&&(v=v.call(n,a)),p+="/"+r+" "+v+" ",n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v)}}else typeof(v=f)=="function"&&(v=v.call(n,a)),p+="/"+r+" "+v,n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v);p+=">>"}o.push({key:"AP",value:`<<
`+p+">>"})}n.internal.putStream({additionalKeyValues:o,objectId:a.objId}),n.internal.out("endobj")}s&&lw(n.internal.acroformPlugin.xForms,n)})(t,h)}),h.internal.acroformPlugin.isInitialized=!0}},q5=ui.__acroform__.arrayToPdfArray=function(h,e,t){var i=function(r){return r};if(Array.isArray(h)){for(var n="[",s=0;s<h.length;s++)switch(s!==0&&(n+=" "),ze(h[s])){case"boolean":case"number":case"object":n+=h[s].toString();break;case"string":h[s].substr(0,1)!=="/"?(e!==void 0&&t&&(i=t.internal.getEncryptor(e)),n+="("+gl(i(h[s].toString()))+")"):n+=h[s].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},d0=function(h,e,t){var i=function(n){return n};return e!==void 0&&t&&(i=t.internal.getEncryptor(e)),(h=h||"").toString(),h="("+gl(i(h))+")"},qr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(h){this._objId=h}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qr.prototype.toString=function(){return this.objId+" 0 R"},qr.prototype.putStream=function(){var h=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:h,objectId:this.objId}),this.scope.internal.out("endobj")},qr.prototype.getKeyValueListForStream=function(){var h=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var i=e[t],n=this[i];n&&(Array.isArray(n)?h.push({key:i,value:q5(n,this.objId,this.scope)}):n instanceof qr?(n.scope=this.scope,h.push({key:i,value:n.objId+" 0 R"})):typeof n!="function"&&h.push({key:i,value:n}))}return h};var U5=function(){qr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var h,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){h=t.trim()},get:function(){return h||null}})};Gn(U5,qr);var H5=function(){qr.call(this);var h,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(h){var t=function(i){return i};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+gl(t(h))+")"}},set:function(t){h=t}})};Gn(H5,qr);var lr=function h(){qr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!bi(e,3)},set:function(y){y?this.F=vi(e,3):this.F=yi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');t=y}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(y){i=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(y){i[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(y){i[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(y){i[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(y){i[3]=y}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof T1)return;s="FieldObject"+h.FieldNum++}var y=function(x){return x};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+gl(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var r="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return r},set:function(y){r=y}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var o=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/K2:c},set:function(y){c=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof T1||this instanceof cl))return d0(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=y}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Wi?g:d0(g,this.objId,this.scope)},set:function(y){y=y.toString(),g=this instanceof Wi?y:y.substr(0,1)==="("?Vl(y.substr(1,y.length-2)):Vl(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wi?Vl(g.substr(1,g.length-1)):g},set:function(y){y=y.toString(),g=this instanceof Wi?"/"+y:y}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Wi?f:d0(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof Wi?y:y.substr(0,1)==="("?Vl(y.substr(1,y.length-2)):Vl(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wi?Vl(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof Wi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(y){y=!!y,b=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(y){v=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,1)},set:function(y){y?this.Ff=vi(this.Ff,1):this.Ff=yi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,2)},set:function(y){y?this.Ff=vi(this.Ff,2):this.Ff=yi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,3)},set:function(y){y?this.Ff=vi(this.Ff,3):this.Ff=yi(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');_=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(_){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:_=2;break;case"center":case 1:_=1;break;case"left":case 0:default:_=0}}})};Gn(lr,qr);var ac=function(){lr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var h=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return h},set:function(t){h=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return q5(e,this.objId,this.scope)},set:function(t){var i,n;n=[],typeof(i=t)=="string"&&(n=function(s,r,a){a||(a=1);for(var o,c=[];o=r.exec(s);)c.push(o[a]);return c}(i,/\((.*?)\)/g)),e=n}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,18)},set:function(t){t?this.Ff=vi(this.Ff,18):this.Ff=yi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=vi(this.Ff,19):this.Ff=yi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,20)},set:function(t){t?(this.Ff=vi(this.Ff,20),e.sort()):this.Ff=yi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,22)},set:function(t){t?this.Ff=vi(this.Ff,22):this.Ff=yi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,23)},set:function(t){t?this.Ff=vi(this.Ff,23):this.Ff=yi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,27)},set:function(t){t?this.Ff=vi(this.Ff,27):this.Ff=yi(this.Ff,27)}}),this.hasAppearanceStream=!1};Gn(ac,lr);var oc=function(){ac.call(this),this.fontName="helvetica",this.combo=!1};Gn(oc,ac);var hc=function(){oc.call(this),this.combo=!0};Gn(hc,oc);var Zp=function(){hc.call(this),this.edit=!0};Gn(Zp,hc);var Wi=function(){lr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,15)},set:function(t){t?this.Ff=vi(this.Ff,15):this.Ff=yi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,16)},set:function(t){t?this.Ff=vi(this.Ff,16):this.Ff=yi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,17)},set:function(t){t?this.Ff=vi(this.Ff,17):this.Ff=yi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,26)},set:function(t){t?this.Ff=vi(this.Ff,26):this.Ff=yi(this.Ff,26)}});var h,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,n=[];for(i in n.push("<<"),e)n.push("/"+i+" ("+gl(t(e[i]))+")");return n.push(">>"),n.join(`
`)}},set:function(t){ze(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return h.substr(1,h.length-1)},set:function(t){h="/"+t}})};Gn(Wi,lr);var Jp=function(){Wi.call(this),this.pushButton=!0};Gn(Jp,Wi);var lc=function(){Wi.call(this),this.radio=!0,this.pushButton=!1;var h=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return h},set:function(e){h=e!==void 0?e:[]}})};Gn(lc,Wi);var T1=function(){var h,e;lr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return h},set:function(n){h=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(n){e=n}});var t,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var s,r=[];for(s in r.push("<<"),i)r.push("/"+s+" ("+gl(n(i[s]))+")");return r.push(">>"),r.join(`
`)},set:function(n){ze(n)==="object"&&(i=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(n){typeof n=="string"&&(i.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Kt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Gn(T1,lr),lc.prototype.setAppearance=function(h){if(!("createAppearanceStream"in h)||!("getCA"in h))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=h.createAppearanceStream(t.optionName),t.caption=h.getCA()}},lc.prototype.createOption=function(h){var e=new T1;return e.Parent=this,e.optionName=h,this.Kids.push(e),uw.call(this.scope,e),e};var Qp=function(){Wi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Kt.CheckBox.createAppearanceStream()};Gn(Qp,Wi);var cl=function(){lr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,13)},set:function(e){e?this.Ff=vi(this.Ff,13):this.Ff=yi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,21)},set:function(e){e?this.Ff=vi(this.Ff,21):this.Ff=yi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,23)},set:function(e){e?this.Ff=vi(this.Ff,23):this.Ff=yi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,24)},set:function(e){e?this.Ff=vi(this.Ff,24):this.Ff=yi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,25)},set:function(e){e?this.Ff=vi(this.Ff,25):this.Ff=yi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,26)},set:function(e){e?this.Ff=vi(this.Ff,26):this.Ff=yi(this.Ff,26)}});var h=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return h},set:function(e){h=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return h},set:function(e){Number.isInteger(e)&&(h=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Gn(cl,lr);var t1=function(){cl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,14)},set:function(h){h?this.Ff=vi(this.Ff,14):this.Ff=yi(this.Ff,14)}}),this.password=!0};Gn(t1,cl);var Kt={CheckBox:{createAppearanceStream:function(){return{N:{On:Kt.CheckBox.YesNormal},D:{On:Kt.CheckBox.YesPushDown,Off:Kt.CheckBox.OffPushDown}}},YesPushDown:function(h){var e=_r(h);e.scope=h.scope;var t=[],i=h.scope.internal.getFont(h.fontName,h.fontStyle).id,n=h.scope.__private__.encodeColorString(h.color),s=I0(h,h.caption);return t.push("0.749023 g"),t.push("0 0 "+pe(Kt.internal.getWidth(h))+" "+pe(Kt.internal.getHeight(h))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+i+" "+pe(s.fontSize)+" Tf "+n),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(h){var e=_r(h);e.scope=h.scope;var t=h.scope.internal.getFont(h.fontName,h.fontStyle).id,i=h.scope.__private__.encodeColorString(h.color),n=[],s=Kt.internal.getHeight(h),r=Kt.internal.getWidth(h),a=I0(h,h.caption);return n.push("1 g"),n.push("0 0 "+pe(r)+" "+pe(s)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+pe(r-1)+" "+pe(s-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+t+" "+pe(a.fontSize)+" Tf "+i),n.push(a.text),n.push("ET"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(h){var e=_r(h);e.scope=h.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+pe(Kt.internal.getWidth(h))+" "+pe(Kt.internal.getHeight(h))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(h){var e={D:{Off:Kt.RadioButton.Circle.OffPushDown},N:{}};return e.N[h]=Kt.RadioButton.Circle.YesNormal,e.D[h]=Kt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(h){var e=_r(h);e.scope=h.scope;var t=[],i=Kt.internal.getWidth(h)<=Kt.internal.getHeight(h)?Kt.internal.getWidth(h)/4:Kt.internal.getHeight(h)/4;i=Number((.9*i).toFixed(5));var n=Kt.internal.Bezier_C,s=Number((i*n).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Qa(Kt.internal.getWidth(h)/2)+" "+Qa(Kt.internal.getHeight(h)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(h){var e=_r(h);e.scope=h.scope;var t=[],i=Kt.internal.getWidth(h)<=Kt.internal.getHeight(h)?Kt.internal.getWidth(h)/4:Kt.internal.getHeight(h)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),s=Number((n*Kt.internal.Bezier_C).toFixed(5)),r=Number((i*Kt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qa(Kt.internal.getWidth(h)/2)+" "+Qa(Kt.internal.getHeight(h)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Qa(Kt.internal.getWidth(h)/2)+" "+Qa(Kt.internal.getHeight(h)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),t.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),t.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),t.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(h){var e=_r(h);e.scope=h.scope;var t=[],i=Kt.internal.getWidth(h)<=Kt.internal.getHeight(h)?Kt.internal.getWidth(h)/4:Kt.internal.getHeight(h)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),s=Number((n*Kt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qa(Kt.internal.getWidth(h)/2)+" "+Qa(Kt.internal.getHeight(h)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(h){var e={D:{Off:Kt.RadioButton.Cross.OffPushDown},N:{}};return e.N[h]=Kt.RadioButton.Cross.YesNormal,e.D[h]=Kt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(h){var e=_r(h);e.scope=h.scope;var t=[],i=Kt.internal.calculateCross(h);return t.push("q"),t.push("1 1 "+pe(Kt.internal.getWidth(h)-2)+" "+pe(Kt.internal.getHeight(h)-2)+" re"),t.push("W"),t.push("n"),t.push(pe(i.x1.x)+" "+pe(i.x1.y)+" m"),t.push(pe(i.x2.x)+" "+pe(i.x2.y)+" l"),t.push(pe(i.x4.x)+" "+pe(i.x4.y)+" m"),t.push(pe(i.x3.x)+" "+pe(i.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(h){var e=_r(h);e.scope=h.scope;var t=Kt.internal.calculateCross(h),i=[];return i.push("0.749023 g"),i.push("0 0 "+pe(Kt.internal.getWidth(h))+" "+pe(Kt.internal.getHeight(h))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+pe(Kt.internal.getWidth(h)-2)+" "+pe(Kt.internal.getHeight(h)-2)+" re"),i.push("W"),i.push("n"),i.push(pe(t.x1.x)+" "+pe(t.x1.y)+" m"),i.push(pe(t.x2.x)+" "+pe(t.x2.y)+" l"),i.push(pe(t.x4.x)+" "+pe(t.x4.y)+" m"),i.push(pe(t.x3.x)+" "+pe(t.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(h){var e=_r(h);e.scope=h.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+pe(Kt.internal.getWidth(h))+" "+pe(Kt.internal.getHeight(h))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(h){var e=h.scope.internal.getFont(h.fontName,h.fontStyle).id,t=h.scope.__private__.encodeColorString(h.color);return"/"+e+" "+h.fontSize+" Tf "+t}};Kt.internal={Bezier_C:.551915024494,calculateCross:function(h){var e=Kt.internal.getWidth(h),t=Kt.internal.getHeight(h),i=Math.min(e,t);return{x1:{x:(e-i)/2,y:(t-i)/2+i},x2:{x:(e-i)/2+i,y:(t-i)/2},x3:{x:(e-i)/2,y:(t-i)/2},x4:{x:(e-i)/2+i,y:(t-i)/2+i}}}},Kt.internal.getWidth=function(h){var e=0;return ze(h)==="object"&&(e=Km(h.Rect[2])),e},Kt.internal.getHeight=function(h){var e=0;return ze(h)==="object"&&(e=Km(h.Rect[3])),e};var uw=ui.addField=function(h){if(cw(this,h),!(h instanceof lr))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=h).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),h.page=h.scope.internal.getCurrentPageInfo().pageNumber,this};ui.AcroFormChoiceField=ac,ui.AcroFormListBox=oc,ui.AcroFormComboBox=hc,ui.AcroFormEditBox=Zp,ui.AcroFormButton=Wi,ui.AcroFormPushButton=Jp,ui.AcroFormRadioButton=lc,ui.AcroFormCheckBox=Qp,ui.AcroFormTextField=cl,ui.AcroFormPasswordField=t1,ui.AcroFormAppearance=Kt,ui.AcroForm={ChoiceField:ac,ListBox:oc,ComboBox:hc,EditBox:Zp,Button:Wi,PushButton:Jp,RadioButton:lc,CheckBox:Qp,TextField:cl,PasswordField:t1,Appearance:Kt},le.AcroForm={ChoiceField:ac,ListBox:oc,ComboBox:hc,EditBox:Zp,Button:Wi,PushButton:Jp,RadioButton:lc,CheckBox:Qp,TextField:cl,PasswordField:t1,Appearance:Kt};function W5(h){return h.reduce(function(e,t,i){return e[t]=i,e},{})}(function(h){h.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=h.__addimage__.getImageFileTypeByImageData=function(M,E){var W,S,nt,st,tt,dt=e;if((E=E||e)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(K(M))for(tt in t)for(nt=t[tt],W=0;W<nt.length;W+=1){for(st=!0,S=0;S<nt[W].length;S+=1)if(nt[W][S]!==void 0&&nt[W][S]!==M[S]){st=!1;break}if(st===!0){dt=tt;break}}else for(tt in t)for(nt=t[tt],W=0;W<nt.length;W+=1){for(st=!0,S=0;S<nt[W].length;S+=1)if(nt[W][S]!==void 0&&nt[W][S]!==M.charCodeAt(S)){st=!1;break}if(st===!0){dt=tt;break}}return dt===e&&E!==e&&(dt=E),dt},n=function M(E){for(var W=this.internal.write,S=this.internal.putStream,nt=(0,this.internal.getFilters)();nt.indexOf("FlateEncode")!==-1;)nt.splice(nt.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var st=[];if(st.push({key:"Type",value:"/XObject"}),st.push({key:"Subtype",value:"/Image"}),st.push({key:"Width",value:E.width}),st.push({key:"Height",value:E.height}),E.colorSpace===_.INDEXED?st.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(st.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===_.DEVICE_CMYK&&st.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),st.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&st.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var tt="",dt=0,ot=E.transparency.length;dt<ot;dt++)tt+=E.transparency[dt]+" "+E.transparency[dt]+" ";st.push({key:"Mask",value:"["+tt+"]"})}E.sMask!==void 0&&st.push({key:"SMask",value:E.objectId+1+" 0 R"});var At=E.filter!==void 0?["/"+E.filter]:void 0;if(S({data:E.data,additionalKeyValues:st,alreadyAppliedFilters:At,objectId:E.objectId}),W("endobj"),"sMask"in E&&E.sMask!==void 0){var lt="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,k={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:lt,data:E.sMask};"filter"in E&&(k.filter=E.filter),M.call(this,k)}if(E.colorSpace===_.INDEXED){var G=this.internal.newObject();S({data:U(new Uint8Array(E.palette)),objectId:G}),W("endobj")}},s=function(){var M=this.internal.collections.addImage_images;for(var E in M)n.call(this,M[E])},r=function(){var M,E=this.internal.collections.addImage_images,W=this.internal.write;for(var S in E)W("/I"+(M=E[S]).index,M.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",r))},o=function(){var M=this.internal.collections.addImage_images;return a.call(this),M},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(M){return typeof h["process"+M.toUpperCase()]=="function"},p=function(M){return ze(M)==="object"&&M.nodeType===1},g=function(M,E){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var W=""+M.getAttribute("src");if(W.indexOf("data:image/")===0)return gd(unescape(W).split("base64,").pop());var S=h.loadFile(W,!0);if(S!==void 0)return S}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var nt;switch(E){case"PNG":nt="image/png";break;case"WEBP":nt="image/webp";break;case"JPEG":case"JPG":default:nt="image/jpeg"}return gd(M.toDataURL(nt,1).split("base64,").pop())}},f=function(M){var E=this.internal.collections.addImage_images;if(E){for(var W in E)if(M===E[W].alias)return E[W]}},v=function(M,E,W){return M||E||(M=-96,E=-96),M<0&&(M=-1*W.width*72/M/this.internal.scaleFactor),E<0&&(E=-1*W.height*72/E/this.internal.scaleFactor),M===0&&(M=E*W.width/W.height),E===0&&(E=M*W.height/W.width),[M,E]},b=function(M,E,W,S,nt,st){var tt=v.call(this,W,S,nt),dt=this.internal.getCoordinateString,ot=this.internal.getVerticalCoordinateString,At=o.call(this);if(W=tt[0],S=tt[1],At[nt.index]=nt,st){st*=Math.PI/180;var lt=Math.cos(st),k=Math.sin(st),G=function(Z){return Z.toFixed(4)},Y=[G(lt),G(k),G(-1*k),G(lt),0,0,"cm"]}this.internal.write("q"),st?(this.internal.write([1,"0","0",1,dt(M),ot(E+S),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([dt(W),"0","0",dt(S),"0","0","cm"].join(" "))):this.internal.write([dt(W),"0","0",dt(S),dt(M),ot(E+S),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+nt.index+" Do"),this.internal.write("Q")},_=h.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};h.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=h.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=h.__addimage__.sHashCode=function(M){var E,W,S=0;if(typeof M=="string")for(W=M.length,E=0;E<W;E++)S=(S<<5)-S+M.charCodeAt(E),S|=0;else if(K(M))for(W=M.byteLength/2,E=0;E<W;E++)S=(S<<5)-S+M[E],S|=0;return S},C=h.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var E=!0;return M.length===0&&(E=!1),M.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(E=!1),E},I=h.__addimage__.extractImageFromDataUrl=function(M){var E=(M=M||"").split("base64,"),W=null;if(E.length===2){var S=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(S)&&(W={mimeType:S[1],charset:S[2],data:E[1]})}return W},F=h.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};h.__addimage__.isArrayBuffer=function(M){return F()&&M instanceof ArrayBuffer};var K=h.__addimage__.isArrayBufferView=function(M){return F()&&typeof Uint32Array<"u"&&(M instanceof Int8Array||M instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array)},q=h.__addimage__.binaryStringToUint8Array=function(M){for(var E=M.length,W=new Uint8Array(E),S=0;S<E;S++)W[S]=M.charCodeAt(S);return W},U=h.__addimage__.arrayBufferToBinaryString=function(M){for(var E="",W=K(M)?M:new Uint8Array(M),S=0;S<W.length;S+=8192)E+=String.fromCharCode.apply(null,W.subarray(S,S+8192));return E};h.addImage=function(){var M,E,W,S,nt,st,tt,dt,ot;if(typeof arguments[1]=="number"?(E=e,W=arguments[1],S=arguments[2],nt=arguments[3],st=arguments[4],tt=arguments[5],dt=arguments[6],ot=arguments[7]):(E=arguments[1],W=arguments[2],S=arguments[3],nt=arguments[4],st=arguments[5],tt=arguments[6],dt=arguments[7],ot=arguments[8]),ze(M=arguments[0])==="object"&&!p(M)&&"imageData"in M){var At=M;M=At.imageData,E=At.format||E||e,W=At.x||W||0,S=At.y||S||0,nt=At.w||At.width||nt,st=At.h||At.height||st,tt=At.alias||tt,dt=At.compression||dt,ot=At.rotation||At.angle||ot}var lt=this.internal.getFilters();if(dt===void 0&&lt.indexOf("FlateEncode")!==-1&&(dt="SLOW"),isNaN(W)||isNaN(S))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var k=X.call(this,M,E,tt,dt);return b.call(this,W,S,nt,st,k,ot),this};var X=function(M,E,W,S){var nt,st,tt;if(typeof M=="string"&&i(M)===e){M=unescape(M);var dt=rt(M,!1);(dt!==""||(dt=h.loadFile(M,!0))!==void 0)&&(M=dt)}if(p(M)&&(M=g(M,E)),E=i(M,E),!d(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((tt=W)==null||tt.length===0)&&(W=function(ot){return typeof ot=="string"||K(ot)?x(ot):K(ot.data)?x(ot.data):null}(M)),(nt=f.call(this,W))||(F()&&(M instanceof Uint8Array||E==="RGBA"||(st=M,M=q(M))),nt=this["process"+E.toUpperCase()](M,c.call(this),W,function(ot){return ot&&typeof ot=="string"&&(ot=ot.toUpperCase()),ot in h.image_compression?ot:y.NONE}(S),st)),!nt)throw new Error("An unknown error occurred whilst processing the image.");return nt},rt=h.__addimage__.convertBase64ToBinaryString=function(M,E){var W;E=typeof E!="boolean"||E;var S,nt="";if(typeof M=="string"){S=(W=I(M))!==null?W.data:M;try{nt=gd(S)}catch(st){if(E)throw C(S)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+st.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return nt};h.getImageProperties=function(M){var E,W,S="";if(p(M)&&(M=g(M)),typeof M=="string"&&i(M)===e&&((S=rt(M,!1))===""&&(S=h.loadFile(M)||""),M=S),W=i(M),!d(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(!F()||M instanceof Uint8Array||(M=q(M)),!(E=this["process"+W.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=W,E}})(le.API),function(h){var e=function(t){if(t!==void 0&&t!="")return!0};le.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),h.events.push(["putPage",function(t){for(var i,n,s,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((i=c[p]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){i=c[g];var f=this.internal.pdfEscape,v=this.internal.getEncryptor(t.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(b.objId),x=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(n="/Rect ["+r(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+r(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+f(y(i.contents))+")",s+=" /Popup "+_.objId+" 0 R",s+=" /P "+o.objId+" 0 R",s+=" /T ("+f(y(x))+") >>",b.content=s;var C=b.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+r(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+r(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+C,i.open&&(s+=" /Open true"),s+=" >>",_.content=s,this.internal.write(b.objId,"0 R",_.objId,"0 R");break;case"freetext":n="/Rect ["+r(i.bounds.x)+" "+a(i.bounds.y)+" "+r(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var I=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+f(v(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+I+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var F=this.annotations._nameMap[i.options.name];i.options.pageNumber=F.page,i.options.top=F.y}else i.options.top||(i.options.top=0);if(n="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+f(v(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var K=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+K+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),h.createAnnotation=function(t){var i=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":i.pageContext.annotations.push(t)}},h.link=function(t,i,n,s,r){var a=this.internal.getCurrentPageInfo(),o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:o(t),y:c(i),w:o(t+n),h:c(i+s)},options:r,type:"link"})},h.textWithLink=function(t,i,n,s){var r,a,o=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(t,a).length;r=Math.ceil(c*d)}else a=o,r=c;return this.text(t,i,n,s),n+=.2*c,s.align==="center"&&(i-=o/2),s.align==="right"&&(i-=o),this.link(i,n-c,a,r,s),o},h.getTextWidth=function(t){var i=this.internal.getFontSize();return this.getStringUnitWidth(t)*i/this.internal.scaleFactor}}(le.API),function(h){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];h.__arabicParser__={};var s=h.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},r=h.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},a=h.__arabicParser__.isArabicEndLetter=function(b){return r(b)&&s(b)&&e[b.charCodeAt(0)].length<=2},o=h.__arabicParser__.isArabicAlfLetter=function(b){return r(b)&&n.indexOf(b.charCodeAt(0))>=0};h.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return r(b)&&s(b)&&e[b.charCodeAt(0)].length>=1};var c=h.__arabicParser__.arabicLetterHasFinalForm=function(b){return r(b)&&s(b)&&e[b.charCodeAt(0)].length>=2};h.__arabicParser__.arabicLetterHasInitialForm=function(b){return r(b)&&s(b)&&e[b.charCodeAt(0)].length>=3};var d=h.__arabicParser__.arabicLetterHasMedialForm=function(b){return r(b)&&s(b)&&e[b.charCodeAt(0)].length==4},p=h.__arabicParser__.resolveLigatures=function(b){var _=0,y=t,x="",C=0;for(_=0;_<b.length;_+=1)y[b.charCodeAt(_)]!==void 0?(C++,typeof(y=y[b.charCodeAt(_)])=="number"&&(x+=String.fromCharCode(y),y=t,C=0),_===b.length-1&&(y=t,x+=b.charAt(_-(C-1)),_-=C-1,C=0)):(y=t,x+=b.charAt(_-C),_-=C,C=0);return x};h.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&i[b.charCodeAt(0)]!==void 0};var g=h.__arabicParser__.getCorrectForm=function(b,_,y){return r(b)?s(b)===!1?-1:!c(b)||!r(_)&&!r(y)||!r(y)&&a(_)||a(b)&&!r(_)||a(b)&&o(_)||a(b)&&a(_)?0:d(b)&&r(_)&&!a(_)&&r(y)&&c(y)?3:a(b)||!r(y)?1:2:-1},f=function(b){var _=0,y=0,x=0,C="",I="",F="",K=(b=b||"").split("\\s+"),q=[];for(_=0;_<K.length;_+=1){for(q.push(""),y=0;y<K[_].length;y+=1)C=K[_][y],I=K[_][y-1],F=K[_][y+1],r(C)?(x=g(C,I,F),q[_]+=x!==-1?String.fromCharCode(e[C.charCodeAt(0)][x]):C):q[_]+=C;q[_]=p(q[_])}return q.join(" ")},v=h.__arabicParser__.processArabic=h.processArabic=function(){var b,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(_)){var x=0;for(y=[],x=0;x<_.length;x+=1)Array.isArray(_[x])?y.push([f(_[x][0]),_[x][1],_[x][2]]):y.push([f(_[x])]);b=y}else b=f(_);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};h.events.push(["preProcessText",v])}(le.API),le.API.autoPrint=function(h){var e;switch((h=h||{}).variant=h.variant||"non-conform",h.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(h){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,i){var n;if((t=t||"2d")!=="2d")return null;for(n in i)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=i[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},h.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(le.API),function(h){var e={left:0,top:0,bottom:0,right:0},t=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var o=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return o},set:function(b){o=b}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(b){v=b}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},h.setHeaderFunction=function(o){return i.call(this),this.internal.__cell__.headerFunction=typeof o=="function"?o:void 0,this},h.getTextDimensions=function(o,c){i.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,f=0,v=0,b=0,_=this;if(!Array.isArray(o)&&typeof o!="string"){if(typeof o!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");o=String(o)}var y=c.maxWidth;y>0?typeof o=="string"?o=this.splitTextToSize(o,y):Object.prototype.toString.call(o)==="[object Array]"&&(o=o.reduce(function(C,I){return C.concat(_.splitTextToSize(I,y))},[])):o=Array.isArray(o)?o:[o];for(var x=0;x<o.length;x++)f<(b=this.getStringUnitWidth(o[x],{font:p})*d)&&(f=b);return f!==0&&(v=o.length),{w:f/=g,h:Math.max((v*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},h.cellAddPage=function(){i.call(this),this.addPage();var o=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(o.left,o.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var r=h.cell=function(){var o;o=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===o.lineNumber?(o.x=(c.x||0)+(c.width||0),o.y=c.y||0):c.y+c.height+o.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),o.y=p.top,f&&g&&(this.printHeaderRow(o.lineNumber,!0),o.y+=g[0].height)):o.y=c.y+c.height||o.y),o.text[0]!==void 0&&(this.rect(o.x,o.y,o.width,o.height,t===!0?"FD":void 0),o.align==="right"?this.text(o.text,o.x+o.width-d,o.y+d,{align:"right",baseline:"top"}):o.align==="center"?this.text(o.text,o.x+o.width/2,o.y+d,{align:"center",baseline:"top",maxWidth:o.width-d-d}):this.text(o.text,o.x+d,o.y+d,{align:"left",baseline:"top",maxWidth:o.width-d-d})),this.internal.__cell__.lastCell=o,this};h.table=function(o,c,d,p,g){if(i.call(this),!d)throw new Error("No data for PDF table.");var f,v,b,_,y=[],x=[],C=[],I={},F={},K=[],q=[],U=(g=g||{}).autoSize||!1,X=g.printHeaders!==!1,rt=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,M=g.margins||Object.assign({width:this.getPageWidth()},e),E=typeof g.padding=="number"?g.padding:3,W=g.headerBackgroundColor||"#c8c8c8",S=g.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=X,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=rt,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=W,this.internal.__cell__.headerTextColor=S,this.setFontSize(rt),p==null)x=y=Object.keys(d[0]),C=y.map(function(){return"left"});else if(Array.isArray(p)&&ze(p[0])==="object")for(y=p.map(function(At){return At.name}),x=p.map(function(At){return At.prompt||At.name||""}),C=p.map(function(At){return At.align||"left"}),f=0;f<p.length;f+=1)F[p[f].name]=p[f].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(x=y=p,C=y.map(function(){return"left"}));if(U||Array.isArray(p)&&typeof p[0]=="string")for(f=0;f<y.length;f+=1){for(I[_=y[f]]=d.map(function(At){return At[_]}),this.setFont(void 0,"bold"),K.push(this.getTextDimensions(x[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=I[_],this.setFont(void 0,"normal"),b=0;b<v.length;b+=1)K.push(this.getTextDimensions(v[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[_]=Math.max.apply(null,K)+E+E,K=[]}if(X){var nt={};for(f=0;f<y.length;f+=1)nt[y[f]]={},nt[y[f]].text=x[f],nt[y[f]].align=C[f];var st=a.call(this,nt,F);q=y.map(function(At){return new s(o,c,F[At],st,nt[At].text,void 0,nt[At].align)}),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var tt=p.reduce(function(At,lt){return At[lt.name]=lt.align,At},{});for(f=0;f<d.length;f+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:f,data:d[f]},this);var dt=a.call(this,d[f],F);for(b=0;b<y.length;b+=1){var ot=d[f][y[b]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:f,col:b,data:ot},this),r.call(this,new s(o,c,F[y[b]],dt,ot,f+2,tt[y[b]]))}}return this.internal.__cell__.table_x=o,this.internal.__cell__.table_y=c,this};var a=function(o,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(o).map(function(f){var v=o[f];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,c[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*p/g+d+d},this).reduce(function(f,v){return Math.max(f,v)},0)};h.setTableHeaderRow=function(o){i.call(this),this.internal.__cell__.tableHeaderRow=o},h.printHeaderRow=function(o,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=o;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),r.call(this,d),this.setTextColor(v)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(le.API);var G5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},V5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],T0=W5(V5),$5=[100,200,300,400,500,600,700,800,900],dw=W5($5);function R0(h){var e=h.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return G5[s=s||"normal"]?s:"normal"}(h.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(h.weight),n=function(s){return typeof T0[s=s||"normal"]=="number"?s:"normal"}(h.stretch);return{family:e,style:t,weight:i,stretch:n,src:h.src||[],ref:h.ref||{name:e,style:[n,t,i].join(" ")}}}function Zm(h,e,t,i){var n;for(n=t;n>=0&&n<e.length;n+=i)if(h[e[n]])return h[e[n]];for(n=t;n>=0&&n<e.length;n-=i)if(h[e[n]])return h[e[n]]}var fw={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Jm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Qm(h){return[h.stretch,h.style,h.weight,h.family].join(" ")}function pw(h,e,t){for(var i=(t=t||{}).defaultFontFamily||"times",n=Object.assign({},fw,t.genericFontFamilies||{}),s=null,r=null,a=0;a<e.length;++a)if(n[(s=R0(e[a])).family]&&(s.family=n[s.family]),h.hasOwnProperty(s.family)){r=h[s.family];break}if(!(r=r||h[i]))throw new Error("Could not find a font-family for the rule '"+Qm(s)+"' and default family '"+i+"'.");if(r=function(o,c){if(c[o])return c[o];var d=T0[o],p=d<=T0.normal?-1:1,g=Zm(c,V5,d,p);if(!g)throw new Error("Could not find a matching font-stretch value for "+o);return g}(s.stretch,r),r=function(o,c){if(c[o])return c[o];for(var d=G5[o],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+o)}(s.style,r),!(r=function(o,c){if(c[o])return c[o];if(o===400&&c[500])return c[500];if(o===500&&c[400])return c[400];var d=dw[o],p=Zm(c,$5,d,o<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+o);return p}(s.weight,r)))throw new Error("Failed to resolve a font for the rule '"+Qm(s)+"'.");return r}function t5(h){return h.trimLeft()}function gw(h,e){for(var t=0;t<h.length;){if(h.charAt(t)===e)return[h.substring(0,t),h.substring(t+1)];t+=1}return null}function mw(h){var e=h.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],h.substring(e[0].length)]}var Wp,e5,i5,f0=["times"];(function(h){var e,t,i,n,s,r,a,o,c,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new o,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new r,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new r,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};h.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,r=this.internal.Point,a=this.internal.Rectangle,o=this.internal.Matrix,c=new d}]);var p=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=k;Object.defineProperty(this,"pdf",{get:function(){return G}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(at){Y=!!at}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(at){Z=!!at}});var ct=0;Object.defineProperty(this,"posX",{get:function(){return ct},set:function(at){isNaN(at)||(ct=at)}});var gt=0;Object.defineProperty(this,"posY",{get:function(){return gt},set:function(at){isNaN(at)||(gt=at)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(at){var B;typeof at=="number"?B=[at,at,at,at]:((B=new Array(4))[0]=at[0],B[1]=at.length>=2?at[1]:B[0],B[2]=at.length>=3?at[2]:B[0],B[3]=at.length>=4?at[3]:B[1]),c.margin=B}});var bt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return bt},set:function(at){bt=at}});var wt=0;Object.defineProperty(this,"lastBreak",{get:function(){return wt},set:function(at){wt=at}});var Mt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Mt},set:function(at){Mt=at}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(at){at instanceof d&&(c=at)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(at){c.path=at}});var It=[];Object.defineProperty(this,"ctxStack",{get:function(){return It},set:function(at){It=at}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(at){var B;B=g(at),this.ctx.fillStyle=B.style,this.ctx.isFillTransparent=B.a===0,this.ctx.fillOpacity=B.a,this.pdf.setFillColor(B.r,B.g,B.b,{a:B.a}),this.pdf.setTextColor(B.r,B.g,B.b,{a:B.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(at){var B=g(at);this.ctx.strokeStyle=B.style,this.ctx.isStrokeTransparent=B.a===0,this.ctx.strokeOpacity=B.a,B.a===0?this.pdf.setDrawColor(255,255,255):(B.a,this.pdf.setDrawColor(B.r,B.g,B.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(at){["butt","round","square"].indexOf(at)!==-1&&(this.ctx.lineCap=at,this.pdf.setLineCap(at))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(at){isNaN(at)||(this.ctx.lineWidth=at,this.pdf.setLineWidth(at))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(at){["bevel","round","miter"].indexOf(at)!==-1&&(this.ctx.lineJoin=at,this.pdf.setLineJoin(at))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(at){isNaN(at)||(this.ctx.miterLimit=at,this.pdf.setMiterLimit(at))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(at){this.ctx.textBaseline=at}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(at){["right","end","center","left","start"].indexOf(at)!==-1&&(this.ctx.textAlign=at)}});var zt=null;function jt(at,B){if(zt===null){var J=function($){var et=[];return Object.keys($).forEach(function(vt){$[vt].forEach(function(_t){var ht=null;switch(_t){case"bold":ht={family:vt,weight:"bold"};break;case"italic":ht={family:vt,style:"italic"};break;case"bolditalic":ht={family:vt,weight:"bold",style:"italic"};break;case"":case"normal":ht={family:vt}}ht!==null&&(ht.ref={name:vt,style:_t},et.push(ht))})}),et}(at.getFontList());zt=function($){for(var et={},vt=0;vt<$.length;++vt){var _t=R0($[vt]),ht=_t.family,kt=_t.stretch,Ft=_t.style,Nt=_t.weight;et[ht]=et[ht]||{},et[ht][kt]=et[ht][kt]||{},et[ht][kt][Ft]=et[ht][kt][Ft]||{},et[ht][kt][Ft][Nt]=_t}return et}(J.concat(B))}return zt}var N=null;Object.defineProperty(this,"fontFaces",{get:function(){return N},set:function(at){zt=null,N=at}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(at){var B;if(this.ctx.font=at,(B=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(at))!==null){var J=B[1],$=(B[2],B[3]),et=B[4],vt=(B[5],B[6]),_t=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(_t==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:_t==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var ht=function(Qt){var ge,qt,oi=[],ne=Qt.trim();if(ne==="")return f0;if(ne in Jm)return[Jm[ne]];for(;ne!=="";){switch(qt=null,ge=(ne=t5(ne)).charAt(0)){case'"':case"'":qt=gw(ne.substring(1),ge);break;default:qt=mw(ne)}if(qt===null||(oi.push(qt[0]),(ne=t5(qt[1]))!==""&&ne.charAt(0)!==","))return f0;ne=ne.replace(/^,/,"")}return oi}(vt);if(this.fontFaces){var kt=pw(jt(this.pdf,this.fontFaces),ht.map(function(Qt){return{family:Qt,stretch:"normal",weight:$,style:J}}));this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var Ft="";($==="bold"||parseInt($,10)>=700||J==="bold")&&(Ft="bold"),J==="italic"&&(Ft+="italic"),Ft.length===0&&(Ft="normal");for(var Nt="",Bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Jt=0;Jt<ht.length;Jt++){if(this.pdf.internal.getFont(ht[Jt],Ft,{noFallback:!0,disableWarning:!0})!==void 0){Nt=ht[Jt];break}if(Ft==="bolditalic"&&this.pdf.internal.getFont(ht[Jt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Nt=ht[Jt],Ft="bold";else if(this.pdf.internal.getFont(ht[Jt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Nt=ht[Jt],Ft="normal";break}}if(Nt===""){for(var Zt=0;Zt<ht.length;Zt++)if(Bt[ht[Zt]]){Nt=Bt[ht[Zt]];break}}Nt=Nt===""?"Times":Nt,this.pdf.setFont(Nt,Ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(at){this.ctx.globalCompositeOperation=at}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(at){this.ctx.globalAlpha=at}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(at){this.ctx.lineDashOffset=at,lt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(at){this.ctx.lineDash=at,lt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(at){this.ctx.ignoreClearRect=!!at}})};p.prototype.setLineDash=function(k){this.lineDash=k},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){I.call(this,"fill",!1)},p.prototype.stroke=function(){I.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(k,G){if(isNaN(k)||isNaN(G))throw Ve.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new r(k,G));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new r(k,G)},p.prototype.closePath=function(){var k=new r(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&ze(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){k=new r(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new r(k.x,k.y)},p.prototype.lineTo=function(k,G){if(isNaN(k)||isNaN(G))throw Ve.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new r(k,G));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new r(Y.x,Y.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),I.call(this,null,!0)},p.prototype.quadraticCurveTo=function(k,G,Y,Z){if(isNaN(Y)||isNaN(Z)||isNaN(k)||isNaN(G))throw Ve.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ct=this.ctx.transform.applyToPoint(new r(Y,Z)),gt=this.ctx.transform.applyToPoint(new r(k,G));this.path.push({type:"qct",x1:gt.x,y1:gt.y,x:ct.x,y:ct.y}),this.ctx.lastPoint=new r(ct.x,ct.y)},p.prototype.bezierCurveTo=function(k,G,Y,Z,ct,gt){if(isNaN(ct)||isNaN(gt)||isNaN(k)||isNaN(G)||isNaN(Y)||isNaN(Z))throw Ve.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var bt=this.ctx.transform.applyToPoint(new r(ct,gt)),wt=this.ctx.transform.applyToPoint(new r(k,G)),Mt=this.ctx.transform.applyToPoint(new r(Y,Z));this.path.push({type:"bct",x1:wt.x,y1:wt.y,x2:Mt.x,y2:Mt.y,x:bt.x,y:bt.y}),this.ctx.lastPoint=new r(bt.x,bt.y)},p.prototype.arc=function(k,G,Y,Z,ct,gt){if(isNaN(k)||isNaN(G)||isNaN(Y)||isNaN(Z)||isNaN(ct))throw Ve.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(gt=!!gt,!this.ctx.transform.isIdentity){var bt=this.ctx.transform.applyToPoint(new r(k,G));k=bt.x,G=bt.y;var wt=this.ctx.transform.applyToPoint(new r(0,Y)),Mt=this.ctx.transform.applyToPoint(new r(0,0));Y=Math.sqrt(Math.pow(wt.x-Mt.x,2)+Math.pow(wt.y-Mt.y,2))}Math.abs(ct-Z)>=2*Math.PI&&(Z=0,ct=2*Math.PI),this.path.push({type:"arc",x:k,y:G,radius:Y,startAngle:Z,endAngle:ct,counterclockwise:gt})},p.prototype.arcTo=function(k,G,Y,Z,ct){throw new Error("arcTo not implemented.")},p.prototype.rect=function(k,G,Y,Z){if(isNaN(k)||isNaN(G)||isNaN(Y)||isNaN(Z))throw Ve.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,G),this.lineTo(k+Y,G),this.lineTo(k+Y,G+Z),this.lineTo(k,G+Z),this.lineTo(k,G),this.lineTo(k+Y,G),this.lineTo(k,G)},p.prototype.fillRect=function(k,G,Y,Z){if(isNaN(k)||isNaN(G)||isNaN(Y)||isNaN(Z))throw Ve.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var ct={};this.lineCap!=="butt"&&(ct.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ct.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,G,Y,Z),this.fill(),ct.hasOwnProperty("lineCap")&&(this.lineCap=ct.lineCap),ct.hasOwnProperty("lineJoin")&&(this.lineJoin=ct.lineJoin)}},p.prototype.strokeRect=function(k,G,Y,Z){if(isNaN(k)||isNaN(G)||isNaN(Y)||isNaN(Z))throw Ve.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(k,G,Y,Z),this.stroke())},p.prototype.clearRect=function(k,G,Y,Z){if(isNaN(k)||isNaN(G)||isNaN(Y)||isNaN(Z))throw Ve.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,G,Y,Z))},p.prototype.save=function(k){k=typeof k!="boolean"||k;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},p.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(G),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(k){var G,Y,Z,ct;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))G=0,Y=0,Z=0,ct=0;else{var gt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(gt!==null)G=parseInt(gt[1]),Y=parseInt(gt[2]),Z=parseInt(gt[3]),ct=1;else if((gt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)G=parseInt(gt[1]),Y=parseInt(gt[2]),Z=parseInt(gt[3]),ct=parseFloat(gt[4]);else{if(ct=1,typeof k=="string"&&k.charAt(0)!=="#"){var bt=new B5(k);k=bt.ok?bt.toHex():"#000000"}k.length===4?(G=k.substring(1,2),G+=G,Y=k.substring(2,3),Y+=Y,Z=k.substring(3,4),Z+=Z):(G=k.substring(1,3),Y=k.substring(3,5),Z=k.substring(5,7)),G=parseInt(G,16),Y=parseInt(Y,16),Z=parseInt(Z,16)}}return{r:G,g:Y,b:Z,a:ct,style:k}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(k,G,Y,Z){if(isNaN(G)||isNaN(Y)||typeof k!="string")throw Ve.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!f.call(this)){var ct=dt(this.ctx.transform.rotation),gt=this.ctx.transform.scaleX;E.call(this,{text:k,x:G,y:Y,scale:gt,angle:ct,align:this.textAlign,maxWidth:Z})}},p.prototype.strokeText=function(k,G,Y,Z){if(isNaN(G)||isNaN(Y)||typeof k!="string")throw Ve.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){Z=isNaN(Z)?void 0:Z;var ct=dt(this.ctx.transform.rotation),gt=this.ctx.transform.scaleX;E.call(this,{text:k,x:G,y:Y,scale:gt,renderingMode:"stroke",angle:ct,align:this.textAlign,maxWidth:Z})}},p.prototype.measureText=function(k){if(typeof k!="string")throw Ve.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,Y=this.pdf.internal.scaleFactor,Z=G.internal.getFontSize(),ct=G.getStringUnitWidth(k)*Z/G.internal.scaleFactor,gt=function(bt){var wt=(bt=bt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return wt}}),this};return new gt({width:ct*=Math.round(96*Y/72*1e4)/1e4})},p.prototype.scale=function(k,G){if(isNaN(k)||isNaN(G))throw Ve.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new o(k,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.rotate=function(k){if(isNaN(k))throw Ve.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new o(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.translate=function(k,G){if(isNaN(k)||isNaN(G))throw Ve.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new o(1,0,0,1,k,G);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.transform=function(k,G,Y,Z,ct,gt){if(isNaN(k)||isNaN(G)||isNaN(Y)||isNaN(Z)||isNaN(ct)||isNaN(gt))throw Ve.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var bt=new o(k,G,Y,Z,ct,gt);this.ctx.transform=this.ctx.transform.multiply(bt)},p.prototype.setTransform=function(k,G,Y,Z,ct,gt){k=isNaN(k)?1:k,G=isNaN(G)?0:G,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?1:Z,ct=isNaN(ct)?0:ct,gt=isNaN(gt)?0:gt,this.ctx.transform=new o(k,G,Y,Z,ct,gt)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(k,G,Y,Z,ct,gt,bt,wt,Mt){var It=this.pdf.getImageProperties(k),zt=1,jt=1,N=1,at=1;Z!==void 0&&wt!==void 0&&(N=wt/Z,at=Mt/ct,zt=It.width/Z*wt/Z,jt=It.height/ct*Mt/ct),gt===void 0&&(gt=G,bt=Y,G=0,Y=0),Z!==void 0&&wt===void 0&&(wt=Z,Mt=ct),Z===void 0&&wt===void 0&&(wt=It.width,Mt=It.height);for(var B,J=this.ctx.transform.decompose(),$=dt(J.rotate.shx),et=new o,vt=(et=(et=(et=et.multiply(J.translate)).multiply(J.skew)).multiply(J.scale)).applyToRectangle(new a(gt-G*N,bt-Y*at,Z*zt,ct*jt)),_t=_.call(this,vt),ht=[],kt=0;kt<_t.length;kt+=1)ht.indexOf(_t[kt])===-1&&ht.push(_t[kt]);if(C(ht),this.autoPaging)for(var Ft=ht[0],Nt=ht[ht.length-1],Bt=Ft;Bt<Nt+1;Bt++){this.pdf.setPage(Bt);var Jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Zt=Bt===1?this.posY+this.margin[0]:this.margin[0],Qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qt=Bt===1?0:Qt+(Bt-2)*ge;if(this.ctx.clip_path.length!==0){var oi=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(B,this.posX+this.margin[3],-qt+Zt+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=oi}var ne=JSON.parse(JSON.stringify(vt));ne=x([ne],this.posX+this.margin[3],-qt+Zt+this.ctx.prevPageLastElemOffset)[0];var tn=(Bt>Ft||Bt<Nt)&&b.call(this);tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,ge,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",ne.x,ne.y,ne.w,ne.h,null,null,$),tn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,$)};var _=function(k,G,Y){var Z=[];G=G||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ct=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":Z.push(Math.floor((k.y+ct)/Y)+1);break;case"arc":Z.push(Math.floor((k.y+ct-k.radius)/Y)+1),Z.push(Math.floor((k.y+ct+k.radius)/Y)+1);break;case"qct":var gt=ot(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);Z.push(Math.floor((gt.y+ct)/Y)+1),Z.push(Math.floor((gt.y+gt.h+ct)/Y)+1);break;case"bct":var bt=At(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);Z.push(Math.floor((bt.y+ct)/Y)+1),Z.push(Math.floor((bt.y+bt.h+ct)/Y)+1);break;case"rect":Z.push(Math.floor((k.y+ct)/Y)+1),Z.push(Math.floor((k.y+k.h+ct)/Y)+1)}for(var wt=0;wt<Z.length;wt+=1)for(;this.pdf.internal.getNumberOfPages()<Z[wt];)y.call(this);return Z},y=function(){var k=this.fillStyle,G=this.strokeStyle,Y=this.font,Z=this.lineCap,ct=this.lineWidth,gt=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=G,this.font=Y,this.lineCap=Z,this.lineWidth=ct,this.lineJoin=gt},x=function(k,G,Y){for(var Z=0;Z<k.length;Z++)switch(k[Z].type){case"bct":k[Z].x2+=G,k[Z].y2+=Y;case"qct":k[Z].x1+=G,k[Z].y1+=Y;case"mt":case"lt":case"arc":default:k[Z].x+=G,k[Z].y+=Y}return k},C=function(k){return k.sort(function(G,Y){return G-Y})},I=function(k,G){for(var Y,Z,ct=this.fillStyle,gt=this.strokeStyle,bt=this.lineCap,wt=this.lineWidth,Mt=Math.abs(wt*this.ctx.transform.scaleX),It=this.lineJoin,zt=JSON.parse(JSON.stringify(this.path)),jt=JSON.parse(JSON.stringify(this.path)),N=[],at=0;at<jt.length;at++)if(jt[at].x!==void 0)for(var B=_.call(this,jt[at]),J=0;J<B.length;J+=1)N.indexOf(B[J])===-1&&N.push(B[J]);for(var $=0;$<N.length;$++)for(;this.pdf.internal.getNumberOfPages()<N[$];)y.call(this);if(C(N),this.autoPaging)for(var et=N[0],vt=N[N.length-1],_t=et;_t<vt+1;_t++){this.pdf.setPage(_t),this.fillStyle=ct,this.strokeStyle=gt,this.lineCap=bt,this.lineWidth=Mt,this.lineJoin=It;var ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=_t===1?this.posY+this.margin[0]:this.margin[0],Ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Bt=_t===1?0:Ft+(_t-2)*Nt;if(this.ctx.clip_path.length!==0){var Jt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Y,this.posX+this.margin[3],-Bt+kt+this.ctx.prevPageLastElemOffset),F.call(this,k,!0),this.path=Jt}if(Z=JSON.parse(JSON.stringify(zt)),this.path=x(Z,this.posX+this.margin[3],-Bt+kt+this.ctx.prevPageLastElemOffset),G===!1||_t===0){var Zt=(_t>et||_t<vt)&&b.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,Nt,null).clip().discardPath()),F.call(this,k,G),Zt&&this.pdf.restoreGraphicsState()}this.lineWidth=wt}else this.lineWidth=Mt,F.call(this,k,G),this.lineWidth=wt;this.path=zt},F=function(k,G){if((k!=="stroke"||G||!v.call(this))&&(k==="stroke"||G||!f.call(this))){for(var Y,Z,ct=[],gt=this.path,bt=0;bt<gt.length;bt++){var wt=gt[bt];switch(wt.type){case"begin":ct.push({begin:!0});break;case"close":ct.push({close:!0});break;case"mt":ct.push({start:wt,deltas:[],abs:[]});break;case"lt":var Mt=ct.length;if(gt[bt-1]&&!isNaN(gt[bt-1].x)&&(Y=[wt.x-gt[bt-1].x,wt.y-gt[bt-1].y],Mt>0)){for(;Mt>=0;Mt--)if(ct[Mt-1].close!==!0&&ct[Mt-1].begin!==!0){ct[Mt-1].deltas.push(Y),ct[Mt-1].abs.push(wt);break}}break;case"bct":Y=[wt.x1-gt[bt-1].x,wt.y1-gt[bt-1].y,wt.x2-gt[bt-1].x,wt.y2-gt[bt-1].y,wt.x-gt[bt-1].x,wt.y-gt[bt-1].y],ct[ct.length-1].deltas.push(Y);break;case"qct":var It=gt[bt-1].x+2/3*(wt.x1-gt[bt-1].x),zt=gt[bt-1].y+2/3*(wt.y1-gt[bt-1].y),jt=wt.x+2/3*(wt.x1-wt.x),N=wt.y+2/3*(wt.y1-wt.y),at=wt.x,B=wt.y;Y=[It-gt[bt-1].x,zt-gt[bt-1].y,jt-gt[bt-1].x,N-gt[bt-1].y,at-gt[bt-1].x,B-gt[bt-1].y],ct[ct.length-1].deltas.push(Y);break;case"arc":ct.push({deltas:[],abs:[],arc:!0}),Array.isArray(ct[ct.length-1].abs)&&ct[ct.length-1].abs.push(wt)}}Z=G?null:k==="stroke"?"stroke":"fill";for(var J=!1,$=0;$<ct.length;$++)if(ct[$].arc)for(var et=ct[$].abs,vt=0;vt<et.length;vt++){var _t=et[vt];_t.type==="arc"?U.call(this,_t.x,_t.y,_t.radius,_t.startAngle,_t.endAngle,_t.counterclockwise,void 0,G,!J):W.call(this,_t.x,_t.y),J=!0}else if(ct[$].close===!0)this.pdf.internal.out("h"),J=!1;else if(ct[$].begin!==!0){var ht=ct[$].start.x,kt=ct[$].start.y;S.call(this,ct[$].deltas,ht,kt),J=!0}Z&&X.call(this,Z),G&&rt.call(this)}},K=function(k){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-Y;case"top":return k+G-Y;case"hanging":return k+G-2*Y;case"middle":return k+G/2-Y;case"ideographic":return k;case"alphabetic":default:return k}},q=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(G,Y){this.colorStops.push([G,Y])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(k,G,Y,Z,ct,gt,bt,wt,Mt){for(var It=st.call(this,Y,Z,ct,gt),zt=0;zt<It.length;zt++){var jt=It[zt];zt===0&&(Mt?M.call(this,jt.x1+k,jt.y1+G):W.call(this,jt.x1+k,jt.y1+G)),nt.call(this,k,G,jt.x2,jt.y2,jt.x3,jt.y3,jt.x4,jt.y4)}wt?rt.call(this):X.call(this,bt)},X=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},rt=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(k,G){this.pdf.internal.out(t(k)+" "+i(G)+" m")},E=function(k){var G;switch(k.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var Y=this.pdf.getTextDimensions(k.text),Z=K.call(this,k.y),ct=q.call(this,Z)-Y.h,gt=this.ctx.transform.applyToPoint(new r(k.x,Z)),bt=this.ctx.transform.decompose(),wt=new o;wt=(wt=(wt=wt.multiply(bt.translate)).multiply(bt.skew)).multiply(bt.scale);for(var Mt,It,zt,jt=this.ctx.transform.applyToRectangle(new a(k.x,Z,Y.w,Y.h)),N=wt.applyToRectangle(new a(k.x,ct,Y.w,Y.h)),at=_.call(this,N),B=[],J=0;J<at.length;J+=1)B.indexOf(at[J])===-1&&B.push(at[J]);if(C(B),this.autoPaging)for(var $=B[0],et=B[B.length-1],vt=$;vt<et+1;vt++){this.pdf.setPage(vt);var _t=vt===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[2],Ft=kt-this.margin[0],Nt=this.pdf.internal.pageSize.width-this.margin[1],Bt=Nt-this.margin[3],Jt=vt===1?0:ht+(vt-2)*Ft;if(this.ctx.clip_path.length!==0){var Zt=this.path;Mt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Mt,this.posX+this.margin[3],-1*Jt+_t),F.call(this,"fill",!0),this.path=Zt}var Qt=x([JSON.parse(JSON.stringify(N))],this.posX+this.margin[3],-Jt+_t+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(It=this.pdf.internal.getFontSize(),this.pdf.setFontSize(It*k.scale),zt=this.lineWidth,this.lineWidth=zt*k.scale);var ge=this.autoPaging!=="text";if(ge||Qt.y+Qt.h<=kt){if(ge||Qt.y>=_t&&Qt.x<=Nt){var qt=ge?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||Nt-Qt.x)[0],oi=x([JSON.parse(JSON.stringify(jt))],this.posX+this.margin[3],-Jt+_t+this.ctx.prevPageLastElemOffset)[0],ne=ge&&(vt>$||vt<et)&&b.call(this);ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,Ft,null).clip().discardPath()),this.pdf.text(qt,oi.x,oi.y,{angle:k.angle,align:G,renderingMode:k.renderingMode}),ne&&this.pdf.restoreGraphicsState()}}else Qt.y<kt&&(this.ctx.prevPageLastElemOffset+=kt-Qt.y);k.scale>=.01&&(this.pdf.setFontSize(It),this.lineWidth=zt)}else k.scale>=.01&&(It=this.pdf.internal.getFontSize(),this.pdf.setFontSize(It*k.scale),zt=this.lineWidth,this.lineWidth=zt*k.scale),this.pdf.text(k.text,gt.x+this.posX,gt.y+this.posY,{angle:k.angle,align:G,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(It),this.lineWidth=zt)},W=function(k,G,Y,Z){Y=Y||0,Z=Z||0,this.pdf.internal.out(t(k+Y)+" "+i(G+Z)+" l")},S=function(k,G,Y){return this.pdf.lines(k,G,Y,null,null)},nt=function(k,G,Y,Z,ct,gt,bt,wt){this.pdf.internal.out([e(n(Y+k)),e(s(Z+G)),e(n(ct+k)),e(s(gt+G)),e(n(bt+k)),e(s(wt+G)),"c"].join(" "))},st=function(k,G,Y,Z){for(var ct=2*Math.PI,gt=Math.PI/2;G>Y;)G-=ct;var bt=Math.abs(Y-G);bt<ct&&Z&&(bt=ct-bt);for(var wt=[],Mt=Z?-1:1,It=G;bt>1e-5;){var zt=It+Mt*Math.min(bt,gt);wt.push(tt.call(this,k,It,zt)),bt-=Math.abs(zt-It),It=zt}return wt},tt=function(k,G,Y){var Z=(Y-G)/2,ct=k*Math.cos(Z),gt=k*Math.sin(Z),bt=ct,wt=-gt,Mt=bt*bt+wt*wt,It=Mt+bt*ct+wt*gt,zt=4/3*(Math.sqrt(2*Mt*It)-It)/(bt*gt-wt*ct),jt=bt-zt*wt,N=wt+zt*bt,at=jt,B=-N,J=Z+G,$=Math.cos(J),et=Math.sin(J);return{x1:k*Math.cos(G),y1:k*Math.sin(G),x2:jt*$-N*et,y2:jt*et+N*$,x3:at*$-B*et,y3:at*et+B*$,x4:k*Math.cos(Y),y4:k*Math.sin(Y)}},dt=function(k){return 180*k/Math.PI},ot=function(k,G,Y,Z,ct,gt){var bt=k+.5*(Y-k),wt=G+.5*(Z-G),Mt=ct+.5*(Y-ct),It=gt+.5*(Z-gt),zt=Math.min(k,ct,bt,Mt),jt=Math.max(k,ct,bt,Mt),N=Math.min(G,gt,wt,It),at=Math.max(G,gt,wt,It);return new a(zt,N,jt-zt,at-N)},At=function(k,G,Y,Z,ct,gt,bt,wt){var Mt,It,zt,jt,N,at,B,J,$,et,vt,_t,ht,kt,Ft=Y-k,Nt=Z-G,Bt=ct-Y,Jt=gt-Z,Zt=bt-ct,Qt=wt-gt;for(It=0;It<41;It++)$=(B=(zt=k+(Mt=It/40)*Ft)+Mt*((N=Y+Mt*Bt)-zt))+Mt*(N+Mt*(ct+Mt*Zt-N)-B),et=(J=(jt=G+Mt*Nt)+Mt*((at=Z+Mt*Jt)-jt))+Mt*(at+Mt*(gt+Mt*Qt-at)-J),It==0?(vt=$,_t=et,ht=$,kt=et):(vt=Math.min(vt,$),_t=Math.min(_t,et),ht=Math.max(ht,$),kt=Math.max(kt,et));return new a(Math.round(vt),Math.round(_t),Math.round(ht-vt),Math.round(kt-_t))},lt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,G,Y=(k=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:G}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(le.API),function(h){var e=function(s){var r,a,o,c,d,p,g,f,v,b;for(a=[],o=0,c=(s+=r="\0\0\0\0".slice(s.length%4||4)).length;c>o;o+=4)(d=(s.charCodeAt(o)<<24)+(s.charCodeAt(o+1)<<16)+(s.charCodeAt(o+2)<<8)+s.charCodeAt(o+3))!==0?(p=(d=((d=((d=((d=(d-(b=d%85))/85)-(v=d%85))/85)-(f=d%85))/85)-(g=d%85))/85)%85,a.push(p+33,g+33,f+33,v+33,b+33)):a.push(122);return function(_,y){for(var x=y;x>0;x--)_.pop()}(a,r.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var r,a,o,c,d,p=String,g="length",f=255,v="charCodeAt",b="slice",_="replace";for(s[b](-2),s=s[b](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),o=[],c=0,d=(s+=r="uuuuu"[b](s[g]%5||5))[g];d>c;c+=5)a=52200625*(s[v](c)-33)+614125*(s[v](c+1)-33)+7225*(s[v](c+2)-33)+85*(s[v](c+3)-33)+(s[v](c+4)-33),o.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(y,x){for(var C=x;C>0;C--)y.pop()}(o,r[g]),p.fromCharCode.apply(p,o)},i=function(s){var r=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),r.test(s)===!1)return"";for(var a="",o=0;o<s.length;o+=2)a+=String.fromCharCode("0x"+(s[o]+s[o+1]));return a},n=function(s){for(var r=new Uint8Array(s.length),a=s.length;a--;)r[a]=s.charCodeAt(a);return s=(r=E0(r)).reduce(function(o,c){return o+String.fromCharCode(c)},"")};h.processDataByFilters=function(s,r){var a=0,o=s||"",c=[];for(typeof(r=r||[])=="string"&&(r=[r]),a=0;a<r.length;a+=1)switch(r[a]){case"ASCII85Decode":case"/ASCII85Decode":o=t(o),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=e(o),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=i(o),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=n(o),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+r[a]+'" is not implemented')}return{data:o,reverseChain:c.reverse().join(" ")}}}(le.API),function(h){h.loadFile=function(e,t,i){return function(n,s,r){s=s!==!1,r=typeof r=="function"?r:function(){};var a=void 0;try{a=function(o,c,d){var p=new XMLHttpRequest,g=0,f=function(v){var b=v.length,_=[],y=String.fromCharCode;for(g=0;g<b;g+=1)_.push(y(255&v.charCodeAt(g)));return _.join("")};if(p.open("GET",o,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(f(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return f(p.responseText)}(n,s,r)}catch{}return a}(e,t,i)},h.loadImageFile=h.loadFile}(le.API),function(h){function e(){return(he.html2canvas?Promise.resolve(he.html2canvas):_0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load html2canvas: "+r))}).then(function(r){return r.default?r.default:r})}function t(){return(he.DOMPurify?Promise.resolve(he.DOMPurify):_0(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load dompurify: "+r))}).then(function(r){return r.default?r.default:r})}var i=function(r){var a=ze(r);return a==="undefined"?"undefined":a==="string"||r instanceof String?"string":a==="number"||r instanceof Number?"number":a==="function"||r instanceof Function?"function":r&&r.constructor===Array?"array":r&&r.nodeType===1?"element":a==="object"?"object":"unknown"},n=function(r,a){var o=document.createElement(r);for(var c in a.className&&(o.className=a.className),a.innerHTML&&a.dompurify&&(o.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)o.style[c]=a.style[c];return o},s=function r(a){var o=Object.assign(r.convert(Promise.resolve()),JSON.parse(JSON.stringify(r.template))),c=r.convert(Promise.resolve(),o);return c=(c=c.setProgress(1,r,1,[r])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(r,a){return r.__proto__=a||s.prototype,r},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(r,a){return this.then(function(){switch(a=a||function(o){switch(i(o)){case"string":return"string";case"element":return o.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(r)){case"string":return this.then(t).then(function(o){return this.set({src:n("div",{innerHTML:r,dompurify:o})})});case"element":return this.set({src:r});case"canvas":return this.set({canvas:r});case"img":return this.set({img:r});default:return this.error("Unknown source type.")}})},s.prototype.to=function(r){switch(r){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var r={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function o(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)d!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(o(g,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(r.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:r}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var r=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(r).then(e).then(function(a){var o=Object.assign({},this.opt.html2canvas);return delete o.onrendered,a(this.prop.container,o)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var r=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(r).then(e).then(function(a){var o=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,o.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,o.context2d.posX=this.opt.x,o.context2d.posY=this.opt.y,o.context2d.margin=this.opt.margin,o.context2d.fontFaces=c,c)for(var g=0;g<c.length;++g){var f=c[g],v=f.src.find(function(b){return b.format==="truetype"});v&&o.addFont(v.url,f.ref.name,f.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,o.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var r=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=r})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(r,a,o){return(o=o||"pdf").toLowerCase()==="img"||o.toLowerCase()==="image"?this.outputImg(r,a):this.outputPdf(r,a)},s.prototype.outputPdf=function(r,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(r,a)})},s.prototype.outputImg=function(r){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(r){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+r+'" is not supported.'}})},s.prototype.save=function(r){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(r?{filename:r}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(r){if(i(r)!=="object")return this;var a=Object.keys(r||{}).map(function(o){if(o in s.template.prop)return function(){this.prop[o]=r[o]};switch(o){case"margin":return this.setMargin.bind(this,r.margin);case"jsPDF":return function(){return this.opt.jsPDF=r.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,r.pageSize);default:return function(){this.opt[o]=r[o]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(r,a){return this.then(function(){var o=r in s.template.prop?this.prop[r]:this.opt[r];return a?a(o):o})},s.prototype.setMargin=function(r){return this.then(function(){switch(i(r)){case"number":r=[r,r,r,r];case"array":if(r.length===2&&(r=[r[0],r[1],r[0],r[1]]),r.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=r}).then(this.setPageSize)},s.prototype.setPageSize=function(r){function a(o,c){return Math.floor(o*c/72*96)}return this.then(function(){(r=r||le.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(r.inner={width:r.width-this.opt.margin[1]-this.opt.margin[3],height:r.height-this.opt.margin[0]-this.opt.margin[2]},r.inner.px={width:a(r.inner.width,r.k),height:a(r.inner.height,r.k)},r.inner.ratio=r.inner.height/r.inner.width),this.prop.pageSize=r})},s.prototype.setProgress=function(r,a,o,c){return r!=null&&(this.progress.val=r),a!=null&&(this.progress.state=a),o!=null&&(this.progress.n=o),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(r,a,o,c){return this.setProgress(r?this.progress.val+r:null,a||null,o?this.progress.n+o:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(r,a){var o=this;return this.thenCore(r,a,function(c,d){return o.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return o.updateProgress(null,c),p}).then(c,d).then(function(p){return o.updateProgress(1),p})})},s.prototype.thenCore=function(r,a,o){o=o||Promise.prototype.then,r&&(r=r.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=o.call(c,r,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(r,a){return Promise.prototype.then.call(this,r,a)},s.prototype.thenList=function(r){var a=this;return r.forEach(function(o){a=a.thenCore(o)}),a},s.prototype.catch=function(r){r&&(r=r.bind(this));var a=Promise.prototype.catch.call(this,r);return s.convert(a,this)},s.prototype.catchExternal=function(r){return Promise.prototype.catch.call(this,r)},s.prototype.error=function(r){return this.then(function(){throw new Error(r)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,le.getPageSize=function(r,a,o){if(ze(r)==="object"){var c=r;r=c.orientation,a=c.unit||a,o=c.format||o}a=a||"mm",o=o||"a4",r=(""+(r||"P")).toLowerCase();var d,p=(""+o).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var f,v=0,b=0;if(g.hasOwnProperty(p))v=g[p][1]/d,b=g[p][0]/d;else try{v=o[1],b=o[0]}catch{throw new Error("Invalid format: "+o)}if(r==="p"||r==="portrait")r="p",b>v&&(f=b,b=v,v=f);else{if(r!=="l"&&r!=="landscape")throw"Invalid orientation: "+r;r="l",v>b&&(f=b,b=v,v=f)}return{width:b,height:v,unit:a,k:d,orientation:r}},h.html=function(r,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(R0):null;var o=new s(a);return a.worker?o:o.from(r).doCallback()}}(le.API),le.API.addJS=function(h){return i5=h,this.internal.events.subscribe("postPutResources",function(){Wp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Wp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),e5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+i5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Wp!==void 0&&e5!==void 0&&this.internal.out("/Names <</JavaScript "+Wp+" 0 R>>")}),this},function(h){var e;h.events.push(["postPutResources",function(){var t=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=t.outline.render().split(/\r\n/),s=0;s<n.length;s++){var r=n[s],a=i.exec(r);if(a!=null){var o=a[1];t.internal.newObjectDeferredBegin(o,!1)}t.internal.write(r)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=t.internal.newObject();d.push(p);var g=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<d.length;s++)t.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),h.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),h.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(i,n,s){var r={title:n,options:s,children:[]};return i==null&&(i=this.root),i.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(i){i.id=t.internal.newObjectDeferred();for(var n=0;n<i.children.length;n++)this.genIds_r(i.children[n])},t.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},t.outline.renderItems=function(i){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var r=i.children[s];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var a=this.count=this.count_r({count:0},r);if(a>0&&this.line("/Count "+a),r.options&&r.options.pageNumber){var o=t.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},t.outline.line=function(i){this.ctx.val+=i+`\r
`},t.outline.makeRef=function(i){return i.id+" 0 R"},t.outline.makeString=function(i){return"("+t.internal.pdfEscape(i)+")"},t.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(i,n){for(var s=0;s<n.children.length;s++)i.count++,this.count_r(i,n.children[s]);return i.count}}])}(le.API),function(h){var e=[192,193,194,195,196,197,198,199];h.processJPEG=function(t,i,n,s,r,a){var o,c=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=r||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(o=function(p){for(var g,f=256*p.charCodeAt(4)+p.charCodeAt(5),v=p.length,b={width:0,height:0,numcomponents:1},_=4;_<v;_+=2){if(_+=f,e.indexOf(p.charCodeAt(_+1))!==-1){g=256*p.charCodeAt(_+5)+p.charCodeAt(_+6),b={width:256*p.charCodeAt(_+7)+p.charCodeAt(_+8),height:g,numcomponents:p.charCodeAt(_+9)};break}f=256*p.charCodeAt(_+2)+p.charCodeAt(_+3)}return b}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:t,width:o.width,height:o.height,colorSpace:a,bitsPerComponent:8,filter:c,index:i,alias:n}}return d}}(le.API);var $l,Gp,n5,s5,r5,bw=function(){var h,e,t;function i(s){var r,a,o,c,d,p,g,f,v,b,_,y,x,C;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(r=this.readUInt32(),v=(function(){var I,F;for(F=[],I=0;I<4;++I)F.push(String.fromCharCode(this.data[this.pos++]));return F}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(r);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,r-=4),s=(p!=null?p.data:void 0)||this.imgData,y=0;0<=r?y<r:y>r;0<=r?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(o=this.palette.length/3,this.transparency.indexed=this.read(r),this.transparency.indexed.length>o)throw new Error("More transparent colors than palette size");if((b=o-this.transparency.indexed.length)>0)for(x=0;0<=b?x<b:x>b;0<=b?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(r)[0];break;case 2:this.transparency.rgb=this.read(r)}break;case"tEXt":g=(_=this.read(r)).indexOf(0),f=String.fromCharCode.apply(String,_.slice(0,g)),this.text[f]=String.fromCharCode.apply(String,_.slice(g+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=r}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var r,a;for(a=[],r=0;0<=s?r<s:r>s;0<=s?++r:--r)a.push(this.data[this.pos++]);return a},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var r=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*r),o=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,g,f,v){var b,_,y,x,C,I,F,K,q,U,X,rt,M,E,W,S,nt,st,tt,dt,ot,At=Math.ceil((c.width-p)/f),lt=Math.ceil((c.height-g)/v),k=c.width==At&&c.height==lt;for(E=r*At,rt=k?a:new Uint8Array(E*lt),I=s.length,M=0,_=0;M<lt&&o<I;){switch(s[o++]){case 0:for(x=nt=0;nt<E;x=nt+=1)rt[_++]=s[o++];break;case 1:for(x=st=0;st<E;x=st+=1)b=s[o++],C=x<r?0:rt[_-r],rt[_++]=(b+C)%256;break;case 2:for(x=tt=0;tt<E;x=tt+=1)b=s[o++],y=(x-x%r)/r,W=M&&rt[(M-1)*E+y*r+x%r],rt[_++]=(W+b)%256;break;case 3:for(x=dt=0;dt<E;x=dt+=1)b=s[o++],y=(x-x%r)/r,C=x<r?0:rt[_-r],W=M&&rt[(M-1)*E+y*r+x%r],rt[_++]=(b+Math.floor((C+W)/2))%256;break;case 4:for(x=ot=0;ot<E;x=ot+=1)b=s[o++],y=(x-x%r)/r,C=x<r?0:rt[_-r],M===0?W=S=0:(W=rt[(M-1)*E+y*r+x%r],S=y&&rt[(M-1)*E+(y-1)*r+x%r]),F=C+W-S,K=Math.abs(F-C),U=Math.abs(F-W),X=Math.abs(F-S),q=K<=U&&K<=X?C:U<=X?W:S,rt[_++]=(b+q)%256;break;default:throw new Error("Invalid filter algorithm: "+s[o-1])}if(!k){var G=((g+M*v)*c.width+p)*r,Y=M*E;for(x=0;x<At;x+=1){for(var Z=0;Z<r;Z+=1)a[G++]=rt[Y++];G+=(f-1)*r}}M++}}return s=Yy(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},i.prototype.decodePalette=function(){var s,r,a,o,c,d,p,g,f;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),o=0,s=0,r=p=0,g=a.length;p<g;r=p+=3)c[o++]=a[r],c[o++]=a[r+1],c[o++]=a[r+2],c[o++]=(f=d[s++])!=null?f:255;return c},i.prototype.copyToImageData=function(s,r){var a,o,c,d,p,g,f,v,b,_,y;if(o=this.colors,b=null,a=this.hasAlphaChannel,this.palette.length&&(b=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),o=4,a=!0),v=(c=s.data||s).length,p=b||r,d=g=0,o===1)for(;d<v;)f=b?4*r[d/4]:g,_=p[f++],c[d++]=_,c[d++]=_,c[d++]=_,c[d++]=a?p[f++]:255,g=f;else for(;d<v;)f=b?4*r[d/4]:g,c[d++]=p[f++],c[d++]=p[f++],c[d++]=p[f++],c[d++]=a?p[f++]:255,g=f},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var n=function(){if(Object.prototype.toString.call(he)==="[object Window]"){try{e=he.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return n(),h=function(s){var r;if(n()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(r=new Image).src=e.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var r,a,o,c,d,p,g,f;if(this.animation){for(f=[],a=d=0,p=(g=this.animation.frames).length;d<p;a=++d)r=g[a],o=s.createImageData(r.width,r.height),c=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(o,c),r.imageData=o,f.push(r.image=h(o));return f}},i.prototype.renderFrame=function(s,r){var a,o,c;return a=(o=this.animation.frames)[r],c=o[r-1],r===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},i.prototype.animate=function(s){var r,a,o,c,d,p,g=this;return a=0,p=this.animation,c=p.numFrames,o=p.frames,d=p.numPlays,(r=function(){var f,v;if(f=a++%c,v=o[f],g.renderFrame(s,f),c>1&&a/c<d)return g.animation._timeout=setTimeout(r,v.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var r,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,r=s.getContext("2d"),this.animation?(this.decodeFrames(r),this.animate(r)):(a=r.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),r.putImageData(a,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function vw(h){var e=0;if(h[e++]!==71||h[e++]!==73||h[e++]!==70||h[e++]!==56||(h[e++]+1&253)!=56||h[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=h[e++]|h[e++]<<8,i=h[e++]|h[e++]<<8,n=h[e++],s=n>>7,r=1<<(7&n)+1;h[e++],h[e++];var a=null,o=null;s&&(a=e,o=r,e+=3*r);var c=!0,d=[],p=0,g=null,f=0,v=null;for(this.width=t,this.height=i;c&&e<h.length;)switch(h[e++]){case 33:switch(h[e++]){case 255:if(h[e]!==11||h[e+1]==78&&h[e+2]==69&&h[e+3]==84&&h[e+4]==83&&h[e+5]==67&&h[e+6]==65&&h[e+7]==80&&h[e+8]==69&&h[e+9]==50&&h[e+10]==46&&h[e+11]==48&&h[e+12]==3&&h[e+13]==1&&h[e+16]==0)e+=14,v=h[e++]|h[e++]<<8,e++;else for(e+=12;;){if(!((M=h[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(h[e++]!==4||h[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=h[e++];p=h[e++]|h[e++]<<8,g=h[e++],!(1&b)&&(g=null),f=b>>2&7,e++;break;case 254:for(;;){if(!((M=h[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+h[e-1].toString(16))}break;case 44:var _=h[e++]|h[e++]<<8,y=h[e++]|h[e++]<<8,x=h[e++]|h[e++]<<8,C=h[e++]|h[e++]<<8,I=h[e++],F=I>>6&1,K=1<<(7&I)+1,q=a,U=o,X=!1;I>>7&&(X=!0,q=e,U=K,e+=3*K);var rt=e;for(e++;;){var M;if(!((M=h[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}d.push({x:_,y,width:x,height:C,has_local_palette:X,palette_offset:q,palette_size:U,data_offset:rt,data_length:e-rt,transparent_index:g,interlaced:!!F,delay:p,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+h[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return v},this.frameInfo=function(E){if(E<0||E>=d.length)throw new Error("Frame index out of range.");return d[E]},this.decodeAndBlitFrameBGRA=function(E,W){var S=this.frameInfo(E),nt=S.width*S.height,st=new Uint8Array(nt);a5(h,S.data_offset,st,nt);var tt=S.palette_offset,dt=S.transparent_index;dt===null&&(dt=256);var ot=S.width,At=t-ot,lt=ot,k=4*(S.y*t+S.x),G=4*((S.y+S.height)*t+S.x),Y=k,Z=4*At;S.interlaced===!0&&(Z+=4*t*7);for(var ct=8,gt=0,bt=st.length;gt<bt;++gt){var wt=st[gt];if(lt===0&&(lt=ot,(Y+=Z)>=G&&(Z=4*At+4*t*(ct-1),Y=k+(ot+At)*(ct<<1),ct>>=1)),wt===dt)Y+=4;else{var Mt=h[tt+3*wt],It=h[tt+3*wt+1],zt=h[tt+3*wt+2];W[Y++]=zt,W[Y++]=It,W[Y++]=Mt,W[Y++]=255}--lt}},this.decodeAndBlitFrameRGBA=function(E,W){var S=this.frameInfo(E),nt=S.width*S.height,st=new Uint8Array(nt);a5(h,S.data_offset,st,nt);var tt=S.palette_offset,dt=S.transparent_index;dt===null&&(dt=256);var ot=S.width,At=t-ot,lt=ot,k=4*(S.y*t+S.x),G=4*((S.y+S.height)*t+S.x),Y=k,Z=4*At;S.interlaced===!0&&(Z+=4*t*7);for(var ct=8,gt=0,bt=st.length;gt<bt;++gt){var wt=st[gt];if(lt===0&&(lt=ot,(Y+=Z)>=G&&(Z=4*At+4*t*(ct-1),Y=k+(ot+At)*(ct<<1),ct>>=1)),wt===dt)Y+=4;else{var Mt=h[tt+3*wt],It=h[tt+3*wt+1],zt=h[tt+3*wt+2];W[Y++]=Mt,W[Y++]=It,W[Y++]=zt,W[Y++]=255}--lt}}}function a5(h,e,t,i){for(var n=h[e++],s=1<<n,r=s+1,a=r+1,o=n+1,c=(1<<o)-1,d=0,p=0,g=0,f=h[e++],v=new Int32Array(4096),b=null;;){for(;d<16&&f!==0;)p|=h[e++]<<d,d+=8,f===1?f=h[e++]:--f;if(d<o)break;var _=p&c;if(p>>=o,d-=o,_!==s){if(_===r)break;for(var y=_<a?_:b,x=0,C=y;C>s;)C=v[C]>>8,++x;var I=C;if(g+x+(y!==_?1:0)>i)return void Ve.log("Warning, gif stream longer than expected.");t[g++]=I;var F=g+=x;for(y!==_&&(t[g++]=I),C=y;x--;)C=v[C],t[--F]=255&C,C>>=8;b!==null&&a<4096&&(v[a++]=b<<8|I,a>=c+1&&o<12&&(++o,c=c<<1|1)),b=_}else a=r+1,c=(1<<(o=n+1))-1,b=null}return g!==i&&Ve.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function p0(h){var e,t,i,n,s,r=Math.floor,a=new Array(64),o=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),f=new Array(64),v=new Array(64),b=[],_=0,y=7,x=new Array(64),C=new Array(64),I=new Array(64),F=new Array(256),K=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],rt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],nt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function st(k,G){for(var Y=0,Z=0,ct=new Array,gt=1;gt<=16;gt++){for(var bt=1;bt<=k[gt];bt++)ct[G[Z]]=[],ct[G[Z]][0]=Y,ct[G[Z]][1]=gt,Z++,Y++;Y*=2}return ct}function tt(k){for(var G=k[0],Y=k[1]-1;Y>=0;)G&1<<Y&&(_|=1<<y),Y--,--y<0&&(_==255?(dt(255),dt(0)):dt(_),y=7,_=0)}function dt(k){b.push(k)}function ot(k){dt(k>>8&255),dt(255&k)}function At(k,G,Y,Z,ct){for(var gt,bt=ct[0],wt=ct[240],Mt=function(et,vt){var _t,ht,kt,Ft,Nt,Bt,Jt,Zt,Qt,ge,qt=0;for(Qt=0;Qt<8;++Qt){_t=et[qt],ht=et[qt+1],kt=et[qt+2],Ft=et[qt+3],Nt=et[qt+4],Bt=et[qt+5],Jt=et[qt+6];var oi=_t+(Zt=et[qt+7]),ne=_t-Zt,tn=ht+Jt,Te=ht-Jt,ke=kt+Bt,Vn=kt-Bt,Pe=Ft+Nt,Gr=Ft-Nt,Qe=oi+Pe,In=oi-Pe,vn=tn+ke,We=tn-ke;et[qt]=Qe+vn,et[qt+4]=Qe-vn;var de=.707106781*(We+In);et[qt+2]=In+de,et[qt+6]=In-de;var Me=.382683433*((Qe=Gr+Vn)-(We=Te+ne)),qo=.5411961*Qe+Me,Gi=1.306562965*We+Me,ur=.707106781*(vn=Vn+Te),dr=ne+ur,oe=ne-ur;et[qt+5]=oe+qo,et[qt+3]=oe-qo,et[qt+1]=dr+Gi,et[qt+7]=dr-Gi,qt+=8}for(qt=0,Qt=0;Qt<8;++Qt){_t=et[qt],ht=et[qt+8],kt=et[qt+16],Ft=et[qt+24],Nt=et[qt+32],Bt=et[qt+40],Jt=et[qt+48];var Fs=_t+(Zt=et[qt+56]),fr=_t-Zt,Tn=ht+Jt,Ci=ht-Jt,Ai=kt+Bt,$n=kt-Bt,bl=Ft+Nt,Vr=Ft-Nt,Ms=Fs+bl,Ds=Fs-bl,Os=Tn+Ai,pr=Tn-Ai;et[qt]=Ms+Os,et[qt+32]=Ms-Os;var gs=.707106781*(pr+Ds);et[qt+16]=Ds+gs,et[qt+48]=Ds-gs;var gr=.382683433*((Ms=Vr+$n)-(pr=Ci+fr)),Uo=.5411961*Ms+gr,vl=1.306562965*pr+gr,yl=.707106781*(Os=$n+Ci),wl=fr+yl,Al=fr-yl;et[qt+40]=Al+Uo,et[qt+24]=Al-Uo,et[qt+8]=wl+vl,et[qt+56]=wl-vl,qt++}for(Qt=0;Qt<64;++Qt)ge=et[Qt]*vt[Qt],f[Qt]=ge>0?ge+.5|0:ge-.5|0;return f}(k,G),It=0;It<64;++It)v[q[It]]=Mt[It];var zt=v[0]-Y;Y=v[0],zt==0?tt(Z[0]):(tt(Z[g[gt=32767+zt]]),tt(p[gt]));for(var jt=63;jt>0&&v[jt]==0;)jt--;if(jt==0)return tt(bt),Y;for(var N,at=1;at<=jt;){for(var B=at;v[at]==0&&at<=jt;)++at;var J=at-B;if(J>=16){N=J>>4;for(var $=1;$<=N;++$)tt(wt);J&=15}gt=32767+v[at],tt(ct[(J<<4)+g[gt]]),tt(p[gt]),at++}return jt!=63&&tt(bt),Y}function lt(k){k=Math.min(Math.max(k,1),100),s!=k&&(function(G){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var ct=r((Y[Z]*G+50)/100);ct=Math.min(Math.max(ct,1),255),a[q[Z]]=ct}for(var gt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],bt=0;bt<64;bt++){var wt=r((gt[bt]*G+50)/100);wt=Math.min(Math.max(wt,1),255),o[q[bt]]=wt}for(var Mt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],It=0,zt=0;zt<8;zt++)for(var jt=0;jt<8;jt++)c[It]=1/(a[q[It]]*Mt[zt]*Mt[jt]*8),d[It]=1/(o[q[It]]*Mt[zt]*Mt[jt]*8),It++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),s=k)}this.encode=function(k,G){G&&lt(G),b=new Array,_=0,y=7,ot(65496),ot(65504),ot(16),dt(74),dt(70),dt(73),dt(70),dt(0),dt(1),dt(1),dt(0),ot(1),ot(1),dt(0),dt(0),function(){ot(65499),ot(132),dt(0);for(var ht=0;ht<64;ht++)dt(a[ht]);dt(1);for(var kt=0;kt<64;kt++)dt(o[kt])}(),function(ht,kt){ot(65472),ot(17),dt(8),ot(kt),ot(ht),dt(3),dt(1),dt(17),dt(0),dt(2),dt(17),dt(1),dt(3),dt(17),dt(1)}(k.width,k.height),function(){ot(65476),ot(418),dt(0);for(var ht=0;ht<16;ht++)dt(U[ht+1]);for(var kt=0;kt<=11;kt++)dt(X[kt]);dt(16);for(var Ft=0;Ft<16;Ft++)dt(rt[Ft+1]);for(var Nt=0;Nt<=161;Nt++)dt(M[Nt]);dt(1);for(var Bt=0;Bt<16;Bt++)dt(E[Bt+1]);for(var Jt=0;Jt<=11;Jt++)dt(W[Jt]);dt(17);for(var Zt=0;Zt<16;Zt++)dt(S[Zt+1]);for(var Qt=0;Qt<=161;Qt++)dt(nt[Qt])}(),ot(65498),ot(12),dt(3),dt(1),dt(0),dt(2),dt(17),dt(3),dt(17),dt(0),dt(63),dt(0);var Y=0,Z=0,ct=0;_=0,y=7,this.encode.displayName="_encode_";for(var gt,bt,wt,Mt,It,zt,jt,N,at,B=k.data,J=k.width,$=k.height,et=4*J,vt=0;vt<$;){for(gt=0;gt<et;){for(It=et*vt+gt,jt=-1,N=0,at=0;at<64;at++)zt=It+(N=at>>3)*et+(jt=4*(7&at)),vt+N>=$&&(zt-=et*(vt+1+N-$)),gt+jt>=et&&(zt-=gt+jt-et+4),bt=B[zt++],wt=B[zt++],Mt=B[zt++],x[at]=(K[bt]+K[wt+256>>0]+K[Mt+512>>0]>>16)-128,C[at]=(K[bt+768>>0]+K[wt+1024>>0]+K[Mt+1280>>0]>>16)-128,I[at]=(K[bt+1280>>0]+K[wt+1536>>0]+K[Mt+1792>>0]>>16)-128;Y=At(x,c,Y,e,i),Z=At(C,d,Z,t,n),ct=At(I,d,ct,t,n),gt+=32}vt+=8}if(y>=0){var _t=[];_t[1]=y+1,_t[0]=(1<<y+1)-1,tt(_t)}return ot(65497),new Uint8Array(b)},h=h||50,function(){for(var k=String.fromCharCode,G=0;G<256;G++)F[G]=k(G)}(),e=st(U,X),t=st(E,W),i=st(rt,M),n=st(S,nt),function(){for(var k=1,G=2,Y=1;Y<=15;Y++){for(var Z=k;Z<G;Z++)g[32767+Z]=Y,p[32767+Z]=[],p[32767+Z][1]=Y,p[32767+Z][0]=Z;for(var ct=-(G-1);ct<=-k;ct++)g[32767+ct]=Y,p[32767+ct]=[],p[32767+ct][1]=Y,p[32767+ct][0]=G-1+ct;k<<=1,G<<=1}}(),function(){for(var k=0;k<256;k++)K[k]=19595*k,K[k+256>>0]=38470*k,K[k+512>>0]=7471*k+32768,K[k+768>>0]=-11059*k,K[k+1024>>0]=-21709*k,K[k+1280>>0]=32768*k+8421375,K[k+1536>>0]=-27439*k,K[k+1792>>0]=-5329*k}(),lt(h)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ws(h,e){if(this.pos=0,this.buffer=h,this.datav=new DataView(h.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function o5(h){function e(U){if(!U)throw Error("assert :P")}function t(U,X,rt){for(var M=0;4>M;M++)if(U[X+M]!=rt.charCodeAt(M))return!0;return!1}function i(U,X,rt,M,E){for(var W=0;W<E;W++)U[X+W]=rt[M+W]}function n(U,X,rt,M){for(var E=0;E<M;E++)U[X+E]=rt}function s(U){return new Int32Array(U)}function r(U,X){for(var rt=[],M=0;M<U;M++)rt.push(new X);return rt}function a(U,X){var rt=[];return function M(E,W,S){for(var nt=S[W],st=0;st<nt&&(E.push(S.length>W+1?[]:new X),!(S.length<W+1));st++)M(E[st],W+1,S)}(rt,0,U),rt}var o=function(){var U=this;function X(u,m){for(var A=1<<m-1>>>0;u&A;)A>>>=1;return A?(u&A-1)+A:u}function rt(u,m,A,L,T){e(!(L%A));do u[m+(L-=A)]=T;while(0<L)}function M(u,m,A,L,T){if(e(2328>=T),512>=T)var D=s(512);else if((D=s(T))==null)return 0;return function(j,H,V,Q,ft,St){var Lt,yt,Rt=H,Et=1<<V,pt=s(16),mt=s(16);for(e(ft!=0),e(Q!=null),e(j!=null),e(0<V),yt=0;yt<ft;++yt){if(15<Q[yt])return 0;++pt[Q[yt]]}if(pt[0]==ft)return 0;for(mt[1]=0,Lt=1;15>Lt;++Lt){if(pt[Lt]>1<<Lt)return 0;mt[Lt+1]=mt[Lt]+pt[Lt]}for(yt=0;yt<ft;++yt)Lt=Q[yt],0<Q[yt]&&(St[mt[Lt]++]=yt);if(mt[15]==1)return(Q=new E).g=0,Q.value=St[0],rt(j,Rt,1,Et,Q),Et;var Pt,Dt=-1,Tt=Et-1,Vt=0,Ut=1,se=1,Wt=1<<V;for(yt=0,Lt=1,ft=2;Lt<=V;++Lt,ft<<=1){if(Ut+=se<<=1,0>(se-=pt[Lt]))return 0;for(;0<pt[Lt];--pt[Lt])(Q=new E).g=Lt,Q.value=St[yt++],rt(j,Rt+Vt,ft,Wt,Q),Vt=X(Vt,Lt)}for(Lt=V+1,ft=2;15>=Lt;++Lt,ft<<=1){if(Ut+=se<<=1,0>(se-=pt[Lt]))return 0;for(;0<pt[Lt];--pt[Lt]){if(Q=new E,(Vt&Tt)!=Dt){for(Rt+=Wt,Pt=1<<(Dt=Lt)-V;15>Dt&&!(0>=(Pt-=pt[Dt]));)++Dt,Pt<<=1;Et+=Wt=1<<(Pt=Dt-V),j[H+(Dt=Vt&Tt)].g=Pt+V,j[H+Dt].value=Rt-H-Dt}Q.g=Lt-V,Q.value=St[yt++],rt(j,Rt+(Vt>>V),ft,Wt,Q),Vt=X(Vt,Lt)}}return Ut!=2*mt[15]-1?0:Et}(u,m,A,L,T,D)}function E(){this.value=this.g=0}function W(){this.value=this.g=0}function S(){this.G=r(5,E),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=r(Vi,W)}function nt(u,m,A,L){e(u!=null),e(m!=null),e(2147483648>L),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=m,u.pa=A,u.Jd=m,u.Yc=A+L,u.Zc=4<=L?A+L-4+1:A,gt(u)}function st(u,m){for(var A=0;0<m--;)A|=wt(u,128)<<m;return A}function tt(u,m){var A=st(u,m);return bt(u)?-A:A}function dt(u,m,A,L){var T,D=0;for(e(u!=null),e(m!=null),e(4294967288>L),u.Sb=L,u.Ra=0,u.u=0,u.h=0,4<L&&(L=4),T=0;T<L;++T)D+=m[A+T]<<8*T;u.Ra=D,u.bb=L,u.oa=m,u.pa=A}function ot(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Dl-8>>>0,++u.bb,u.u-=8;Y(u)&&(u.h=1,u.u=0)}function At(u,m){if(e(0<=m),!u.h&&m<=Ml){var A=G(u)&Fl[m];return u.u+=m,ot(u),A}return u.h=1,u.u=0}function lt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function k(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(u){return u.Ra>>>(u.u&Dl-1)>>>0}function Y(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Dl}function Z(u,m){u.u=m,u.h=Y(u)}function ct(u){u.u>=Mu&&(e(u.u>=Mu),ot(u))}function gt(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function bt(u){return st(u,1)}function wt(u,m){var A=u.Ca;0>u.b&&gt(u);var L=u.b,T=A*m>>>8,D=(u.I>>>L>T)+0;for(D?(A-=T,u.I-=T+1<<L>>>0):A=T+1,L=A,T=0;256<=L;)T+=8,L>>=8;return L=7^T+Fn[L],u.b-=L,u.Ca=(A<<L)-1,D}function Mt(u,m,A){u[m+0]=A>>24&255,u[m+1]=A>>16&255,u[m+2]=A>>8&255,u[m+3]=A>>0&255}function It(u,m){return u[m+0]<<0|u[m+1]<<8}function zt(u,m){return It(u,m)|u[m+2]<<16}function jt(u,m){return It(u,m)|It(u,m+2)<<16}function N(u,m){var A=1<<m;return e(u!=null),e(0<m),u.X=s(A),u.X==null?0:(u.Mb=32-m,u.Xa=m,1)}function at(u,m){e(u!=null),e(m!=null),e(u.Xa==m.Xa),i(m.X,0,u.X,0,1<<m.Xa)}function B(){this.X=[],this.Xa=this.Mb=0}function J(u,m,A,L){e(A!=null),e(L!=null);var T=A[0],D=L[0];return T==0&&(T=(u*D+m/2)/m),D==0&&(D=(m*T+u/2)/u),0>=T||0>=D?0:(A[0]=T,L[0]=D,1)}function $(u,m){return u+(1<<m)-1>>>m}function et(u,m){return((4278255360&u)+(4278255360&m)>>>0&4278255360)+((16711935&u)+(16711935&m)>>>0&16711935)>>>0}function vt(u,m){U[m]=function(A,L,T,D,j,H,V){var Q;for(Q=0;Q<j;++Q){var ft=U[u](H[V+Q-1],T,D+Q);H[V+Q]=et(A[L+Q],ft)}}}function _t(){this.ud=this.hd=this.jd=0}function ht(u,m){return((4278124286&(u^m))>>>1)+(u&m)>>>0}function kt(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Ft(u,m){return kt(u+(u-m+.5>>1))}function Nt(u,m,A){return Math.abs(m-A)-Math.abs(u-A)}function Bt(u,m,A,L,T,D,j){for(L=D[j-1],A=0;A<T;++A)D[j+A]=L=et(u[m+A],L)}function Jt(u,m,A,L,T){var D;for(D=0;D<A;++D){var j=u[m+D],H=j>>8&255,V=16711935&(V=(V=16711935&j)+((H<<16)+H));L[T+D]=(4278255360&j)+V>>>0}}function Zt(u,m){m.jd=u>>0&255,m.hd=u>>8&255,m.ud=u>>16&255}function Qt(u,m,A,L,T,D){var j;for(j=0;j<L;++j){var H=m[A+j],V=H>>>8,Q=H,ft=255&(ft=(ft=H>>>16)+((u.jd<<24>>24)*(V<<24>>24)>>>5));Q=255&(Q=(Q=Q+((u.hd<<24>>24)*(V<<24>>24)>>>5))+((u.ud<<24>>24)*(ft<<24>>24)>>>5)),T[D+j]=(4278255360&H)+(ft<<16)+Q}}function ge(u,m,A,L,T){U[m]=function(D,j,H,V,Q,ft,St,Lt,yt){for(V=St;V<Lt;++V)for(St=0;St<yt;++St)Q[ft++]=T(H[L(D[j++])])},U[u]=function(D,j,H,V,Q,ft,St){var Lt=8>>D.b,yt=D.Ea,Rt=D.K[0],Et=D.w;if(8>Lt)for(D=(1<<D.b)-1,Et=(1<<Lt)-1;j<H;++j){var pt,mt=0;for(pt=0;pt<yt;++pt)pt&D||(mt=L(V[Q++])),ft[St++]=T(Rt[mt&Et]),mt>>=Lt}else U["VP8LMapColor"+A](V,Q,Rt,Et,ft,St,j,H,yt)}}function qt(u,m,A,L,T){for(A=m+A;m<A;){var D=u[m++];L[T++]=D>>16&255,L[T++]=D>>8&255,L[T++]=D>>0&255}}function oi(u,m,A,L,T){for(A=m+A;m<A;){var D=u[m++];L[T++]=D>>16&255,L[T++]=D>>8&255,L[T++]=D>>0&255,L[T++]=D>>24&255}}function ne(u,m,A,L,T){for(A=m+A;m<A;){var D=(j=u[m++])>>16&240|j>>12&15,j=j>>0&240|j>>28&15;L[T++]=D,L[T++]=j}}function tn(u,m,A,L,T){for(A=m+A;m<A;){var D=(j=u[m++])>>16&248|j>>13&7,j=j>>5&224|j>>3&31;L[T++]=D,L[T++]=j}}function Te(u,m,A,L,T){for(A=m+A;m<A;){var D=u[m++];L[T++]=D>>0&255,L[T++]=D>>8&255,L[T++]=D>>16&255}}function ke(u,m,A,L,T,D){if(D==0)for(A=m+A;m<A;)Mt(L,((D=u[m++])[0]>>24|D[1]>>8&65280|D[2]<<8&16711680|D[3]<<24)>>>0),T+=32;else i(L,T,u,m,A)}function Vn(u,m){U[m][0]=U[u+"0"],U[m][1]=U[u+"1"],U[m][2]=U[u+"2"],U[m][3]=U[u+"3"],U[m][4]=U[u+"4"],U[m][5]=U[u+"5"],U[m][6]=U[u+"6"],U[m][7]=U[u+"7"],U[m][8]=U[u+"8"],U[m][9]=U[u+"9"],U[m][10]=U[u+"10"],U[m][11]=U[u+"11"],U[m][12]=U[u+"12"],U[m][13]=U[u+"13"],U[m][14]=U[u+"0"],U[m][15]=U[u+"0"]}function Pe(u){return u==Wg||u==Gg||u==Ep||u==Vg}function Gr(){this.eb=[],this.size=this.A=this.fb=0}function Qe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function In(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Gr,this.f.kb=new Qe,this.sd=null}function vn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function We(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function de(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Me(u,m){var A=u.T,L=m.ba.f.RGBA,T=L.eb,D=L.fb+u.ka*L.A,j=As[m.ba.S],H=u.y,V=u.O,Q=u.f,ft=u.N,St=u.ea,Lt=u.W,yt=m.cc,Rt=m.dc,Et=m.Mc,pt=m.Nc,mt=u.ka,Pt=u.ka+u.T,Dt=u.U,Tt=Dt+1>>1;for(mt==0?j(H,V,null,null,Q,ft,St,Lt,Q,ft,St,Lt,T,D,null,null,Dt):(j(m.ec,m.fc,H,V,yt,Rt,Et,pt,Q,ft,St,Lt,T,D-L.A,T,D,Dt),++A);mt+2<Pt;mt+=2)yt=Q,Rt=ft,Et=St,pt=Lt,ft+=u.Rc,Lt+=u.Rc,D+=2*L.A,j(H,(V+=2*u.fa)-u.fa,H,V,yt,Rt,Et,pt,Q,ft,St,Lt,T,D-L.A,T,D,Dt);return V+=u.fa,u.j+Pt<u.o?(i(m.ec,m.fc,H,V,Dt),i(m.cc,m.dc,Q,ft,Tt),i(m.Mc,m.Nc,St,Lt,Tt),A--):1&Pt||j(H,V,null,null,Q,ft,St,Lt,Q,ft,St,Lt,T,D+L.A,null,null,Dt),A}function qo(u,m,A){var L=u.F,T=[u.J];if(L!=null){var D=u.U,j=m.ba.S,H=j==kp||j==Ep;m=m.ba.f.RGBA;var V=[0],Q=u.ka;V[0]=u.T,u.Kb&&(Q==0?--V[0]:(--Q,T[0]-=u.width),u.j+u.ka+u.T==u.o&&(V[0]=u.o-u.j-Q));var ft=m.eb;Q=m.fb+Q*m.A,u=Ye(L,T[0],u.width,D,V,ft,Q+(H?0:3),m.A),e(A==V),u&&Pe(j)&&ys(ft,Q,H,D,V,m.A)}return 0}function Gi(u){var m=u.ma,A=m.ba.S,L=11>A,T=A==Sp||A==Lp||A==kp||A==Hg||A==12||Pe(A);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Ru(m.Oa,u,T?11:12))return 0;if(T&&Pe(A)&&Ot(),u.da)alert("todo:use_scaling");else{if(L){if(m.Ib=de,u.Kb){if(A=u.U+1>>1,m.memory=s(u.U+2*A),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+u.U,m.Mc=m.cc,m.Nc=m.dc+A,m.Ib=Me,Ot()}}else alert("todo:EmitYUV");T&&(m.Jb=qo,L&&xt())}if(L&&!xm){for(u=0;256>u;++u)fy[u]=89858*(u-128)+Np>>Cp,my[u]=-22014*(u-128)+Np,gy[u]=-45773*(u-128),py[u]=113618*(u-128)+Np>>Cp;for(u=Uu;u<Yg;++u)m=76283*(u-16)+Np>>Cp,by[u-Uu]=Xn(m,255),vy[u-Uu]=Xn(m+8>>4,15);xm=1}return 1}function ur(u){var m=u.ma,A=u.U,L=u.T;return e(!(1&u.ka)),0>=A||0>=L?0:(A=m.Ib(u,m),m.Jb!=null&&m.Jb(u,m,A),m.Dc+=A,1)}function dr(u){u.ma.memory=null}function oe(u,m,A,L){return At(u,8)!=47?0:(m[0]=At(u,14)+1,A[0]=At(u,14)+1,L[0]=At(u,1),At(u,3)!=0?0:!u.h)}function Fs(u,m){if(4>u)return u+1;var A=u-2>>1;return(2+(1&u)<<A)+At(m,A)+1}function fr(u,m){return 120<m?m-120:1<=(A=((A=Qv[m-1])>>4)*u+(8-(15&A)))?A:1;var A}function Tn(u,m,A){var L=G(A),T=u[m+=255&L].g-8;return 0<T&&(Z(A,A.u+8),L=G(A),m+=u[m].value,m+=L&(1<<T)-1),Z(A,A.u+u[m].g),u[m].value}function Ci(u,m,A){return A.g+=u.g,A.value+=u.value<<m>>>0,e(8>=A.g),u.g}function Ai(u,m,A){var L=u.xc;return e((m=L==0?0:u.vc[u.md*(A>>L)+(m>>L)])<u.Wb),u.Ya[m]}function $n(u,m,A,L){var T=u.ab,D=u.c*m,j=u.C;m=j+m;var H=A,V=L;for(L=u.Ta,A=u.Ua;0<T--;){var Q=u.gc[T],ft=j,St=m,Lt=H,yt=V,Rt=(V=L,H=A,Q.Ea);switch(e(ft<St),e(St<=Q.nc),Q.hc){case 2:bp(Lt,yt,(St-ft)*Rt,V,H);break;case 0:var Et=ft,pt=St,mt=V,Pt=H,Dt=(Wt=Q).Ea;Et==0&&(qg(Lt,yt,null,null,1,mt,Pt),Bt(Lt,yt+1,0,0,Dt-1,mt,Pt+1),yt+=Dt,Pt+=Dt,++Et);for(var Tt=1<<Wt.b,Vt=Tt-1,Ut=$(Dt,Wt.b),se=Wt.K,Wt=Wt.w+(Et>>Wt.b)*Ut;Et<pt;){var Re=se,De=Wt,Ce=1;for(Du(Lt,yt,mt,Pt-Dt,1,mt,Pt);Ce<Dt;){var Se=(Ce&~Vt)+Tt;Se>Dt&&(Se=Dt),(0,qa[Re[De++]>>8&15])(Lt,yt+ +Ce,mt,Pt+Ce-Dt,Se-Ce,mt,Pt+Ce),Ce=Se}yt+=Dt,Pt+=Dt,++Et&Vt||(Wt+=Ut)}St!=Q.nc&&i(V,H-Rt,V,H+(St-ft-1)*Rt,Rt);break;case 1:for(Rt=Lt,pt=yt,Dt=(Lt=Q.Ea)-(Pt=Lt&~(mt=(yt=1<<Q.b)-1)),Et=$(Lt,Q.b),Tt=Q.K,Q=Q.w+(ft>>Q.b)*Et;ft<St;){for(Vt=Tt,Ut=Q,se=new _t,Wt=pt+Pt,Re=pt+Lt;pt<Wt;)Zt(Vt[Ut++],se),$o(se,Rt,pt,yt,V,H),pt+=yt,H+=yt;pt<Re&&(Zt(Vt[Ut++],se),$o(se,Rt,pt,Dt,V,H),pt+=Dt,H+=Dt),++ft&mt||(Q+=Et)}break;case 3:if(Lt==V&&yt==H&&0<Q.b){for(pt=V,Lt=Rt=H+(St-ft)*Rt-(Pt=(St-ft)*$(Q.Ea,Q.b)),yt=V,mt=H,Et=[],Pt=(Dt=Pt)-1;0<=Pt;--Pt)Et[Pt]=yt[mt+Pt];for(Pt=Dt-1;0<=Pt;--Pt)pt[Lt+Pt]=Et[Pt];ms(Q,ft,St,V,Rt,V,H)}else ms(Q,ft,St,Lt,yt,V,H)}H=L,V=A}V!=A&&i(L,A,H,V,D)}function bl(u,m){var A=u.V,L=u.Ba+u.c*u.C,T=m-u.C;if(e(m<=u.l.o),e(16>=T),0<T){var D=u.l,j=u.Ta,H=u.Ua,V=D.width;if($n(u,T,A,L),T=H=[H],e((A=u.C)<(L=m)),e(D.v<D.va),L>D.o&&(L=D.o),A<D.j){var Q=D.j-A;A=D.j,T[0]+=Q*V}if(A>=L?A=0:(T[0]+=4*D.v,D.ka=A-D.j,D.U=D.va-D.v,D.T=L-A,A=1),A){if(H=H[0],11>(A=u.ca).S){var ft=A.f.RGBA,St=(L=A.S,T=D.U,D=D.T,Q=ft.eb,ft.A),Lt=D;for(ft=ft.fb+u.Ma*ft.A;0<Lt--;){var yt=j,Rt=H,Et=T,pt=Q,mt=ft;switch(L){case xp:Mn(yt,Rt,Et,pt,mt);break;case Sp:yn(yt,Rt,Et,pt,mt);break;case Wg:yn(yt,Rt,Et,pt,mt),ys(pt,mt,0,Et,1,0);break;case fm:Kr(yt,Rt,Et,pt,mt);break;case Lp:ke(yt,Rt,Et,pt,mt,1);break;case Gg:ke(yt,Rt,Et,pt,mt,1),ys(pt,mt,0,Et,1,0);break;case kp:ke(yt,Rt,Et,pt,mt,0);break;case Ep:ke(yt,Rt,Et,pt,mt,0),ys(pt,mt,1,Et,1,0);break;case Hg:Ua(yt,Rt,Et,pt,mt);break;case Vg:Ua(yt,Rt,Et,pt,mt),Xe(pt,mt,Et,1,0);break;case pm:Yr(yt,Rt,Et,pt,mt);break;default:e(0)}H+=V,ft+=St}u.Ma+=D}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=A.height)}}u.C=m,e(u.C<=u.i)}function Vr(u){var m;if(0<u.ua)return 0;for(m=0;m<u.Wb;++m){var A=u.Ya[m].G,L=u.Ya[m].H;if(0<A[1][L[1]+0].g||0<A[2][L[2]+0].g||0<A[3][L[3]+0].g)return 0}return 1}function Ms(u,m,A,L,T,D){if(u.Z!=0){var j=u.qd,H=u.rd;for(e(Va[u.Z]!=null);m<A;++m)Va[u.Z](j,H,L,T,L,T,D),j=L,H=T,T+=D;u.qd=j,u.rd=H}}function Ds(u,m){var A=u.l.ma,L=A.Z==0||A.Z==1?u.l.j:u.C;if(L=u.C<L?L:u.C,e(m<=u.l.o),m>L){var T=u.l.width,D=A.ca,j=A.tb+T*L,H=u.V,V=u.Ba+u.c*L,Q=u.gc;e(u.ab==1),e(Q[0].hc==3),vp(Q[0],L,m,H,V,D,j),Ms(A,L,m,D,j,T)}u.C=u.Ma=m}function Os(u,m,A,L,T,D,j){var H=u.$/L,V=u.$%L,Q=u.m,ft=u.s,St=A+u.$,Lt=St;T=A+L*T;var yt=A+L*D,Rt=280+ft.ua,Et=u.Pb?H:16777216,pt=0<ft.ua?ft.Wa:null,mt=ft.wc,Pt=St<yt?Ai(ft,V,H):null;e(u.C<D),e(yt<=T);var Dt=!1;t:for(;;){for(;Dt||St<yt;){var Tt=0;if(H>=Et){var Vt=St-A;e((Et=u).Pb),Et.wd=Et.m,Et.xd=Vt,0<Et.s.ua&&at(Et.s.Wa,Et.s.vb),Et=H+ey}if(V&mt||(Pt=Ai(ft,V,H)),e(Pt!=null),Pt.Qb&&(m[St]=Pt.qb,Dt=!0),!Dt)if(ct(Q),Pt.jc){Tt=Q,Vt=m;var Ut=St,se=Pt.pd[G(Tt)&Vi-1];e(Pt.jc),256>se.g?(Z(Tt,Tt.u+se.g),Vt[Ut]=se.value,Tt=0):(Z(Tt,Tt.u+se.g-256),e(256<=se.value),Tt=se.value),Tt==0&&(Dt=!0)}else Tt=Tn(Pt.G[0],Pt.H[0],Q);if(Q.h)break;if(Dt||256>Tt){if(!Dt)if(Pt.nd)m[St]=(Pt.qb|Tt<<8)>>>0;else{if(ct(Q),Dt=Tn(Pt.G[1],Pt.H[1],Q),ct(Q),Vt=Tn(Pt.G[2],Pt.H[2],Q),Ut=Tn(Pt.G[3],Pt.H[3],Q),Q.h)break;m[St]=(Ut<<24|Dt<<16|Tt<<8|Vt)>>>0}if(Dt=!1,++St,++V>=L&&(V=0,++H,j!=null&&H<=D&&!(H%16)&&j(u,H),pt!=null))for(;Lt<St;)Tt=m[Lt++],pt.X[(506832829*Tt&4294967295)>>>pt.Mb]=Tt}else if(280>Tt){if(Tt=Fs(Tt-256,Q),Vt=Tn(Pt.G[4],Pt.H[4],Q),ct(Q),Vt=fr(L,Vt=Fs(Vt,Q)),Q.h)break;if(St-A<Vt||T-St<Tt)break t;for(Ut=0;Ut<Tt;++Ut)m[St+Ut]=m[St+Ut-Vt];for(St+=Tt,V+=Tt;V>=L;)V-=L,++H,j!=null&&H<=D&&!(H%16)&&j(u,H);if(e(St<=T),V&mt&&(Pt=Ai(ft,V,H)),pt!=null)for(;Lt<St;)Tt=m[Lt++],pt.X[(506832829*Tt&4294967295)>>>pt.Mb]=Tt}else{if(!(Tt<Rt))break t;for(Dt=Tt-280,e(pt!=null);Lt<St;)Tt=m[Lt++],pt.X[(506832829*Tt&4294967295)>>>pt.Mb]=Tt;Tt=St,e(!(Dt>>>(Vt=pt).Xa)),m[Tt]=Vt.X[Dt],Dt=!0}Dt||e(Q.h==Y(Q))}if(u.Pb&&Q.h&&St<T)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&at(u.s.vb,u.s.Wa);else{if(Q.h)break t;j!=null&&j(u,H>D?D:H),u.a=0,u.$=St-A}return 1}return u.a=3,0}function pr(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var m=u.Wa;m!=null&&(m.X=null),u.vb=null,e(u!=null)}function gs(){var u=new zg;return u==null?null:(u.a=0,u.xb=bm,Vn("Predictor","VP8LPredictors"),Vn("Predictor","VP8LPredictors_C"),Vn("PredictorAdd","VP8LPredictorsAdd"),Vn("PredictorAdd","VP8LPredictorsAdd_C"),bp=Jt,$o=Qt,Mn=qt,yn=oi,Ua=ne,Yr=tn,Kr=Te,U.VP8LMapColor32b=Ol,U.VP8LMapColor8b=yp,u)}function gr(u,m,A,L,T){var D=1,j=[u],H=[m],V=L.m,Q=L.s,ft=null,St=0;t:for(;;){if(A)for(;D&&At(V,1);){var Lt=j,yt=H,Rt=L,Et=1,pt=Rt.m,mt=Rt.gc[Rt.ab],Pt=At(pt,2);if(Rt.Oc&1<<Pt)D=0;else{switch(Rt.Oc|=1<<Pt,mt.hc=Pt,mt.Ea=Lt[0],mt.nc=yt[0],mt.K=[null],++Rt.ab,e(4>=Rt.ab),Pt){case 0:case 1:mt.b=At(pt,3)+2,Et=gr($(mt.Ea,mt.b),$(mt.nc,mt.b),0,Rt,mt.K),mt.K=mt.K[0];break;case 3:var Dt,Tt=At(pt,8)+1,Vt=16<Tt?0:4<Tt?1:2<Tt?2:3;if(Lt[0]=$(mt.Ea,Vt),mt.b=Vt,Dt=Et=gr(Tt,1,0,Rt,mt.K)){var Ut,se=Tt,Wt=mt,Re=1<<(8>>Wt.b),De=s(Re);if(De==null)Dt=0;else{var Ce=Wt.K[0],Se=Wt.w;for(De[0]=Wt.K[0][0],Ut=1;Ut<1*se;++Ut)De[Ut]=et(Ce[Se+Ut],De[Ut-1]);for(;Ut<4*Re;++Ut)De[Ut]=0;Wt.K[0]=null,Wt.K[0]=De,Dt=1}}Et=Dt;break;case 2:break;default:e(0)}D=Et}}if(j=j[0],H=H[0],D&&At(V,1)&&!(D=1<=(St=At(V,4))&&11>=St)){L.a=3;break t}var Ge;if(Ge=D)e:{var qe,be,xi,Dn=L,Si=j,On=H,Oe=St,Kn=A,Zn=Dn.m,Di=Dn.s,$i=[null],An=1,_s=0,yr=ty[Oe];i:for(;;){if(Kn&&At(Zn,1)){var Oi=At(Zn,3)+2,ta=$(Si,Oi),Jo=$(On,Oi),Ul=ta*Jo;if(!gr(ta,Jo,0,Dn,$i))break i;for($i=$i[0],Di.xc=Oi,qe=0;qe<Ul;++qe){var $a=$i[qe]>>8&65535;$i[qe]=$a,$a>=An&&(An=$a+1)}}if(Zn.h)break i;for(be=0;5>be;++be){var li=gm[be];!be&&0<Oe&&(li+=1<<Oe),_s<li&&(_s=li)}var Kg=r(An*yr,E),km=An,Em=r(km,S);if(Em==null)var Ip=null;else e(65536>=km),Ip=Em;var Hu=s(_s);if(Ip==null||Hu==null||Kg==null){Dn.a=1;break i}var Tp=Kg;for(qe=xi=0;qe<An;++qe){var Us=Ip[qe],Hl=Us.G,Wl=Us.H,Cm=0,Rp=1,Nm=0;for(be=0;5>be;++be){li=gm[be],Hl[be]=Tp,Wl[be]=xi,!be&&0<Oe&&(li+=1<<Oe);s:{var Fp,Zg=li,Mp=Dn,Wu=Hu,Ay=Tp,_y=xi,Jg=0,Xa=Mp.m,xy=At(Xa,1);if(n(Wu,0,0,Zg),xy){var Sy=At(Xa,1)+1,Ly=At(Xa,1),Pm=At(Xa,Ly==0?1:8);Wu[Pm]=1,Sy==2&&(Wu[Pm=At(Xa,8)]=1);var Dp=1}else{var Im=s(19),Tm=At(Xa,4)+4;if(19<Tm){Mp.a=3;var Op=0;break s}for(Fp=0;Fp<Tm;++Fp)Im[Jv[Fp]]=At(Xa,3);var Qg=void 0,Gu=void 0,Rm=Mp,ky=Im,Bp=Zg,Fm=Wu,t0=0,Ya=Rm.m,Mm=8,Dm=r(128,E);n:for(;M(Dm,0,7,ky,19);){if(At(Ya,1)){var Ey=2+2*At(Ya,3);if((Qg=2+At(Ya,Ey))>Bp)break n}else Qg=Bp;for(Gu=0;Gu<Bp&&Qg--;){ct(Ya);var Om=Dm[0+(127&G(Ya))];Z(Ya,Ya.u+Om.g);var Gl=Om.value;if(16>Gl)Fm[Gu++]=Gl,Gl!=0&&(Mm=Gl);else{var Cy=Gl==16,Bm=Gl-16,Ny=Kv[Bm],jm=At(Ya,Yv[Bm])+Ny;if(Gu+jm>Bp)break n;for(var Py=Cy?Mm:0;0<jm--;)Fm[Gu++]=Py}}t0=1;break n}t0||(Rm.a=3),Dp=t0}(Dp=Dp&&!Xa.h)&&(Jg=M(Ay,_y,8,Wu,Zg)),Dp&&Jg!=0?Op=Jg:(Mp.a=3,Op=0)}if(Op==0)break i;if(Rp&&Zv[be]==1&&(Rp=Tp[xi].g==0),Cm+=Tp[xi].g,xi+=Op,3>=be){var Vu,e0=Hu[0];for(Vu=1;Vu<li;++Vu)Hu[Vu]>e0&&(e0=Hu[Vu]);Nm+=e0}}if(Us.nd=Rp,Us.Qb=0,Rp&&(Us.qb=(Hl[3][Wl[3]+0].value<<24|Hl[1][Wl[1]+0].value<<16|Hl[2][Wl[2]+0].value)>>>0,Cm==0&&256>Hl[0][Wl[0]+0].value&&(Us.Qb=1,Us.qb+=Hl[0][Wl[0]+0].value<<8)),Us.jc=!Us.Qb&&6>Nm,Us.jc){var jp,ea=Us;for(jp=0;jp<Vi;++jp){var Ka=jp,Za=ea.pd[Ka],zp=ea.G[0][ea.H[0]+Ka];256<=zp.value?(Za.g=zp.g+256,Za.value=zp.value):(Za.g=0,Za.value=0,Ka>>=Ci(zp,8,Za),Ka>>=Ci(ea.G[1][ea.H[1]+Ka],16,Za),Ka>>=Ci(ea.G[2][ea.H[2]+Ka],0,Za),Ci(ea.G[3][ea.H[3]+Ka],24,Za))}}}Di.vc=$i,Di.Wb=An,Di.Ya=Ip,Di.yc=Kg,Ge=1;break e}Ge=0}if(!(D=Ge)){L.a=3;break t}if(0<St){if(Q.ua=1<<St,!N(Q.Wa,St)){L.a=1,D=0;break t}}else Q.ua=0;var i0=L,zm=j,Iy=H,n0=i0.s,s0=n0.xc;if(i0.c=zm,i0.i=Iy,n0.md=$(zm,s0),n0.wc=s0==0?-1:(1<<s0)-1,A){L.xb=hy;break t}if((ft=s(j*H))==null){L.a=1,D=0;break t}D=(D=Os(L,ft,0,j,H,H,null))&&!V.h;break t}return D?(T!=null?T[0]=ft:(e(ft==null),e(A)),L.$=0,A||pr(Q)):pr(Q),D}function Uo(u,m){var A=u.c*u.i,L=A+m+16*m;return e(u.c<=m),u.V=s(L),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+A+m,1)}function vl(u,m){var A=u.C,L=m-A,T=u.V,D=u.Ba+u.c*A;for(e(m<=u.l.o);0<L;){var j=16<L?16:L,H=u.l.ma,V=u.l.width,Q=V*j,ft=H.ca,St=H.tb+V*A,Lt=u.Ta,yt=u.Ua;$n(u,j,T,D),pi(Lt,yt,ft,St,Q),Ms(H,A,A+j,ft,St,V),L-=j,T+=j*u.c,A+=j}e(A==m),u.C=u.Ma=m}function yl(){this.ub=this.yd=this.td=this.Rb=0}function wl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Al(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Zf(){this.Yb=function(){var u=[];return function m(A,L,T){for(var D=T[L],j=0;j<D&&(A.push(T.length>L+1?[]:0),!(T.length<L+1));j++)m(A[j],L+1,T)}(u,0,[3,11]),u}()}function bg(){this.jb=s(3),this.Wc=a([4,8],Zf),this.Xc=a([4,17],Zf)}function vg(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function _l(){this.ld=this.La=this.dd=this.tc=0}function Jf(){this.Na=this.la=0}function yg(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bu(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wg(){this.uc=this.M=this.Nb=0,this.wa=Array(new _l),this.Y=0,this.ya=Array(new bu),this.aa=0,this.l=new xl}function Qf(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ag(){this.cb=this.a=0,this.sc="",this.m=new lt,this.Od=new yl,this.Kc=new wl,this.ed=new vg,this.Qa=new Al,this.Ic=this.$c=this.Aa=0,this.D=new wg,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=r(8,lt),this.ia=0,this.pb=r(4,yg),this.Pa=new bg,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qf),this.Hd=0,this.rb=Array(new Jf),this.sb=0,this.wa=Array(new _l),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bu),this.L=this.aa=0,this.gd=a([4,2],_l),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function xl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function _g(){var u=new Ag;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,qu||(qu=ip)),u}function di(u,m,A){return u.a==0&&(u.a=m,u.sc=A,u.cb=0),0}function tp(u,m,A){return 3<=A&&u[m+0]==157&&u[m+1]==1&&u[m+2]==42}function ep(u,m){if(u==null)return 0;if(u.a=0,u.sc="OK",m==null)return di(u,2,"null VP8Io passed to VP8GetHeaders()");var A=m.data,L=m.w,T=m.ha;if(4>T)return di(u,7,"Truncated header.");var D=A[L+0]|A[L+1]<<8|A[L+2]<<16,j=u.Od;if(j.Rb=!(1&D),j.td=D>>1&7,j.yd=D>>4&1,j.ub=D>>5,3<j.td)return di(u,3,"Incorrect keyframe parameters.");if(!j.yd)return di(u,4,"Frame not displayable.");L+=3,T-=3;var H=u.Kc;if(j.Rb){if(7>T)return di(u,7,"cannot parse picture header");if(!tp(A,L,T))return di(u,3,"Bad code word");H.c=16383&(A[L+4]<<8|A[L+3]),H.Td=A[L+4]>>6,H.i=16383&(A[L+6]<<8|A[L+5]),H.Ud=A[L+6]>>6,L+=7,T-=7,u.za=H.c+15>>4,u.Ub=H.i+15>>4,m.width=H.c,m.height=H.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,n((D=u.Pa).jb,0,255,D.jb.length),e((D=u.Qa)!=null),D.Cb=0,D.Bb=0,D.Fb=1,n(D.Zb,0,0,D.Zb.length),n(D.Lb,0,0,D.Lb)}if(j.ub>T)return di(u,7,"bad partition length");nt(D=u.m,A,L,j.ub),L+=j.ub,T-=j.ub,j.Rb&&(H.Ld=bt(D),H.Kd=bt(D)),H=u.Qa;var V,Q=u.Pa;if(e(D!=null),e(H!=null),H.Cb=bt(D),H.Cb){if(H.Bb=bt(D),bt(D)){for(H.Fb=bt(D),V=0;4>V;++V)H.Zb[V]=bt(D)?tt(D,7):0;for(V=0;4>V;++V)H.Lb[V]=bt(D)?tt(D,6):0}if(H.Bb)for(V=0;3>V;++V)Q.jb[V]=bt(D)?st(D,8):255}else H.Bb=0;if(D.Ka)return di(u,3,"cannot parse segment header");if((H=u.ed).zd=bt(D),H.Tb=st(D,6),H.wb=st(D,3),H.Pc=bt(D),H.Pc&&bt(D)){for(Q=0;4>Q;++Q)bt(D)&&(H.vd[Q]=tt(D,6));for(Q=0;4>Q;++Q)bt(D)&&(H.od[Q]=tt(D,6))}if(u.L=H.Tb==0?0:H.zd?1:2,D.Ka)return di(u,3,"cannot parse filter header");var ft=T;if(T=V=L,L=V+ft,H=ft,u.Xb=(1<<st(u.m,2))-1,ft<3*(Q=u.Xb))A=7;else{for(V+=3*Q,H-=3*Q,ft=0;ft<Q;++ft){var St=A[T+0]|A[T+1]<<8|A[T+2]<<16;St>H&&(St=H),nt(u.Jc[+ft],A,V,St),V+=St,H-=St,T+=3}nt(u.Jc[+Q],A,V,H),A=V<L?0:5}if(A!=0)return di(u,A,"cannot parse partitions");for(A=st(V=u.m,7),T=bt(V)?tt(V,4):0,L=bt(V)?tt(V,4):0,H=bt(V)?tt(V,4):0,Q=bt(V)?tt(V,4):0,V=bt(V)?tt(V,4):0,ft=u.Qa,St=0;4>St;++St){if(ft.Cb){var Lt=ft.Zb[St];ft.Fb||(Lt+=A)}else{if(0<St){u.pb[St]=u.pb[0];continue}Lt=A}var yt=u.pb[St];yt.Sc[0]=$g[Xn(Lt+T,127)],yt.Sc[1]=Xg[Xn(Lt+0,127)],yt.Eb[0]=2*$g[Xn(Lt+L,127)],yt.Eb[1]=101581*Xg[Xn(Lt+H,127)]>>16,8>yt.Eb[1]&&(yt.Eb[1]=8),yt.Qc[0]=$g[Xn(Lt+Q,117)],yt.Qc[1]=Xg[Xn(Lt+V,127)],yt.lc=Lt+V}if(!j.Rb)return di(u,4,"Not a key frame.");for(bt(D),j=u.Pa,A=0;4>A;++A){for(T=0;8>T;++T)for(L=0;3>L;++L)for(H=0;11>H;++H)Q=wt(D,ay[A][T][L][H])?st(D,8):sy[A][T][L][H],j.Wc[A][T].Yb[L][H]=Q;for(T=0;17>T;++T)j.Xc[A][T]=j.Wc[A][oy[T]]}return u.kc=bt(D),u.kc&&(u.Bd=st(D,8)),u.cb=1}function ip(u,m,A,L,T,D,j){var H=m[T].Yb[A];for(A=0;16>T;++T){if(!wt(u,H[A+0]))return T;for(;!wt(u,H[A+1]);)if(H=m[++T].Yb[0],A=0,T==16)return 16;var V=m[T+1].Yb;if(wt(u,H[A+2])){var Q=u,ft=0;if(wt(Q,(Lt=H)[(St=A)+3]))if(wt(Q,Lt[St+6])){for(H=0,St=2*(ft=wt(Q,Lt[St+8]))+(Lt=wt(Q,Lt[St+9+ft])),ft=0,Lt=iy[St];Lt[H];++H)ft+=ft+wt(Q,Lt[H]);ft+=3+(8<<St)}else wt(Q,Lt[St+7])?(ft=7+2*wt(Q,165),ft+=wt(Q,145)):ft=5+wt(Q,159);else ft=wt(Q,Lt[St+4])?3+wt(Q,Lt[St+5]):2;H=V[2]}else ft=1,H=V[1];V=j+ny[T],0>(Q=u).b&&gt(Q);var St,Lt=Q.b,yt=(St=Q.Ca>>1)-(Q.I>>Lt)>>31;--Q.b,Q.Ca+=yt,Q.Ca|=1,Q.I-=(St+1&yt)<<Lt,D[V]=((ft^yt)-yt)*L[(0<T)+0]}return 16}function vu(u){var m=u.rb[u.sb-1];m.la=0,m.Na=0,n(u.zc,0,0,u.zc.length),u.ja=0}function xg(u,m){if(u==null)return 0;if(m==null)return di(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!ep(u,m))return 0;if(e(u.cb),m.ac==null||m.ac(m)){m.ob&&(u.L=0);var A=Pp[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=m.v-A>>4,u.zb=m.j-A>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=m.o+15+A>>4,u.Hb=m.va+15+A>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var L=u.ed;for(A=0;4>A;++A){var T;if(u.Qa.Cb){var D=u.Qa.Lb[A];u.Qa.Fb||(D+=L.Tb)}else D=L.Tb;for(T=0;1>=T;++T){var j=u.gd[A][T],H=D;if(L.Pc&&(H+=L.vd[0],T&&(H+=L.od[0])),0<(H=0>H?0:63<H?63:H)){var V=H;0<L.wb&&(V=4<L.wb?V>>2:V>>1)>9-L.wb&&(V=9-L.wb),1>V&&(V=1),j.dd=V,j.tc=2*H+V,j.ld=40<=H?2:15<=H?1:0}else j.tc=0;j.La=T}}}A=0}else di(u,6,"Frame setup failed"),A=u.a;if(A=A==0){if(A){u.$c=0,0<u.Aa||(u.Ic=wy);t:{A=u.Ic,L=4*(V=u.za);var Q=32*V,ft=V+1,St=0<u.L?V*(0<u.Aa?2:1):0,Lt=(u.Aa==2?2:1)*V;if((j=L+832+(T=3*(16*A+Pp[u.L])/2*Q)+(D=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=j)A=0;else{if(j>u.Vb){if(u.Vb=0,u.Ec=s(j),u.Fc=0,u.Ec==null){A=di(u,1,"no memory during frame initialization.");break t}u.Vb=j}j=u.Ec,H=u.Fc,u.Ac=j,u.Bc=H,H+=L,u.Gd=r(Q,Qf),u.Hd=0,u.rb=r(ft+1,Jf),u.sb=1,u.wa=St?r(St,_l):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=V),e(!0),u.oc=j,u.pc=H,H+=832,u.ya=r(Lt,bu),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=V),u.R=16*V,u.B=8*V,V=(Q=Pp[u.L])*u.R,Q=Q/2*u.B,u.sa=j,u.ta=H+V,u.qa=u.sa,u.ra=u.ta+16*A*u.R+Q,u.Ha=u.qa,u.Ia=u.ra+8*A*u.B+Q,u.$c=0,H+=T,u.mb=D?j:null,u.nb=D?H:null,e(H+D<=u.Fc+u.Vb),vu(u),n(u.Ac,u.Bc,0,L),A=1}}if(A){if(m.ka=0,m.y=u.sa,m.O=u.ta,m.f=u.qa,m.N=u.ra,m.ea=u.Ha,m.Vd=u.Ia,m.fa=u.R,m.Rc=u.B,m.F=null,m.J=0,!Ap){for(A=-255;255>=A;++A)Ni[255+A]=0>A?-A:A;for(A=-1020;1020>=A;++A)Jr[1020+A]=-128>A?-128:127<A?127:A;for(A=-112;112>=A;++A)zu[112+A]=-16>A?-16:15<A?15:A;for(A=-255;510>=A;++A)ql[255+A]=0>A?0:255<A?255:A;Ap=1}Bl=kg,Zr=Sg,Ou=sp,wn=Lg,bs=rp,fi=np,jl=Su,wp=Go,Bu=jg,Xo=Lu,Yo=Bg,Ha=Nl,Ko=ku,zl=pp,Zo=fp,Wa=br,ju=Xr,vs=Og,qs[0]=mr,qs[1]=Eg,qs[2]=Ig,qs[3]=Tg,qs[4]=hp,qs[5]=El,qs[6]=lp,qs[7]=Au,qs[8]=Fg,qs[9]=Rg,Ga[0]=ap,Ga[1]=Ng,Ga[2]=$r,Ga[3]=Ll,Ga[4]=en,Ga[5]=Pg,Ga[6]=op,Qr[0]=Ba,Qr[1]=Cg,Qr[2]=Mg,Qr[3]=_u,Qr[4]=Wo,Qr[5]=Dg,Qr[6]=xu,A=1}else A=0}A&&(A=function(yt,Rt){for(yt.M=0;yt.M<yt.Va;++yt.M){var Et,pt=yt.Jc[yt.M&yt.Xb],mt=yt.m,Pt=yt;for(Et=0;Et<Pt.za;++Et){var Dt=mt,Tt=Pt,Vt=Tt.Ac,Ut=Tt.Bc+4*Et,se=Tt.zc,Wt=Tt.ya[Tt.aa+Et];if(Tt.Qa.Bb?Wt.$b=wt(Dt,Tt.Pa.jb[0])?2+wt(Dt,Tt.Pa.jb[2]):wt(Dt,Tt.Pa.jb[1]):Wt.$b=0,Tt.kc&&(Wt.Ad=wt(Dt,Tt.Bd)),Wt.Za=!wt(Dt,145)+0,Wt.Za){var Re=Wt.Ob,De=0;for(Tt=0;4>Tt;++Tt){var Ce,Se=se[0+Tt];for(Ce=0;4>Ce;++Ce){Se=ry[Vt[Ut+Ce]][Se];for(var Ge=mm[wt(Dt,Se[0])];0<Ge;)Ge=mm[2*Ge+wt(Dt,Se[Ge])];Se=-Ge,Vt[Ut+Ce]=Se}i(Re,De,Vt,Ut,4),De+=4,se[0+Tt]=Se}}else Se=wt(Dt,156)?wt(Dt,128)?1:3:wt(Dt,163)?2:0,Wt.Ob[0]=Se,n(Vt,Ut,Se,4),n(se,0,Se,4);Wt.Dd=wt(Dt,142)?wt(Dt,114)?wt(Dt,183)?1:3:2:0}if(Pt.m.Ka)return di(yt,7,"Premature end-of-partition0 encountered.");for(;yt.ja<yt.za;++yt.ja){if(Pt=pt,Dt=(mt=yt).rb[mt.sb-1],Vt=mt.rb[mt.sb+mt.ja],Et=mt.ya[mt.aa+mt.ja],Ut=mt.kc?Et.Ad:0)Dt.la=Vt.la=0,Et.Za||(Dt.Na=Vt.Na=0),Et.Hc=0,Et.Gc=0,Et.ia=0;else{var qe,be;if(Dt=Vt,Vt=Pt,Ut=mt.Pa.Xc,se=mt.ya[mt.aa+mt.ja],Wt=mt.pb[se.$b],Tt=se.ad,Re=0,De=mt.rb[mt.sb-1],Se=Ce=0,n(Tt,Re,0,384),se.Za)var xi=0,Dn=Ut[3];else{Ge=s(16);var Si=Dt.Na+De.Na;if(Si=qu(Vt,Ut[1],Si,Wt.Eb,0,Ge,0),Dt.Na=De.Na=(0<Si)+0,1<Si)Bl(Ge,0,Tt,Re);else{var On=Ge[0]+3>>3;for(Ge=0;256>Ge;Ge+=16)Tt[Re+Ge]=On}xi=1,Dn=Ut[0]}var Oe=15&Dt.la,Kn=15&De.la;for(Ge=0;4>Ge;++Ge){var Zn=1&Kn;for(On=be=0;4>On;++On)Oe=Oe>>1|(Zn=(Si=qu(Vt,Dn,Si=Zn+(1&Oe),Wt.Sc,xi,Tt,Re))>xi)<<7,be=be<<2|(3<Si?3:1<Si?2:Tt[Re+0]!=0),Re+=16;Oe>>=4,Kn=Kn>>1|Zn<<7,Ce=(Ce<<8|be)>>>0}for(Dn=Oe,xi=Kn>>4,qe=0;4>qe;qe+=2){for(be=0,Oe=Dt.la>>4+qe,Kn=De.la>>4+qe,Ge=0;2>Ge;++Ge){for(Zn=1&Kn,On=0;2>On;++On)Si=Zn+(1&Oe),Oe=Oe>>1|(Zn=0<(Si=qu(Vt,Ut[2],Si,Wt.Qc,0,Tt,Re)))<<3,be=be<<2|(3<Si?3:1<Si?2:Tt[Re+0]!=0),Re+=16;Oe>>=2,Kn=Kn>>1|Zn<<5}Se|=be<<4*qe,Dn|=Oe<<4<<qe,xi|=(240&Kn)<<qe}Dt.la=Dn,De.la=xi,se.Hc=Ce,se.Gc=Se,se.ia=43690&Se?0:Wt.ia,Ut=!(Ce|Se)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[Et.$b][Et.Za],mt.wa[mt.Y+mt.ja].La|=!Ut),Pt.Ka)return di(yt,7,"Premature end-of-file encountered.")}if(vu(yt),mt=Rt,Pt=1,Et=(pt=yt).D,Dt=0<pt.L&&pt.M>=pt.zb&&pt.M<=pt.Va,pt.Aa==0)t:{if(Et.M=pt.M,Et.uc=Dt,Tu(pt,Et),Pt=1,Et=(be=pt.D).Nb,Dt=(Se=Pp[pt.L])*pt.R,Vt=Se/2*pt.B,Ge=16*Et*pt.R,On=8*Et*pt.B,Ut=pt.sa,se=pt.ta-Dt+Ge,Wt=pt.qa,Tt=pt.ra-Vt+On,Re=pt.Ha,De=pt.Ia-Vt+On,Kn=(Oe=be.M)==0,Ce=Oe>=pt.Va-1,pt.Aa==2&&Tu(pt,be),be.uc)for(Zn=(Si=pt).D.M,e(Si.D.uc),be=Si.yb;be<Si.Hb;++be){xi=be,Dn=Zn;var Di=($i=(li=Si).D).Nb;qe=li.R;var $i=$i.wa[$i.Y+xi],An=li.sa,_s=li.ta+16*Di*qe+16*xi,yr=$i.dd,Oi=$i.tc;if(Oi!=0)if(e(3<=Oi),li.L==1)0<xi&&Wa(An,_s,qe,Oi+4),$i.La&&vs(An,_s,qe,Oi),0<Dn&&Zo(An,_s,qe,Oi+4),$i.La&&ju(An,_s,qe,Oi);else{var ta=li.B,Jo=li.qa,Ul=li.ra+8*Di*ta+8*xi,$a=li.Ha,li=li.Ia+8*Di*ta+8*xi;Di=$i.ld,0<xi&&(wp(An,_s,qe,Oi+4,yr,Di),Xo(Jo,Ul,$a,li,ta,Oi+4,yr,Di)),$i.La&&(Ha(An,_s,qe,Oi,yr,Di),zl(Jo,Ul,$a,li,ta,Oi,yr,Di)),0<Dn&&(jl(An,_s,qe,Oi+4,yr,Di),Bu(Jo,Ul,$a,li,ta,Oi+4,yr,Di)),$i.La&&(Yo(An,_s,qe,Oi,yr,Di),Ko(Jo,Ul,$a,li,ta,Oi,yr,Di))}}if(pt.ia&&alert("todo:DitherRow"),mt.put!=null){if(be=16*Oe,Oe=16*(Oe+1),Kn?(mt.y=pt.sa,mt.O=pt.ta+Ge,mt.f=pt.qa,mt.N=pt.ra+On,mt.ea=pt.Ha,mt.W=pt.Ia+On):(be-=Se,mt.y=Ut,mt.O=se,mt.f=Wt,mt.N=Tt,mt.ea=Re,mt.W=De),Ce||(Oe-=Se),Oe>mt.o&&(Oe=mt.o),mt.F=null,mt.J=null,pt.Fa!=null&&0<pt.Fa.length&&be<Oe&&(mt.J=Pu(pt,mt,be,Oe-be),mt.F=pt.mb,mt.F==null&&mt.F.length==0)){Pt=di(pt,3,"Could not decode alpha data.");break t}be<mt.j&&(Se=mt.j-be,be=mt.j,e(!(1&Se)),mt.O+=pt.R*Se,mt.N+=pt.B*(Se>>1),mt.W+=pt.B*(Se>>1),mt.F!=null&&(mt.J+=mt.width*Se)),be<Oe&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=be-mt.j,mt.U=mt.va-mt.v,mt.T=Oe-be,Pt=mt.put(mt))}Et+1!=pt.Ic||Ce||(i(pt.sa,pt.ta-Dt,Ut,se+16*pt.R,Dt),i(pt.qa,pt.ra-Vt,Wt,Tt+8*pt.B,Vt),i(pt.Ha,pt.Ia-Vt,Re,De+8*pt.B,Vt))}if(!Pt)return di(yt,6,"Output aborted.")}return 1}(u,m)),m.bc!=null&&m.bc(m),A&=1}return A?(u.cb=0,A):0}function Bs(u,m,A,L,T){T=u[m+A+32*L]+(T>>3),u[m+A+32*L]=-256&T?0>T?0:255:T}function Sl(u,m,A,L,T,D){Bs(u,m,0,A,L+T),Bs(u,m,1,A,L+D),Bs(u,m,2,A,L-D),Bs(u,m,3,A,L-T)}function Rn(u){return(20091*u>>16)+u}function yu(u,m,A,L){var T,D=0,j=s(16);for(T=0;4>T;++T){var H=u[m+0]+u[m+8],V=u[m+0]-u[m+8],Q=(35468*u[m+4]>>16)-Rn(u[m+12]),ft=Rn(u[m+4])+(35468*u[m+12]>>16);j[D+0]=H+ft,j[D+1]=V+Q,j[D+2]=V-Q,j[D+3]=H-ft,D+=4,m++}for(T=D=0;4>T;++T)H=(u=j[D+0]+4)+j[D+8],V=u-j[D+8],Q=(35468*j[D+4]>>16)-Rn(j[D+12]),Bs(A,L,0,0,H+(ft=Rn(j[D+4])+(35468*j[D+12]>>16))),Bs(A,L,1,0,V+Q),Bs(A,L,2,0,V-Q),Bs(A,L,3,0,H-ft),D++,L+=32}function np(u,m,A,L){var T=u[m+0]+4,D=35468*u[m+4]>>16,j=Rn(u[m+4]),H=35468*u[m+1]>>16;Sl(A,L,0,T+j,u=Rn(u[m+1]),H),Sl(A,L,1,T+D,u,H),Sl(A,L,2,T-D,u,H),Sl(A,L,3,T-j,u,H)}function Sg(u,m,A,L,T){yu(u,m,A,L),T&&yu(u,m+16,A,L+4)}function sp(u,m,A,L){Zr(u,m+0,A,L,1),Zr(u,m+32,A,L+128,1)}function Lg(u,m,A,L){var T;for(u=u[m+0]+4,T=0;4>T;++T)for(m=0;4>m;++m)Bs(A,L,m,T,u)}function rp(u,m,A,L){u[m+0]&&wn(u,m+0,A,L),u[m+16]&&wn(u,m+16,A,L+4),u[m+32]&&wn(u,m+32,A,L+128),u[m+48]&&wn(u,m+48,A,L+128+4)}function kg(u,m,A,L){var T,D=s(16);for(T=0;4>T;++T){var j=u[m+0+T]+u[m+12+T],H=u[m+4+T]+u[m+8+T],V=u[m+4+T]-u[m+8+T],Q=u[m+0+T]-u[m+12+T];D[0+T]=j+H,D[8+T]=j-H,D[4+T]=Q+V,D[12+T]=Q-V}for(T=0;4>T;++T)j=(u=D[0+4*T]+3)+D[3+4*T],H=D[1+4*T]+D[2+4*T],V=D[1+4*T]-D[2+4*T],Q=u-D[3+4*T],A[L+0]=j+H>>3,A[L+16]=Q+V>>3,A[L+32]=j-H>>3,A[L+48]=Q-V>>3,L+=64}function wu(u,m,A){var L,T=m-32,D=Yn,j=255-u[T-1];for(L=0;L<A;++L){var H,V=D,Q=j+u[m-1];for(H=0;H<A;++H)u[m+H]=V[Q+u[T+H]];m+=32}}function Eg(u,m){wu(u,m,4)}function Cg(u,m){wu(u,m,8)}function Ng(u,m){wu(u,m,16)}function $r(u,m){var A;for(A=0;16>A;++A)i(u,m+32*A,u,m-32,16)}function Ll(u,m){var A;for(A=16;0<A;--A)n(u,m,u[m-1],16),m+=32}function kl(u,m,A){var L;for(L=0;16>L;++L)n(m,A+32*L,u,16)}function ap(u,m){var A,L=16;for(A=0;16>A;++A)L+=u[m-1+32*A]+u[m+A-32];kl(L>>5,u,m)}function en(u,m){var A,L=8;for(A=0;16>A;++A)L+=u[m-1+32*A];kl(L>>4,u,m)}function Pg(u,m){var A,L=8;for(A=0;16>A;++A)L+=u[m+A-32];kl(L>>4,u,m)}function op(u,m){kl(128,u,m)}function ue(u,m,A){return u+2*m+A+2>>2}function Ig(u,m){var A,L=m-32;for(L=new Uint8Array([ue(u[L-1],u[L+0],u[L+1]),ue(u[L+0],u[L+1],u[L+2]),ue(u[L+1],u[L+2],u[L+3]),ue(u[L+2],u[L+3],u[L+4])]),A=0;4>A;++A)i(u,m+32*A,L,0,L.length)}function Tg(u,m){var A=u[m-1],L=u[m-1+32],T=u[m-1+64],D=u[m-1+96];Mt(u,m+0,16843009*ue(u[m-1-32],A,L)),Mt(u,m+32,16843009*ue(A,L,T)),Mt(u,m+64,16843009*ue(L,T,D)),Mt(u,m+96,16843009*ue(T,D,D))}function mr(u,m){var A,L=4;for(A=0;4>A;++A)L+=u[m+A-32]+u[m-1+32*A];for(L>>=3,A=0;4>A;++A)n(u,m+32*A,L,4)}function hp(u,m){var A=u[m-1+0],L=u[m-1+32],T=u[m-1+64],D=u[m-1-32],j=u[m+0-32],H=u[m+1-32],V=u[m+2-32],Q=u[m+3-32];u[m+0+96]=ue(L,T,u[m-1+96]),u[m+1+96]=u[m+0+64]=ue(A,L,T),u[m+2+96]=u[m+1+64]=u[m+0+32]=ue(D,A,L),u[m+3+96]=u[m+2+64]=u[m+1+32]=u[m+0+0]=ue(j,D,A),u[m+3+64]=u[m+2+32]=u[m+1+0]=ue(H,j,D),u[m+3+32]=u[m+2+0]=ue(V,H,j),u[m+3+0]=ue(Q,V,H)}function lp(u,m){var A=u[m+1-32],L=u[m+2-32],T=u[m+3-32],D=u[m+4-32],j=u[m+5-32],H=u[m+6-32],V=u[m+7-32];u[m+0+0]=ue(u[m+0-32],A,L),u[m+1+0]=u[m+0+32]=ue(A,L,T),u[m+2+0]=u[m+1+32]=u[m+0+64]=ue(L,T,D),u[m+3+0]=u[m+2+32]=u[m+1+64]=u[m+0+96]=ue(T,D,j),u[m+3+32]=u[m+2+64]=u[m+1+96]=ue(D,j,H),u[m+3+64]=u[m+2+96]=ue(j,H,V),u[m+3+96]=ue(H,V,V)}function El(u,m){var A=u[m-1+0],L=u[m-1+32],T=u[m-1+64],D=u[m-1-32],j=u[m+0-32],H=u[m+1-32],V=u[m+2-32],Q=u[m+3-32];u[m+0+0]=u[m+1+64]=D+j+1>>1,u[m+1+0]=u[m+2+64]=j+H+1>>1,u[m+2+0]=u[m+3+64]=H+V+1>>1,u[m+3+0]=V+Q+1>>1,u[m+0+96]=ue(T,L,A),u[m+0+64]=ue(L,A,D),u[m+0+32]=u[m+1+96]=ue(A,D,j),u[m+1+32]=u[m+2+96]=ue(D,j,H),u[m+2+32]=u[m+3+96]=ue(j,H,V),u[m+3+32]=ue(H,V,Q)}function Au(u,m){var A=u[m+0-32],L=u[m+1-32],T=u[m+2-32],D=u[m+3-32],j=u[m+4-32],H=u[m+5-32],V=u[m+6-32],Q=u[m+7-32];u[m+0+0]=A+L+1>>1,u[m+1+0]=u[m+0+64]=L+T+1>>1,u[m+2+0]=u[m+1+64]=T+D+1>>1,u[m+3+0]=u[m+2+64]=D+j+1>>1,u[m+0+32]=ue(A,L,T),u[m+1+32]=u[m+0+96]=ue(L,T,D),u[m+2+32]=u[m+1+96]=ue(T,D,j),u[m+3+32]=u[m+2+96]=ue(D,j,H),u[m+3+64]=ue(j,H,V),u[m+3+96]=ue(H,V,Q)}function Rg(u,m){var A=u[m-1+0],L=u[m-1+32],T=u[m-1+64],D=u[m-1+96];u[m+0+0]=A+L+1>>1,u[m+2+0]=u[m+0+32]=L+T+1>>1,u[m+2+32]=u[m+0+64]=T+D+1>>1,u[m+1+0]=ue(A,L,T),u[m+3+0]=u[m+1+32]=ue(L,T,D),u[m+3+32]=u[m+1+64]=ue(T,D,D),u[m+3+64]=u[m+2+64]=u[m+0+96]=u[m+1+96]=u[m+2+96]=u[m+3+96]=D}function Fg(u,m){var A=u[m-1+0],L=u[m-1+32],T=u[m-1+64],D=u[m-1+96],j=u[m-1-32],H=u[m+0-32],V=u[m+1-32],Q=u[m+2-32];u[m+0+0]=u[m+2+32]=A+j+1>>1,u[m+0+32]=u[m+2+64]=L+A+1>>1,u[m+0+64]=u[m+2+96]=T+L+1>>1,u[m+0+96]=D+T+1>>1,u[m+3+0]=ue(H,V,Q),u[m+2+0]=ue(j,H,V),u[m+1+0]=u[m+3+32]=ue(A,j,H),u[m+1+32]=u[m+3+64]=ue(L,A,j),u[m+1+64]=u[m+3+96]=ue(T,L,A),u[m+1+96]=ue(D,T,L)}function Mg(u,m){var A;for(A=0;8>A;++A)i(u,m+32*A,u,m-32,8)}function _u(u,m){var A;for(A=0;8>A;++A)n(u,m,u[m-1],8),m+=32}function Ho(u,m,A){var L;for(L=0;8>L;++L)n(m,A+32*L,u,8)}function Ba(u,m){var A,L=8;for(A=0;8>A;++A)L+=u[m+A-32]+u[m-1+32*A];Ho(L>>4,u,m)}function Dg(u,m){var A,L=4;for(A=0;8>A;++A)L+=u[m+A-32];Ho(L>>3,u,m)}function Wo(u,m){var A,L=4;for(A=0;8>A;++A)L+=u[m-1+32*A];Ho(L>>3,u,m)}function xu(u,m){Ho(128,u,m)}function Cl(u,m,A){var L=u[m-A],T=u[m+0],D=3*(T-L)+Ug[1020+u[m-2*A]-u[m+A]],j=_p[112+(D+4>>3)];u[m-A]=Yn[255+L+_p[112+(D+3>>3)]],u[m+0]=Yn[255+T-j]}function cp(u,m,A,L){var T=u[m+0],D=u[m+A];return ws[255+u[m-2*A]-u[m-A]]>L||ws[255+D-T]>L}function up(u,m,A,L){return 4*ws[255+u[m-A]-u[m+0]]+ws[255+u[m-2*A]-u[m+A]]<=L}function dp(u,m,A,L,T){var D=u[m-3*A],j=u[m-2*A],H=u[m-A],V=u[m+0],Q=u[m+A],ft=u[m+2*A],St=u[m+3*A];return 4*ws[255+H-V]+ws[255+j-Q]>L?0:ws[255+u[m-4*A]-D]<=T&&ws[255+D-j]<=T&&ws[255+j-H]<=T&&ws[255+St-ft]<=T&&ws[255+ft-Q]<=T&&ws[255+Q-V]<=T}function fp(u,m,A,L){var T=2*L+1;for(L=0;16>L;++L)up(u,m+L,A,T)&&Cl(u,m+L,A)}function br(u,m,A,L){var T=2*L+1;for(L=0;16>L;++L)up(u,m+L*A,1,T)&&Cl(u,m+L*A,1)}function Xr(u,m,A,L){var T;for(T=3;0<T;--T)fp(u,m+=4*A,A,L)}function Og(u,m,A,L){var T;for(T=3;0<T;--T)br(u,m+=4,A,L)}function ja(u,m,A,L,T,D,j,H){for(D=2*D+1;0<T--;){if(dp(u,m,A,D,j))if(cp(u,m,A,H))Cl(u,m,A);else{var V=u,Q=m,ft=A,St=V[Q-2*ft],Lt=V[Q-ft],yt=V[Q+0],Rt=V[Q+ft],Et=V[Q+2*ft],pt=27*(Pt=Ug[1020+3*(yt-Lt)+Ug[1020+St-Rt]])+63>>7,mt=18*Pt+63>>7,Pt=9*Pt+63>>7;V[Q-3*ft]=Yn[255+V[Q-3*ft]+Pt],V[Q-2*ft]=Yn[255+St+mt],V[Q-ft]=Yn[255+Lt+pt],V[Q+0]=Yn[255+yt-pt],V[Q+ft]=Yn[255+Rt-mt],V[Q+2*ft]=Yn[255+Et-Pt]}m+=L}}function js(u,m,A,L,T,D,j,H){for(D=2*D+1;0<T--;){if(dp(u,m,A,D,j))if(cp(u,m,A,H))Cl(u,m,A);else{var V=u,Q=m,ft=A,St=V[Q-ft],Lt=V[Q+0],yt=V[Q+ft],Rt=_p[112+((Et=3*(Lt-St))+4>>3)],Et=_p[112+(Et+3>>3)],pt=Rt+1>>1;V[Q-2*ft]=Yn[255+V[Q-2*ft]+pt],V[Q-ft]=Yn[255+St+Et],V[Q+0]=Yn[255+Lt-Rt],V[Q+ft]=Yn[255+yt-pt]}m+=L}}function Su(u,m,A,L,T,D){ja(u,m,A,1,16,L,T,D)}function Go(u,m,A,L,T,D){ja(u,m,1,A,16,L,T,D)}function Bg(u,m,A,L,T,D){var j;for(j=3;0<j;--j)js(u,m+=4*A,A,1,16,L,T,D)}function Nl(u,m,A,L,T,D){var j;for(j=3;0<j;--j)js(u,m+=4,1,A,16,L,T,D)}function jg(u,m,A,L,T,D,j,H){ja(u,m,T,1,8,D,j,H),ja(A,L,T,1,8,D,j,H)}function Lu(u,m,A,L,T,D,j,H){ja(u,m,1,T,8,D,j,H),ja(A,L,1,T,8,D,j,H)}function ku(u,m,A,L,T,D,j,H){js(u,m+4*T,T,1,8,D,j,H),js(A,L+4*T,T,1,8,D,j,H)}function pp(u,m,A,L,T,D,j,H){js(u,m+4,1,T,8,D,j,H),js(A,L+4,1,T,8,D,j,H)}function Pl(){this.ba=new In,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new We,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Eu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Cu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function gp(){this.ua=0,this.Wa=new B,this.vb=new B,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new S,this.yc=new E}function zg(){this.xb=this.a=0,this.l=new xl,this.ca=new In,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new k,this.Pb=0,this.wd=new k,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new gp,this.ab=0,this.gc=r(4,Cu),this.Oc=0}function Il(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Vo(u,m,A,L,T,D,j){for(u=u==null?0:u[m+0],m=0;m<j;++m)T[D+m]=u+A[L+m]&255,u=T[D+m]}function Nu(u,m,A,L,T,D,j){var H;if(u==null)Vo(null,null,A,L,T,D,j);else for(H=0;H<j;++H)T[D+H]=u[m+H]+A[L+H]&255}function za(u,m,A,L,T,D,j){if(u==null)Vo(null,null,A,L,T,D,j);else{var H,V=u[m+0],Q=V,ft=V;for(H=0;H<j;++H)Q=ft+(V=u[m+H])-Q,ft=A[L+H]+(-256&Q?0>Q?0:255:Q)&255,Q=V,T[D+H]=ft}}function Pu(u,m,A,L){var T=m.width,D=m.o;if(e(u!=null&&m!=null),0>A||0>=L||A+L>D)return null;if(!u.Cc){if(u.ga==null){var j;if(u.ga=new Il,(j=u.ga==null)||(j=m.width*m.o,e(u.Gb.length==0),u.Gb=s(j),u.Uc=0,u.Gb==null?j=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,j=1),j=!j),!j){j=u.ga;var H=u.Fa,V=u.P,Q=u.qc,ft=u.mb,St=u.nb,Lt=V+1,yt=Q-1,Rt=j.l;if(e(H!=null&&ft!=null&&m!=null),Va[0]=null,Va[1]=Vo,Va[2]=Nu,Va[3]=za,j.ca=ft,j.tb=St,j.c=m.width,j.i=m.height,e(0<j.c&&0<j.i),1>=Q)m=0;else if(j.$a=H[V+0]>>0&3,j.Z=H[V+0]>>2&3,j.Lc=H[V+0]>>4&3,V=H[V+0]>>6&3,0>j.$a||1<j.$a||4<=j.Z||1<j.Lc||V)m=0;else if(Rt.put=ur,Rt.ac=Gi,Rt.bc=dr,Rt.ma=j,Rt.width=m.width,Rt.height=m.height,Rt.Da=m.Da,Rt.v=m.v,Rt.va=m.va,Rt.j=m.j,Rt.o=m.o,j.$a)t:{e(j.$a==1),m=gs();e:for(;;){if(m==null){m=0;break t}if(e(j!=null),j.mc=m,m.c=j.c,m.i=j.i,m.l=j.l,m.l.ma=j,m.l.width=j.c,m.l.height=j.i,m.a=0,dt(m.m,H,Lt,yt),!gr(j.c,j.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Vr(m.s)?(j.ic=1,H=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(H),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(j.ic=0,m=Uo(m,j.c)),!m))break e;m=1;break t}j.mc=null,m=0}else m=yt>=j.c*j.i;j=!m}if(j)return null;u.ga.Lc!=1?u.Ga=0:L=D-A}e(u.ga!=null),e(A+L<=D);t:{if(m=(H=u.ga).c,D=H.l.o,H.$a==0){if(Lt=u.rc,yt=u.Vc,Rt=u.Fa,V=u.P+1+A*m,Q=u.mb,ft=u.nb+A*m,e(V<=u.P+u.qc),H.Z!=0)for(e(Va[H.Z]!=null),j=0;j<L;++j)Va[H.Z](Lt,yt,Rt,V,Q,ft,m),Lt=Q,yt=ft,ft+=m,V+=m;else for(j=0;j<L;++j)i(Q,ft,Rt,V,m),Lt=Q,yt=ft,ft+=m,V+=m;u.rc=Lt,u.Vc=yt}else{if(e(H.mc!=null),m=A+L,e((j=H.mc)!=null),e(m<=j.i),j.C>=m)m=1;else if(H.ic||xt(),H.ic){H=j.V,Lt=j.Ba,yt=j.c;var Et=j.i,pt=(Rt=1,V=j.$/yt,Q=j.$%yt,ft=j.m,St=j.s,j.$),mt=yt*Et,Pt=yt*m,Dt=St.wc,Tt=pt<Pt?Ai(St,Q,V):null;e(pt<=mt),e(m<=Et),e(Vr(St));e:for(;;){for(;!ft.h&&pt<Pt;){if(Q&Dt||(Tt=Ai(St,Q,V)),e(Tt!=null),ct(ft),256>(Et=Tn(Tt.G[0],Tt.H[0],ft)))H[Lt+pt]=Et,++pt,++Q>=yt&&(Q=0,++V<=m&&!(V%16)&&Ds(j,V));else{if(!(280>Et)){Rt=0;break e}Et=Fs(Et-256,ft);var Vt,Ut=Tn(Tt.G[4],Tt.H[4],ft);if(ct(ft),!(pt>=(Ut=fr(yt,Ut=Fs(Ut,ft)))&&mt-pt>=Et)){Rt=0;break e}for(Vt=0;Vt<Et;++Vt)H[Lt+pt+Vt]=H[Lt+pt+Vt-Ut];for(pt+=Et,Q+=Et;Q>=yt;)Q-=yt,++V<=m&&!(V%16)&&Ds(j,V);pt<Pt&&Q&Dt&&(Tt=Ai(St,Q,V))}e(ft.h==Y(ft))}Ds(j,V>m?m:V);break e}!Rt||ft.h&&pt<mt?(Rt=0,j.a=ft.h?5:3):j.$=pt,m=Rt}else m=Os(j,j.V,j.Ba,j.c,j.i,m,vl);if(!m){L=0;break t}}A+L>=D&&(u.Cc=1),L=1}if(!L)return null;if(u.Cc&&((L=u.ga)!=null&&(L.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+A*T}function w(u,m,A,L,T,D){for(;0<T--;){var j,H=u,V=m+(A?1:0),Q=u,ft=m+(A?0:3);for(j=0;j<L;++j){var St=Q[ft+4*j];St!=255&&(St*=32897,H[V+4*j+0]=H[V+4*j+0]*St>>23,H[V+4*j+1]=H[V+4*j+1]*St>>23,H[V+4*j+2]=H[V+4*j+2]*St>>23)}m+=D}}function R(u,m,A,L,T){for(;0<L--;){var D;for(D=0;D<A;++D){var j=u[m+2*D+0],H=15&(Q=u[m+2*D+1]),V=4369*H,Q=(240&Q|Q>>4)*V>>16;u[m+2*D+0]=(240&j|j>>4)*V>>16&240|(15&j|j<<4)*V>>16>>4&15,u[m+2*D+1]=240&Q|H}m+=T}}function it(u,m,A,L,T,D,j,H){var V,Q,ft=255;for(Q=0;Q<T;++Q){for(V=0;V<L;++V){var St=u[m+V];D[j+4*V]=St,ft&=St}m+=A,j+=H}return ft!=255}function ut(u,m,A,L,T){var D;for(D=0;D<T;++D)A[L+D]=u[m+D]>>8}function xt(){ys=w,Xe=R,Ye=it,pi=ut}function Ct(u,m,A){U[u]=function(L,T,D,j,H,V,Q,ft,St,Lt,yt,Rt,Et,pt,mt,Pt,Dt){var Tt,Vt=Dt-1>>1,Ut=H[V+0]|Q[ft+0]<<16,se=St[Lt+0]|yt[Rt+0]<<16;e(L!=null);var Wt=3*Ut+se+131074>>2;for(m(L[T+0],255&Wt,Wt>>16,Et,pt),D!=null&&(Wt=3*se+Ut+131074>>2,m(D[j+0],255&Wt,Wt>>16,mt,Pt)),Tt=1;Tt<=Vt;++Tt){var Re=H[V+Tt]|Q[ft+Tt]<<16,De=St[Lt+Tt]|yt[Rt+Tt]<<16,Ce=Ut+Re+se+De+524296,Se=Ce+2*(Re+se)>>3;Wt=Se+Ut>>1,Ut=(Ce=Ce+2*(Ut+De)>>3)+Re>>1,m(L[T+2*Tt-1],255&Wt,Wt>>16,Et,pt+(2*Tt-1)*A),m(L[T+2*Tt-0],255&Ut,Ut>>16,Et,pt+(2*Tt-0)*A),D!=null&&(Wt=Ce+se>>1,Ut=Se+De>>1,m(D[j+2*Tt-1],255&Wt,Wt>>16,mt,Pt+(2*Tt-1)*A),m(D[j+2*Tt+0],255&Ut,Ut>>16,mt,Pt+(2*Tt+0)*A)),Ut=Re,se=De}1&Dt||(Wt=3*Ut+se+131074>>2,m(L[T+Dt-1],255&Wt,Wt>>16,Et,pt+(Dt-1)*A),D!=null&&(Wt=3*se+Ut+131074>>2,m(D[j+Dt-1],255&Wt,Wt>>16,mt,Pt+(Dt-1)*A)))}}function Ot(){As[xp]=ly,As[Sp]=vm,As[fm]=cy,As[Lp]=ym,As[kp]=wm,As[Hg]=Am,As[pm]=uy,As[Wg]=vm,As[Gg]=ym,As[Ep]=wm,As[Vg]=Am}function Gt(u){return u&~dy?0>u?0:255:u>>_m}function ie(u,m){return Gt((19077*u>>8)+(26149*m>>8)-14234)}function me(u,m,A){return Gt((19077*u>>8)-(6419*m>>8)-(13320*A>>8)+8708)}function fe(u,m){return Gt((19077*u>>8)+(33050*m>>8)-17685)}function Ee(u,m,A,L,T){L[T+0]=ie(u,A),L[T+1]=me(u,m,A),L[T+2]=fe(u,m)}function ni(u,m,A,L,T){L[T+0]=fe(u,m),L[T+1]=me(u,m,A),L[T+2]=ie(u,A)}function hi(u,m,A,L,T){var D=me(u,m,A);m=D<<3&224|fe(u,m)>>3,L[T+0]=248&ie(u,A)|D>>5,L[T+1]=m}function _i(u,m,A,L,T){var D=240&fe(u,m)|15;L[T+0]=240&ie(u,A)|me(u,m,A)>>4,L[T+1]=D}function nn(u,m,A,L,T){L[T+0]=255,Ee(u,m,A,L,T+1)}function Mi(u,m,A,L,T){ni(u,m,A,L,T),L[T+3]=255}function zs(u,m,A,L,T){Ee(u,m,A,L,T),L[T+3]=255}function Xn(u,m){return 0>u?0:u>m?m:u}function vr(u,m,A){U[u]=function(L,T,D,j,H,V,Q,ft,St){for(var Lt=ft+(-2&St)*A;ft!=Lt;)m(L[T+0],D[j+0],H[V+0],Q,ft),m(L[T+1],D[j+0],H[V+0],Q,ft+A),T+=2,++j,++V,ft+=2*A;1&St&&m(L[T+0],D[j+0],H[V+0],Q,ft)}}function mp(u,m,A){return A==0?u==0?m==0?6:5:m==0?4:0:A}function Iu(u,m,A,L,T){switch(u>>>30){case 3:Zr(m,A,L,T,0);break;case 2:fi(m,A,L,T);break;case 1:wn(m,A,L,T)}}function Tu(u,m){var A,L,T=m.M,D=m.Nb,j=u.oc,H=u.pc+40,V=u.oc,Q=u.pc+584,ft=u.oc,St=u.pc+600;for(A=0;16>A;++A)j[H+32*A-1]=129;for(A=0;8>A;++A)V[Q+32*A-1]=129,ft[St+32*A-1]=129;for(0<T?j[H-1-32]=V[Q-1-32]=ft[St-1-32]=129:(n(j,H-32-1,127,21),n(V,Q-32-1,127,9),n(ft,St-32-1,127,9)),L=0;L<u.za;++L){var Lt=m.ya[m.aa+L];if(0<L){for(A=-1;16>A;++A)i(j,H+32*A-4,j,H+32*A+12,4);for(A=-1;8>A;++A)i(V,Q+32*A-4,V,Q+32*A+4,4),i(ft,St+32*A-4,ft,St+32*A+4,4)}var yt=u.Gd,Rt=u.Hd+L,Et=Lt.ad,pt=Lt.Hc;if(0<T&&(i(j,H-32,yt[Rt].y,0,16),i(V,Q-32,yt[Rt].f,0,8),i(ft,St-32,yt[Rt].ea,0,8)),Lt.Za){var mt=j,Pt=H-32+16;for(0<T&&(L>=u.za-1?n(mt,Pt,yt[Rt].y[15],4):i(mt,Pt,yt[Rt+1].y,0,4)),A=0;4>A;A++)mt[Pt+128+A]=mt[Pt+256+A]=mt[Pt+384+A]=mt[Pt+0+A];for(A=0;16>A;++A,pt<<=2)mt=j,Pt=H+Sm[A],qs[Lt.Ob[A]](mt,Pt),Iu(pt,Et,16*+A,mt,Pt)}else if(mt=mp(L,T,Lt.Ob[0]),Ga[mt](j,H),pt!=0)for(A=0;16>A;++A,pt<<=2)Iu(pt,Et,16*+A,j,H+Sm[A]);for(A=Lt.Gc,mt=mp(L,T,Lt.Dd),Qr[mt](V,Q),Qr[mt](ft,St),pt=Et,mt=V,Pt=Q,255&(Lt=A>>0)&&(170&Lt?Ou(pt,256,mt,Pt):bs(pt,256,mt,Pt)),Lt=ft,pt=St,255&(A>>=8)&&(170&A?Ou(Et,320,Lt,pt):bs(Et,320,Lt,pt)),T<u.Ub-1&&(i(yt[Rt].y,0,j,H+480,16),i(yt[Rt].f,0,V,Q+224,8),i(yt[Rt].ea,0,ft,St+224,8)),A=8*D*u.B,yt=u.sa,Rt=u.ta+16*L+16*D*u.R,Et=u.qa,Lt=u.ra+8*L+A,pt=u.Ha,mt=u.Ia+8*L+A,A=0;16>A;++A)i(yt,Rt+A*u.R,j,H+32*A,16);for(A=0;8>A;++A)i(Et,Lt+A*u.B,V,Q+32*A,8),i(pt,mt+A*u.B,ft,St+32*A,8)}}function Tl(u,m,A,L,T,D,j,H,V){var Q=[0],ft=[0],St=0,Lt=V!=null?V.kd:0,yt=V??new Eu;if(u==null||12>A)return 7;yt.data=u,yt.w=m,yt.ha=A,m=[m],A=[A],yt.gb=[yt.gb];t:{var Rt=m,Et=A,pt=yt.gb;if(e(u!=null),e(Et!=null),e(pt!=null),pt[0]=0,12<=Et[0]&&!t(u,Rt[0],"RIFF")){if(t(u,Rt[0]+8,"WEBP")){pt=3;break t}var mt=jt(u,Rt[0]+4);if(12>mt||4294967286<mt){pt=3;break t}if(Lt&&mt>Et[0]-8){pt=7;break t}pt[0]=mt,Rt[0]+=12,Et[0]-=12}pt=0}if(pt!=0)return pt;for(mt=0<yt.gb[0],A=A[0];;){t:{var Pt=u;Et=m,pt=A;var Dt=Q,Tt=ft,Vt=Rt=[0];if((Wt=St=[St])[0]=0,8>pt[0])pt=7;else{if(!t(Pt,Et[0],"VP8X")){if(jt(Pt,Et[0]+4)!=10){pt=3;break t}if(18>pt[0]){pt=7;break t}var Ut=jt(Pt,Et[0]+8),se=1+zt(Pt,Et[0]+12);if(2147483648<=se*(Pt=1+zt(Pt,Et[0]+15))){pt=3;break t}Vt!=null&&(Vt[0]=Ut),Dt!=null&&(Dt[0]=se),Tt!=null&&(Tt[0]=Pt),Et[0]+=18,pt[0]-=18,Wt[0]=1}pt=0}}if(St=St[0],Rt=Rt[0],pt!=0)return pt;if(Et=!!(2&Rt),!mt&&St)return 3;if(D!=null&&(D[0]=!!(16&Rt)),j!=null&&(j[0]=Et),H!=null&&(H[0]=0),j=Q[0],Rt=ft[0],St&&Et&&V==null){pt=0;break}if(4>A){pt=7;break}if(mt&&St||!mt&&!St&&!t(u,m[0],"ALPH")){A=[A],yt.na=[yt.na],yt.P=[yt.P],yt.Sa=[yt.Sa];t:{Ut=u,pt=m,mt=A;var Wt=yt.gb;Dt=yt.na,Tt=yt.P,Vt=yt.Sa,se=22,e(Ut!=null),e(mt!=null),Pt=pt[0];var Re=mt[0];for(e(Dt!=null),e(Vt!=null),Dt[0]=null,Tt[0]=null,Vt[0]=0;;){if(pt[0]=Pt,mt[0]=Re,8>Re){pt=7;break t}var De=jt(Ut,Pt+4);if(4294967286<De){pt=3;break t}var Ce=8+De+1&-2;if(se+=Ce,0<Wt&&se>Wt){pt=3;break t}if(!t(Ut,Pt,"VP8 ")||!t(Ut,Pt,"VP8L")){pt=0;break t}if(Re[0]<Ce){pt=7;break t}t(Ut,Pt,"ALPH")||(Dt[0]=Ut,Tt[0]=Pt+8,Vt[0]=De),Pt+=Ce,Re-=Ce}}if(A=A[0],yt.na=yt.na[0],yt.P=yt.P[0],yt.Sa=yt.Sa[0],pt!=0)break}A=[A],yt.Ja=[yt.Ja],yt.xa=[yt.xa];t:if(Wt=u,pt=m,mt=A,Dt=yt.gb[0],Tt=yt.Ja,Vt=yt.xa,Ut=pt[0],Pt=!t(Wt,Ut,"VP8 "),se=!t(Wt,Ut,"VP8L"),e(Wt!=null),e(mt!=null),e(Tt!=null),e(Vt!=null),8>mt[0])pt=7;else{if(Pt||se){if(Wt=jt(Wt,Ut+4),12<=Dt&&Wt>Dt-12){pt=3;break t}if(Lt&&Wt>mt[0]-8){pt=7;break t}Tt[0]=Wt,pt[0]+=8,mt[0]-=8,Vt[0]=se}else Vt[0]=5<=mt[0]&&Wt[Ut+0]==47&&!(Wt[Ut+4]>>5),Tt[0]=mt[0];pt=0}if(A=A[0],yt.Ja=yt.Ja[0],yt.xa=yt.xa[0],m=m[0],pt!=0)break;if(4294967286<yt.Ja)return 3;if(H==null||Et||(H[0]=yt.xa?2:1),j=[j],Rt=[Rt],yt.xa){if(5>A){pt=7;break}H=j,Lt=Rt,Et=D,u==null||5>A?u=0:5<=A&&u[m+0]==47&&!(u[m+4]>>5)?(mt=[0],Wt=[0],Dt=[0],dt(Tt=new k,u,m,A),oe(Tt,mt,Wt,Dt)?(H!=null&&(H[0]=mt[0]),Lt!=null&&(Lt[0]=Wt[0]),Et!=null&&(Et[0]=Dt[0]),u=1):u=0):u=0}else{if(10>A){pt=7;break}H=Rt,u==null||10>A||!tp(u,m+3,A-3)?u=0:(Lt=u[m+0]|u[m+1]<<8|u[m+2]<<16,Et=16383&(u[m+7]<<8|u[m+6]),u=16383&(u[m+9]<<8|u[m+8]),1&Lt||3<(Lt>>1&7)||!(Lt>>4&1)||Lt>>5>=yt.Ja||!Et||!u?u=0:(j&&(j[0]=Et),H&&(H[0]=u),u=1))}if(!u||(j=j[0],Rt=Rt[0],St&&(Q[0]!=j||ft[0]!=Rt)))return 3;V!=null&&(V[0]=yt,V.offset=m-V.w,e(4294967286>m-V.w),e(V.offset==V.ha-A));break}return pt==0||pt==7&&St&&V==null?(D!=null&&(D[0]|=yt.na!=null&&0<yt.na.length),L!=null&&(L[0]=j),T!=null&&(T[0]=Rt),0):pt}function Ru(u,m,A){var L=m.width,T=m.height,D=0,j=0,H=L,V=T;if(m.Da=u!=null&&0<u.Da,m.Da&&(H=u.cd,V=u.bd,D=u.v,j=u.j,11>A||(D&=-2,j&=-2),0>D||0>j||0>=H||0>=V||D+H>L||j+V>T))return 0;if(m.v=D,m.j=j,m.va=D+H,m.o=j+V,m.U=H,m.T=V,m.da=u!=null&&0<u.da,m.da){if(!J(H,V,A=[u.ib],D=[u.hb]))return 0;m.ib=A[0],m.hb=D[0]}return m.ob=u!=null&&u.ob,m.Kb=u==null||!u.Sd,m.da&&(m.ob=m.ib<3*L/4&&m.hb<3*T/4,m.Kb=0),1}function Fu(u){if(u==null)return 2;if(11>u.S){var m=u.f.RGBA;m.fb+=(u.height-1)*m.A,m.A=-m.A}else m=u.f.kb,u=u.height,m.O+=(u-1)*m.fa,m.fa=-m.fa,m.N+=(u-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(u-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(u-1)*m.lb,m.lb=-m.lb);return 0}function Rl(u,m,A,L){if(L==null||0>=u||0>=m)return 2;if(A!=null){if(A.Da){var T=A.cd,D=A.bd,j=-2&A.v,H=-2&A.j;if(0>j||0>H||0>=T||0>=D||j+T>u||H+D>m)return 2;u=T,m=D}if(A.da){if(!J(u,m,T=[A.ib],D=[A.hb]))return 2;u=T[0],m=D[0]}}L.width=u,L.height=m;t:{var V=L.width,Q=L.height;if(u=L.S,0>=V||0>=Q||!(u>=xp&&13>u))u=2;else{if(0>=L.Rd&&L.sd==null){j=D=T=m=0;var ft=(H=V*Lm[u])*Q;if(11>u||(D=(Q+1)/2*(m=(V+1)/2),u==12&&(j=(T=V)*Q)),(Q=s(ft+2*D+j))==null){u=1;break t}L.sd=Q,11>u?((V=L.f.RGBA).eb=Q,V.fb=0,V.A=H,V.size=ft):((V=L.f.kb).y=Q,V.O=0,V.fa=H,V.Fd=ft,V.f=Q,V.N=0+ft,V.Ab=m,V.Cd=D,V.ea=Q,V.W=0+ft+D,V.Db=m,V.Ed=D,u==12&&(V.F=Q,V.J=0+ft+2*D),V.Tc=j,V.lb=T)}if(m=1,T=L.S,D=L.width,j=L.height,T>=xp&&13>T)if(11>T)u=L.f.RGBA,m&=(H=Math.abs(u.A))*(j-1)+D<=u.size,m&=H>=D*Lm[T],m&=u.eb!=null;else{u=L.f.kb,H=(D+1)/2,ft=(j+1)/2,V=Math.abs(u.fa),Q=Math.abs(u.Ab);var St=Math.abs(u.Db),Lt=Math.abs(u.lb),yt=Lt*(j-1)+D;m&=V*(j-1)+D<=u.Fd,m&=Q*(ft-1)+H<=u.Cd,m=(m&=St*(ft-1)+H<=u.Ed)&V>=D&Q>=H&St>=H,m&=u.y!=null,m&=u.f!=null,m&=u.ea!=null,T==12&&(m&=Lt>=D,m&=yt<=u.Tc,m&=u.F!=null)}else m=0;u=m?0:2}}return u!=0||A!=null&&A.fd&&(u=Fu(L)),u}var Vi=64,Fl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ml=24,Dl=32,Mu=8,Fn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];vt("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(u){return u},U.Predictor2=function(u,m,A){return m[A+0]},U.Predictor3=function(u,m,A){return m[A+1]},U.Predictor4=function(u,m,A){return m[A-1]},U.Predictor5=function(u,m,A){return ht(ht(u,m[A+1]),m[A+0])},U.Predictor6=function(u,m,A){return ht(u,m[A-1])},U.Predictor7=function(u,m,A){return ht(u,m[A+0])},U.Predictor8=function(u,m,A){return ht(m[A-1],m[A+0])},U.Predictor9=function(u,m,A){return ht(m[A+0],m[A+1])},U.Predictor10=function(u,m,A){return ht(ht(u,m[A-1]),ht(m[A+0],m[A+1]))},U.Predictor11=function(u,m,A){var L=m[A+0];return 0>=Nt(L>>24&255,u>>24&255,(m=m[A-1])>>24&255)+Nt(L>>16&255,u>>16&255,m>>16&255)+Nt(L>>8&255,u>>8&255,m>>8&255)+Nt(255&L,255&u,255&m)?L:u},U.Predictor12=function(u,m,A){var L=m[A+0];return(kt((u>>24&255)+(L>>24&255)-((m=m[A-1])>>24&255))<<24|kt((u>>16&255)+(L>>16&255)-(m>>16&255))<<16|kt((u>>8&255)+(L>>8&255)-(m>>8&255))<<8|kt((255&u)+(255&L)-(255&m)))>>>0},U.Predictor13=function(u,m,A){var L=m[A-1];return(Ft((u=ht(u,m[A+0]))>>24&255,L>>24&255)<<24|Ft(u>>16&255,L>>16&255)<<16|Ft(u>>8&255,L>>8&255)<<8|Ft(u>>0&255,L>>0&255))>>>0};var qg=U.PredictorAdd0;U.PredictorAdd1=Bt,vt("Predictor2","PredictorAdd2"),vt("Predictor3","PredictorAdd3"),vt("Predictor4","PredictorAdd4"),vt("Predictor5","PredictorAdd5"),vt("Predictor6","PredictorAdd6"),vt("Predictor7","PredictorAdd7"),vt("Predictor8","PredictorAdd8"),vt("Predictor9","PredictorAdd9"),vt("Predictor10","PredictorAdd10"),vt("Predictor11","PredictorAdd11"),vt("Predictor12","PredictorAdd12"),vt("Predictor13","PredictorAdd13");var Du=U.PredictorAdd2;ge("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),ge("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var bp,ms=U.ColorIndexInverseTransform,Ol=U.MapARGB,vp=U.VP8LColorIndexInverseTransformAlpha,yp=U.MapAlpha,qa=U.VP8LPredictorsAdd=[];qa.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var $o,Mn,yn,Ua,Yr,Kr,Bl,Zr,fi,Ou,wn,bs,jl,wp,Bu,Xo,Yo,Ha,Ko,zl,Zo,Wa,ju,vs,ys,Xe,Ye,pi,Ni=s(511),Jr=s(2041),zu=s(225),ql=s(767),Ap=0,Ug=Jr,_p=zu,Yn=ql,ws=Ni,xp=0,Sp=1,fm=2,Lp=3,kp=4,Hg=5,pm=6,Wg=7,Gg=8,Ep=9,Vg=10,Yv=[2,3,7],Kv=[3,3,11],gm=[280,256,256,256,40],Zv=[0,1,1,1,0],Jv=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qv=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ty=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ey=8,$g=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Xg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],qu=null,iy=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ny=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sy=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ry=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ay=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],oy=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ga=[],qs=[],Qr=[],hy=1,bm=2,Va=[],As=[];Ct("UpsampleRgbLinePair",Ee,3),Ct("UpsampleBgrLinePair",ni,3),Ct("UpsampleRgbaLinePair",zs,4),Ct("UpsampleBgraLinePair",Mi,4),Ct("UpsampleArgbLinePair",nn,4),Ct("UpsampleRgba4444LinePair",_i,2),Ct("UpsampleRgb565LinePair",hi,2);var ly=U.UpsampleRgbLinePair,cy=U.UpsampleBgrLinePair,vm=U.UpsampleRgbaLinePair,ym=U.UpsampleBgraLinePair,wm=U.UpsampleArgbLinePair,Am=U.UpsampleRgba4444LinePair,uy=U.UpsampleRgb565LinePair,Cp=16,Np=1<<Cp-1,Uu=-227,Yg=482,_m=6,dy=(256<<_m)-1,xm=0,fy=s(256),py=s(256),gy=s(256),my=s(256),by=s(Yg-Uu),vy=s(Yg-Uu);vr("YuvToRgbRow",Ee,3),vr("YuvToBgrRow",ni,3),vr("YuvToRgbaRow",zs,4),vr("YuvToBgraRow",Mi,4),vr("YuvToArgbRow",nn,4),vr("YuvToRgba4444Row",_i,2),vr("YuvToRgb565Row",hi,2);var Sm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Pp=[0,2,8],yy=[8,7,6,4,4,2,2,2,1,1,1,1],wy=1;this.WebPDecodeRGBA=function(u,m,A,L,T){var D=Sp,j=new Pl,H=new In;j.ba=H,H.S=D,H.width=[H.width],H.height=[H.height];var V=H.width,Q=H.height,ft=new vn;if(ft==null||u==null)var St=2;else e(ft!=null),St=Tl(u,m,A,ft.width,ft.height,ft.Pd,ft.Qd,ft.format,null);if(St!=0?V=0:(V!=null&&(V[0]=ft.width[0]),Q!=null&&(Q[0]=ft.height[0]),V=1),V){H.width=H.width[0],H.height=H.height[0],L!=null&&(L[0]=H.width),T!=null&&(T[0]=H.height);t:{if(L=new xl,(T=new Eu).data=u,T.w=m,T.ha=A,T.kd=1,m=[0],e(T!=null),((u=Tl(T.data,T.w,T.ha,null,null,null,m,null,T))==0||u==7)&&m[0]&&(u=4),(m=u)==0){if(e(j!=null),L.data=T.data,L.w=T.w+T.offset,L.ha=T.ha-T.offset,L.put=ur,L.ac=Gi,L.bc=dr,L.ma=j,T.xa){if((u=gs())==null){j=1;break t}if(function(Lt,yt){var Rt=[0],Et=[0],pt=[0];e:for(;;){if(Lt==null)return 0;if(yt==null)return Lt.a=2,0;if(Lt.l=yt,Lt.a=0,dt(Lt.m,yt.data,yt.w,yt.ha),!oe(Lt.m,Rt,Et,pt)){Lt.a=3;break e}if(Lt.xb=bm,yt.width=Rt[0],yt.height=Et[0],!gr(Rt[0],Et[0],1,Lt,null))break e;return 1}return e(Lt.a!=0),0}(u,L)){if(L=(m=Rl(L.width,L.height,j.Oa,j.ba))==0){e:{L=u;i:for(;;){if(L==null){L=0;break e}if(e(L.s.yc!=null),e(L.s.Ya!=null),e(0<L.s.Wb),e((A=L.l)!=null),e((T=A.ma)!=null),L.xb!=0){if(L.ca=T.ba,L.tb=T.tb,e(L.ca!=null),!Ru(T.Oa,A,Lp)){L.a=2;break i}if(!Uo(L,A.width)||A.da)break i;if((A.da||Pe(L.ca.S))&&xt(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&xt()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!N(L.s.vb,L.s.Wa.Xa)){L.a=1;break i}L.xb=0}if(!Os(L,L.V,L.Ba,L.c,L.i,A.o,bl))break i;T.Dc=L.Ma,L=1;break e}e(L.a!=0),L=0}L=!L}L&&(m=u.a)}else m=u.a}else{if((u=new _g)==null){j=1;break t}if(u.Fa=T.na,u.P=T.P,u.qc=T.Sa,ep(u,L)){if((m=Rl(L.width,L.height,j.Oa,j.ba))==0){if(u.Aa=0,A=j.Oa,e((T=u)!=null),A!=null){if(0<(V=0>(V=A.Md)?0:100<V?255:255*V/100)){for(Q=ft=0;4>Q;++Q)12>(St=T.pb[Q]).lc&&(St.ia=V*yy[0>St.lc?0:St.lc]>>3),ft|=St.ia;ft&&(alert("todo:VP8InitRandom"),T.ia=1)}T.Ga=A.Id,100<T.Ga?T.Ga=100:0>T.Ga&&(T.Ga=0)}xg(u,L)||(m=u.a)}}else m=u.a}m==0&&j.Oa!=null&&j.Oa.fd&&(m=Fu(j.ba))}j=m}D=j!=0?null:11>D?H.f.RGBA.eb:H.f.kb.y}else D=null;return D};var Lm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(U,X){for(var rt="",M=0;M<4;M++)rt+=String.fromCharCode(U[X++]);return rt}function d(U,X){return(U[X+0]<<0|U[X+1]<<8|U[X+2]<<16)>>>0}function p(U,X){return(U[X+0]<<0|U[X+1]<<8|U[X+2]<<16|U[X+3]<<24)>>>0}new o;var g=[0],f=[0],v=[],b=new o,_=h,y=function(U,X){var rt={},M=0,E=!1,W=0,S=0;if(rt.frames=[],!function(G,Y,Z,ct){for(var gt=0;gt<ct;gt++)if(G[Y+gt]!=Z.charCodeAt(gt))return!0;return!1}(U,X,"RIFF",4)){var nt,st;for(p(U,X+=4),X+=8;X<U.length;){var tt=c(U,X),dt=p(U,X+=4);X+=4;var ot=dt+(1&dt);switch(tt){case"VP8 ":case"VP8L":rt.frames[M]===void 0&&(rt.frames[M]={}),(k=rt.frames[M]).src_off=E?S:X-8,k.src_size=W+dt+8,M++,E&&(E=!1,W=0,S=0);break;case"VP8X":(k=rt.header={}).feature_flags=U[X];var At=X+4;k.canvas_width=1+d(U,At),At+=3,k.canvas_height=1+d(U,At),At+=3;break;case"ALPH":E=!0,W=ot+8,S=X-8;break;case"ANIM":(k=rt.header).bgcolor=p(U,X),At=X+4,k.loop_count=(nt=U)[(st=At)+0]<<0|nt[st+1]<<8,At+=2;break;case"ANMF":var lt,k;(k=rt.frames[M]={}).offset_x=2*d(U,X),X+=3,k.offset_y=2*d(U,X),X+=3,k.width=1+d(U,X),X+=3,k.height=1+d(U,X),X+=3,k.duration=d(U,X),X+=3,lt=U[X++],k.dispose=1&lt,k.blend=lt>>1&1}tt!="ANMF"&&(X+=ot)}return rt}}(_,0);y.response=_,y.rgbaoutput=!0,y.dataurl=!1;var x=y.header?y.header:null,C=y.frames?y.frames:null;if(x){x.loop_counter=x.loop_count,g=[x.canvas_height],f=[x.canvas_width];for(var I=0;I<C.length&&C[I].blend!=0;I++);}var F=C[0],K=b.WebPDecodeRGBA(_,F.src_off,F.src_size,f,g);F.rgba=K,F.imgwidth=f[0],F.imgheight=g[0];for(var q=0;q<f[0]*g[0]*4;q++)v[q]=K[q];return this.width=f,this.height=g,this.data=v,this}(function(h){var e=function(){return typeof E0=="function"},t=function(g,f,v,b){var _=4,y=r;switch(b){case h.image_compression.FAST:_=1,y=s;break;case h.image_compression.MEDIUM:_=6,y=a;break;case h.image_compression.SLOW:_=9,y=o}g=i(g,f,v,y);var x=E0(g,{level:_});return h.__addimage__.arrayBufferToBinaryString(x)},i=function(g,f,v,b){for(var _,y,x,C=g.length/f,I=new Uint8Array(g.length+C),F=d(),K=0;K<C;K+=1){if(x=K*f,_=g.subarray(x,x+f),b)I.set(b(_,v,y),x+K);else{for(var q,U=F.length,X=[];q<U;q+=1)X[q]=F[q](_,v,y);var rt=p(X.concat());I.set(X[rt],x+K)}y=_}return I},n=function(g){var f=Array.apply([],g);return f.unshift(0),f},s=function(g,f){var v,b=[],_=g.length;b[0]=1;for(var y=0;y<_;y+=1)v=g[y-f]||0,b[y+1]=g[y]-v+256&255;return b},r=function(g,f,v){var b,_=[],y=g.length;_[0]=2;for(var x=0;x<y;x+=1)b=v&&v[x]||0,_[x+1]=g[x]-b+256&255;return _},a=function(g,f,v){var b,_,y=[],x=g.length;y[0]=3;for(var C=0;C<x;C+=1)b=g[C-f]||0,_=v&&v[C]||0,y[C+1]=g[C]+256-(b+_>>>1)&255;return y},o=function(g,f,v){var b,_,y,x,C=[],I=g.length;C[0]=4;for(var F=0;F<I;F+=1)b=g[F-f]||0,_=v&&v[F]||0,y=v&&v[F-f]||0,x=c(b,_,y),C[F+1]=g[F]-x+256&255;return C},c=function(g,f,v){if(g===f&&f===v)return g;var b=Math.abs(f-v),_=Math.abs(g-v),y=Math.abs(g+f-v-v);return b<=_&&b<=y?g:_<=y?f:v},d=function(){return[n,s,r,a,o]},p=function(g){var f=g.map(function(v){return v.reduce(function(b,_){return b+Math.abs(_)},0)});return f.indexOf(Math.min.apply(null,f))};h.processPNG=function(g,f,v,b){var _,y,x,C,I,F,K,q,U,X,rt,M,E,W,S,nt=this.decode.FLATE_DECODE,st="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(x=new bw(g)).imgData,y=x.bits,_=x.colorSpace,I=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){U=(q=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,rt=new Uint8Array(U*x.colors),X=new Uint8Array(U);var tt,dt=x.pixelBitlength-x.bits;for(W=0,S=0;W<U;W++){for(E=q[W],tt=0;tt<dt;)rt[S++]=E>>>tt&255,tt+=x.bits;X[W]=E>>>tt&255}}if(x.bits===16){U=(q=new Uint32Array(x.decodePixels().buffer)).length,rt=new Uint8Array(U*(32/x.pixelBitlength)*x.colors),X=new Uint8Array(U*(32/x.pixelBitlength)),M=x.colors>1,W=0,S=0;for(var ot=0;W<U;)E=q[W++],rt[S++]=E>>>0&255,M&&(rt[S++]=E>>>16&255,E=q[W++],rt[S++]=E>>>0&255),X[ot++]=E>>>16&255;y=8}b!==h.image_compression.NONE&&e()?(g=t(rt,x.width*x.colors,x.colors,b),K=t(X,x.width,1,b)):(g=rt,K=X,nt=void 0)}if(x.colorType===3&&(_=this.color_spaces.INDEXED,F=x.palette,x.transparency.indexed)){var At=x.transparency.indexed,lt=0;for(W=0,U=At.length;W<U;++W)lt+=At[W];if((lt/=255)===U-1&&At.indexOf(0)!==-1)C=[At.indexOf(0)];else if(lt!==U){for(q=x.decodePixels(),X=new Uint8Array(q.length),W=0,U=q.length;W<U;W++)X[W]=At[q[W]];K=t(X,x.width,1)}}var k=function(G){var Y;switch(G){case h.image_compression.FAST:Y=11;break;case h.image_compression.MEDIUM:Y=13;break;case h.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(b);return nt===this.decode.FLATE_DECODE&&(st="/Predictor "+k+" "),st+="/Colors "+I+" /BitsPerComponent "+y+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(K&&this.__addimage__.isArrayBuffer(K)||this.__addimage__.isArrayBufferView(K))&&(K=this.__addimage__.arrayBufferToBinaryString(K)),{alias:v,data:g,index:f,filter:nt,decodeParameters:st,transparency:C,palette:F,sMask:K,predictor:k,width:x.width,height:x.height,bitsPerComponent:y,colorSpace:_}}}})(le.API),function(h){h.processGIF89A=function(e,t,i,n){var s=new vw(e),r=s.width,a=s.height,o=[];s.decodeAndBlitFrameRGBA(0,o);var c={data:o,width:r,height:a},d=new p0(100).encode(c,100);return h.processJPEG.call(this,d,t,i,n)},h.processGIF87A=h.processGIF89A}(le.API),Ws.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var h=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(h);for(var e=0;e<h;e++){var t=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:n,green:i,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ws.prototype.parseBGR=function(){this.pos=this.offset;try{var h="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[h]()}catch(t){Ve.log("bit decode error:"+t)}},Ws.prototype.bit1=function(){var h,e=Math.ceil(this.width/8),t=e%4;for(h=this.height-1;h>=0;h--){for(var i=this.bottom_up?h:this.height-1-h,n=0;n<e;n++)for(var s=this.datav.getUint8(this.pos++,!0),r=i*this.width*4+8*n*4,a=0;a<8&&8*n+a<this.width;a++){var o=this.palette[s>>7-a&1];this.data[r+4*a]=o.blue,this.data[r+4*a+1]=o.green,this.data[r+4*a+2]=o.red,this.data[r+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Ws.prototype.bit4=function(){for(var h=Math.ceil(this.width/2),e=h%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,n=0;n<h;n++){var s=this.datav.getUint8(this.pos++,!0),r=i*this.width*4+2*n*4,a=s>>4,o=15&s,c=this.palette[a];if(this.data[r]=c.blue,this.data[r+1]=c.green,this.data[r+2]=c.red,this.data[r+3]=255,2*n+1>=this.width)break;c=this.palette[o],this.data[r+4]=c.blue,this.data[r+4+1]=c.green,this.data[r+4+2]=c.red,this.data[r+4+3]=255}e!==0&&(this.pos+=4-e)}},Ws.prototype.bit8=function(){for(var h=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*i;if(n<this.palette.length){var r=this.palette[n];this.data[s]=r.red,this.data[s+1]=r.green,this.data[s+2]=r.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}h!==0&&(this.pos+=4-h)}},Ws.prototype.bit15=function(){for(var h=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var r=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,o=(s>>10&e)/e*255|0,c=s>>15?255:0,d=i*this.width*4+4*n;this.data[d]=o,this.data[d+1]=a,this.data[d+2]=r,this.data[d+3]=c}this.pos+=h}},Ws.prototype.bit16=function(){for(var h=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(r&e)/e*255|0,o=(r>>5&t)/t*255|0,c=(r>>11)/e*255|0,d=n*this.width*4+4*s;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=255}this.pos+=h}},Ws.prototype.bit24=function(){for(var h=this.height-1;h>=0;h--){for(var e=this.bottom_up?h:this.height-1-h,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=e*this.width*4+4*t;this.data[r]=s,this.data[r+1]=n,this.data[r+2]=i,this.data[r+3]=255}this.pos+=this.width%4}},Ws.prototype.bit32=function(){for(var h=this.height-1;h>=0;h--)for(var e=this.bottom_up?h:this.height-1-h,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=n,this.data[a+2]=i,this.data[a+3]=r}},Ws.prototype.getData=function(){return this.data},function(h){h.processBMP=function(e,t,i,n){var s=new Ws(e,!1),r=s.width,a=s.height,o={data:s.getData(),width:r,height:a},c=new p0(100).encode(o,100);return h.processJPEG.call(this,c,t,i,n)}}(le.API),o5.prototype.getData=function(){return this.data},function(h){h.processWEBP=function(e,t,i,n){var s=new o5(e),r=s.width,a=s.height,o={data:s.getData(),width:r,height:a},c=new p0(100).encode(o,100);return h.processJPEG.call(this,c,t,i,n)}}(le.API),le.API.processRGBA=function(h,e,t){for(var i=h.data,n=i.length,s=new Uint8Array(n/4*3),r=new Uint8Array(n/4),a=0,o=0,c=0;c<n;c+=4){var d=i[c],p=i[c+1],g=i[c+2],f=i[c+3];s[a++]=d,s[a++]=p,s[a++]=g,r[o++]=f}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(r),data:v,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:h.width,height:h.height}},le.API.setLanguage=function(h){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[h]!==void 0&&(this.internal.languageSettings.languageCode=h,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$l=le.API,Gp=$l.getCharWidthsArray=function(h,e){var t,i,n=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),r=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:n.metadata.Unicode.widths,o=a.fof?a.fof:1,c=e.kerning?e.kerning:n.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,g=0,f=h.length,v=0,b=a[0]||o,_=[];for(t=0;t<f;t++)i=h.charCodeAt(t),typeof n.metadata.widthOfString=="function"?_.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(i))+r*(1e3/s)||0)/1e3):(g=p&&ze(c[i])==="object"&&!isNaN(parseInt(c[i][v],10))?c[i][v]/d:0,_.push((a[i]||b)/o+g)),v=i;return _},n5=$l.getStringUnitWidth=function(h,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),n=e.charSpace||this.internal.getCharSpace();return $l.processArabic&&(h=$l.processArabic(h)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(h,t,n)/t:Gp.apply(this,arguments).reduce(function(s,r){return s+r},0)},s5=function(h,e,t,i){for(var n=[],s=0,r=h.length,a=0;s!==r&&a+e[s]<t;)a+=e[s],s++;n.push(h.slice(0,s));var o=s;for(a=0;s!==r;)a+e[s]>i&&(n.push(h.slice(o,s)),a=0,o=s),a+=e[s],s++;return o!==s&&n.push(h.slice(o,s)),n},r5=function(h,e,t){t||(t={});var i,n,s,r,a,o,c,d=[],p=[d],g=t.textIndent||0,f=0,v=0,b=h.split(" "),_=Gp.apply(this,[" ",t])[0];if(o=t.lineIndent===-1?b[0].length+2:t.lineIndent||0){var y=Array(o).join(" "),x=[];b.map(function(I){(I=I.split(/\s*\n/)).length>1?x=x.concat(I.map(function(F,K){return(K&&F.length?`
`:"")+F})):x.push(I[0])}),b=x,o=n5.apply(this,[y,t])}for(s=0,r=b.length;s<r;s++){var C=0;if(i=b[s],o&&i[0]==`
`&&(i=i.substr(1),C=1),g+f+(v=(n=Gp.apply(this,[i,t])).reduce(function(I,F){return I+F},0))>e||C){if(v>e){for(a=s5.apply(this,[i,n,e-(g+f),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);v=n.slice(i.length-(d[0]?d[0].length:0)).reduce(function(I,F){return I+F},0)}else d=[i];p.push(d),g=v+o,f=_}else d.push(i),g+=f+v,f=_}return c=o?function(I,F){return(F?y:"")+I.join(" ")}:function(I){return I.join(" ")},p.map(c)},$l.splitTextToSize=function(h,e,t){var i,n=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);i=Array.isArray(h)?h:String(h).split(/\r?\n/);var r=1*this.internal.scaleFactor*e/n;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/n:0,s.lineIndent=t.lineIndent;var a,o,c=[];for(a=0,o=i.length;a<o;a++)c=c.concat(r5.apply(this,[i[a],r,s]));return c},function(h){h.__fontmetrics__=h.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},i={},n=0;n<e.length;n++)t[e[n]]="0123456789abcdef"[n],i["0123456789abcdef"[n]]=e[n];var s=function(p){return"0x"+parseInt(p,10).toString(16)},r=h.__fontmetrics__.compress=function(p){var g,f,v,b,_=["{"];for(var y in p){if(g=p[y],isNaN(parseInt(y,10))?f="'"+y+"'":(y=parseInt(y,10),f=(f=s(y).slice(2)).slice(0,-1)+i[f.slice(-1)]),typeof g=="number")g<0?(v=s(g).slice(3),b="-"):(v=s(g).slice(2),b=""),v=b+v.slice(0,-1)+i[v.slice(-1)];else{if(ze(g)!=="object")throw new Error("Don't know what to do with value type "+ze(g)+".");v=r(g)}_.push(f+v)}return _.push("}"),_.join("")},a=h.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,f,v,b,_={},y=1,x=_,C=[],I="",F="",K=p.length-1,q=1;q<K;q+=1)(b=p[q])=="'"?g?(v=g.join(""),g=void 0):g=[]:g?g.push(b):b=="{"?(C.push([x,v]),x={},v=void 0):b=="}"?((f=C.pop())[0][f[1]]=x,v=void 0,x=f[0]):b=="-"?y=-1:v===void 0?t.hasOwnProperty(b)?(I+=t[b],v=parseInt(I,16)*y,y=1,I=""):I+=b:t.hasOwnProperty(b)?(F+=t[b],x[v]=parseInt(F,16)*y,y=1,v=void 0,F=""):F+=b;return _},o={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:o,"Courier-Bold":o,"Courier-BoldOblique":o,"Courier-Oblique":o,Helvetica:o,"Helvetica-Bold":o,"Helvetica-BoldOblique":o,"Helvetica-Oblique":o,"Times-Roman":o,"Times-Bold":o,"Times-BoldItalic":o,"Times-Italic":o}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};h.events.push(["addFont",function(p){var g=p.font,f=d.Unicode[g.postScriptName];f&&(g.metadata.Unicode={},g.metadata.Unicode.widths=f.widths,g.metadata.Unicode.kerning=f.kerning);var v=c.Unicode[g.postScriptName];v&&(g.metadata.Unicode.encoding=v,g.encoding=v.codePages[0])}])}(le.API),function(h){var e=function(t){for(var i=t.length,n=new Uint8Array(i),s=0;s<i;s++)n[s]=t.charCodeAt(s);return n};h.API.events.push(["addFont",function(t){var i=void 0,n=t.font,s=t.instance;if(!n.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(i=s.existsFileInVFS(n.postScriptName)===!1?s.loadFile(n.postScriptName):s.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(r,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(gd(a)),r.metadata=h.API.TTFFont.open(a),r.metadata.Unicode=r.metadata.Unicode||{encoding:{},kerning:{},widths:[]},r.metadata.glyIdsUsed=[0]})(n,i)}}])}(le),function(h){function e(){return(he.canvg?Promise.resolve(he.canvg):_0(()=>import("./index.es-B0OYj6Nu.js"),__vite__mapDeps([0,1,2,3]))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}le.API.addSvgAsImage=function(t,i,n,s,r,a,o,c){if(isNaN(i)||isNaN(n))throw Ve.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(r))throw Ve.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=r;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(v){return v.fromString(p,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(g)}).then(function(){f.addImage(d.toDataURL("image/jpeg",1),i,n,s,r,o,c)})}}(),le.API.putTotalPages=function(h){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(h,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(h,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var n=0;n<this.internal.pages[i].length;n++)this.internal.pages[i][n]=this.internal.pages[i][n].replace(e,t);return this},le.API.viewerPreferences=function(h,e){var t;h=h||{},e=e||!1;var i,n,s,r={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(r),o=[],c=0,d=0,p=0;function g(v,b){var _,y=!1;for(_=0;_<v.length;_+=1)v[_]===b&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(r)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,h==="reset"||e===!0){var f=a.length;for(p=0;p<f;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(ze(h)==="object"){for(n in h)if(s=h[n],g(a,n)&&s!==void 0){if(t[n].type==="boolean"&&typeof s=="boolean")t[n].value=s;else if(t[n].type==="name"&&g(t[n].valueSet,s))t[n].value=s;else if(t[n].type==="integer"&&Number.isInteger(s))t[n].value=s;else if(t[n].type==="array"){for(c=0;c<s.length;c+=1)if(i=!0,s[c].length===1&&typeof s[c][0]=="number")o.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(i=!1);i===!0&&o.push([s[c][0]-1,s[c][1]-1].join(" "))}t[n].value="["+o.join(" ")+"]"}else t[n].value=t[n].defaultValue;t[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,b=[];for(v in t)t[v].explicitSet===!0&&(t[v].type==="name"?b.push("/"+v+" /"+t[v].value):b.push("/"+v+" "+t[v].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(h){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+r.length+a.length+n.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(n+s+r+a+o),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};h.addMetadata=function(i,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(le.API),function(h){var e=h.API,t=e.pdfEscape16=function(s,r){for(var a,o=r.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,g=s.length;p<g;++p){if(a=r.metadata.characterToGlyph(s.charCodeAt(p)),r.metadata.glyIdsUsed.push(a),r.metadata.toUnicode[a]=s.charCodeAt(p),o.indexOf(a)==-1&&(o.push(a),o.push([parseInt(r.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},i=function(s){var r,a,o,c,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,o=[],p=0,g=(a=Object.keys(s).sort(function(f,v){return f-v})).length;p<g;p++)r=a[p],o.length>=100&&(d+=`
`+o.length+` beginbfchar
`+o.join(`
`)+`
endbfchar`,o=[]),s[r]!==void 0&&s[r]!==null&&typeof s[r].toString=="function"&&(c=("0000"+s[r].toString(16)).slice(-4),r=("0000"+(+r).toString(16)).slice(-4),o.push("<"+r+"><"+c+">"));return o.length&&(d+=`
`+o.length+` beginbfchar
`+o.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(r){var a=r.font,o=r.out,c=r.newObject,d=r.putStream;if(a.metadata instanceof h.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,g=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",v=0;v<g.length;v++)f+=String.fromCharCode(g[v]);var b=c();d({data:f,addLength1:!0,objectId:b}),o("endobj");var _=c();d({data:i(a.metadata.toUnicode),addLength1:!0,objectId:_}),o("endobj");var y=c();o("<<"),o("/Type /FontDescriptor"),o("/FontName /"+Yl(a.fontName)),o("/FontFile2 "+b+" 0 R"),o("/FontBBox "+h.API.PDFObject.convert(a.metadata.bbox)),o("/Flags "+a.metadata.flags),o("/StemV "+a.metadata.stemV),o("/ItalicAngle "+a.metadata.italicAngle),o("/Ascent "+a.metadata.ascender),o("/Descent "+a.metadata.decender),o("/CapHeight "+a.metadata.capHeight),o(">>"),o("endobj");var x=c();o("<<"),o("/Type /Font"),o("/BaseFont /"+Yl(a.fontName)),o("/FontDescriptor "+y+" 0 R"),o("/W "+h.API.PDFObject.convert(p)),o("/CIDToGIDMap /Identity"),o("/DW 1000"),o("/Subtype /CIDFontType2"),o("/CIDSystemInfo"),o("<<"),o("/Supplement 0"),o("/Registry (Adobe)"),o("/Ordering ("+a.encoding+")"),o(">>"),o(">>"),o("endobj"),a.objectNumber=c(),o("<<"),o("/Type /Font"),o("/Subtype /Type0"),o("/ToUnicode "+_+" 0 R"),o("/BaseFont /"+Yl(a.fontName)),o("/Encoding /"+a.encoding),o("/DescendantFonts ["+x+" 0 R]"),o(">>"),o("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(r){var a=r.font,o=r.out,c=r.newObject,d=r.putStream;if(a.metadata instanceof h.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,g="",f=0;f<p.length;f++)g+=String.fromCharCode(p[f]);var v=c();d({data:g,addLength1:!0,objectId:v}),o("endobj");var b=c();d({data:i(a.metadata.toUnicode),addLength1:!0,objectId:b}),o("endobj");var _=c();o("<<"),o("/Descent "+a.metadata.decender),o("/CapHeight "+a.metadata.capHeight),o("/StemV "+a.metadata.stemV),o("/Type /FontDescriptor"),o("/FontFile2 "+v+" 0 R"),o("/Flags 96"),o("/FontBBox "+h.API.PDFObject.convert(a.metadata.bbox)),o("/FontName /"+Yl(a.fontName)),o("/ItalicAngle "+a.metadata.italicAngle),o("/Ascent "+a.metadata.ascender),o(">>"),o("endobj"),a.objectNumber=c();for(var y=0;y<a.metadata.hmtx.widths.length;y++)a.metadata.hmtx.widths[y]=parseInt(a.metadata.hmtx.widths[y]*(1e3/a.metadata.head.unitsPerEm));o("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Yl(a.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+h.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),o("endobj"),a.isAlreadyPutted=!0}})(s)}]);var n=function(s){var r,a=s.text||"",o=s.x,c=s.y,d=s.options||{},p=s.mutex||{},g=p.pdfEscape,f=p.activeFontKey,v=p.fonts,b=f,_="",y=0,x="",C=v[b].encoding;if(v[b].encoding!=="Identity-H")return{text:a,x:o,y:c,options:d,mutex:p};for(x=a,b=f,Array.isArray(a)&&(x=a[0]),y=0;y<x.length;y+=1)v[b].metadata.hasOwnProperty("cmap")&&(r=v[b].metadata.cmap.unicode.codeMap[x[y].charCodeAt(0)]),r||x[y].charCodeAt(0)<256&&v[b].metadata.hasOwnProperty("Unicode")?_+=x[y]:_+="";var I="";return parseInt(b.slice(1))<14||C==="WinAnsiEncoding"?I=g(_,b).split("").map(function(F){return F.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(I=t(_,v[b])),p.isHex=!0,{text:I,x:o,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var r=s.text||"",a=[],o={text:r,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(r)){var c=0;for(c=0;c<r.length;c+=1)Array.isArray(r[c])&&r[c].length===3?a.push([n(Object.assign({},o,{text:r[c][0]})).text,r[c][1],r[c][2]]):a.push(n(Object.assign({},o,{text:r[c]})).text);s.text=a}else s.text=n(Object.assign({},o,{text:r})).text}])}(le),function(h){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};h.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},h.addFileToVFS=function(t,i){return e.call(this),this.internal.vFS[t]=i,this},h.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(le.API),function(h){h.__bidiEngine__=h.prototype.__bidiEngine__=function(i){var n,s,r,a,o,c,d,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,C=0;this.__bidiEngine__={};var I=function(M){var E=M.charCodeAt(),W=E>>8,S=b[W];return S!==void 0?p[256*S+(255&E)]:W===252||W===253?"AL":y.test(W)?"L":W===8?"R":"N"},F=function(M){for(var E,W=0;W<M.length;W++){if((E=I(M.charAt(W)))==="L")return!1;if(E==="R")return!0}return!1},K=function(M,E,W,S){var nt,st,tt,dt,ot=E[S];switch(ot){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(ot="AN");break;case"AL":x=!0,ot="R";break;case"WS":ot="N";break;case"CS":S<1||S+1>=E.length||(nt=W[S-1])!=="EN"&&nt!=="AN"||(st=E[S+1])!=="EN"&&st!=="AN"?ot="N":x&&(st="AN"),ot=st===nt?st:"N";break;case"ES":ot=(nt=S>0?W[S-1]:"B")==="EN"&&S+1<E.length&&E[S+1]==="EN"?"EN":"N";break;case"ET":if(S>0&&W[S-1]==="EN"){ot="EN";break}if(x){ot="N";break}for(tt=S+1,dt=E.length;tt<dt&&E[tt]==="ET";)tt++;ot=tt<dt&&E[tt]==="EN"?"EN":"N";break;case"NSM":if(r&&!a){for(dt=E.length,tt=S+1;tt<dt&&E[tt]==="NSM";)tt++;if(tt<dt){var At=M[S],lt=At>=1425&&At<=2303||At===64286;if(nt=E[tt],lt&&(nt==="R"||nt==="AL")){ot="R";break}}}ot=S<1||(nt=E[S-1])==="B"?"N":W[S-1];break;case"B":x=!1,n=!0,ot=C;break;case"S":s=!0,ot="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":ot="N"}return ot},q=function(M,E,W){var S=M.split("");return W&&U(S,W,{hiLevel:C}),S.reverse(),E&&E.reverse(),S.join("")},U=function(M,E,W){var S,nt,st,tt,dt,ot=-1,At=M.length,lt=0,k=[],G=C?f:g,Y=[];for(x=!1,n=!1,s=!1,nt=0;nt<At;nt++)Y[nt]=I(M[nt]);for(st=0;st<At;st++){if(dt=lt,k[st]=K(M,Y,k,st),S=240&(lt=G[dt][v[k[st]]]),lt&=15,E[st]=tt=G[lt][5],S>0)if(S===16){for(nt=ot;nt<st;nt++)E[nt]=1;ot=-1}else ot=-1;if(G[lt][6])ot===-1&&(ot=st);else if(ot>-1){for(nt=ot;nt<st;nt++)E[nt]=tt;ot=-1}Y[st]==="B"&&(E[st]=0),W.hiLevel|=tt}s&&function(Z,ct,gt){for(var bt=0;bt<gt;bt++)if(Z[bt]==="S"){ct[bt]=C;for(var wt=bt-1;wt>=0&&Z[wt]==="WS";wt--)ct[wt]=C}}(Y,E,At)},X=function(M,E,W,S,nt){if(!(nt.hiLevel<M)){if(M===1&&C===1&&!n)return E.reverse(),void(W&&W.reverse());for(var st,tt,dt,ot,At=E.length,lt=0;lt<At;){if(S[lt]>=M){for(dt=lt+1;dt<At&&S[dt]>=M;)dt++;for(ot=lt,tt=dt-1;ot<tt;ot++,tt--)st=E[ot],E[ot]=E[tt],E[tt]=st,W&&(st=W[ot],W[ot]=W[tt],W[tt]=st);lt=dt}lt++}}},rt=function(M,E,W){var S=M.split(""),nt={hiLevel:C};return W||(W=[]),U(S,W,nt),function(st,tt,dt){if(dt.hiLevel!==0&&d)for(var ot,At=0;At<st.length;At++)tt[At]===1&&(ot=_.indexOf(st[At]))>=0&&(st[At]=_[ot+1])}(S,W,nt),X(2,S,E,W,nt),X(1,S,E,W,nt),S.join("")};return this.__bidiEngine__.doBidiReorder=function(M,E,W){if(function(nt,st){if(st)for(var tt=0;tt<nt.length;tt++)st[tt]=tt;a===void 0&&(a=F(nt)),c===void 0&&(c=F(nt))}(M,E),r||!o||c)if(r&&o&&a^c)C=a?1:0,M=q(M,E,W);else if(!r&&o&&c)C=a?1:0,M=rt(M,E,W),M=q(M,E);else if(!r||a||o||c){if(r&&!o&&a^c)M=q(M,E),a?(C=0,M=rt(M,E,W)):(C=1,M=rt(M,E,W),M=q(M,E));else if(r&&a&&!o&&c)C=1,M=rt(M,E,W),M=q(M,E);else if(!r&&!o&&a^c){var S=d;a?(C=1,M=rt(M,E,W),C=0,d=!1,M=rt(M,E,W),d=S):(C=0,M=rt(M,E,W),M=q(M,E),C=1,d=!1,M=rt(M,E,W),d=S,M=q(M,E))}}else C=0,M=rt(M,E,W);else C=a?1:0,M=rt(M,E,W);return M},this.__bidiEngine__.setOptions=function(M){M&&(r=M.isInputVisual,o=M.isOutputVisual,a=M.isInputRtl,c=M.isOutputRtl,d=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new h.__bidiEngine__({isInputVisual:!0});h.API.events.push(["postProcessText",function(i){var n=i.text,s=(i.x,i.y,i.options||{}),r=(i.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(n)==="[object Array]"){var a=0;for(r=[],a=0;a<n.length;a+=1)Object.prototype.toString.call(n[a])==="[object Array]"?r.push([t.doBidiReorder(n[a][0]),n[a][1],n[a][2]]):r.push([t.doBidiReorder(n[a])]);i.text=r}else i.text=t.doBidiReorder(n);t.setOptions({isInputVisual:!0})}])}(le),le.API.TTFFont=function(){function h(e){var t;if(this.rawData=e,t=this.contents=new Do(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Rw(this),this.registerTTF()}return h.open=function(e){return new h(e)},h.prototype.parse=function(){return this.directory=new yw(this.contents),this.head=new Aw(this),this.name=new kw(this),this.cmap=new X5(this),this.toUnicode={},this.hhea=new _w(this),this.maxp=new Ew(this),this.hmtx=new Cw(this),this.post=new Sw(this),this.os2=new xw(this),this.loca=new Tw(this),this.glyf=new Nw(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},h.prototype.registerTTF=function(){var e,t,i,n,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var r,a,o,c;for(c=[],r=0,a=(o=this.bbox).length;r<a;r++)e=o[r],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(n=this.post.italic_angle),32768&(t=n>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},h.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},h.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},h.prototype.widthOfString=function(e,t,i){var n,s,r,a;for(r=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)n=e.charCodeAt(s),r+=this.widthOfGlyph(this.characterToGlyph(n))+i*(1e3/t)||0;return r*(t/1e3)},h.prototype.lineHeight=function(e,t){var i;return t==null&&(t=!1),i=t?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},h}();var cr,Do=function(){function h(e){this.data=e??[],this.pos=0,this.length=this.data.length}return h.prototype.readByte=function(){return this.data[this.pos++]},h.prototype.writeByte=function(e){return this.data[this.pos++]=e},h.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},h.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},h.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},h.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},h.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},h.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},h.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},h.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},h.prototype.readString=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)i[t]=String.fromCharCode(this.readByte());return i.join("")},h.prototype.writeString=function(e){var t,i,n;for(n=[],t=0,i=e.length;0<=i?t<i:t>i;t=0<=i?++t:--t)n.push(this.writeByte(e.charCodeAt(t)));return n},h.prototype.readShort=function(){return this.readInt16()},h.prototype.writeShort=function(e){return this.writeInt16(e)},h.prototype.readLongLong=function(){var e,t,i,n,s,r,a,o;return e=this.readByte(),t=this.readByte(),i=this.readByte(),n=this.readByte(),s=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^n)+16777216*(255^s)+65536*(255^r)+256*(255^a)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*i+4294967296*n+16777216*s+65536*r+256*a+o},h.prototype.writeLongLong=function(e){var t,i;return t=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},h.prototype.readInt=function(){return this.readInt32()},h.prototype.writeInt=function(e){return this.writeInt32(e)},h.prototype.read=function(e){var t,i;for(t=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)t.push(this.readByte());return t},h.prototype.write=function(e){var t,i,n,s;for(s=[],i=0,n=e.length;i<n;i++)t=e[i],s.push(this.writeByte(t));return s},h}(),yw=function(){var h;function e(t){var i,n,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,s=this.tableCount;0<=s?n<s:n>s;n=0<=s?++n:--n)i={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(t){var i,n,s,r,a,o,c,d,p,g,f,v,b;for(b in f=Object.keys(t).length,o=Math.log(2),p=16*Math.floor(Math.log(f)/o),r=Math.floor(p/o),d=16*f-p,(n=new Do).writeInt(this.scalarType),n.writeShort(f),n.writeShort(p),n.writeShort(r),n.writeShort(d),s=16*f,c=n.pos+s,a=null,v=[],t)for(g=t[b],n.writeString(b),n.writeInt(h(g)),n.writeInt(c),n.writeInt(g.length),v=v.concat(g),b==="head"&&(a=c),c+=g.length;c%4;)v.push(0),c++;return n.write(v),i=2981146554-h(n.data),n.pos=a+8,n.writeUInt32(i),n.data},h=function(t){var i,n,s,r;for(t=Y5.call(t);t.length%4;)t.push(0);for(s=new Do(t),n=0,i=0,r=t.length;i<r;i=i+=4)n+=s.readUInt32();return 4294967295&n},e}(),ww={}.hasOwnProperty,Wr=function(h,e){for(var t in e)ww.call(e,t)&&(h[t]=e[t]);function i(){this.constructor=h}return i.prototype=e.prototype,h.prototype=new i,h.__super__=e.prototype,h};cr=function(){function h(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return h.prototype.parse=function(){},h.prototype.encode=function(){},h.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},h}();var Aw=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var i;return(i=new Do).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(t),i.writeShort(this.glyphDataFormat),i.data},e}(),h5=function(){function h(e,t){var i,n,s,r,a,o,c,d,p,g,f,v,b,_,y,x,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(f=e.readUInt16(),g=f/2,e.pos+=6,s=function(){var I,F;for(F=[],o=I=0;0<=g?I<g:I>g;o=0<=g?++I:--I)F.push(e.readUInt16());return F}(),e.pos+=2,b=function(){var I,F;for(F=[],o=I=0;0<=g?I<g:I>g;o=0<=g?++I:--I)F.push(e.readUInt16());return F}(),c=function(){var I,F;for(F=[],o=I=0;0<=g?I<g:I>g;o=0<=g?++I:--I)F.push(e.readUInt16());return F}(),d=function(){var I,F;for(F=[],o=I=0;0<=g?I<g:I>g;o=0<=g?++I:--I)F.push(e.readUInt16());return F}(),n=(this.length-e.pos+this.offset)/2,a=function(){var I,F;for(F=[],o=I=0;0<=n?I<n:I>n;o=0<=n?++I:--I)F.push(e.readUInt16());return F}(),o=y=0,C=s.length;y<C;o=++y)for(_=s[o],i=x=v=b[o];v<=_?x<=_:x>=_;i=v<=_?++x:--x)d[o]===0?r=i+c[o]:(r=a[d[o]/2+(i-v)-(g-o)]||0)!==0&&(r+=c[o]),this.codeMap[i]=65535&r}e.pos=p}return h.encode=function(e,t){var i,n,s,r,a,o,c,d,p,g,f,v,b,_,y,x,C,I,F,K,q,U,X,rt,M,E,W,S,nt,st,tt,dt,ot,At,lt,k,G,Y,Z,ct,gt,bt,wt,Mt,It,zt;switch(S=new Do,r=Object.keys(e).sort(function(jt,N){return jt-N}),t){case"macroman":for(b=0,_=function(){var jt=[];for(v=0;v<256;++v)jt.push(0);return jt}(),x={0:0},s={},nt=0,ot=r.length;nt<ot;nt++)x[wt=e[n=r[nt]]]==null&&(x[wt]=++b),s[n]={old:e[n],new:x[e[n]]},_[n]=x[e[n]];return S.writeUInt16(1),S.writeUInt16(0),S.writeUInt32(12),S.writeUInt16(0),S.writeUInt16(262),S.writeUInt16(0),S.write(_),{charMap:s,subtable:S.data,maxGlyphID:b+1};case"unicode":for(E=[],p=[],C=0,x={},i={},y=c=null,st=0,At=r.length;st<At;st++)x[F=e[n=r[st]]]==null&&(x[F]=++C),i[n]={old:F,new:x[F]},a=x[F]-n,y!=null&&a===c||(y&&p.push(y),E.push(n),c=a),y=n;for(y&&p.push(y),p.push(65535),E.push(65535),rt=2*(X=E.length),U=2*Math.pow(Math.log(X)/Math.LN2,2),g=Math.log(U/2)/Math.LN2,q=2*X-U,o=[],K=[],f=[],v=tt=0,lt=E.length;tt<lt;v=++tt){if(M=E[v],d=p[v],M===65535){o.push(0),K.push(0);break}if(M-(W=i[M].new)>=32768)for(o.push(0),K.push(2*(f.length+X-v)),n=dt=M;M<=d?dt<=d:dt>=d;n=M<=d?++dt:--dt)f.push(i[n].new);else o.push(W-M),K.push(0)}for(S.writeUInt16(3),S.writeUInt16(1),S.writeUInt32(12),S.writeUInt16(4),S.writeUInt16(16+8*X+2*f.length),S.writeUInt16(0),S.writeUInt16(rt),S.writeUInt16(U),S.writeUInt16(g),S.writeUInt16(q),gt=0,k=p.length;gt<k;gt++)n=p[gt],S.writeUInt16(n);for(S.writeUInt16(0),bt=0,G=E.length;bt<G;bt++)n=E[bt],S.writeUInt16(n);for(Mt=0,Y=o.length;Mt<Y;Mt++)a=o[Mt],S.writeUInt16(a);for(It=0,Z=K.length;It<Z;It++)I=K[It],S.writeUInt16(I);for(zt=0,ct=f.length;zt<ct;zt++)b=f[zt],S.writeUInt16(b);return{charMap:i,subtable:S.data,maxGlyphID:C+1}}},h}(),X5=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="cmap",e.prototype.parse=function(t){var i,n,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)i=new h5(t,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(t,i){var n,s;return i==null&&(i="macroman"),n=h5.encode(t,i),(s=new Do).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},e}(),_w=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),xw=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var i,n;for(n=[],i=0;i<10;++i)n.push(t.readByte());return n}(),this.charRange=function(){var i,n;for(n=[],i=0;i<4;++i)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var i,n;for(n=[],i=0;i<2;i=++i)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Sw=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="post",e.prototype.parse=function(t){var i,n,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var r;for(n=t.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)i=t.readByte(),s.push(this.names.push(t.readString(i)));return s;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 196608:break;case 262144:return this.map=(function(){var a,o,c;for(c=[],r=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;r=0<=o?++a:--a)c.push(t.readUInt32());return c}).call(this)}},e}(),Lw=function(h,e){this.raw=h,this.length=h.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},kw=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="name",e.prototype.parse=function(t){var i,n,s,r,a,o,c,d,p,g,f;for(t.pos=this.offset,t.readShort(),i=t.readShort(),o=t.readShort(),n=[],r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},r=p=0,g=n.length;p<g;r=++p)s=n[r],t.pos=s.offset,d=t.readString(s.length),a=new Lw(d,s),c[f=s.nameID]==null&&(c[f]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Ew=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Cw=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="hmtx",e.prototype.parse=function(t){var i,n,s,r,a,o,c;for(t.pos=this.offset,this.metrics=[],i=0,o=this.file.hhea.numberOfMetrics;0<=o?i<o:i>o;i=0<=o?++i:--i)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],i=d=0;0<=s?d<s:d>s;i=0<=s?++d:--d)p.push(t.readInt16());return p}(),this.widths=(function(){var d,p,g,f;for(f=[],d=0,p=(g=this.metrics).length;d<p;d++)r=g[d],f.push(r.advance);return f}).call(this),n=this.widths[this.widths.length-1],c=[],i=a=0;0<=s?a<s:a>s;i=0<=s?++a:--a)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Y5=[].slice,Nw=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var i,n,s,r,a,o,c,d,p,g;return t in this.cache?this.cache[t]:(r=this.file.loca,i=this.file.contents,n=r.indexOf(t),(s=r.lengthOf(t))===0?this.cache[t]=null:(i.pos=this.offset+n,a=(o=new Do(i.read(s))).readShort(),d=o.readShort(),g=o.readShort(),c=o.readShort(),p=o.readShort(),this.cache[t]=a===-1?new Iw(o,d,g,c,p):new Pw(o,a,d,g,c,p),this.cache[t]))},e.prototype.encode=function(t,i,n){var s,r,a,o,c;for(a=[],r=[],o=0,c=i.length;o<c;o++)s=t[i[o]],r.push(a.length),s&&(a=a.concat(s.encode(n)));return r.push(a.length),{table:a,offsets:r}},e}(),Pw=function(){function h(e,t,i,n,s,r){this.raw=e,this.numberOfContours=t,this.xMin=i,this.yMin=n,this.xMax=s,this.yMax=r,this.compound=!1}return h.prototype.encode=function(){return this.raw.data},h}(),Iw=function(){function h(e,t,i,n,s){var r,a;for(this.raw=e,this.xMin=t,this.yMin=i,this.xMax=n,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],r=this.raw;a=r.readShort(),this.glyphOffsets.push(r.pos),this.glyphIDs.push(r.readUInt16()),32&a;)r.pos+=1&a?4:2,128&a?r.pos+=8:64&a?r.pos+=4:8&a&&(r.pos+=2)}return h.prototype.encode=function(){var e,t,i;for(t=new Do(Y5.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)t.pos=this.glyphOffsets[e];return t.data},h}(),Tw=function(h){function e(){return e.__super__.constructor.apply(this,arguments)}return Wr(e,cr),e.prototype.tag="loca",e.prototype.parse=function(t){var i,n;return t.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var s,r;for(r=[],n=0,s=this.length;n<s;n+=2)r.push(2*t.readUInt16());return r}).call(this):(function(){var s,r;for(r=[],n=0,s=this.length;n<s;n+=4)r.push(t.readUInt32());return r}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,i){for(var n=new Uint32Array(this.offsets.length),s=0,r=0,a=0;a<n.length;++a)if(n[a]=s,r<i.length&&i[r]==a){++r,n[a]=s;var o=this.offsets[a],c=this.offsets[a+1]-o;c>0&&(s+=c)}for(var d=new Array(4*n.length),p=0;p<n.length;++p)d[4*p+3]=255&n[p],d[4*p+2]=(65280&n[p])>>8,d[4*p+1]=(16711680&n[p])>>16,d[4*p]=(4278190080&n[p])>>24;return d},e}(),Rw=function(){function h(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return h.prototype.generateCmap=function(){var e,t,i,n,s;for(t in n=this.font.cmap.tables[0].codeMap,e={},s=this.subset)i=s[t],e[t]=n[i];return e},h.prototype.glyphsFor=function(e){var t,i,n,s,r,a,o;for(n={},r=0,a=e.length;r<a;r++)n[s=e[r]]=this.font.glyf.glyphFor(s);for(s in t=[],n)(i=n[s])!=null&&i.compound&&t.push.apply(t,i.glyphIDs);if(t.length>0)for(s in o=this.glyphsFor(t))i=o[s],n[s]=i;return n},h.prototype.encode=function(e,t){var i,n,s,r,a,o,c,d,p,g,f,v,b,_,y;for(n in i=X5.encode(this.generateCmap(),"unicode"),r=this.glyphsFor(e),f={0:0},y=i.charMap)f[(o=y[n]).old]=o.new;for(v in g=i.maxGlyphID,r)v in f||(f[v]=g++);return d=function(x){var C,I;for(C in I={},x)I[x[C]]=C;return I}(f),p=Object.keys(d).sort(function(x,C){return x-C}),b=function(){var x,C,I;for(I=[],x=0,C=p.length;x<C;x++)a=p[x],I.push(d[a]);return I}(),s=this.font.glyf.encode(r,b,f),c=this.font.loca.encode(s.offsets,b),_={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},h}();le.API.PDFObject=function(){var h;function e(){}return h=function(t,i){return(Array(i+1).join("0")+t).slice(-i)},e.convert=function(t){var i,n,s,r;if(Array.isArray(t))return"["+function(){var a,o,c;for(c=[],a=0,o=t.length;a<o;a++)i=t[a],c.push(e.convert(i));return c}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+h(t.getUTCFullYear(),4)+h(t.getUTCMonth(),2)+h(t.getUTCDate(),2)+h(t.getUTCHours(),2)+h(t.getUTCMinutes(),2)+h(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(n in s=["<<"],t)r=t[n],s.push("/"+n+" "+e.convert(r));return s.push(">>"),s.join(`
`)}return""+t},e}();var md={};md.d=(h,e)=>{for(var t in e)md.o(e,t)&&!md.o(h,t)&&Object.defineProperty(h,t,{enumerable:!0,get:e[t]})};md.o=(h,e)=>Object.prototype.hasOwnProperty.call(h,e);var ce=globalThis.pdfjsLib={};md.d(ce,{AbortException:()=>Oo,AnnotationEditorLayer:()=>U2,AnnotationEditorParamsType:()=>Le,AnnotationEditorType:()=>ye,AnnotationEditorUIManager:()=>dl,AnnotationLayer:()=>C_,AnnotationMode:()=>eo,ColorPicker:()=>B1,DOMSVGFactory:()=>rm,DrawLayer:()=>G2,FeatureTest:()=>Cn,GlobalWorkerOptions:()=>Ra,ImageKind:()=>e1,InvalidPDFException:()=>M0,MissingPDFException:()=>yd,OPS:()=>$s,OutputScale:()=>O0,PDFDataRangeTransport:()=>Zb,PDFDateString:()=>em,PDFWorker:()=>uc,PasswordResponses:()=>Ow,PermissionFlag:()=>Dw,PixelsPerInch:()=>Bo,RenderingCancelledException:()=>Q2,TextLayer:()=>wd,TouchManager:()=>D1,UnexpectedResponseException:()=>R1,Util:()=>ee,VerbosityLevel:()=>lg,XfaLayer:()=>Qb,build:()=>h_,createValidAbsoluteUrl:()=>qw,fetchData:()=>fg,getDocument:()=>QA,getFilenameFromUrl:()=>Kw,getPdfFilenameFromUrl:()=>Zw,getXfaPageViewport:()=>Jw,isDataScheme:()=>pg,isPdfFile:()=>tm,noContextMenu:()=>or,normalizeUnicode:()=>$w,setLayerDimensions:()=>ul,shadow:()=>xe,stopEvent:()=>ds,version:()=>o_});const bn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),K5=[1,0,0,1,0,0],F0=[.001,0,0,.001,0,0],Fw=1e7,g0=1.35,cs={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},eo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Mw="pdfjs_internal_editor_",ye={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Le={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Dw={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},hn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e1={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Pi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Yu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},lg={ERRORS:0,WARNINGS:1,INFOS:5},$s={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Ow={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let cg=lg.WARNINGS;function Bw(h){Number.isInteger(h)&&(cg=h)}function jw(){return cg}function ug(h){cg>=lg.INFOS&&console.log(`Info: ${h}`)}function we(h){cg>=lg.WARNINGS&&console.log(`Warning: ${h}`)}function $e(h){throw new Error(h)}function ki(h,e){h||$e(e)}function zw(h){switch(h==null?void 0:h.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qw(h,e=null,t=null){if(!h)return null;try{if(t&&typeof h=="string"){if(t.addDefaultProtocol&&h.startsWith("www.")){const n=h.match(/\./g);(n==null?void 0:n.length)>=2&&(h=`http://${h}`)}if(t.tryConvertEncoding)try{h=Vw(h)}catch{}}const i=e?new URL(h,e):new URL(h);if(zw(i))return i}catch{}return null}function xe(h,e,t,i=!1){return Object.defineProperty(h,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const zo=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class l5 extends zo{constructor(e,t){super(e,"PasswordException"),this.code=t}}class m0 extends zo{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class M0 extends zo{constructor(e){super(e,"InvalidPDFException")}}class yd extends zo{constructor(e){super(e,"MissingPDFException")}}class R1 extends zo{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Uw extends zo{constructor(e){super(e,"FormatError")}}class Oo extends zo{constructor(e){super(e,"AbortException")}}function Z5(h){(typeof h!="object"||(h==null?void 0:h.length)===void 0)&&$e("Invalid argument for bytesToString");const e=h.length,t=8192;if(e<t)return String.fromCharCode.apply(null,h);const i=[];for(let n=0;n<e;n+=t){const s=Math.min(n+t,e),r=h.subarray(n,s);i.push(String.fromCharCode.apply(null,r))}return i.join("")}function dg(h){typeof h!="string"&&$e("Invalid argument for stringToBytes");const e=h.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=h.charCodeAt(i)&255;return t}function Hw(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function Z2(h){const e=Object.create(null);for(const[t,i]of h)e[t]=i;return e}function Ww(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function Gw(){try{return new Function(""),!0}catch{return!1}}class Cn{static get isLittleEndian(){return xe(this,"isLittleEndian",Ww())}static get isEvalSupported(){return xe(this,"isEvalSupported",Gw())}static get isOffscreenCanvasSupported(){return xe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return xe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?xe(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):xe(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return xe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const b0=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));var Fa,i1,D0;class ee{static makeHexColor(e,t,i){return`#${b0[e]}${b0[t]}${b0[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],n=e[0]*t[1]+e[1]*t[3]+t[5];return[i,n]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],n=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[n,s]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),n=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),r=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],n[0],s[0],r[0]),Math.min(i[1],n[1],s[1],r[1]),Math.max(i[0],n[0],s[0],r[0]),Math.max(i[1],n[1],s[1],r[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],r=e[2]*t[1]+e[3]*t[3],a=(i+r)/2,o=Math.sqrt((i+r)**2-4*(i*r-s*n))/2,c=a+o||1,d=a-o||1;return[Math.sqrt(c),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>n)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),r=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>r?null:[i,s,n,r]}static bezierBoundingBox(e,t,i,n,s,r,a,o,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,o),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,o)):c=[Math.min(e,a),Math.min(t,o),Math.max(e,a),Math.max(t,o)],z(this,Fa,D0).call(this,e,i,s,a,t,n,r,o,3*(-e+3*(i-s)+a),6*(e-2*i+s),3*(i-e),c),z(this,Fa,D0).call(this,e,i,s,a,t,n,r,o,3*(-t+3*(n-r)+o),6*(t-2*n+r),3*(n-t),c),c}}Fa=new WeakSet,i1=function(e,t,i,n,s,r,a,o,c,d){if(c<=0||c>=1)return;const p=1-c,g=c*c,f=g*c,v=p*(p*(p*e+3*c*t)+3*g*i)+f*n,b=p*(p*(p*s+3*c*r)+3*g*a)+f*o;d[0]=Math.min(d[0],v),d[1]=Math.min(d[1],b),d[2]=Math.max(d[2],v),d[3]=Math.max(d[3],b)},D0=function(e,t,i,n,s,r,a,o,c,d,p,g){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&z(this,Fa,i1).call(this,e,t,i,n,s,r,a,o,-p/d,g);return}const f=d**2-4*p*c;if(f<0)return;const v=Math.sqrt(f),b=2*c;z(this,Fa,i1).call(this,e,t,i,n,s,r,a,o,(-d+v)/b,g),z(this,Fa,i1).call(this,e,t,i,n,s,r,a,o,(-d-v)/b,g)},O(ee,Fa);function Vw(h){return decodeURIComponent(escape(h))}let v0=null,c5=null;function $w(h){return v0||(v0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,c5=new Map([["ﬅ","ſt"]])),h.replaceAll(v0,(e,t,i)=>t?t.normalize("NFKC"):c5.get(i))}function Xw(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),Z5(h)}const J2="pdfjs_internal_id_";function Yw(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(Z5(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...e){return new Promise(t=>{t(h(...e))})});const na="http://www.w3.org/2000/svg",sh=class sh{};re(sh,"CSS",96),re(sh,"PDF",72),re(sh,"PDF_TO_CSS_UNITS",sh.CSS/sh.PDF);let Bo=sh;async function fg(h,e="text"){if(Qu(h,document.baseURI)){const t=await fetch(h);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const n=new XMLHttpRequest;n.open("GET",h,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(n.response);return}t(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})}class Xf{constructor({viewBox:e,userUnit:t,scale:i,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=n,this.offsetX=s,this.offsetY=r,i*=t;const o=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let d,p,g,f;switch(n%=360,n<0&&(n+=360),n){case 180:d=-1,p=0,g=0,f=1;break;case 90:d=0,p=1,g=1,f=0;break;case 270:d=0,p=-1,g=-1,f=0;break;case 0:d=1,p=0,g=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,f=-f);let v,b,_,y;d===0?(v=Math.abs(c-e[1])*i+s,b=Math.abs(o-e[0])*i+r,_=(e[3]-e[1])*i,y=(e[2]-e[0])*i):(v=Math.abs(o-e[0])*i+s,b=Math.abs(c-e[1])*i+r,_=(e[2]-e[0])*i,y=(e[3]-e[1])*i),this.transform=[d*i,p*i,g*i,f*i,v-d*i*o-g*i*c,b-p*i*o-f*i*c],this.width=_,this.height=y}get rawDims(){const{userUnit:e,viewBox:t}=this,i=t.map(n=>n*e);return xe(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=!1}={}){return new Xf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:s})}convertToViewportPoint(e,t){return ee.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ee.applyTransform([e[0],e[1]],this.transform),i=ee.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return ee.applyInverseTransform([e,t],this.transform)}}class Q2 extends zo{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function pg(h){const e=h.length;let t=0;for(;t<e&&h[t].trim()==="";)t++;return h.substring(t,t+5).toLowerCase()==="data:"}function tm(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function Kw(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function Zw(h,e="document.pdf"){if(typeof h!="string")return e;if(pg(h))return we('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=t.exec(h);let s=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class u5{constructor(){re(this,"started",Object.create(null));re(this,"times",[])}time(e){e in this.started&&we(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||we(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:n,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-n}ms
`);return e.join("")}}function Qu(h,e){try{const{protocol:t}=e?new URL(h,e):new URL(h);return t==="http:"||t==="https:"}catch{return!1}}function or(h){h.preventDefault()}function ds(h){h.preventDefault(),h.stopPropagation()}var _d;class em{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,_d)||P(this,_d,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,_d).exec(e);if(!t)return null;const i=parseInt(t[1],10);let n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(t[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const c=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,c==="-"?(r+=d,a+=p):c==="+"&&(r-=d,a-=p),new Date(Date.UTC(i,n,s,r,a,o))}}_d=new WeakMap,O(em,_d);function Jw(h,{scale:e=1,rotation:t=0}){const{width:i,height:n}=h.attributes.style,s=[0,0,parseInt(i),parseInt(n)];return new Xf({viewBox:s,userUnit:1,scale:e,rotation:t})}function im(h){if(h.startsWith("#")){const e=parseInt(h.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(e=>parseInt(e)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(we(`Not a valid color format: "${h}"`),[0,0,0])}function Qw(h){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of h.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;h.set(t,im(i))}e.remove()}function ei(h){const{a:e,b:t,c:i,d:n,e:s,f:r}=h.getTransform();return[e,t,i,n,s,r]}function wr(h){const{a:e,b:t,c:i,d:n,e:s,f:r}=h.getTransform().invertSelf();return[e,t,i,n,s,r]}function ul(h,e,t=!1,i=!0){if(e instanceof Xf){const{pageWidth:n,pageHeight:s}=e.rawDims,{style:r}=h,a=Cn.isCSSRoundSupported,o=`var(--scale-factor) * ${n}px`,c=`var(--scale-factor) * ${s}px`,d=a?`round(down, ${o}, var(--scale-round-x, 1px))`:`calc(${o})`,p=a?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!t||e.rotation%180===0?(r.width=d,r.height=p):(r.width=p,r.height=d)}i&&h.setAttribute("data-main-rotation",e.rotation)}class O0{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var io,ah,Xs,oh,xd,Sd,q1,J5,Nn,Q5,tb,n1,eb,j0;const aa=class aa{constructor(e){O(this,Nn);O(this,io,null);O(this,ah,null);O(this,Xs);O(this,oh,null);O(this,xd,null);P(this,Xs,e),l(aa,Sd)||P(aa,Sd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=P(this,io,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Xs)._uiManager._signal;e.addEventListener("contextmenu",or,{signal:t}),e.addEventListener("pointerdown",z(aa,q1,J5),{signal:t});const i=P(this,oh,document.createElement("div"));i.className="buttons",e.append(i);const n=l(this,Xs).toolbarPosition;if(n){const{style:s}=e,r=l(this,Xs)._uiManager.direction==="ltr"?1-n[0]:n[0];s.insetInlineEnd=`${100*r}%`,s.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return z(this,Nn,eb).call(this),e}get div(){return l(this,io)}hide(){var e;l(this,io).classList.add("hidden"),(e=l(this,ah))==null||e.hideDropdown()}show(){var e;l(this,io).classList.remove("hidden"),(e=l(this,xd))==null||e.shown()}async addAltText(e){const t=await e.render();z(this,Nn,n1).call(this,t),l(this,oh).prepend(t,l(this,Nn,j0)),P(this,xd,e)}addColorPicker(e){P(this,ah,e);const t=e.renderButton();z(this,Nn,n1).call(this,t),l(this,oh).prepend(t,l(this,Nn,j0))}remove(){var e;l(this,io).remove(),(e=l(this,ah))==null||e.destroy(),P(this,ah,null)}};io=new WeakMap,ah=new WeakMap,Xs=new WeakMap,oh=new WeakMap,xd=new WeakMap,Sd=new WeakMap,q1=new WeakSet,J5=function(e){e.stopPropagation()},Nn=new WeakSet,Q5=function(e){l(this,Xs)._focusEventsAllowed=!1,ds(e)},tb=function(e){l(this,Xs)._focusEventsAllowed=!0,ds(e)},n1=function(e){const t=l(this,Xs)._uiManager._signal;e.addEventListener("focusin",z(this,Nn,Q5).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",z(this,Nn,tb).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",or,{signal:t})},eb=function(){const{editorType:e,_uiManager:t}=l(this,Xs),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l(aa,Sd)[e]),z(this,Nn,n1).call(this,i),i.addEventListener("click",n=>{t.delete()},{signal:t._signal}),l(this,oh).append(i)},j0=function(){const e=document.createElement("div");return e.className="divider",e},O(aa,q1),O(aa,Sd,null);let B0=aa;var Ld,hh,lh,jo,ib,nb,sb;class tA{constructor(e){O(this,jo);O(this,Ld,null);O(this,hh,null);O(this,lh);P(this,lh,e)}show(e,t,i){const[n,s]=z(this,jo,nb).call(this,t,i),{style:r}=l(this,hh)||P(this,hh,z(this,jo,ib).call(this));e.append(l(this,hh)),r.insetInlineEnd=`${100*n}%`,r.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,hh).remove()}}Ld=new WeakMap,hh=new WeakMap,lh=new WeakMap,jo=new WeakSet,ib=function(){const e=P(this,hh,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",or,{signal:l(this,lh)._signal});const t=P(this,Ld,document.createElement("div"));return t.className="buttons",e.append(t),z(this,jo,sb).call(this),e},nb=function(e,t){let i=0,n=0;for(const s of e){const r=s.y+s.height;if(r<i)continue;const a=s.x+(t?s.width:0);if(r>i){n=a,i=r;continue}t?a>n&&(n=a):a<n&&(n=a)}return[t?1-n:n,i]},sb=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,lh)._signal;e.addEventListener("contextmenu",or,{signal:i}),e.addEventListener("click",()=>{l(this,lh).highlightSelection("floating_button")},{signal:i}),l(this,Ld).append(e)};function F1(h,e,t){for(const i of t)e.addEventListener(i,h[i].bind(h))}var U1;class eA{constructor(){O(this,U1,0)}get id(){return`${Mw}${_n(this,U1)._++}`}}U1=new WeakMap;var dc,kd,un,fc,s1;const om=class om{constructor(){O(this,fc);O(this,dc,Xw());O(this,kd,0);O(this,un,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=e;const s=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return xe(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:i,size:n,type:s}=e;return z(this,fc,s1).call(this,`${t}_${i}_${n}_${s}`,e)}async getFromUrl(e){return z(this,fc,s1).call(this,e,e)}async getFromBlob(e,t){const i=await t;return z(this,fc,s1).call(this,e,i)}async getFromId(e){l(this,un)||P(this,un,new Map);const t=l(this,un).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,un)||P(this,un,new Map);let i=l(this,un).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const n=new OffscreenCanvas(t.width,t.height);return n.getContext("2d").drawImage(t,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${l(this,dc)}_${_n(this,kd)._++}`,refCounter:1,isSvg:!1},l(this,un).set(e,i),l(this,un).set(i.id,i),i}getSvgUrl(e){const t=l(this,un).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var n;l(this,un)||P(this,un,new Map);const t=l(this,un).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=s.convertToBlob()}(n=i.close)==null||n.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,dc)}_`)}};dc=new WeakMap,kd=new WeakMap,un=new WeakMap,fc=new WeakSet,s1=async function(e,t){l(this,un)||P(this,un,new Map);let i=l(this,un).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,dc)}_${_n(this,kd)._++}`,refCounter:0,isSvg:!1});let n;if(typeof t=="string"?(i.url=t,n=await fg(t,"blob")):t instanceof File?n=i.file=t:t instanceof Blob&&(n=t),n.type==="image/svg+xml"){const s=om._isSVGFittingCanvas,r=new FileReader,a=new Image,o=new Promise((c,d)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,c()},r.onload=async()=>{const p=i.svgUrl=r.result;a.src=await s?`${p}#svgView(preserveAspectRatio(none))`:p},a.onerror=r.onerror=d});r.readAsDataURL(n),await o}else i.bitmap=await createImageBitmap(n);i.refCounter=1}catch(n){we(n),i=null}return l(this,un).set(e,i),i&&l(this,un).set(i.id,i),i};let z0=om;var gi,no,Ed,si;class iA{constructor(e=128){O(this,gi,[]);O(this,no,!1);O(this,Ed);O(this,si,-1);P(this,Ed,e)}add({cmd:e,undo:t,post:i,mustExec:n,type:s=NaN,overwriteIfSameType:r=!1,keepUndo:a=!1}){if(n&&e(),l(this,no))return;const o={cmd:e,undo:t,post:i,type:s};if(l(this,si)===-1){l(this,gi).length>0&&(l(this,gi).length=0),P(this,si,0),l(this,gi).push(o);return}if(r&&l(this,gi)[l(this,si)].type===s){a&&(o.undo=l(this,gi)[l(this,si)].undo),l(this,gi)[l(this,si)]=o;return}const c=l(this,si)+1;c===l(this,Ed)?l(this,gi).splice(0,1):(P(this,si,c),c<l(this,gi).length&&l(this,gi).splice(c)),l(this,gi).push(o)}undo(){if(l(this,si)===-1)return;P(this,no,!0);const{undo:e,post:t}=l(this,gi)[l(this,si)];e(),t==null||t(),P(this,no,!1),P(this,si,l(this,si)-1)}redo(){if(l(this,si)<l(this,gi).length-1){P(this,si,l(this,si)+1),P(this,no,!0);const{cmd:e,post:t}=l(this,gi)[l(this,si)];e(),t==null||t(),P(this,no,!1)}}hasSomethingToUndo(){return l(this,si)!==-1}hasSomethingToRedo(){return l(this,si)<l(this,gi).length-1}cleanType(e){if(l(this,si)!==-1){for(let t=l(this,si);t>=0;t--)if(l(this,gi)[t].type!==e){l(this,gi).splice(t+1,l(this,si)-t),P(this,si,t);return}l(this,gi).length=0,P(this,si,-1)}}destroy(){P(this,gi,null)}}gi=new WeakMap,no=new WeakMap,Ed=new WeakMap,si=new WeakMap;var H1,rb;class Yf{constructor(e){O(this,H1);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Cn.platform;for(const[i,n,s={}]of e)for(const r of i){const a=r.startsWith("mac+");t&&a?(this.callbacks.set(r.slice(4),{callback:n,options:s}),this.allKeys.add(r.split("+").at(-1))):!t&&!a&&(this.callbacks.set(r,{callback:n,options:s}),this.allKeys.add(r.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(z(this,H1,rb).call(this,t));if(!i)return;const{callback:n,options:{bubbles:s=!1,args:r=[],checker:a=null}}=i;a&&!a(e,t)||(n.bind(e,...r,t)(),s||ds(t))}}H1=new WeakSet,rb=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const W1=class W1{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Qw(e),xe(this,"_colors",e)}convert(e){const t=im(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,n]of this._colors)if(n.every((s,r)=>s===t[r]))return W1._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?ee.makeHexColor(...t):e}};re(W1,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let q0=W1;var pc,Jn,Ti,Xi,gc,ha,mc,Ss,so,ch,bc,uh,Sr,Ys,dh,Cd,Nd,vc,Pd,Lr,ro,yc,ao,kr,G1,oo,Id,ho,fh,Td,Rd,Bi,Be,la,ph,Fd,Md,lo,Er,ca,Dd,Ls,Ht,r1,U0,ab,ob,a1,hb,lb,cb,H0,ub,W0,G0,db,xn,sa,fb,pb,V0,gb,td,$0;const sc=class sc{constructor(e,t,i,n,s,r,a,o,c,d,p,g,f){O(this,Ht);O(this,pc,new AbortController);O(this,Jn,null);O(this,Ti,new Map);O(this,Xi,new Map);O(this,gc,null);O(this,ha,null);O(this,mc,null);O(this,Ss,new iA);O(this,so,null);O(this,ch,null);O(this,bc,0);O(this,uh,new Set);O(this,Sr,null);O(this,Ys,null);O(this,dh,new Set);re(this,"_editorUndoBar",null);O(this,Cd,!1);O(this,Nd,!1);O(this,vc,!1);O(this,Pd,null);O(this,Lr,null);O(this,ro,null);O(this,yc,null);O(this,ao,!1);O(this,kr,null);O(this,G1,new eA);O(this,oo,!1);O(this,Id,!1);O(this,ho,null);O(this,fh,null);O(this,Td,null);O(this,Rd,null);O(this,Bi,ye.NONE);O(this,Be,new Set);O(this,la,null);O(this,ph,null);O(this,Fd,null);O(this,Md,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});O(this,lo,[0,0]);O(this,Er,null);O(this,ca,null);O(this,Dd,null);O(this,Ls,null);const v=this._signal=l(this,pc).signal;P(this,ca,e),P(this,Dd,t),P(this,gc,i),this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:v}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),n._on("setpreference",this.onSetPreference.bind(this),{signal:v}),n._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),z(this,Ht,hb).call(this),z(this,Ht,db).call(this),z(this,Ht,H0).call(this),P(this,ha,s.annotationStorage),P(this,Pd,s.filterFactory),P(this,ph,r),P(this,yc,a||null),P(this,Cd,o),P(this,Nd,c),P(this,vc,d),P(this,Rd,p||null),this.viewParameters={realScale:Bo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=f!==!1}static get _keyboardManager(){const e=sc.prototype,t=r=>l(r,ca).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&r.hasSomethingToControl(),i=(r,{target:a})=>{if(a instanceof HTMLInputElement){const{type:o}=a;return o!=="text"&&o!=="number"}return!0},n=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return xe(this,"_keyboardManager",new Yf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&l(r,ca).contains(a)&&!r.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&l(r,ca).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,i,n,s;(e=l(this,Ls))==null||e.resolve(),P(this,Ls,null),(t=l(this,pc))==null||t.abort(),P(this,pc,null),this._signal=null;for(const r of l(this,Xi).values())r.destroy();l(this,Xi).clear(),l(this,Ti).clear(),l(this,dh).clear(),P(this,Jn,null),l(this,Be).clear(),l(this,Ss).destroy(),(i=l(this,gc))==null||i.destroy(),(n=l(this,kr))==null||n.hide(),P(this,kr,null),l(this,Lr)&&(clearTimeout(l(this,Lr)),P(this,Lr,null)),l(this,Er)&&(clearTimeout(l(this,Er)),P(this,Er,null)),(s=this._editorUndoBar)==null||s.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Rd)}get useNewAltTextFlow(){return l(this,Nd)}get useNewAltTextWhenAddingImage(){return l(this,vc)}get hcmFilter(){return xe(this,"hcmFilter",l(this,ph)?l(this,Pd).addHCMFilter(l(this,ph).foreground,l(this,ph).background):"none")}get direction(){return xe(this,"direction",getComputedStyle(l(this,ca)).direction)}get highlightColors(){return xe(this,"highlightColors",l(this,yc)?new Map(l(this,yc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return xe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),P(this,ch,e)}setMainHighlightColorPicker(e){P(this,Td,e)}editAltText(e,t=!1){var i;(i=l(this,gc))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":P(this,vc,t);break}}onPageChanging({pageNumber:e}){P(this,bc,e-1)}focusMainContainer(){l(this,ca).focus()}findParent(e,t){for(const i of l(this,Xi).values()){const{x:n,y:s,width:r,height:a}=i.div.getBoundingClientRect();if(e>=n&&e<=n+r&&t>=s&&t<=s+a)return i}return null}disableUserSelect(e=!1){l(this,Dd).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,dh).add(e)}removeShouldRescale(e){l(this,dh).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Bo.PDF_TO_CSS_UNITS;for(const i of l(this,dh))i.onScaleChanging();(t=l(this,ch))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r}=t,a=t.toString(),c=z(this,Ht,r1).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(c);if(!d)return;t.empty();const p=z(this,Ht,U0).call(this,c),g=l(this,Bi)===ye.NONE,f=()=>{p==null||p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r,text:a}),g&&this.showAllEditors("highlight",!0,!0)};if(g){this.switchToMode(ye.HIGHLIGHT,f);return}f()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,ha)&&!l(this,ha).has(e.id)&&l(this,ha).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,ao)&&(P(this,ao,!1),z(this,Ht,a1).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,Be))if(t.div.contains(e)){P(this,fh,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,fh))return;const[e,t]=l(this,fh);P(this,fh,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){z(this,Ht,H0).call(this),z(this,Ht,W0).call(this)}removeEditListeners(){z(this,Ht,ub).call(this),z(this,Ht,G0).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,Ys))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,Ys))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,Jn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of l(this,Be)){const s=n.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const r of l(this,Ys))if(r.isHandlingMimeForPasting(s.type)){r.paste(s,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){we(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const s=[];for(const o of i){const c=await n.deserialize(o);if(!c)return;s.push(c)}const r=()=>{for(const o of s)z(this,Ht,V0).call(this,o);z(this,Ht,$0).call(this,s)},a=()=>{for(const o of s)o.remove()};this.addCommands({cmd:r,undo:a,mustExec:!0})}catch(s){we(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Bi)!==ye.NONE&&!this.isEditorHandlingKeyboard&&sc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,ao)&&(P(this,ao,!1),z(this,Ht,a1).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(z(this,Ht,lb).call(this),z(this,Ht,W0).call(this),z(this,Ht,xn).call(this,{isEditing:l(this,Bi)!==ye.NONE,isEmpty:z(this,Ht,td).call(this),hasSomethingToUndo:l(this,Ss).hasSomethingToUndo(),hasSomethingToRedo:l(this,Ss).hasSomethingToRedo(),hasSelectedEditor:!1})):(z(this,Ht,cb).call(this),z(this,Ht,G0).call(this),z(this,Ht,xn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Ys)){P(this,Ys,e);for(const t of l(this,Ys))z(this,Ht,sa).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,G1).id}get currentLayer(){return l(this,Xi).get(l(this,bc))}getLayer(e){return l(this,Xi).get(e)}get currentPageIndex(){return l(this,bc)}addLayer(e){l(this,Xi).set(e.pageIndex,e),l(this,oo)?e.enable():e.disable()}removeLayer(e){l(this,Xi).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){var n;if(l(this,Bi)!==e&&!(l(this,Ls)&&(await l(this,Ls).promise,!l(this,Ls)))){if(P(this,Ls,Promise.withResolvers()),P(this,Bi,e),e===ye.NONE){this.setEditingState(!1),z(this,Ht,pb).call(this),(n=this._editorUndoBar)==null||n.hide(),l(this,Ls).resolve();return}this.setEditingState(!0),await z(this,Ht,fb).call(this),this.unselectAll();for(const s of l(this,Xi).values())s.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,Ls).resolve();return}for(const s of l(this,Ti).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();l(this,Ls).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,Bi)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,Ys)){switch(e){case Le.CREATE:this.currentLayer.addNewEditor();return;case Le.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,Td))==null||i.updateColor(t);break;case Le.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Fd)||P(this,Fd,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const n of l(this,Be))n.updateParams(e,t);for(const n of l(this,Ys))n.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var s;for(const r of l(this,Ti).values())r.editorType===e&&r.show(t);(((s=l(this,Fd))==null?void 0:s.get(Le.HIGHLIGHT_SHOW_ALL))??!0)!==t&&z(this,Ht,sa).call(this,[[Le.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Id)!==e){P(this,Id,e);for(const t of l(this,Xi).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Ti).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Ti).get(e)}addEditor(e){l(this,Ti).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,Lr)&&clearTimeout(l(this,Lr)),P(this,Lr,setTimeout(()=>{this.focusMainContainer(),P(this,Lr,null)},0))),l(this,Ti).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,uh).has(e.annotationElementId))&&((t=l(this,ha))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,uh).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,uh).has(e)}removeDeletedAnnotationElement(e){l(this,uh).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Jn)!==e&&(P(this,Jn,e),e&&z(this,Ht,sa).call(this,e.propertiesToUpdate))}updateUI(e){l(this,Ht,gb)===e&&z(this,Ht,sa).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){z(this,Ht,sa).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,Be).has(e)){l(this,Be).delete(e),e.unselect(),z(this,Ht,xn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Be).add(e),e.select(),z(this,Ht,sa).call(this,e.propertiesToUpdate),z(this,Ht,xn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=l(this,ch))==null||t.commitOrRemove();for(const i of l(this,Be))i!==e&&i.unselect();l(this,Be).clear(),l(this,Be).add(e),e.select(),z(this,Ht,sa).call(this,e.propertiesToUpdate),z(this,Ht,xn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Be).has(e)}get firstSelectedEditor(){return l(this,Be).values().next().value}unselect(e){e.unselect(),l(this,Be).delete(e),z(this,Ht,xn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Be).size!==0}get isEnterHandled(){return l(this,Be).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;l(this,Ss).undo(),z(this,Ht,xn).call(this,{hasSomethingToUndo:l(this,Ss).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:z(this,Ht,td).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){l(this,Ss).redo(),z(this,Ht,xn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Ss).hasSomethingToRedo(),isEmpty:z(this,Ht,td).call(this)})}addCommands(e){l(this,Ss).add(e),z(this,Ht,xn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:z(this,Ht,td).call(this)})}cleanUndoStack(e){l(this,Ss).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...l(this,Be)],i=()=>{var r;(r=this._editorUndoBar)==null||r.show(n,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},n=()=>{for(const r of t)z(this,Ht,V0).call(this,r)};this.addCommands({cmd:i,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Jn))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Jn)||this.hasSelection}selectAll(){for(const e of l(this,Be))e.commit();z(this,Ht,$0).call(this,l(this,Ti).values())}unselectAll(){var e;if(!(l(this,Jn)&&(l(this,Jn).commitOrRemove(),l(this,Bi)!==ye.NONE))&&!((e=l(this,ch))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of l(this,Be))t.unselect();l(this,Be).clear(),z(this,Ht,xn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,lo)[0]+=e,l(this,lo)[1]+=t;const[n,s]=l(this,lo),r=[...l(this,Be)],a=1e3;l(this,Er)&&clearTimeout(l(this,Er)),P(this,Er,setTimeout(()=>{P(this,Er,null),l(this,lo)[0]=l(this,lo)[1]=0,this.addCommands({cmd:()=>{for(const o of r)l(this,Ti).has(o.id)&&o.translateInPage(n,s)},undo:()=>{for(const o of r)l(this,Ti).has(o.id)&&o.translateInPage(-n,-s)},mustExec:!1})},a));for(const o of r)o.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),P(this,Sr,new Map);for(const e of l(this,Be))l(this,Sr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Sr))return!1;this.disableUserSelect(!1);const e=l(this,Sr);P(this,Sr,null);let t=!1;for(const[{x:n,y:s,pageIndex:r},a]of e)a.newX=n,a.newY=s,a.newPageIndex=r,t||(t=n!==a.savedX||s!==a.savedY||r!==a.savedPageIndex);if(!t)return!1;const i=(n,s,r,a)=>{if(l(this,Ti).has(n.id)){const o=l(this,Xi).get(a);o?n._setParentAndPosition(o,s,r):(n.pageIndex=a,n.x=s,n.y=r)}};return this.addCommands({cmd:()=>{for(const[n,{newX:s,newY:r,newPageIndex:a}]of e)i(n,s,r,a)},undo:()=>{for(const[n,{savedX:s,savedY:r,savedPageIndex:a}]of e)i(n,s,r,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Sr))for(const i of l(this,Sr).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,Be).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Jn)===e}getActive(){return l(this,Jn)}getMode(){return l(this,Bi)}get imageManager(){return xe(this,"imageManager",new z0)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,d=t.rangeCount;c<d;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:n,width:s,height:r}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,d,p,g)=>({x:(d-n)/r,y:1-(c+p-i)/s,width:g/r,height:p/s});break;case"180":a=(c,d,p,g)=>({x:1-(c+p-i)/s,y:1-(d+g-n)/r,width:p/s,height:g/r});break;case"270":a=(c,d,p,g)=>({x:1-(d+g-n)/r,y:(c-i)/s,width:g/r,height:p/s});break;default:a=(c,d,p,g)=>({x:(c-i)/s,y:(d-n)/r,width:p/s,height:g/r});break}const o=[];for(let c=0,d=t.rangeCount;c<d;c++){const p=t.getRangeAt(c);if(!p.collapsed)for(const{x:g,y:f,width:v,height:b}of p.getClientRects())v===0||b===0||o.push(a(g,f,v,b))}return o.length===0?null:o}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,mc)||P(this,mc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,mc))==null||t.delete(e)}renderAnnotationElement(e){var n;const t=(n=l(this,mc))==null?void 0:n.get(e.data.id);if(!t)return;const i=l(this,ha).getRawValue(t);i&&(l(this,Bi)===ye.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};pc=new WeakMap,Jn=new WeakMap,Ti=new WeakMap,Xi=new WeakMap,gc=new WeakMap,ha=new WeakMap,mc=new WeakMap,Ss=new WeakMap,so=new WeakMap,ch=new WeakMap,bc=new WeakMap,uh=new WeakMap,Sr=new WeakMap,Ys=new WeakMap,dh=new WeakMap,Cd=new WeakMap,Nd=new WeakMap,vc=new WeakMap,Pd=new WeakMap,Lr=new WeakMap,ro=new WeakMap,yc=new WeakMap,ao=new WeakMap,kr=new WeakMap,G1=new WeakMap,oo=new WeakMap,Id=new WeakMap,ho=new WeakMap,fh=new WeakMap,Td=new WeakMap,Rd=new WeakMap,Bi=new WeakMap,Be=new WeakMap,la=new WeakMap,ph=new WeakMap,Fd=new WeakMap,Md=new WeakMap,lo=new WeakMap,Er=new WeakMap,ca=new WeakMap,Dd=new WeakMap,Ls=new WeakMap,Ht=new WeakSet,r1=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},U0=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,Xi).values())if(i.hasTextLayer(e))return i;return null},ab=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=z(this,Ht,r1).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(i);n&&(l(this,kr)||P(this,kr,new tA(this)),l(this,kr).show(i,n,this.direction==="ltr"))},ob=function(){var s,r,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,la)&&((s=l(this,kr))==null||s.hide(),P(this,la,null),z(this,Ht,xn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,la))return;const n=z(this,Ht,r1).call(this,e).closest(".textLayer");if(!n){l(this,la)&&((r=l(this,kr))==null||r.hide(),P(this,la,null),z(this,Ht,xn).call(this,{hasSelectedText:!1}));return}if((a=l(this,kr))==null||a.hide(),P(this,la,t),z(this,Ht,xn).call(this,{hasSelectedText:!0}),!(l(this,Bi)!==ye.HIGHLIGHT&&l(this,Bi)!==ye.NONE)&&(l(this,Bi)===ye.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),P(this,ao,this.isShiftKeyDown),!this.isShiftKeyDown)){const o=l(this,Bi)===ye.HIGHLIGHT?z(this,Ht,U0).call(this,n):null;o==null||o.toggleDrawing();const c=new AbortController,d=this.combinedSignal(c),p=g=>{g.type==="pointerup"&&g.button!==0||(c.abort(),o==null||o.toggleDrawing(!0),g.type==="pointerup"&&z(this,Ht,a1).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:d}),window.addEventListener("blur",p,{signal:d})}},a1=function(e=""){l(this,Bi)===ye.HIGHLIGHT?this.highlightSelection(e):l(this,Cd)&&z(this,Ht,ab).call(this)},hb=function(){document.addEventListener("selectionchange",z(this,Ht,ob).bind(this),{signal:this._signal})},lb=function(){if(l(this,ro))return;P(this,ro,new AbortController);const e=this.combinedSignal(l(this,ro));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},cb=function(){var e;(e=l(this,ro))==null||e.abort(),P(this,ro,null)},H0=function(){if(l(this,ho))return;P(this,ho,new AbortController);const e=this.combinedSignal(l(this,ho));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},ub=function(){var e;(e=l(this,ho))==null||e.abort(),P(this,ho,null)},W0=function(){if(l(this,so))return;P(this,so,new AbortController);const e=this.combinedSignal(l(this,so));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},G0=function(){var e;(e=l(this,so))==null||e.abort(),P(this,so,null)},db=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},xn=function(e){Object.entries(e).some(([i,n])=>l(this,Md)[i]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Md),e)}),l(this,Bi)===ye.HIGHLIGHT&&e.hasSelectedEditor===!1&&z(this,Ht,sa).call(this,[[Le.HIGHLIGHT_FREE,!0]]))},sa=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},fb=async function(){if(!l(this,oo)){P(this,oo,!0);const e=[];for(const t of l(this,Xi).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Ti).values())t.enable()}},pb=function(){if(this.unselectAll(),l(this,oo)){P(this,oo,!1);for(const e of l(this,Xi).values())e.disable();for(const e of l(this,Ti).values())e.disable()}},V0=function(e){const t=l(this,Xi).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},gb=function(){let e=null;for(e of l(this,Be));return e},td=function(){if(l(this,Ti).size===0)return!0;if(l(this,Ti).size===1)for(const e of l(this,Ti).values())return e.isEmpty();return!1},$0=function(e){for(const t of l(this,Be))t.unselect();l(this,Be).clear();for(const t of e)t.isEmpty()||(l(this,Be).add(t),t.select());z(this,Ht,xn).call(this,{hasSelectedEditor:this.hasSelection})},re(sc,"TRANSLATE_SMALL",1),re(sc,"TRANSLATE_BIG",10);let dl=sc;var ji,Cr,Ks,wc,Nr,Qn,Ac,Pr,qn,ua,gh,Ir,co,ar,ed,o1;const Sn=class Sn{constructor(e){O(this,ar);O(this,ji,null);O(this,Cr,!1);O(this,Ks,null);O(this,wc,null);O(this,Nr,null);O(this,Qn,null);O(this,Ac,!1);O(this,Pr,null);O(this,qn,null);O(this,ua,null);O(this,gh,null);O(this,Ir,!1);P(this,qn,e),P(this,Ir,e._uiManager.useNewAltTextFlow),l(Sn,co)||P(Sn,co,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Sn._l10n??(Sn._l10n=e)}async render(){const e=P(this,Ks,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=P(this,wc,document.createElement("span"));e.append(t),l(this,Ir)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(Sn,co).missing),t.setAttribute("data-l10n-id",l(Sn,co)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,qn)._uiManager._signal;e.addEventListener("contextmenu",or,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const n=s=>{s.preventDefault(),l(this,qn)._uiManager.editAltText(l(this,qn)),l(this,Ir)&&l(this,qn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,ar,ed)}})};return e.addEventListener("click",n,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(P(this,Ac,!0),n(s))},{signal:i}),await z(this,ar,o1).call(this),e}finish(){l(this,Ks)&&(l(this,Ks).focus({focusVisible:l(this,Ac)}),P(this,Ac,!1))}isEmpty(){return l(this,Ir)?l(this,ji)===null:!l(this,ji)&&!l(this,Cr)}hasData(){return l(this,Ir)?l(this,ji)!==null||!!l(this,ua):this.isEmpty()}get guessedText(){return l(this,ua)}async setGuessedText(e){l(this,ji)===null&&(P(this,ua,e),P(this,gh,await Sn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),z(this,ar,o1).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Ir)||l(this,ji)){(t=l(this,Pr))==null||t.remove(),P(this,Pr,null);return}if(!l(this,Pr)){const i=P(this,Pr,document.createElement("div"));i.className="noAltTextBadge",l(this,qn).div.append(i)}l(this,Pr).classList.toggle("hidden",!e)}serialize(e){let t=l(this,ji);return!e&&l(this,ua)===t&&(t=l(this,gh)),{altText:t,decorative:l(this,Cr),guessedText:l(this,ua),textWithDisclaimer:l(this,gh)}}get data(){return{altText:l(this,ji),decorative:l(this,Cr)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:n,cancel:s=!1}){i&&(P(this,ua,i),P(this,gh,n)),!(l(this,ji)===e&&l(this,Cr)===t)&&(s||(P(this,ji,e),P(this,Cr,t)),z(this,ar,o1).call(this))}toggle(e=!1){l(this,Ks)&&(!e&&l(this,Qn)&&(clearTimeout(l(this,Qn)),P(this,Qn,null)),l(this,Ks).disabled=!e)}shown(){l(this,qn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,ar,ed)}})}destroy(){var e,t;(e=l(this,Ks))==null||e.remove(),P(this,Ks,null),P(this,wc,null),P(this,Nr,null),(t=l(this,Pr))==null||t.remove(),P(this,Pr,null)}};ji=new WeakMap,Cr=new WeakMap,Ks=new WeakMap,wc=new WeakMap,Nr=new WeakMap,Qn=new WeakMap,Ac=new WeakMap,Pr=new WeakMap,qn=new WeakMap,ua=new WeakMap,gh=new WeakMap,Ir=new WeakMap,co=new WeakMap,ar=new WeakSet,ed=function(){return l(this,ji)&&"added"||l(this,ji)===null&&this.guessedText&&"review"||"missing"},o1=async function(){var n,s,r;const e=l(this,Ks);if(!e)return;if(l(this,Ir)){if(e.classList.toggle("done",!!l(this,ji)),e.setAttribute("data-l10n-id",l(Sn,co)[l(this,ar,ed)]),(n=l(this,wc))==null||n.setAttribute("data-l10n-id",l(Sn,co)[`${l(this,ar,ed)}-label`]),!l(this,ji)){(s=l(this,Nr))==null||s.remove();return}}else{if(!l(this,ji)&&!l(this,Cr)){e.classList.remove("done"),(r=l(this,Nr))==null||r.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Nr);if(!t){P(this,Nr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,qn).id}`;const a=100,o=l(this,qn)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(l(this,Qn)),P(this,Qn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{P(this,Qn,setTimeout(()=>{P(this,Qn,null),l(this,Nr).classList.add("show"),l(this,qn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:o}),e.addEventListener("mouseleave",()=>{var c;l(this,Qn)&&(clearTimeout(l(this,Qn)),P(this,Qn,null)),(c=l(this,Nr))==null||c.classList.remove("show")},{signal:o})}l(this,Cr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,ji)),t.parentNode||e.append(t);const i=l(this,qn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},O(Sn,co,null),re(Sn,"_l10n",null);let M1=Sn;var Od,mh,Bd,jd,zd,qd,Ud,_c,da,bh,uo,Da,mb,bb,X0;const hm=class hm{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:n=null,onPinching:s=null,onPinchEnd:r=null,signal:a}){O(this,Da);O(this,Od);O(this,mh,!1);O(this,Bd,null);O(this,jd);O(this,zd);O(this,qd);O(this,Ud);O(this,_c);O(this,da,null);O(this,bh);O(this,uo,null);P(this,Od,e),P(this,Bd,i),P(this,jd,t),P(this,zd,n),P(this,qd,s),P(this,Ud,r),P(this,bh,new AbortController),P(this,_c,AbortSignal.any([a,l(this,bh).signal])),e.addEventListener("touchstart",z(this,Da,mb).bind(this),{passive:!1,signal:l(this,_c)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return xe(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=l(this,bh))==null||e.abort(),P(this,bh,null)}};Od=new WeakMap,mh=new WeakMap,Bd=new WeakMap,jd=new WeakMap,zd=new WeakMap,qd=new WeakMap,Ud=new WeakMap,_c=new WeakMap,da=new WeakMap,bh=new WeakMap,uo=new WeakMap,Da=new WeakSet,mb=function(e){var n,s,r;if((n=l(this,jd))!=null&&n.call(this)||e.touches.length<2)return;if(!l(this,uo)){P(this,uo,new AbortController);const a=AbortSignal.any([l(this,_c),l(this,uo).signal]),o=l(this,Od),c={signal:a,passive:!1};o.addEventListener("touchmove",z(this,Da,bb).bind(this),c),o.addEventListener("touchend",z(this,Da,X0).bind(this),c),o.addEventListener("touchcancel",z(this,Da,X0).bind(this),c),(s=l(this,zd))==null||s.call(this)}if(ds(e),e.touches.length!==2||(r=l(this,Bd))!=null&&r.call(this)){P(this,da,null);return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),P(this,da,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY})},bb=function(e){var I;if(!l(this,da)||e.touches.length!==2)return;let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:n,screenY:s}=t,{screenX:r,screenY:a}=i,o=l(this,da),{touch0X:c,touch0Y:d,touch1X:p,touch1Y:g}=o,f=p-c,v=g-d,b=r-n,_=a-s,y=Math.hypot(b,_)||1,x=Math.hypot(f,v)||1;if(!l(this,mh)&&Math.abs(x-y)<=hm.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(o.touch0X=n,o.touch0Y=s,o.touch1X=r,o.touch1Y=a,e.preventDefault(),!l(this,mh)){P(this,mh,!0);return}const C=[(n+r)/2,(s+a)/2];(I=l(this,qd))==null||I.call(this,C,x,y)},X0=function(e){var t;l(this,uo).abort(),P(this,uo,null),(t=l(this,Ud))==null||t.call(this),l(this,da)&&(e.preventDefault(),P(this,da,null),P(this,mh,!1))};let D1=hm;var vh,Zs,Ze,xc,fo,Hd,yh,Yi,wh,fa,po,Wd,Ah,ts,Gd,_h,pa,Tr,Sc,Lc,ks,xh,Vd,V1,ae,Y0,$d,K0,h1,vb,yb,Z0,l1,J0,wb,Ab,_b,Q0,xb,t2,Sb,Lb,kb,e2,id;const Ae=class Ae{constructor(e){O(this,ae);O(this,vh,null);O(this,Zs,null);O(this,Ze,null);O(this,xc,!1);O(this,fo,null);O(this,Hd,"");O(this,yh,!1);O(this,Yi,null);O(this,wh,null);O(this,fa,null);O(this,po,null);O(this,Wd,"");O(this,Ah,!1);O(this,ts,null);O(this,Gd,!1);O(this,_h,!1);O(this,pa,!1);O(this,Tr,null);O(this,Sc,0);O(this,Lc,0);O(this,ks,null);O(this,xh,null);re(this,"_editToolbar",null);re(this,"_initialOptions",Object.create(null));re(this,"_initialData",null);re(this,"_isVisible",!0);re(this,"_uiManager",null);re(this,"_focusEventsAllowed",!0);O(this,Vd,!1);O(this,V1,Ae._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:r}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[s,r];const[a,o]=this.parentDimensions;this.x=e.x/a,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ae.prototype._resizeWithKeyboard,t=dl.TRANSLATE_SMALL,i=dl.TRANSLATE_BIG;return xe(this,"_resizerKeyboardManager",new Yf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Ae.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return xe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new nA({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ae._l10n??(Ae._l10n=e),Ae._l10nResizer||(Ae._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ae._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ae._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){$e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Vd)}set _isDraggable(e){var t;P(this,Vd,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,V1)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):z(this,ae,id).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Ah)?P(this,Ah,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,n){const[s,r]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(e+i)/s,this.y=(t+n)/r,this.fixAndSetPosition()}translate(e,t){z(this,ae,Y0).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,ts)||P(this,ts,[this.x,this.y,this.width,this.height]),z(this,ae,Y0).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,ts)||P(this,ts,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[n,s]}=this;if(this.x+=e/n,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,c]=this.getBaseTranslation();r+=o,a+=c;const{style:d}=i;d.left=`${(100*r).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(r,a),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,ts)&&(l(this,ts)[0]!==this.x||l(this,ts)[1]!==this.y)}get _hasBeenResized(){return!!l(this,ts)&&(l(this,ts)[2]!==this.width||l(this,ts)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Ae,n=i/e,s=i/t;switch(this.rotation){case 90:return[-n,s];case 180:return[n,s];case 270:return[n,-s];default:return[-n,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,n]}=this;let{x:s,y:r,width:a,height:o}=this;if(a*=i,o*=n,s*=i,r*=n,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(i-a,s)),r=Math.max(0,Math.min(n-o,r));break;case 90:s=Math.max(0,Math.min(i-o,s)),r=Math.min(n,Math.max(a,r));break;case 180:s=Math.min(i,Math.max(a,s)),r=Math.min(n,Math.max(o,r));break;case 270:s=Math.min(i,Math.max(o,s)),r=Math.max(0,Math.min(n-a,r));break}this.x=s/=i,this.y=r/=n;const[c,d]=this.getBaseTranslation();s+=c,r+=d,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return z(i=Ae,$d,K0).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return z(i=Ae,$d,K0).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,n]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/i).toFixed(2)}%`,l(this,yh)||(s.height=`${(100*t/n).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,n=i.endsWith("%"),s=!l(this,yh)&&t.endsWith("%");if(n&&s)return;const[r,a]=this.parentDimensions;n||(e.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),!l(this,yh)&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=l(this,Ze))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,_h)?this._editToolbar:(this._editToolbar=new B0(this),this.div.append(this._editToolbar.render()),l(this,Ze)&&await this._editToolbar.addAltText(l(this,Ze)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,Ze))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Ze)||(M1.initialize(Ae._l10n),P(this,Ze,new M1(this)),l(this,vh)&&(l(this,Ze).data=l(this,vh),P(this,vh,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,Ze))==null?void 0:e.data}set altTextData(e){l(this,Ze)&&(l(this,Ze).data=e)}get guessedAltText(){var e;return(e=l(this,Ze))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Ze))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Ze))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Ze)&&!l(this,Ze).isEmpty()}hasAltTextData(){var e;return((e=l(this,Ze))==null?void 0:e.hasData())??!1}render(){var s;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,xc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),z(this,ae,t2).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,n]=this.getInitialTranslation();return this.translate(i,n),F1(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,xh)||P(this,xh,new D1({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:z(this,ae,wb).bind(this),onPinching:z(this,ae,Ab).bind(this),onPinchEnd:z(this,ae,_b).bind(this),signal:this._uiManager._signal}))),(s=this._uiManager._editorUndoBar)==null||s.hide(),this.div}pointerdown(e){const{isMac:t}=Cn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(P(this,Ah,!0),this._isDraggable){z(this,ae,xb).call(this,e);return}z(this,ae,Q0).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Tr)&&clearTimeout(l(this,Tr)),P(this,Tr,setTimeout(()=>{var e;P(this,Tr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const n=this.parentScale,[s,r]=this.pageDimensions,[a,o]=this.pageTranslation,c=e/n,d=t/n,p=this.x*s,g=this.y*r,f=this.width*s,v=this.height*r;switch(i){case 0:return[p+c+a,r-g-d-v+o,p+c+f+a,r-g-d+o];case 90:return[p+d+a,r-g+c+o,p+d+v+a,r-g+c+f+o];case 180:return[p-c-f+a,r-g+d+o,p-c+a,r-g+d+v+o];case 270:return[p-d-v+a,r-g-c-f+o,p-d+a,r-g-c+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,n,s,r]=e,a=s-i,o=r-n;switch(this.rotation){case 0:return[i,t-r,a,o];case 90:return[i,t-n,o,a];case 180:return[s,t-n,a,o];case 270:return[s,t-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){P(this,_h,!0)}disableEditMode(){P(this,_h,!1)}isInEditMode(){return l(this,_h)}shouldGetKeyboardEvents(){return l(this,pa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:s,innerWidth:r}=window;return t<r&&n>0&&e<s&&i>0}rebuild(){z(this,ae,t2).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){$e("An editor must be serializable")}static async deserialize(e,t,i){const n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});n.rotation=e.rotation,P(n,vh,e.accessibilityData);const[s,r]=n.pageDimensions,[a,o,c,d]=n.getRectInCurrentCoords(e.rect,r);return n.x=a/s,n.y=o/r,n.width=c/s,n.height=d/r,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=l(this,po))==null||e.abort(),P(this,po,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Tr)&&(clearTimeout(l(this,Tr)),P(this,Tr,null)),z(this,ae,id).call(this),this.removeEditToolbar(),l(this,ks)){for(const i of l(this,ks).values())clearTimeout(i);P(this,ks,null)}this.parent=null,(t=l(this,xh))==null||t.destroy(),P(this,xh,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(z(this,ae,vb).call(this),l(this,Yi).classList.remove("hidden"),F1(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),P(this,fa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,Yi).children;if(!l(this,Zs)){P(this,Zs,Array.from(t));const r=z(this,ae,Sb).bind(this),a=z(this,ae,Lb).bind(this),o=this._uiManager._signal;for(const c of l(this,Zs)){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",r,{signal:o}),c.addEventListener("blur",a,{signal:o}),c.addEventListener("focus",z(this,ae,kb).bind(this,d),{signal:o}),c.setAttribute("data-l10n-id",Ae._l10nResizer[d])}}const i=l(this,Zs)[0];let n=0;for(const r of t){if(r===i)break;n++}const s=(360-this.rotation+this.parentRotation)%360/90*(l(this,Zs).length/4);if(s!==n){if(s<n)for(let a=0;a<n-s;a++)l(this,Yi).append(l(this,Yi).firstChild);else if(s>n)for(let a=0;a<s-n;a++)l(this,Yi).firstChild.before(l(this,Yi).lastChild);let r=0;for(const a of t){const c=l(this,Zs)[r++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Ae._l10nResizer[c])}}z(this,ae,e2).call(this,0),P(this,pa,!0),l(this,Yi).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,pa)&&z(this,ae,J0).call(this,l(this,Wd),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){z(this,ae,id).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,s;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,Ze))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,n,s;(e=l(this,Yi))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(s=l(this,Ze))==null||s.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Gd)}set isEditing(e){P(this,Gd,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){P(this,yh,!0);const i=e/t,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,ks)||P(this,ks,new Map);const{action:i}=e;let n=l(this,ks).get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),l(this,ks).delete(i),l(this,ks).size===0&&P(this,ks,null)},Ae._telemetryTimeout),l(this,ks).set(i,n);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),P(this,xc,!1)}disable(){this.div&&(this.div.tabIndex=-1),P(this,xc,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};vh=new WeakMap,Zs=new WeakMap,Ze=new WeakMap,xc=new WeakMap,fo=new WeakMap,Hd=new WeakMap,yh=new WeakMap,Yi=new WeakMap,wh=new WeakMap,fa=new WeakMap,po=new WeakMap,Wd=new WeakMap,Ah=new WeakMap,ts=new WeakMap,Gd=new WeakMap,_h=new WeakMap,pa=new WeakMap,Tr=new WeakMap,Sc=new WeakMap,Lc=new WeakMap,ks=new WeakMap,xh=new WeakMap,Vd=new WeakMap,V1=new WeakMap,ae=new WeakSet,Y0=function([e,t],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/e,this.y+=n/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},$d=new WeakSet,K0=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},h1=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},vb=function(){if(l(this,Yi))return;P(this,Yi,document.createElement("div")),l(this,Yi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const n=document.createElement("div");l(this,Yi).append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",z(this,ae,yb).bind(this,i),{signal:t}),n.addEventListener("contextmenu",or,{signal:t}),n.tabIndex=-1}this.div.prepend(l(this,Yi))},yb=function(e,t){var d;t.preventDefault();const{isMac:i}=Cn.platform;if(t.button!==0||t.ctrlKey&&i)return;(d=l(this,Ze))==null||d.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,P(this,wh,[t.screenX,t.screenY]);const s=new AbortController,r=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",z(this,ae,J0).bind(this,e),{passive:!0,capture:!0,signal:r}),window.addEventListener("touchmove",ds,{passive:!1,signal:r}),window.addEventListener("contextmenu",or,{signal:r}),P(this,fa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,o=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var p;s.abort(),this.parent.togglePointerEvents(!0),(p=l(this,Ze))==null||p.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=a,this.div.style.cursor=o,z(this,ae,l1).call(this)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Z0=function(e,t,i,n){this.width=i,this.height=n,this.x=e,this.y=t;const[s,r]=this.parentDimensions;this.setDims(s*i,r*n),this.fixAndSetPosition(),this._onResized()},l1=function(){if(!l(this,fa))return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:n}=l(this,fa);P(this,fa,null);const s=this.x,r=this.y,a=this.width,o=this.height;s===e&&r===t&&a===i&&o===n||this.addCommands({cmd:z(this,ae,Z0).bind(this,s,r,a,o),undo:z(this,ae,Z0).bind(this,e,t,i,n),mustExec:!0})},J0=function(e,t){const[i,n]=this.parentDimensions,s=this.x,r=this.y,a=this.width,o=this.height,c=Ae.MIN_SIZE/i,d=Ae.MIN_SIZE/n,p=z(this,ae,h1).call(this,this.rotation),g=(st,tt)=>[p[0]*st+p[2]*tt,p[1]*st+p[3]*tt],f=z(this,ae,h1).call(this,360-this.rotation),v=(st,tt)=>[f[0]*st+f[2]*tt,f[1]*st+f[3]*tt];let b,_,y=!1,x=!1;switch(e){case"topLeft":y=!0,b=(st,tt)=>[0,0],_=(st,tt)=>[st,tt];break;case"topMiddle":b=(st,tt)=>[st/2,0],_=(st,tt)=>[st/2,tt];break;case"topRight":y=!0,b=(st,tt)=>[st,0],_=(st,tt)=>[0,tt];break;case"middleRight":x=!0,b=(st,tt)=>[st,tt/2],_=(st,tt)=>[0,tt/2];break;case"bottomRight":y=!0,b=(st,tt)=>[st,tt],_=(st,tt)=>[0,0];break;case"bottomMiddle":b=(st,tt)=>[st/2,tt],_=(st,tt)=>[st/2,0];break;case"bottomLeft":y=!0,b=(st,tt)=>[0,tt],_=(st,tt)=>[st,0];break;case"middleLeft":x=!0,b=(st,tt)=>[0,tt/2],_=(st,tt)=>[st,tt/2];break}const C=b(a,o),I=_(a,o);let F=g(...I);const K=Ae._round(s+F[0]),q=Ae._round(r+F[1]);let U=1,X=1,rt,M;if(t.fromKeyboard)({deltaX:rt,deltaY:M}=t);else{const{screenX:st,screenY:tt}=t,[dt,ot]=l(this,wh);[rt,M]=this.screenToPageTranslation(st-dt,tt-ot),l(this,wh)[0]=st,l(this,wh)[1]=tt}if([rt,M]=v(rt/i,M/n),y){const st=Math.hypot(a,o);U=X=Math.max(Math.min(Math.hypot(I[0]-C[0]-rt,I[1]-C[1]-M)/st,1/a,1/o),c/a,d/o)}else x?U=Math.max(c,Math.min(1,Math.abs(I[0]-C[0]-rt)))/a:X=Math.max(d,Math.min(1,Math.abs(I[1]-C[1]-M)))/o;const E=Ae._round(a*U),W=Ae._round(o*X);F=g(..._(E,W));const S=K-F[0],nt=q-F[1];l(this,ts)||P(this,ts,[this.x,this.y,this.width,this.height]),this.width=E,this.height=W,this.x=S,this.y=nt,this.setDims(i*E,n*W),this.fixAndSetPosition(),this._onResizing()},wb=function(){var e;P(this,fa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=l(this,Ze))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Ab=function(e,t,i){let s=.7*(i/t)+1-.7;if(s===1)return;const r=z(this,ae,h1).call(this,this.rotation),a=(K,q)=>[r[0]*K+r[2]*q,r[1]*K+r[3]*q],[o,c]=this.parentDimensions,d=this.x,p=this.y,g=this.width,f=this.height,v=Ae.MIN_SIZE/o,b=Ae.MIN_SIZE/c;s=Math.max(Math.min(s,1/g,1/f),v/g,b/f);const _=Ae._round(g*s),y=Ae._round(f*s);if(_===g&&y===f)return;l(this,ts)||P(this,ts,[d,p,g,f]);const x=a(g/2,f/2),C=Ae._round(d+x[0]),I=Ae._round(p+x[1]),F=a(_/2,y/2);this.x=C-F[0],this.y=I-F[1],this.width=_,this.height=y,this.setDims(o*_,c*y),this.fixAndSetPosition(),this._onResizing()},_b=function(){var e;(e=l(this,Ze))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),z(this,ae,l1).call(this)},Q0=function(e){const{isMac:t}=Cn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},xb=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const n=new AbortController,s=this._uiManager.combinedSignal(n),r={capture:!0,passive:!1,signal:s},a=c=>{n.abort(),P(this,fo,null),P(this,Ah,!1),this._uiManager.endDragSession()||z(this,ae,Q0).call(this,c),i&&this._onStopDragging()};t&&(P(this,Sc,e.clientX),P(this,Lc,e.clientY),P(this,fo,e.pointerId),P(this,Hd,e.pointerType),window.addEventListener("pointermove",c=>{i||(i=!0,this._onStartDragging());const{clientX:d,clientY:p,pointerId:g}=c;if(g!==l(this,fo)){ds(c);return}const[f,v]=this.screenToPageTranslation(d-l(this,Sc),p-l(this,Lc));P(this,Sc,d),P(this,Lc,p),this._uiManager.dragSelectedEditors(f,v)},r),window.addEventListener("touchmove",ds,r),window.addEventListener("pointerdown",c=>{c.pointerType===l(this,Hd)&&(l(this,xh)||c.isPrimary)&&a(c),ds(c)},r));const o=c=>{if(!l(this,fo)||l(this,fo)===c.pointerId){a(c);return}ds(c)};window.addEventListener("pointerup",o,{signal:s}),window.addEventListener("blur",o,{signal:s})},t2=function(){if(l(this,po)||!this.div)return;P(this,po,new AbortController);const e=this._uiManager.combinedSignal(l(this,po));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Sb=function(e){Ae._resizerKeyboardManager.exec(this,e)},Lb=function(e){var t;l(this,pa)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,Yi)&&z(this,ae,id).call(this)},kb=function(e){P(this,Wd,l(this,pa)?e:"")},e2=function(e){if(l(this,Zs))for(const t of l(this,Zs))t.tabIndex=e},id=function(){P(this,pa,!1),z(this,ae,e2).call(this,-1),z(this,ae,l1).call(this)},O(Ae,$d),re(Ae,"_l10n",null),re(Ae,"_l10nResizer",null),re(Ae,"_borderLineWidth",-1),re(Ae,"_colorManager",new q0),re(Ae,"_zIndex",1),re(Ae,"_telemetryTimeout",1e3);let ai=Ae;class nA extends ai{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const d5=3285377520,xs=4294901760,Ar=65535;class Eb{constructor(e){this.h1=e?e&4294967295:d5,this.h2=e?e&4294967295:d5}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let b=0,_=e.length;b<_;b++){const y=e.charCodeAt(b);y<=255?t[i++]=y:(t[i++]=y>>>8,t[i++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=i>>2,s=i-n*4,r=new Uint32Array(t.buffer,0,n);let a=0,o=0,c=this.h1,d=this.h2;const p=3432918353,g=461845907,f=p&Ar,v=g&Ar;for(let b=0;b<n;b++)b&1?(a=r[b],a=a*p&xs|a*f&Ar,a=a<<15|a>>>17,a=a*g&xs|a*v&Ar,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(o=r[b],o=o*p&xs|o*f&Ar,o=o<<15|o>>>17,o=o*g&xs|o*v&Ar,d^=o,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,s){case 3:a^=t[n*4+2]<<16;case 2:a^=t[n*4+1]<<8;case 1:a^=t[n*4],a=a*p&xs|a*f&Ar,a=a<<15|a>>>17,a=a*g&xs|a*v&Ar,n&1?c^=a:d^=a}this.h1=c,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&xs|e*36045&Ar,t=t*4283543511&xs|((t<<16|e>>>16)*2950163797&xs)>>>16,e^=t>>>1,e=e*444984403&xs|e*60499&Ar,t=t*3301882366&xs|((t<<16|e>>>16)*3120437893&xs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const i2=Object.freeze({map:null,hash:"",transfer:void 0});var Sh,Lh,zi,$1,Cb;class nm{constructor(){O(this,$1);O(this,Sh,!1);O(this,Lh,null);O(this,zi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,zi).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,zi).get(e)}remove(e){if(l(this,zi).delete(e),l(this,zi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,zi).values())if(t instanceof ai)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,zi).get(e);let n=!1;if(i!==void 0)for(const[s,r]of Object.entries(t))i[s]!==r&&(n=!0,i[s]=r);else n=!0,l(this,zi).set(e,t);n&&z(this,$1,Cb).call(this),t instanceof ai&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,zi).has(e)}getAll(){return l(this,zi).size>0?Z2(l(this,zi)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,zi).size}resetModified(){l(this,Sh)&&(P(this,Sh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Nb(this)}get serializable(){if(l(this,zi).size===0)return i2;const e=new Map,t=new Eb,i=[],n=Object.create(null);let s=!1;for(const[r,a]of l(this,zi)){const o=a instanceof ai?a.serialize(!1,n):a;o&&(e.set(r,o),t.update(`${r}:${JSON.stringify(o)}`),s||(s=!!o.bitmap))}if(s)for(const r of e.values())r.bitmap&&i.push(r.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:i2}get editorStats(){let e=null;const t=new Map;for(const i of l(this,zi).values()){if(!(i instanceof ai))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:s}=n;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const r=e[s]||(e[s]=new Map);for(const[a,o]of Object.entries(n)){if(a==="type")continue;let c=r.get(a);c||(c=new Map,r.set(a,c));const d=c.get(o)??0;c.set(o,d+1)}}for(const[i,n]of t)e[i]=n.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){P(this,Lh,null)}get modifiedIds(){if(l(this,Lh))return l(this,Lh);const e=[];for(const t of l(this,zi).values())!(t instanceof ai)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return P(this,Lh,{ids:new Set(e),hash:e.join(",")})}}Sh=new WeakMap,Lh=new WeakMap,zi=new WeakMap,$1=new WeakSet,Cb=function(){l(this,Sh)||(P(this,Sh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Xd;class Nb extends nm{constructor(t){super();O(this,Xd);const{map:i,hash:n,transfer:s}=t.serializable,r=structuredClone(i,s?{transfer:s}:null);P(this,Xd,{map:r,hash:n,transfer:s})}get print(){$e("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Xd)}get modifiedIds(){return xe(this,"modifiedIds",{ids:new Set,hash:""})}}Xd=new WeakMap;var kc;class sA{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){O(this,kc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,kc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,kc).has(e.loadedName))){if(ki(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:n,style:s}=e,r=new FontFace(i,n,s);this.addNativeFontFace(r);try{await r.load(),l(this,kc).add(i),t==null||t(e)}catch{we(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}$e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(n){throw we(`Failed to load font '${i.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return xe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(bn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),xe(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(ki(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,n={done:!1,complete:t,callback:e};return i.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(I,F){return I.charCodeAt(F)<<24|I.charCodeAt(F+1)<<16|I.charCodeAt(F+2)<<8|I.charCodeAt(F+3)&255}function n(I,F,K,q){const U=I.substring(0,F),X=I.substring(F+K);return U+q+X}let s,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let c=0;function d(I,F){if(++c>30){we("Load test font never loaded."),F();return}if(o.font="30px "+I,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(d.bind(null,I,F))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=n(g,976,p.length,p);const v=16,b=1482184792;let _=i(g,v);for(s=0,r=p.length-3;s<r;s+=4)_=_-b+i(p,s)|0;s<p.length&&(_=_-b+i(p+"XXX",s)|0),g=n(g,v,4,Hw(_));const y=`url(data:font/opentype;base64,${btoa(g)});`,x=`@font-face {font-family:"${p}";src:${y}}`;this.insertRule(x);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const I of[e.loadedName,p]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=I,C.append(F)}this._document.body.append(C),d(p,()=>{C.remove(),t.complete()})}}kc=new WeakMap;class rA{constructor(e,{disableFontFace:t=!1,fontExtraProperties:i=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this.fontExtraProperties=i===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Yw(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let n;try{n=e.get(i)}catch(r){we(`getPathGenerator - ignoring character: "${r}".`)}const s=new Path2D(n||"");return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=s}}const Vp={DATA:1,ERROR:2},Li={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f5(){}function jn(h){if(h instanceof Oo||h instanceof M0||h instanceof yd||h instanceof l5||h instanceof R1||h instanceof m0)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||$e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new Oo(h.message);case"InvalidPDFException":return new M0(h.message);case"MissingPDFException":return new yd(h.message);case"PasswordException":return new l5(h.message,h.code);case"UnexpectedResponseException":return new R1(h.message,h.status);case"UnknownErrorException":return new m0(h.message,h.details)}return new m0(h.message,h.toString())}var Ec,Rs,Pb,Ib,Tb,c1;class nd{constructor(e,t,i){O(this,Rs);O(this,Ec,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",z(this,Rs,Pb).bind(this),{signal:l(this,Ec).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const n=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},i)}catch(r){s.reject(r)}return s.promise}sendWithStream(e,t,i,n){const s=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:c=>{const d=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:e,streamId:s,data:t,desiredSize:c.desiredSize},n),d.promise},pull:c=>{const d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,o.postMessage({sourceName:r,targetName:a,stream:Li.PULL,streamId:s,desiredSize:c.desiredSize}),d.promise},cancel:c=>{ki(c instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:Li.CANCEL,streamId:s,reason:jn(c)}),d.promise}},i)}destroy(){var e;(e=l(this,Ec))==null||e.abort(),P(this,Ec,null)}}Ec=new WeakMap,Rs=new WeakSet,Pb=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){z(this,Rs,Tb).call(this,e);return}if(e.callback){const i=e.callbackId,n=this.callbackCapabilities[i];if(!n)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Vp.DATA)n.resolve(e.data);else if(e.callback===Vp.ERROR)n.reject(jn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,n=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(r){s.postMessage({sourceName:i,targetName:n,callback:Vp.DATA,callbackId:e.callbackId,data:r})},function(r){s.postMessage({sourceName:i,targetName:n,callback:Vp.ERROR,callbackId:e.callbackId,reason:jn(r)})});return}if(e.streamId){z(this,Rs,Ib).call(this,e);return}t(e.data)},Ib=function(e){const t=e.streamId,i=this.sourceName,n=e.sourceName,s=this.comObj,r=this,a=this.actionHandler[e.action],o={enqueue(c,d=1,p){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=d,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:n,stream:Li.ENQUEUE,streamId:t,chunk:c},p)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:Li.CLOSE,streamId:t}),delete r.streamSinks[t])},error(c){ki(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:Li.ERROR,streamId:t,reason:jn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then(function(){s.postMessage({sourceName:i,targetName:n,stream:Li.START_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:n,stream:Li.START_COMPLETE,streamId:t,reason:jn(c)})})},Tb=function(e){const t=e.streamId,i=this.sourceName,n=e.sourceName,s=this.comObj,r=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Li.START_COMPLETE:e.success?r.startCall.resolve():r.startCall.reject(jn(e.reason));break;case Li.PULL_COMPLETE:e.success?r.pullCall.resolve():r.pullCall.reject(jn(e.reason));break;case Li.PULL:if(!a){s.postMessage({sourceName:i,targetName:n,stream:Li.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||f5).then(function(){s.postMessage({sourceName:i,targetName:n,stream:Li.PULL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:n,stream:Li.PULL_COMPLETE,streamId:t,reason:jn(c)})});break;case Li.ENQUEUE:if(ki(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(e.chunk);break;case Li.CLOSE:if(ki(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),z(this,Rs,c1).call(this,r,t);break;case Li.ERROR:ki(r,"error should have stream controller"),r.controller.error(jn(e.reason)),z(this,Rs,c1).call(this,r,t);break;case Li.CANCEL_COMPLETE:e.success?r.cancelCall.resolve():r.cancelCall.reject(jn(e.reason)),z(this,Rs,c1).call(this,r,t);break;case Li.CANCEL:if(!a)break;const o=jn(e.reason);Promise.try(a.onCancel||f5,o).then(function(){s.postMessage({sourceName:i,targetName:n,stream:Li.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:n,stream:Li.CANCEL_COMPLETE,streamId:t,reason:jn(c)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},c1=async function(e,t){var i,n,s;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(n=e.pullCall)==null?void 0:n.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Yd;class Rb{constructor({enableHWA:e=!1}){O(this,Yd,!1);P(this,Yd,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,Yd)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){$e("Abstract method `_createCanvas` called.")}}Yd=new WeakMap;class aA extends Rb{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class Fb{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class Mb extends Fb{async _fetch(e){const t=await fg(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):dg(t)}}class Db{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,n,s){return"none"}destroy(e=!1){}}var kh,Cc,ga,ma,dn,Eh,Ch,$t,ln,sd,Kl,u1,Zl,Ob,n2,Jl,rd,ad,s2,od;class oA extends Db{constructor({docId:t,ownerDocument:i=globalThis.document}){super();O(this,$t);O(this,kh);O(this,Cc);O(this,ga);O(this,ma);O(this,dn);O(this,Eh);O(this,Ch,0);P(this,ma,t),P(this,dn,i)}addFilter(t){if(!t)return"none";let i=l(this,$t,ln).get(t);if(i)return i;const[n,s,r]=z(this,$t,u1).call(this,t),a=t.length===1?n:`${n}${s}${r}`;if(i=l(this,$t,ln).get(a),i)return l(this,$t,ln).set(t,i),i;const o=`g_${l(this,ma)}_transfer_map_${_n(this,Ch)._++}`,c=z(this,$t,Zl).call(this,o);l(this,$t,ln).set(t,c),l(this,$t,ln).set(a,c);const d=z(this,$t,Jl).call(this,o);return z(this,$t,ad).call(this,n,s,r,d),c}addHCMFilter(t,i){var v;const n=`${t}-${i}`,s="base";let r=l(this,$t,sd).get(s);if((r==null?void 0:r.key)===n||(r?((v=r.filter)==null||v.remove(),r.key=n,r.url="none",r.filter=null):(r={key:n,url:"none",filter:null},l(this,$t,sd).set(s,r)),!t||!i))return r.url;const a=z(this,$t,od).call(this,t);t=ee.makeHexColor(...a);const o=z(this,$t,od).call(this,i);if(i=ee.makeHexColor(...o),l(this,$t,Kl).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return r.url;const c=new Array(256);for(let b=0;b<=255;b++){const _=b/255;c[b]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const d=c.join(","),p=`g_${l(this,ma)}_hcm_filter`,g=r.filter=z(this,$t,Jl).call(this,p);z(this,$t,ad).call(this,d,d,d,g),z(this,$t,n2).call(this,g);const f=(b,_)=>{const y=a[b]/255,x=o[b]/255,C=new Array(_+1);for(let I=0;I<=_;I++)C[I]=y+I/_*(x-y);return C.join(",")};return z(this,$t,ad).call(this,f(0,5),f(1,5),f(2,5),g),r.url=z(this,$t,Zl).call(this,p),r.url}addAlphaFilter(t){let i=l(this,$t,ln).get(t);if(i)return i;const[n]=z(this,$t,u1).call(this,[t]),s=`alpha_${n}`;if(i=l(this,$t,ln).get(s),i)return l(this,$t,ln).set(t,i),i;const r=`g_${l(this,ma)}_alpha_map_${_n(this,Ch)._++}`,a=z(this,$t,Zl).call(this,r);l(this,$t,ln).set(t,a),l(this,$t,ln).set(s,a);const o=z(this,$t,Jl).call(this,r);return z(this,$t,s2).call(this,n,o),a}addLuminosityFilter(t){let i=l(this,$t,ln).get(t||"luminosity");if(i)return i;let n,s;if(t?([n]=z(this,$t,u1).call(this,[t]),s=`luminosity_${n}`):s="luminosity",i=l(this,$t,ln).get(s),i)return l(this,$t,ln).set(t,i),i;const r=`g_${l(this,ma)}_luminosity_map_${_n(this,Ch)._++}`,a=z(this,$t,Zl).call(this,r);l(this,$t,ln).set(t,a),l(this,$t,ln).set(s,a);const o=z(this,$t,Jl).call(this,r);return z(this,$t,Ob).call(this,o),t&&z(this,$t,s2).call(this,n,o),a}addHighlightHCMFilter(t,i,n,s,r){var x;const a=`${i}-${n}-${s}-${r}`;let o=l(this,$t,sd).get(t);if((o==null?void 0:o.key)===a||(o?((x=o.filter)==null||x.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},l(this,$t,sd).set(t,o)),!i||!n))return o.url;const[c,d]=[i,n].map(z(this,$t,od).bind(this));let p=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[f,v]=[s,r].map(z(this,$t,od).bind(this));g<p&&([p,g,f,v]=[g,p,v,f]),l(this,$t,Kl).style.color="";const b=(C,I,F)=>{const K=new Array(256),q=(g-p)/F,U=C/255,X=(I-C)/(255*F);let rt=0;for(let M=0;M<=F;M++){const E=Math.round(p+M*q),W=U+M*X;for(let S=rt;S<=E;S++)K[S]=W;rt=E+1}for(let M=rt;M<256;M++)K[M]=K[rt-1];return K.join(",")},_=`g_${l(this,ma)}_hcm_${t}_filter`,y=o.filter=z(this,$t,Jl).call(this,_);return z(this,$t,n2).call(this,y),z(this,$t,ad).call(this,b(f[0],v[0],5),b(f[1],v[1],5),b(f[2],v[2],5),y),o.url=z(this,$t,Zl).call(this,_),o.url}destroy(t=!1){var i,n,s,r;t&&((i=l(this,Eh))!=null&&i.size)||((n=l(this,ga))==null||n.parentNode.parentNode.remove(),P(this,ga,null),(s=l(this,Cc))==null||s.clear(),P(this,Cc,null),(r=l(this,Eh))==null||r.clear(),P(this,Eh,null),P(this,Ch,0))}}kh=new WeakMap,Cc=new WeakMap,ga=new WeakMap,ma=new WeakMap,dn=new WeakMap,Eh=new WeakMap,Ch=new WeakMap,$t=new WeakSet,ln=function(){return l(this,Cc)||P(this,Cc,new Map)},sd=function(){return l(this,Eh)||P(this,Eh,new Map)},Kl=function(){if(!l(this,ga)){const t=l(this,dn).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const n=l(this,dn).createElementNS(na,"svg");n.setAttribute("width",0),n.setAttribute("height",0),P(this,ga,l(this,dn).createElementNS(na,"defs")),t.append(n),n.append(l(this,ga)),l(this,dn).body.append(t)}return l(this,ga)},u1=function(t){if(t.length===1){const c=t[0],d=new Array(256);for(let g=0;g<256;g++)d[g]=c[g]/255;const p=d.join(",");return[p,p,p]}const[i,n,s]=t,r=new Array(256),a=new Array(256),o=new Array(256);for(let c=0;c<256;c++)r[c]=i[c]/255,a[c]=n[c]/255,o[c]=s[c]/255;return[r.join(","),a.join(","),o.join(",")]},Zl=function(t){if(l(this,kh)===void 0){P(this,kh,"");const i=l(this,dn).URL;i!==l(this,dn).baseURI&&(pg(i)?we('#createUrl: ignore "data:"-URL for performance reasons.'):P(this,kh,i.split("#",1)[0]))}return`url(${l(this,kh)}#${t})`},Ob=function(t){const i=l(this,dn).createElementNS(na,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},n2=function(t){const i=l(this,dn).createElementNS(na,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Jl=function(t){const i=l(this,dn).createElementNS(na,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,$t,Kl).append(i),i},rd=function(t,i,n){const s=l(this,dn).createElementNS(na,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),t.append(s)},ad=function(t,i,n,s){const r=l(this,dn).createElementNS(na,"feComponentTransfer");s.append(r),z(this,$t,rd).call(this,r,"feFuncR",t),z(this,$t,rd).call(this,r,"feFuncG",i),z(this,$t,rd).call(this,r,"feFuncB",n)},s2=function(t,i){const n=l(this,dn).createElementNS(na,"feComponentTransfer");i.append(n),z(this,$t,rd).call(this,n,"feFuncA",t)},od=function(t){return l(this,$t,Kl).style.color=t,im(getComputedStyle(l(this,$t,Kl)).getPropertyValue("color"))};class Bb{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class jb extends Bb{async _fetch(e){const t=await fg(e,"arraybuffer");return new Uint8Array(t)}}bn&&we("Please use the `legacy` build in Node.js environments.");async function zb(h){const t=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(t)}class hA extends Db{}class lA extends Rb{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class cA extends Fb{async _fetch(e){return zb(e)}}class uA extends Bb{async _fetch(e){return zb(e)}}const gn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function r2(h,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],t,i),h.clip(n)}class sm{getPattern(){$e("Abstract method `getPattern` called.")}}class dA extends sm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,n){let s;if(n===gn.STROKE||n===gn.FILL){const r=t.current.getClippedPathBoundingBox(n,ei(e))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,o),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-r[0],-r[1]),i=ee.transform(i,[1,0,0,1,r[0],r[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),r2(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=e.createPattern(c.canvas,"no-repeat");const p=new DOMMatrix(i);s.setTransform(p)}else r2(e,this._bbox),s=this._createGradient(e);return s}}function y0(h,e,t,i,n,s,r,a){const o=e.coords,c=e.colors,d=h.data,p=h.width*4;let g;o[t+1]>o[i+1]&&(g=t,t=i,i=g,g=s,s=r,r=g),o[i+1]>o[n+1]&&(g=i,i=n,n=g,g=r,r=a,a=g),o[t+1]>o[i+1]&&(g=t,t=i,i=g,g=s,s=r,r=g);const f=(o[t]+e.offsetX)*e.scaleX,v=(o[t+1]+e.offsetY)*e.scaleY,b=(o[i]+e.offsetX)*e.scaleX,_=(o[i+1]+e.offsetY)*e.scaleY,y=(o[n]+e.offsetX)*e.scaleX,x=(o[n+1]+e.offsetY)*e.scaleY;if(v>=x)return;const C=c[s],I=c[s+1],F=c[s+2],K=c[r],q=c[r+1],U=c[r+2],X=c[a],rt=c[a+1],M=c[a+2],E=Math.round(v),W=Math.round(x);let S,nt,st,tt,dt,ot,At,lt;for(let k=E;k<=W;k++){if(k<_){const gt=k<v?0:(v-k)/(v-_);S=f-(f-b)*gt,nt=C-(C-K)*gt,st=I-(I-q)*gt,tt=F-(F-U)*gt}else{let gt;k>x?gt=1:_===x?gt=0:gt=(_-k)/(_-x),S=b-(b-y)*gt,nt=K-(K-X)*gt,st=q-(q-rt)*gt,tt=U-(U-M)*gt}let G;k<v?G=0:k>x?G=1:G=(v-k)/(v-x),dt=f-(f-y)*G,ot=C-(C-X)*G,At=I-(I-rt)*G,lt=F-(F-M)*G;const Y=Math.round(Math.min(S,dt)),Z=Math.round(Math.max(S,dt));let ct=p*k+Y*4;for(let gt=Y;gt<=Z;gt++)G=(S-gt)/(S-dt),G<0?G=0:G>1&&(G=1),d[ct++]=nt-(nt-ot)*G|0,d[ct++]=st-(st-At)*G|0,d[ct++]=tt-(tt-lt)*G|0,d[ct++]=255}}function fA(h,e,t){const i=e.coords,n=e.colors;let s,r;switch(e.type){case"lattice":const a=e.verticesPerRow,o=Math.floor(i.length/a)-1,c=a-1;for(s=0;s<o;s++){let d=s*a;for(let p=0;p<c;p++,d++)y0(h,t,i[d],i[d+1],i[d+a],n[d],n[d+1],n[d+a]),y0(h,t,i[d+a+1],i[d+1],i[d+a],n[d+a+1],n[d+1],n[d+a])}break;case"triangles":for(s=0,r=i.length;s<r;s+=3)y0(h,t,i[s],i[s+1],i[s+2],n[s],n[s+1],n[s+2]);break;default:throw new Error("illegal figure")}}class pA extends sm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-o,p=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),f=c/p,v=d/g,b={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-o,scaleX:1/f,scaleY:1/v},_=p+2*2,y=g+2*2,x=i.getCanvas("mesh",_,y),C=x.context,I=C.createImageData(p,g);if(t){const K=I.data;for(let q=0,U=K.length;q<U;q+=4)K[q]=t[0],K[q+1]=t[1],K[q+2]=t[2],K[q+3]=255}for(const K of this._figures)fA(I,K,b);return C.putImageData(I,2,2),{canvas:x.canvas,offsetX:a-2*f,offsetY:o-2*v,scaleX:f,scaleY:v}}getPattern(e,t,i,n){r2(e,this._bbox);let s;if(n===gn.SHADING)s=ee.singularValueDecompose2dScale(ei(e));else if(s=ee.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=ee.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const r=this._createMeshCanvas(s,n===gn.SHADING?null:this._background,t.cachedCanvases);return n!==gn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(r.offsetX,r.offsetY),e.scale(r.scaleX,r.scaleY),e.createPattern(r.canvas,"no-repeat")}}class gA extends sm{getPattern(){return"hotpink"}}function mA(h){switch(h[0]){case"RadialAxial":return new dA(h);case"Mesh":return new pA(h);case"Dummy":return new gA}throw new Error(`Unknown IR type: ${h[0]}`)}const p5={COLORED:1,UNCOLORED:2},X1=class X1{constructor(e,t,i,n,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:n,tilingType:s,color:r,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:c}=this;o=Math.abs(o),c=Math.abs(c),ug("TilingType: "+s);const d=t[0],p=t[1],g=t[2],f=t[3],v=g-d,b=f-p,_=ee.singularValueDecompose2dScale(this.matrix),y=ee.singularValueDecompose2dScale(this.baseTransform),x=_[0]*y[0],C=_[1]*y[1];let I=v,F=b,K=!1,q=!1;const U=Math.ceil(o*x),X=Math.ceil(c*C),rt=Math.ceil(v*x),M=Math.ceil(b*C);U>=rt?I=o:K=!0,X>=M?F=c:q=!0;const E=this.getSizeAndScale(I,this.ctx.canvas.width,x),W=this.getSizeAndScale(F,this.ctx.canvas.height,C),S=e.cachedCanvases.getCanvas("pattern",E.size,W.size),nt=S.context,st=a.createCanvasGraphics(nt);if(st.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(st,n,r),nt.translate(-E.scale*d,-W.scale*p),st.transform(E.scale,0,0,W.scale,0,0),nt.save(),this.clipBbox(st,d,p,g,f),st.baseTransform=ei(st.ctx),st.executeOperatorList(i),st.endDrawing(),nt.restore(),K||q){const tt=S.canvas;K&&(I=o),q&&(F=c);const dt=this.getSizeAndScale(I,this.ctx.canvas.width,x),ot=this.getSizeAndScale(F,this.ctx.canvas.height,C),At=dt.size,lt=ot.size,k=e.cachedCanvases.getCanvas("pattern-workaround",At,lt),G=k.context,Y=K?Math.floor(v/o):0,Z=q?Math.floor(b/c):0;for(let ct=0;ct<=Y;ct++)for(let gt=0;gt<=Z;gt++)G.drawImage(tt,At*ct,lt*gt,At,lt,0,0,At,lt);return{canvas:k.canvas,scaleX:dt.scale,scaleY:ot.scale,offsetX:d,offsetY:p}}return{canvas:S.canvas,scaleX:E.scale,scaleY:W.scale,offsetX:d,offsetY:p}}getSizeAndScale(e,t,i){const n=Math.max(X1.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*i);return s>=n?s=n:i=s/e,{scale:i,size:s}}clipBbox(e,t,i,n,s){const r=n-t,a=s-i;e.ctx.rect(t,i,r,a),e.current.updateRectMinMax(ei(e.ctx),[t,i,n,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const n=e.ctx,s=e.current;switch(t){case p5.COLORED:const r=this.ctx;n.fillStyle=r.fillStyle,n.strokeStyle=r.strokeStyle,s.fillColor=r.fillStyle,s.strokeColor=r.strokeStyle;break;case p5.UNCOLORED:const a=ee.makeHexColor(i[0],i[1],i[2]);n.fillStyle=a,n.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new Uw(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,n){let s=i;n!==gn.SHADING&&(s=ee.transform(s,t.baseTransform),this.matrix&&(s=ee.transform(s,this.matrix)));const r=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=e.createPattern(r.canvas,"repeat");return o.setTransform(a),o}};re(X1,"MAX_PATTERN_SIZE",3e3);let a2=X1;function bA({src:h,srcPos:e=0,dest:t,width:i,height:n,nonBlackColor:s=4294967295,inverseDecode:r=!1}){const a=Cn.isLittleEndian?4278190080:255,[o,c]=r?[s,a]:[a,s],d=i>>3,p=i&7,g=h.length;t=new Uint32Array(t.buffer);let f=0;for(let v=0;v<n;v++){for(const _=e+d;e<_;e++){const y=e<g?h[e]:255;t[f++]=y&128?c:o,t[f++]=y&64?c:o,t[f++]=y&32?c:o,t[f++]=y&16?c:o,t[f++]=y&8?c:o,t[f++]=y&4?c:o,t[f++]=y&2?c:o,t[f++]=y&1?c:o}if(p===0)continue;const b=e<g?h[e++]:255;for(let _=0;_<p;_++)t[f++]=b&1<<7-_?c:o}return{srcPos:e,destPos:f}}const g5=16,m5=100,vA=15,b5=10,v5=1e3,Wn=16;function yA(h,e){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){e.save(),this.__originalSave()},h.restore=function(){e.restore(),this.__originalRestore()},h.translate=function(i,n){e.translate(i,n),this.__originalTranslate(i,n)},h.scale=function(i,n){e.scale(i,n),this.__originalScale(i,n)},h.transform=function(i,n,s,r,a,o){e.transform(i,n,s,r,a,o),this.__originalTransform(i,n,s,r,a,o)},h.setTransform=function(i,n,s,r,a,o){e.setTransform(i,n,s,r,a,o),this.__originalSetTransform(i,n,s,r,a,o)},h.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},h.rotate=function(i){e.rotate(i),this.__originalRotate(i)},h.clip=function(i){e.clip(i),this.__originalClip(i)},h.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},h.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},h.bezierCurveTo=function(t,i,n,s,r,a){e.bezierCurveTo(t,i,n,s,r,a),this.__originalBezierCurveTo(t,i,n,s,r,a)},h.rect=function(t,i,n,s){e.rect(t,i,n,s),this.__originalRect(t,i,n,s)},h.closePath=function(){e.closePath(),this.__originalClosePath()},h.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class wA{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let n;return this.cache[e]!==void 0?(n=this.cache[e],this.canvasFactory.reset(n,t,i)):(n=this.canvasFactory.create(t,i),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function $p(h,e,t,i,n,s,r,a,o,c){const[d,p,g,f,v,b]=ei(h);if(p===0&&g===0){const x=r*d+v,C=Math.round(x),I=a*f+b,F=Math.round(I),K=(r+o)*d+v,q=Math.abs(Math.round(K)-C)||1,U=(a+c)*f+b,X=Math.abs(Math.round(U)-F)||1;return h.setTransform(Math.sign(d),0,0,Math.sign(f),C,F),h.drawImage(e,t,i,n,s,0,0,q,X),h.setTransform(d,p,g,f,v,b),[q,X]}if(d===0&&f===0){const x=a*g+v,C=Math.round(x),I=r*p+b,F=Math.round(I),K=(a+c)*g+v,q=Math.abs(Math.round(K)-C)||1,U=(r+o)*p+b,X=Math.abs(Math.round(U)-F)||1;return h.setTransform(0,Math.sign(p),Math.sign(g),0,C,F),h.drawImage(e,t,i,n,s,0,0,X,q),h.setTransform(d,p,g,f,v,b),[X,q]}h.drawImage(e,t,i,n,s,r,a,o,c);const _=Math.hypot(d,p),y=Math.hypot(g,f);return[_*o,y*c]}function AA(h){const{width:e,height:t}=h;if(e>v5||t>v5)return null;const i=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let r=new Uint8Array(s*(t+1)),a,o,c;const d=e+7&-8;let p=new Uint8Array(d*t),g=0;for(const y of h.data){let x=128;for(;x>0;)p[g++]=y&x?0:255,x>>=1}let f=0;for(g=0,p[g]!==0&&(r[0]=1,++f),o=1;o<e;o++)p[g]!==p[g+1]&&(r[o]=p[g]?2:1,++f),g++;for(p[g]!==0&&(r[o]=2,++f),a=1;a<t;a++){g=a*d,c=a*s,p[g-d]!==p[g]&&(r[c]=p[g]?1:8,++f);let y=(p[g]?4:0)+(p[g-d]?8:0);for(o=1;o<e;o++)y=(y>>2)+(p[g+1]?4:0)+(p[g-d+1]?8:0),n[y]&&(r[c+o]=n[y],++f),g++;if(p[g-d]!==p[g]&&(r[c+o]=p[g]?2:4,++f),f>i)return null}for(g=d*(t-1),c=a*s,p[g]!==0&&(r[c]=8,++f),o=1;o<e;o++)p[g]!==p[g+1]&&(r[c+o]=p[g]?4:8,++f),g++;if(p[g]!==0&&(r[c+o]=4,++f),f>i)return null;const v=new Int32Array([0,s,-1,0,-s,0,0,0,1]),b=new Path2D;for(a=0;f&&a<=t;a++){let y=a*s;const x=y+e;for(;y<x&&!r[y];)y++;if(y===x)continue;b.moveTo(y%s,a);const C=y;let I=r[y];do{const F=v[I];do y+=F;while(!r[y]);const K=r[y];K!==5&&K!==10?(I=K,r[y]=0):(I=K&51*I>>4,r[y]&=I>>2|I<<2),b.lineTo(y%s,y/s|0),r[y]||--f}while(C!==y);--a}return p=null,r=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(b),y.beginPath(),y.restore()}}class y5{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=K5,this.textMatrixScale=1,this.fontMatrix=F0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=hn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=ee.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=ee.applyTransform(t,e),n=ee.applyTransform(t.slice(2),e),s=ee.applyTransform([t[0],t[3]],e),r=ee.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],n[0],s[0],r[0]),this.minY=Math.min(this.minY,i[1],n[1],s[1],r[1]),this.maxX=Math.max(this.maxX,i[0],n[0],s[0],r[0]),this.maxY=Math.max(this.maxY,i[1],n[1],s[1],r[1])}updateScalingPathMinMax(e,t){ee.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,n,s,r,a,o,c,d){const p=ee.bezierBoundingBox(t,i,n,s,r,a,o,c,d);d||this.updateRectMinMax(e,p)}getPathBoundingBox(e=gn.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===gn.STROKE){t||$e("Stroke bounding box must include transform.");const n=ee.singularValueDecompose2dScale(t),s=n[0]*this.lineWidth/2,r=n[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const e=ee.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=gn.FILL,t=null){return ee.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function w5(h,e){if(e instanceof ImageData){h.putImageData(e,0,0);return}const t=e.height,i=e.width,n=t%Wn,s=(t-n)/Wn,r=n===0?s:s+1,a=h.createImageData(i,Wn);let o=0,c;const d=e.data,p=a.data;let g,f,v,b;if(e.kind===e1.GRAYSCALE_1BPP){const _=d.byteLength,y=new Uint32Array(p.buffer,0,p.byteLength>>2),x=y.length,C=i+7>>3,I=4294967295,F=Cn.isLittleEndian?4278190080:255;for(g=0;g<r;g++){for(v=g<s?Wn:n,c=0,f=0;f<v;f++){const K=_-o;let q=0;const U=K>C?i:K*8-7,X=U&-8;let rt=0,M=0;for(;q<X;q+=8)M=d[o++],y[c++]=M&128?I:F,y[c++]=M&64?I:F,y[c++]=M&32?I:F,y[c++]=M&16?I:F,y[c++]=M&8?I:F,y[c++]=M&4?I:F,y[c++]=M&2?I:F,y[c++]=M&1?I:F;for(;q<U;q++)rt===0&&(M=d[o++],rt=128),y[c++]=M&rt?I:F,rt>>=1}for(;c<x;)y[c++]=0;h.putImageData(a,0,g*Wn)}}else if(e.kind===e1.RGBA_32BPP){for(f=0,b=i*Wn*4,g=0;g<s;g++)p.set(d.subarray(o,o+b)),o+=b,h.putImageData(a,0,f),f+=Wn;g<r&&(b=i*n*4,p.set(d.subarray(o,o+b)),h.putImageData(a,0,f))}else if(e.kind===e1.RGB_24BPP)for(v=Wn,b=i*v,g=0;g<r;g++){for(g>=s&&(v=n,b=i*v),c=0,f=b;f--;)p[c++]=d[o++],p[c++]=d[o++],p[c++]=d[o++],p[c++]=255;h.putImageData(a,0,g*Wn)}else throw new Error(`bad image kind: ${e.kind}`)}function A5(h,e){if(e.bitmap){h.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,n=t%Wn,s=(t-n)/Wn,r=n===0?s:s+1,a=h.createImageData(i,Wn);let o=0;const c=e.data,d=a.data;for(let p=0;p<r;p++){const g=p<s?Wn:n;({srcPos:o}=bA({src:c,srcPos:o,dest:d,width:i,height:g,nonBlackColor:0})),h.putImageData(a,0,p*Wn)}}function Ku(h,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)h[i]!==void 0&&(e[i]=h[i]);h.setLineDash!==void 0&&(e.setLineDash(h.getLineDash()),e.lineDashOffset=h.lineDashOffset)}function Xp(h){if(h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0),!bn){const{filter:e}=h;e!=="none"&&e!==""&&(h.filter="none")}}function _5(h,e){if(e)return!0;const t=ee.singularValueDecompose2dScale(h);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Bo.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const _A=["butt","round","square"],xA=["miter","round","bevel"],SA={},x5={};var hr,o2,h2,l2;const lm=class lm{constructor(e,t,i,n,s,{optionalContentConfig:r,markedContentStack:a=null},o,c){O(this,hr);this.ctx=e,this.current=new y5(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=n,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=r,this.cachedCanvases=new wA(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:n=null}){const s=this.ctx.canvas.width,r=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,s,r),this.ctx.fillStyle=a,i){const o=this.cachedCanvases.getCanvas("transparent",s,r);this.compositeCtx=this.ctx,this.transparentCanvas=o.canvas,this.ctx=o.context,this.ctx.save(),this.ctx.transform(...ei(this.compositeCtx))}this.ctx.save(),Xp(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ei(this.ctx)}executeOperatorList(e,t,i,n){const s=e.argsArray,r=e.fnArray;let a=t||0;const o=s.length;if(o===a)return a;const c=o-a>b5&&typeof i=="function",d=c?Date.now()+vA:0;let p=0;const g=this.commonObjs,f=this.objs;let v;for(;;){if(n!==void 0&&a===n.nextBreakPoint)return n.breakIt(a,i),a;if(v=r[a],v!==$s.dependency)this[v].apply(this,s[a]);else for(const b of s[a]){const _=b.startsWith("g_")?g:f;if(!_.has(b))return _.get(b,i),a}if(a++,a===o)return a;if(c&&++p>b5){if(Date.now()>d)return i(),a;p=0}}}endDrawing(){z(this,hr,o2).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),z(this,hr,h2).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,n=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),r=Math.max(Math.hypot(t[2],t[3]),1),a=i,o=n,c="prescale1",d,p;for(;s>2&&a>1||r>2&&o>1;){let g=a,f=o;s>2&&a>1&&(g=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/g),r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o)/2,r/=o/f),d=this.cachedCanvases.getCanvas(c,g,f),p=d.context,p.clearRect(0,0,g,f),p.drawImage(e,0,0,a,o,0,0,g,f),e=d.canvas,a=g,o=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:o}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:n}=e,s=this.current.fillColor,r=this.current.patternFill,a=ei(t);let o,c,d,p;if((e.bitmap||e.data)&&e.count>1){const U=e.bitmap||e.data.buffer;c=JSON.stringify(r?a:[a.slice(0,4),s]),o=this._cachedBitmapsMap.get(U),o||(o=new Map,this._cachedBitmapsMap.set(U,o));const X=o.get(c);if(X&&!r){const rt=Math.round(Math.min(a[0],a[2])+a[4]),M=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:X,offsetX:rt,offsetY:M}}d=X}d||(p=this.cachedCanvases.getCanvas("maskCanvas",i,n),A5(p.context,e));let g=ee.transform(a,[1/i,0,0,-1/n,0,0]);g=ee.transform(g,[1,0,0,1,0,-n]);const[f,v,b,_]=ee.getAxialAlignedBoundingBox([0,0,i,n],g),y=Math.round(b-f)||1,x=Math.round(_-v)||1,C=this.cachedCanvases.getCanvas("fillCanvas",y,x),I=C.context,F=f,K=v;I.translate(-F,-K),I.transform(...g),d||(d=this._scaleImage(p.canvas,wr(I)),d=d.img,o&&r&&o.set(c,d)),I.imageSmoothingEnabled=_5(ei(I),e.interpolate),$p(I,d,0,0,d.width,d.height,0,0,i,n),I.globalCompositeOperation="source-in";const q=ee.transform(wr(I),[1,0,0,1,-F,-K]);return I.fillStyle=r?s.getPattern(t,this,q,gn.FILL):s,I.fillRect(0,0,i,n),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(c,C.canvas)),{canvas:C.canvas,offsetX:Math.round(F),offsetY:Math.round(K)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=_A[e]}setLineJoin(e){this.ctx.lineJoin=xA[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=n.context;const s=this.ctx;s.setTransform(...ei(this.suspendedCtx)),Ku(this.suspendedCtx,s),yA(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ku(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,n){const s=n[0],r=n[1],a=n[2]-s,o=n[3]-r;a===0||o===0||(this.genericComposeSMask(t.context,i,a,o,t.subtype,t.backdrop,t.transferMap,s,r,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,n,s,r,a,o,c,d,p){let g=e.canvas,f=o-d,v=c-p;if(r){const _=ee.makeHexColor(...r);if(f<0||v<0||f+i>g.width||v+n>g.height){const y=this.cachedCanvases.getCanvas("maskExtension",i,n),x=y.context;x.drawImage(g,-f,-v),x.globalCompositeOperation="destination-atop",x.fillStyle=_,x.fillRect(0,0,i,n),x.globalCompositeOperation="source-over",g=y.canvas,f=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(f,v,i,n),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=_,e.fillRect(f,v,i,n),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const b=new Path2D;b.rect(o,c,i,n),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(g,f,v,i,n,o,c,i,n),t.restore()}save(){this.inSMaskMode?(Ku(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ku(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,n,s,r){this.ctx.transform(e,t,i,n,s,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const n=this.ctx,s=this.current;let r=s.x,a=s.y,o,c;const d=ei(n),p=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,g=p?i.slice(0):null;for(let f=0,v=0,b=e.length;f<b;f++)switch(e[f]|0){case $s.rectangle:r=t[v++],a=t[v++];const _=t[v++],y=t[v++],x=r+_,C=a+y;n.moveTo(r,a),_===0||y===0?n.lineTo(x,C):(n.lineTo(x,a),n.lineTo(x,C),n.lineTo(r,C)),p||s.updateRectMinMax(d,[r,a,x,C]),n.closePath();break;case $s.moveTo:r=t[v++],a=t[v++],n.moveTo(r,a),p||s.updatePathMinMax(d,r,a);break;case $s.lineTo:r=t[v++],a=t[v++],n.lineTo(r,a),p||s.updatePathMinMax(d,r,a);break;case $s.curveTo:o=r,c=a,r=t[v+4],a=t[v+5],n.bezierCurveTo(t[v],t[v+1],t[v+2],t[v+3],r,a),s.updateCurvePathMinMax(d,o,c,t[v],t[v+1],t[v+2],t[v+3],r,a,g),v+=6;break;case $s.curveTo2:o=r,c=a,n.bezierCurveTo(r,a,t[v],t[v+1],t[v+2],t[v+3]),s.updateCurvePathMinMax(d,o,c,r,a,t[v],t[v+1],t[v+2],t[v+3],g),r=t[v+2],a=t[v+3],v+=4;break;case $s.curveTo3:o=r,c=a,r=t[v+2],a=t[v+3],n.bezierCurveTo(t[v],t[v+1],r,a,r,a),s.updateCurvePathMinMax(d,o,c,t[v],t[v+1],r,a,r,a,g),v+=4;break;case $s.closePath:n.closePath();break}p&&s.updateScalingPathMinMax(d,g),s.setCurrentPoint(r,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,wr(t),gn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,n=this.current.patternFill;let s=!1;n&&(t.save(),t.fillStyle=i.getPattern(t,this,wr(t),gn.FILL),s=!0);const r=this.current.getClippedPathBoundingBox();this.contentVisible&&r!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=SA}eoClip(){this.pendingClip=x5}beginText(){this.current.textMatrix=K5,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const i=new Path2D,n=t.getTransform().invertSelf();for(const{transform:s,x:r,y:a,fontSize:o,path:c}of e)i.addPath(c,new DOMMatrix(s).preMultiplySelf(n).translate(r,a).scale(o,-o));t.clip(i),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const i=this.commonObjs.get(e),n=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(n.fontMatrix=i.fontMatrix||F0,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&we("Invalid font matrix for font "+e),t<0?(t=-t,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",r=((d=i.systemFontInfo)==null?void 0:d.css)||`"${s}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const o=i.italic?"italic":"normal";let c=t;t<g5?c=g5:t>m5&&(c=m5),this.current.fontSizeScale=t/c,this.ctx.font=`${o} ${a} ${c}px ${r}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,n,s,r){this.current.textMatrix=[e,t,i,n,s,r],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,n,s){const r=this.ctx,a=this.current,o=a.font,c=a.textRenderingMode,d=a.fontSize/a.fontSizeScale,p=c&hn.FILL_STROKE_MASK,g=!!(c&hn.ADD_TO_PATH_FLAG),f=a.patternFill&&!o.missingFile,v=a.patternStroke&&!o.missingFile;let b;if((o.disableFontFace||g||f||v)&&(b=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||f||v){if(r.save(),r.translate(t,i),r.scale(d,-d),p===hn.FILL||p===hn.FILL_STROKE)if(n){const _=r.getTransform();r.setTransform(...n),r.fill(z(this,hr,l2).call(this,b,_,n))}else r.fill(b);if(p===hn.STROKE||p===hn.FILL_STROKE)if(s){const _=r.getTransform();r.setTransform(...s),r.stroke(z(this,hr,l2).call(this,b,_,s))}else r.lineWidth/=d,r.stroke(b);r.restore()}else(p===hn.FILL||p===hn.FILL_STROKE)&&r.fillText(e,t,i),(p===hn.STROKE||p===hn.FILL_STROKE)&&r.strokeText(e,t,i);g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ei(r),x:t,y:i,fontSize:d,path:b})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<t.length;n+=4)if(t[n]>0&&t[n]<255){i=!0;break}return xe(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const n=t.fontSize;if(n===0)return;const s=this.ctx,r=t.fontSizeScale,a=t.charSpacing,o=t.wordSpacing,c=t.fontDirection,d=t.textHScale*c,p=e.length,g=i.vertical,f=g?1:-1,v=i.defaultVMetrics,b=n*t.fontMatrix[0],_=t.textRenderingMode===hn.FILL&&!i.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),c>0?s.scale(d,-1):s.scale(d,1);let y,x;if(t.patternFill){s.save();const q=t.fillColor.getPattern(s,this,wr(s),gn.FILL);y=ei(s),s.restore(),s.fillStyle=q}if(t.patternStroke){s.save();const q=t.strokeColor.getPattern(s,this,wr(s),gn.STROKE);x=ei(s),s.restore(),s.strokeStyle=q}let C=t.lineWidth;const I=t.textMatrixScale;if(I===0||C===0){const q=t.textRenderingMode&hn.FILL_STROKE_MASK;(q===hn.STROKE||q===hn.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=I;if(r!==1&&(s.scale(r,r),C/=r),s.lineWidth=C,i.isInvalidPDFjsFont){const q=[];let U=0;for(const X of e)q.push(X.unicode),U+=X.width;s.fillText(q.join(""),0,0),t.x+=U*b*d,s.restore(),this.compose();return}let F=0,K;for(K=0;K<p;++K){const q=e[K];if(typeof q=="number"){F+=f*q*n/1e3;continue}let U=!1;const X=(q.isSpace?o:0)+a,rt=q.fontChar,M=q.accent;let E,W,S=q.width;if(g){const st=q.vmetric||v,tt=-(q.vmetric?st[1]:S*.5)*b,dt=st[2]*b;S=st?-st[0]:S,E=tt/r,W=(F+dt)/r}else E=F/r,W=0;if(i.remeasure&&S>0){const st=s.measureText(rt).width*1e3/n*r;if(S<st&&this.isFontSubpixelAAEnabled){const tt=S/st;U=!0,s.save(),s.scale(tt,1),E/=tt}else S!==st&&(E+=(S-st)/2e3*n/r)}if(this.contentVisible&&(q.isInFont||i.missingFile)){if(_&&!M)s.fillText(rt,E,W);else if(this.paintChar(rt,E,W,y,x),M){const st=E+n*M.offset.x/r,tt=W-n*M.offset.y/r;this.paintChar(M.fontChar,st,tt,y,x)}}const nt=g?S*b-X*c:S*b+X*c;F+=nt,U&&s.restore()}g?t.y-=F:t.x+=F*d,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,n=i.font,s=i.fontSize,r=i.fontDirection,a=n.vertical?1:-1,o=i.charSpacing,c=i.wordSpacing,d=i.textHScale*r,p=i.fontMatrix||F0,g=e.length,f=i.textRenderingMode===hn.INVISIBLE;let v,b,_,y;if(!(f||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(d,r),v=0;v<g;++v){if(b=e[v],typeof b=="number"){y=a*b*s/1e3,this.ctx.translate(y,0),i.x+=y*d;continue}const x=(b.isSpace?c:0)+o,C=n.charProcOperatorList[b.operatorListId];if(!C){we(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),t.scale(s,s),t.transform(...p),this.executeOperatorList(C),this.restore()),_=ee.applyTransform([b.width,0],p)[0]*s+x,t.translate(_,0),i.x+=_*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,n,s,r){this.ctx.rect(i,n,s-i,r-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],n=this.baseTransform||ei(this.ctx),s={createCanvasGraphics:r=>new lm(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new a2(e,i,this.ctx,s,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=ee.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=ee.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=mA(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,wr(t),gn.SHADING);const n=wr(t);if(n){const{width:s,height:r}=t.canvas,[a,o,c,d]=ee.getAxialAlignedBoundingBox([0,0,s,r],n);this.ctx.fillRect(a,o,c-a,d-o)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){$e("Should not call beginInlineImage")}beginImageData(){$e("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ei(this.ctx),t)){const i=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],i,n),this.current.updateRectMinMax(ei(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||ug("TODO: Support non-isolated groups."),e.knockout&&we("Knockout groups not supported.");const i=ei(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let n=ee.getAxialAlignedBoundingBox(e.bbox,ei(t));const s=[0,0,t.canvas.width,t.canvas.height];n=ee.intersect(n,s)||[0,0,0,0];const r=Math.floor(n[0]),a=Math.floor(n[1]),o=Math.max(Math.ceil(n[2])-r,1),c=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,c]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(d,o,c),g=p.context;g.translate(-r,-a),g.transform(...i),e.smask?this.smaskStack.push({canvas:p.canvas,context:g,offsetX:r,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(r,a),t.save()),Ku(t,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=ei(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const s=ee.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],n);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,i,n,s){if(z(this,hr,o2).call(this),Xp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const r=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=r,t[3]=a;const[o,c]=ee.singularValueDecompose2dScale(ei(this.ctx)),{viewportScale:d}=this,p=Math.ceil(r*this.outputScaleX*d),g=Math.ceil(a*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:f,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(o,0,0,-c,0,a*c),Xp(this.ctx)}else Xp(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],r,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new y5(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),z(this,hr,h2).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=AA(e)),n.compiled)){n.compiled(i);return}const s=this._createMaskCanvas(e),r=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,n=0,s,r){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const o=ei(a);a.transform(t,i,n,s,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-o[4],c.offsetY-o[5]);for(let d=0,p=r.length;d<p;d+=2){const g=ee.transform(o,[t,i,n,s,r[d],r[d+1]]),[f,v]=ee.applyTransform([0,0],g);a.drawImage(c.canvas,f,v)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const s of e){const{data:r,width:a,height:o,transform:c}=s,d=this.cachedCanvases.getCanvas("maskCanvas",a,o),p=d.context;p.save();const g=this.getObject(r,s);A5(p,g),p.globalCompositeOperation="source-in",p.fillStyle=n?i.getPattern(p,this,wr(t),gn.FILL):i,p.fillRect(0,0,a,o),p.restore(),t.save(),t.transform(...c),t.scale(1,-1),$p(t,d.canvas,0,0,a,o,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){we("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,n){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){we("Dependent image isn't ready yet");return}const r=s.width,a=s.height,o=[];for(let c=0,d=n.length;c<d;c+=2)o.push({transform:[t,0,0,i,n[c],n[c+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(s,o)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:n}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,n),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(t,0,0),r.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,n=this.ctx;if(this.save(),!bn){const{filter:a}=n;a!=="none"&&a!==""&&(n.filter="none")}n.scale(1/t,-1/i);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const o=this.cachedCanvases.getCanvas("inlineImage",t,i).context;w5(o,e),s=this.applyTransferMapsToCanvas(o)}const r=this._scaleImage(s,wr(n));n.imageSmoothingEnabled=_5(ei(n),e.interpolate),$p(n,r.img,0,0,r.paintWidth,r.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let n;if(e.bitmap)n=e.bitmap;else{const s=e.width,r=e.height,o=this.cachedCanvases.getCanvas("inlineImage",s,r).context;w5(o,e),n=this.applyTransferMapsToCanvas(o)}for(const s of t)i.save(),i.transform(...s.transform),i.scale(1,-1),$p(i,n,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===x5?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ei(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:n,d:s}=this.ctx.getTransform();let r,a;if(i===0&&n===0){const o=Math.abs(t),c=Math.abs(s);if(o===c)if(e===0)r=a=1/o;else{const d=o*e;r=a=d<1?1/d:1}else if(e===0)r=1/o,a=1/c;else{const d=o*e,p=c*e;r=d<1?1/d:1,a=p<1?1/p:1}}else{const o=Math.abs(t*s-i*n),c=Math.hypot(t,i),d=Math.hypot(n,s);if(e===0)r=d/o,a=c/o;else{const p=e*o;r=d>p?d/p:1,a=c>p?c/p:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[n,s]=this.getScaleForStroking();if(t.lineWidth=i||1,n===1&&s===1){t.stroke();return}const r=t.getLineDash();if(e&&t.save(),t.scale(n,s),r.length>0){const a=Math.max(n,s);t.setLineDash(r.map(o=>o/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};hr=new WeakSet,o2=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},h2=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},l2=function(e,t,i){const n=new Path2D;return n.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),n};let cc=lm;for(const h in $s)cc.prototype[h]!==void 0&&(cc.prototype[$s[h]]=cc.prototype[h]);var Kd,Zd;class Ra{static get workerPort(){return l(this,Kd)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");P(this,Kd,e)}static get workerSrc(){return l(this,Zd)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");P(this,Zd,e)}}Kd=new WeakMap,Zd=new WeakMap,O(Ra,Kd,null),O(Ra,Zd,"");var Nh,Jd;class LA{constructor({parsedData:e,rawData:t}){O(this,Nh);O(this,Jd);P(this,Nh,e),P(this,Jd,t)}getRaw(){return l(this,Jd)}get(e){return l(this,Nh).get(e)??null}getAll(){return Z2(l(this,Nh))}has(e){return l(this,Nh).has(e)}}Nh=new WeakMap,Jd=new WeakMap;const Ql=Symbol("INTERNAL");var Qd,tf,ef,Nc;class kA{constructor(e,{name:t,intent:i,usage:n,rbGroups:s}){O(this,Qd,!1);O(this,tf,!1);O(this,ef,!1);O(this,Nc,!0);P(this,Qd,!!(e&cs.DISPLAY)),P(this,tf,!!(e&cs.PRINT)),this.name=t,this.intent=i,this.usage=n,this.rbGroups=s}get visible(){if(l(this,ef))return l(this,Nc);if(!l(this,Nc))return!1;const{print:e,view:t}=this.usage;return l(this,Qd)?(t==null?void 0:t.viewState)!=="OFF":l(this,tf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==Ql&&$e("Internal method `_setVisible` called."),P(this,ef,i),P(this,Nc,t)}}Qd=new WeakMap,tf=new WeakMap,ef=new WeakMap,Nc=new WeakMap;var go,je,Pc,Ic,nf,c2;class EA{constructor(e,t=cs.DISPLAY){O(this,nf);O(this,go,null);O(this,je,new Map);O(this,Pc,null);O(this,Ic,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,P(this,Ic,e.order);for(const i of e.groups)l(this,je).set(i.id,new kA(t,i));if(e.baseState==="OFF")for(const i of l(this,je).values())i._setVisible(Ql,!1);for(const i of e.on)l(this,je).get(i)._setVisible(Ql,!0);for(const i of e.off)l(this,je).get(i)._setVisible(Ql,!1);P(this,Pc,this.getHash())}}isVisible(e){if(l(this,je).size===0)return!0;if(!e)return ug("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,je).has(e.id)?l(this,je).get(e.id).visible:(we(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return z(this,nf,c2).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,je).has(t))return we(`Optional content group not found: ${t}`),!0;if(l(this,je).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,je).has(t))return we(`Optional content group not found: ${t}`),!0;if(!l(this,je).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,je).has(t))return we(`Optional content group not found: ${t}`),!0;if(!l(this,je).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,je).has(t))return we(`Optional content group not found: ${t}`),!0;if(l(this,je).get(t).visible)return!1}return!0}return we(`Unknown optional content policy ${e.policy}.`),!0}return we(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var s;const n=l(this,je).get(e);if(!n){we(`Optional content group not found: ${e}`);return}if(i&&t&&n.rbGroups.length)for(const r of n.rbGroups)for(const a of r)a!==e&&((s=l(this,je).get(a))==null||s._setVisible(Ql,!1,!0));n._setVisible(Ql,!!t,!0),P(this,go,null)}setOCGState({state:e,preserveRB:t}){let i;for(const n of e){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}const s=l(this,je).get(n);if(s)switch(i){case"ON":this.setVisibility(n,!0,t);break;case"OFF":this.setVisibility(n,!1,t);break;case"Toggle":this.setVisibility(n,!s.visible,t);break}}P(this,go,null)}get hasInitialVisibility(){return l(this,Pc)===null||this.getHash()===l(this,Pc)}getOrder(){return l(this,je).size?l(this,Ic)?l(this,Ic).slice():[...l(this,je).keys()]:null}getGroups(){return l(this,je).size>0?Z2(l(this,je)):null}getGroup(e){return l(this,je).get(e)||null}getHash(){if(l(this,go)!==null)return l(this,go);const e=new Eb;for(const[t,i]of l(this,je))e.update(`${t}:${i.visible}`);return P(this,go,e.hexdigest())}}go=new WeakMap,je=new WeakMap,Pc=new WeakMap,Ic=new WeakMap,nf=new WeakSet,c2=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let n=1;n<t;n++){const s=e[n];let r;if(Array.isArray(s))r=z(this,nf,c2).call(this,s);else if(l(this,je).has(s))r=l(this,je).get(s).visible;else return we(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return i==="And"};class CA{constructor(e,{disableRange:t=!1,disableStream:i=!1}){ki(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:s,progressiveDone:r,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const o=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(o)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((o,c)=>{this._onReceiveData({begin:o,chunk:c})}),e.addProgressListener((o,c)=>{this._onProgress({loaded:o,total:c})}),e.addProgressiveReadListener(o=>{this._onReceiveData({chunk:o})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const n=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});ki(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,n,s;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(s=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||s.call(n,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ki(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new NA(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new PA(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class NA{constructor(e,t,i=!1,n=null){this._stream=e,this._done=i||!1,this._filename=tm(n)?n:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PA{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function IA(h){let e=!0,t=i("filename\\*","i").exec(h);if(t){t=t[1];let d=a(t);return d=unescape(d),d=o(d),d=c(d),s(d)}if(t=r(h),t){const d=c(t);return s(d)}if(t=i("filename","i").exec(h),t){t=t[1];let d=a(t);return d=c(d),s(d)}function i(d,p){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function n(d,p){if(d){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const g=new TextDecoder(d,{fatal:!0}),f=dg(p);p=g.decode(f),e=!1}catch{}}return p}function s(d){return e&&/[\x80-\xff]/.test(d)&&(d=n("utf-8",d),e&&(d=n("iso-8859-1",d))),d}function r(d){const p=[];let g;const f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=f.exec(d))!==null;){let[,b,_,y]=g;if(b=parseInt(b,10),b in p){if(b===0)break;continue}p[b]=[_,y]}const v=[];for(let b=0;b<p.length&&b in p;++b){let[_,y]=p[b];y=a(y),_&&(y=unescape(y),b===0&&(y=o(y))),v.push(y)}return v.join("")}function a(d){if(d.startsWith('"')){const p=d.slice(1).split('\\"');for(let g=0;g<p.length;++g){const f=p[g].indexOf('"');f!==-1&&(p[g]=p[g].slice(0,f),p.length=g+1),p[g]=p[g].replaceAll(/\\(.)/g,"$1")}d=p.join('"')}return d}function o(d){const p=d.indexOf("'");if(p===-1)return d;const g=d.slice(0,p),v=d.slice(p+1).replace(/^[^']*'/,"");return n(g,v)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,g,f,v){if(f==="q"||f==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,_){return String.fromCharCode(parseInt(_,16))}),n(g,v);try{v=atob(v)}catch{}return n(g,v)})}return""}function qb(h,e){const t=new Headers;if(!h||!e||typeof e!="object")return t;for(const i in e){const n=e[i];n!==void 0&&t.append(i,n)}return t}function gg(h){try{return new URL(h).origin}catch{}return null}function Ub({responseHeaders:h,isHttp:e,rangeChunkSize:t,disableRange:i}){const n={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(h.get("Content-Length"),10);return!Number.isInteger(s)||(n.suggestedLength=s,s<=2*t)||i||!e||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function Hb(h){const e=h.get("Content-Disposition");if(e){let t=IA(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(tm(t))return t}return null}function mg(h,e){return h===404||h===0&&e.startsWith("file:")?new yd('Missing PDF "'+e+'".'):new R1(`Unexpected server response (${h}) while retrieving PDF "${e}".`,h)}function Wb(h){return h===200||h===206}function Gb(h,e,t){return{method:"GET",headers:h,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Vb(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(we(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class S5{constructor(e){re(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=qb(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ki(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new TA(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new RA(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class TA{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),n=t.url;fetch(n,Gb(i,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=gg(s.url),!Wb(s.status))throw mg(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();const r=s.headers,{allowRangeRequests:a,suggestedLength:o}=Ub({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=Hb(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Oo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Vb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class RA{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const n=e.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${i-1}`);const r=n.url;fetch(r,Gb(s,this._withCredentials,this._abortController)).then(a=>{const o=gg(a.url);if(o!==e._responseOrigin)throw new Error(`Expected range response-origin "${o}" to match "${e._responseOrigin}".`);if(!Wb(a.status))throw mg(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:Vb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const w0=200,A0=206;function FA(h){const e=h.response;return typeof e!="string"?e:dg(e).buffer}class MA{constructor({url:e,httpHeaders:t,withCredentials:i}){re(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=qb(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,r]of this.headers)t.setRequestHeader(s,r);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),n.expectedStatus=A0):n.expectedStatus=w0,t.responseType="arraybuffer",ki(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&((n=i.onProgress)==null||n.call(i,t))}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],n.status===0&&this.isHttp){i.onError(n.status);return}const s=n.status||w0;if(!(s===w0&&i.expectedStatus===A0)&&s!==i.expectedStatus){i.onError(n.status);return}const a=FA(n);if(s===A0){const o=n.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(o);c?i.onDone({begin:parseInt(c[1],10),chunk:a}):(we('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class DA{constructor(e){this._source=e,this._manager=new MA(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ki(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new OA(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new BA(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class OA{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=gg(t.responseURL);const i=t.getAllResponseHeaders(),n=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[o,...c]=a.split(": ");return[o,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:r}=Ub({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Hb(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=mg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class BA{constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=gg((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=mg(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const jA=/^[a-z][a-z0-9\-+.]+:/i;function zA(h){if(jA.test(h))return new URL(h);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(h))}class qA{constructor(e){this.source=e,this.url=zA(e.url),ki(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ki(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new UA(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new HA(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class UA{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new yd(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Oo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class HA{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=e.source;this._isStreamingSupported=!n.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const WA=1e5,Bn=30,GA=.8;var C5,mo,Un,sf,rf,Ph,ba,af,of,Ih,Tc,Rc,bo,Fc,hf,Mc,Th,lf,cf,Rh,Fh,uf,vo,Dc,Oa,$b,Xb,u2,ps,d1,d2,Yb,Kb;const Ii=class Ii{constructor({textContentSource:e,container:t,viewport:i}){O(this,Oa);O(this,mo,Promise.withResolvers());O(this,Un,null);O(this,sf,!1);O(this,rf,!!((C5=globalThis.FontInspector)!=null&&C5.enabled));O(this,Ph,null);O(this,ba,null);O(this,af,0);O(this,of,0);O(this,Ih,null);O(this,Tc,null);O(this,Rc,0);O(this,bo,0);O(this,Fc,Object.create(null));O(this,hf,[]);O(this,Mc,null);O(this,Th,[]);O(this,lf,new WeakMap);O(this,cf,null);var o;if(e instanceof ReadableStream)P(this,Mc,e);else if(typeof e=="object")P(this,Mc,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');P(this,Un,P(this,Tc,t)),P(this,bo,i.scale*(globalThis.devicePixelRatio||1)),P(this,Rc,i.rotation),P(this,ba,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:s,pageX:r,pageY:a}=i.rawDims;P(this,cf,[1,0,0,-1,-r,a+s]),P(this,of,n),P(this,af,s),z(o=Ii,ps,Yb).call(o),ul(t,i),l(this,mo).promise.finally(()=>{l(Ii,Dc).delete(this),P(this,ba,null),P(this,Fc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Cn.platform;return xe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Ih).read().then(({value:t,done:i})=>{if(i){l(this,mo).resolve();return}l(this,Ph)??P(this,Ph,t.lang),Object.assign(l(this,Fc),t.styles),z(this,Oa,$b).call(this,t.items),e()},l(this,mo).reject)};return P(this,Ih,l(this,Mc).getReader()),l(Ii,Dc).add(this),e(),l(this,mo).promise}update({viewport:e,onBefore:t=null}){var s;const i=e.scale*(globalThis.devicePixelRatio||1),n=e.rotation;if(n!==l(this,Rc)&&(t==null||t(),P(this,Rc,n),ul(l(this,Tc),{rotation:n})),i!==l(this,bo)){t==null||t(),P(this,bo,i);const r={div:null,properties:null,ctx:z(s=Ii,ps,d1).call(s,l(this,Ph))};for(const a of l(this,Th))r.properties=l(this,lf).get(a),r.div=a,z(this,Oa,u2).call(this,r)}}cancel(){var t;const e=new Oo("TextLayer task cancelled.");(t=l(this,Ih))==null||t.cancel(e).catch(()=>{}),P(this,Ih,null),l(this,mo).reject(e)}get textDivs(){return l(this,Th)}get textContentItemsStr(){return l(this,hf)}static cleanup(){if(!(l(this,Dc).size>0)){l(this,Rh).clear();for(const{canvas:e}of l(this,Fh).values())e.remove();l(this,Fh).clear()}}};mo=new WeakMap,Un=new WeakMap,sf=new WeakMap,rf=new WeakMap,Ph=new WeakMap,ba=new WeakMap,af=new WeakMap,of=new WeakMap,Ih=new WeakMap,Tc=new WeakMap,Rc=new WeakMap,bo=new WeakMap,Fc=new WeakMap,hf=new WeakMap,Mc=new WeakMap,Th=new WeakMap,lf=new WeakMap,cf=new WeakMap,Rh=new WeakMap,Fh=new WeakMap,uf=new WeakMap,vo=new WeakMap,Dc=new WeakMap,Oa=new WeakSet,$b=function(e){var n,s;if(l(this,sf))return;(s=l(this,ba)).ctx??(s.ctx=z(n=Ii,ps,d1).call(n,l(this,Ph)));const t=l(this,Th),i=l(this,hf);for(const r of e){if(t.length>WA){we("Ignoring additional textDivs for performance reasons."),P(this,sf,!0);return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=l(this,Un);P(this,Un,document.createElement("span")),l(this,Un).classList.add("markedContent"),r.id!==null&&l(this,Un).setAttribute("id",`${r.id}`),a.append(l(this,Un))}else r.type==="endMarkedContent"&&P(this,Un,l(this,Un).parentNode);continue}i.push(r.str),z(this,Oa,Xb).call(this,r)}},Xb=function(e){var b;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Th).push(t);const n=ee.transform(l(this,cf),e.transform);let s=Math.atan2(n[1],n[0]);const r=l(this,Fc)[e.fontName];r.vertical&&(s+=Math.PI/2);let a=l(this,rf)&&r.fontSubstitution||r.fontFamily;a=Ii.fontFamilyMap.get(a)||a;const o=Math.hypot(n[2],n[3]),c=o*z(b=Ii,ps,Kb).call(b,a,l(this,Ph));let d,p;s===0?(d=n[4],p=n[5]-c):(d=n[4]+c*Math.sin(s),p=n[5]-c*Math.cos(s));const g="calc(var(--scale-factor)*",f=t.style;l(this,Un)===l(this,Tc)?(f.left=`${(100*d/l(this,of)).toFixed(2)}%`,f.top=`${(100*p/l(this,af)).toFixed(2)}%`):(f.left=`${g}${d.toFixed(2)}px)`,f.top=`${g}${p.toFixed(2)}px)`),f.fontSize=`${g}${(l(Ii,vo)*o).toFixed(2)}px)`,f.fontFamily=a,i.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,rf)&&(t.dataset.fontName=r.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const _=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);_!==y&&Math.max(_,y)/Math.min(_,y)>1.5&&(v=!0)}if(v&&(i.canvasWidth=r.vertical?e.height:e.width),l(this,lf).set(t,i),l(this,ba).div=t,l(this,ba).properties=i,z(this,Oa,u2).call(this,l(this,ba)),i.hasText&&l(this,Un).append(t),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),l(this,Un).append(_)}},u2=function(e){var a;const{div:t,properties:i,ctx:n}=e,{style:s}=t;let r="";if(l(Ii,vo)>1&&(r=`scale(${1/l(Ii,vo)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:o}=s,{canvasWidth:c,fontSize:d}=i;z(a=Ii,ps,d2).call(a,n,d*l(this,bo),o);const{width:p}=n.measureText(t.textContent);p>0&&(r=`scaleX(${c*l(this,bo)/p}) ${r}`)}i.angle!==0&&(r=`rotate(${i.angle}deg) ${r}`),r.length>0&&(s.transform=r)},ps=new WeakSet,d1=function(e=null){let t=l(this,Fh).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Fh).set(e,t),l(this,uf).set(t,{size:0,family:""})}return t},d2=function(e,t,i){const n=l(this,uf).get(e);t===n.size&&i===n.family||(e.font=`${t}px ${i}`,n.size=t,n.family=i)},Yb=function(){if(l(this,vo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),P(this,vo,e.getBoundingClientRect().height),e.remove()},Kb=function(e,t){const i=l(this,Rh).get(e);if(i)return i;const n=z(this,ps,d1).call(this,t);n.canvas.width=n.canvas.height=Bn,z(this,ps,d2).call(this,n,Bn,e);const s=n.measureText("");let r=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(r){const d=r/(r+a);return l(this,Rh).set(e,d),n.canvas.width=n.canvas.height=0,d}n.strokeStyle="red",n.clearRect(0,0,Bn,Bn),n.strokeText("g",0,0);let o=n.getImageData(0,0,Bn,Bn).data;a=0;for(let d=o.length-1-3;d>=0;d-=4)if(o[d]>0){a=Math.ceil(d/4/Bn);break}n.clearRect(0,0,Bn,Bn),n.strokeText("A",0,Bn),o=n.getImageData(0,0,Bn,Bn).data,r=0;for(let d=0,p=o.length;d<p;d+=4)if(o[d]>0){r=Bn-Math.floor(d/4/Bn);break}n.canvas.width=n.canvas.height=0;const c=r?r/(r+a):GA;return l(this,Rh).set(e,c),c},O(Ii,ps),O(Ii,Rh,new Map),O(Ii,Fh,new Map),O(Ii,uf,new WeakMap),O(Ii,vo,null),O(Ii,Dc,new Set);let wd=Ii;class Ad{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function n(s){var o;if(!s)return;let r=null;const a=s.name;if(a==="#text")r=s.value;else if(Ad.shouldBuildText(a))(o=s==null?void 0:s.attributes)!=null&&o.textContent?r=s.attributes.textContent:s.value&&(r=s.value);else return;if(r!==null&&t.push({str:r}),!!s.children)for(const c of s.children)n(c)}return n(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const VA=65536,$A=100,XA=5e3,YA=bn?lA:aA,KA=bn?cA:Mb,ZA=bn?hA:oA,JA=bn?uA:jb;function QA(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const e=new f2,{docId:t}=e,i=h.url?t_(h.url):null,n=h.data?e_(h.data):null,s=h.httpHeaders||null,r=h.withCredentials===!0,a=h.password??null,o=h.range instanceof Zb?h.range:null,c=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:VA;let d=h.worker instanceof uc?h.worker:null;const p=h.verbosity,g=typeof h.docBaseUrl=="string"&&!pg(h.docBaseUrl)?h.docBaseUrl:null,f=typeof h.cMapUrl=="string"?h.cMapUrl:null,v=h.cMapPacked!==!1,b=h.CMapReaderFactory||KA,_=typeof h.standardFontDataUrl=="string"?h.standardFontDataUrl:null,y=h.StandardFontDataFactory||JA,x=h.stopAtErrors!==!0,C=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,I=h.isEvalSupported!==!1,F=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!bn,K=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!bn&&(Cn.platform.isFirefox||!globalThis.chrome),q=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,U=typeof h.disableFontFace=="boolean"?h.disableFontFace:bn,X=h.fontExtraProperties===!0,rt=h.enableXfa===!0,M=h.ownerDocument||globalThis.document,E=h.disableRange===!0,W=h.disableStream===!0,S=h.disableAutoFetch===!0,nt=h.pdfBug===!0,st=h.CanvasFactory||YA,tt=h.FilterFactory||ZA,dt=h.enableHWA===!0,ot=o?o.length:h.length??NaN,At=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!bn&&!U,lt=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:b===Mb&&y===jb&&f&&_&&Qu(f,document.baseURI)&&Qu(_,document.baseURI),k=null;Bw(p);const G={canvasFactory:new st({ownerDocument:M,enableHWA:dt}),filterFactory:new tt({docId:t,ownerDocument:M}),cMapReaderFactory:lt?null:new b({baseUrl:f,isCompressed:v}),standardFontDataFactory:lt?null:new y({baseUrl:_})};if(!d){const ct={verbosity:p,port:Ra.workerPort};d=ct.port?uc.fromPort(ct):new uc(ct),e._worker=d}const Y={docId:t,apiVersion:"4.10.38",data:n,password:a,disableAutoFetch:S,rangeChunkSize:c,length:ot,docBaseUrl:g,enableXfa:rt,evaluatorOptions:{maxImageSize:C,disableFontFace:U,ignoreErrors:x,isEvalSupported:I,isOffscreenCanvasSupported:F,isImageDecoderSupported:K,canvasMaxAreaInBytes:q,fontExtraProperties:X,useSystemFonts:At,cMapUrl:lt?f:null,standardFontDataUrl:lt?_:null}},Z={disableFontFace:U,fontExtraProperties:X,ownerDocument:M,pdfBug:nt,styleElement:k,loadingParams:{disableAutoFetch:S,enableXfa:rt}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ct=d.messageHandler.sendWithPromise("GetDocRequest",Y,n?[n.buffer]:null);let gt;if(o)gt=new CA(o,{disableRange:E,disableStream:W});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");let bt;if(bn)if(Qu(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");bt=S5}else bt=qA;else bt=Qu(i)?S5:DA;gt=new bt({url:i,length:ot,httpHeaders:s,withCredentials:r,rangeChunkSize:c,disableRange:E,disableStream:W})}return ct.then(bt=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const wt=new nd(t,bt,d.port),Mt=new r_(wt,e,gt,Z,G);e._transport=Mt,wt.send("Ready",null)})}).catch(e._capability.reject),e}function t_(h){if(h instanceof URL)return h.href;try{return new URL(h,window.location).href}catch{if(bn&&typeof h=="string")return h}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function e_(h){if(bn&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return dg(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h==null?void 0:h.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function L5(h){return typeof h=="object"&&Number.isInteger(h==null?void 0:h.num)&&h.num>=0&&Number.isInteger(h==null?void 0:h.gen)&&h.gen>=0}var Y1;const K1=class K1{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${_n(K1,Y1)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,(n=this._worker)==null||n.destroy(),this._worker=null}};Y1=new WeakMap,O(K1,Y1,0);let f2=K1;class Zb{constructor(e,t,i=!1,n=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){$e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class i_{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var yo,va,Is,tc,f1;class n_{constructor(e,t,i,n=!1){O(this,Is);O(this,yo,null);O(this,va,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=n?new u5:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new Jb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:s=!1}={}){return new Xf({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:n=eo.ENABLE,transform:s=null,background:r=null,optionalContentConfigPromise:a=null,annotationCanvasMap:o=null,pageColors:c=null,printAnnotationStorage:d=null,isEditing:p=!1}){var I,F;(I=this._stats)==null||I.time("Overall");const g=this._transport.getRenderingIntent(i,n,d,p),{renderingIntent:f,cacheKey:v}=g;P(this,va,!1),z(this,Is,f1).call(this),a||(a=this._transport.getOptionalContentConfig(f));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const _=!!(f&cs.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(F=this._stats)==null||F.time("Page Request"),this._pumpOperatorList(g));const y=K=>{var q;b.renderTasks.delete(x),(this._maybeCleanupAfterRender||_)&&P(this,va,!0),z(this,Is,tc).call(this,!_),K?(x.capability.reject(K),this._abortOperatorList({intentState:b,reason:K instanceof Error?K:new Error(K)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(q=globalThis.Stats)!=null&&q.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new g2({callback:y,params:{canvasContext:e,viewport:t,transform:s,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:o,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:c});(b.renderTasks||(b.renderTasks=new Set)).add(x);const C=x.task;return Promise.all([b.displayReadyCapability.promise,a]).then(([K,q])=>{var U;if(this.destroyed){y();return}if((U=this._stats)==null||U.time("Rendering"),!(q.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:K,optionalContentConfig:q}),x.operatorListChanged()}).catch(y),C}getOperatorList({intent:e="display",annotationMode:t=eo.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){var c;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(o))}const r=this._transport.getRenderingIntent(e,t,i,n,!0);let a=this._intentStates.get(r.cacheKey);a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a));let o;return a.opListReadCapability||(o=Object.create(null),o.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(o),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Ad.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,n){function s(){r.read().then(function({value:o,done:c}){if(c){i(a);return}a.lang??(a.lang=o.lang),Object.assign(a.styles,o.styles),a.items.push(...o.items),s()},n)}const r=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),P(this,va,!1),z(this,Is,f1).call(this),Promise.all(e)}cleanup(e=!1){P(this,va,!0);const t=z(this,Is,tc).call(this,!1);return e&&t&&this._stats&&(this._stats=new u5),t}_startRenderPage(e,t){var n,s;const i=this._intentStates.get(t);i&&((n=this._stats)==null||n.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let i=0,n=e.length;i<n;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&z(this,Is,tc).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:n}){const{map:s,transfer:r}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:n},r).getReader(),c=this._intentStates.get(t);c.streamReader=o;const d=()=>{o.read().then(({value:p,done:g})=>{if(g){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,c),d())},p=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const g of c.renderTasks)g.operatorListChanged();z(this,Is,tc).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(p);else if(c.opListReadCapability)c.opListReadCapability.reject(p);else throw p}})};d()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Q2){let n=$A;t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},n);return}}if(e.streamReader.cancel(new Oo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[n,s]of this._intentStates)if(s===e){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}yo=new WeakMap,va=new WeakMap,Is=new WeakSet,tc=function(e=!1){if(z(this,Is,f1).call(this),!l(this,va)||this.destroyed)return!1;if(e)return P(this,yo,setTimeout(()=>{P(this,yo,null),z(this,Is,tc).call(this,!1)},XA)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),P(this,va,!1),!0},f1=function(){l(this,yo)&&(clearTimeout(l(this,yo)),P(this,yo,null))};var ya,Z1;class s_{constructor(){O(this,ya,new Map);O(this,Z1,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,Z1).then(()=>{for(const[n]of l(this,ya))n.call(this,i)})}addEventListener(e,t,i=null){let n=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:s}=i;if(s.aborted){we("LoopbackPort - cannot use an `aborted` signal.");return}const r=()=>this.removeEventListener(e,t);n=()=>s.removeEventListener("abort",r),s.addEventListener("abort",r)}l(this,ya).set(t,n)}removeEventListener(e,t){const i=l(this,ya).get(t);i==null||i(),l(this,ya).delete(t)}terminate(){for(const[,e]of l(this,ya))e==null||e();l(this,ya).clear()}}ya=new WeakMap,Z1=new WeakMap;var J1,Mh,Dh,Oc,p1,Bc,g1;const ti=class ti{constructor({name:e=null,port:t=null,verbosity:i=jw()}={}){O(this,Oc);var n;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((n=l(ti,Dh))!=null&&n.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(ti,Dh)||P(ti,Dh,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new nd("main","worker",e),this._messageHandler.on("ready",function(){}),z(this,Oc,p1).call(this)}_initialize(){if(l(ti,Mh)||l(ti,Bc,g1)){this._setupFakeWorker();return}let{workerSrc:e}=ti;try{ti._isSameOrigin(window.location.href,e)||(e=ti._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new nd("main","worker",t),n=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||n()},{signal:s.signal}),i.on("test",a=>{if(s.abort(),this.destroyed||!a){n();return}this._messageHandler=i,this._port=t,this._webWorker=t,z(this,Oc,p1).call(this)}),i.on("ready",a=>{if(s.abort(),this.destroyed){n();return}try{r()}catch{this._setupFakeWorker()}});const r=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};r();return}catch{ug("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(ti,Mh)||(we("Setting up fake worker."),P(ti,Mh,!0)),ti._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new s_;this._port=t;const i=`fake${_n(ti,J1)._++}`,n=new nd(i+"_worker",i,t);e.setup(n,t),this._messageHandler=new nd(i,i+"_worker",t),z(this,Oc,p1).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,i;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=l(ti,Dh))==null||t.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,Dh))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ti(e)}static get workerSrc(){if(Ra.workerSrc)return Ra.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xe(this,"_setupFakeWorkerGlobal",(async()=>l(this,Bc,g1)?l(this,Bc,g1):(await import(this.workerSrc)).WorkerMessageHandler)())}};J1=new WeakMap,Mh=new WeakMap,Dh=new WeakMap,Oc=new WeakSet,p1=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Bc=new WeakSet,g1=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},O(ti,Bc),O(ti,J1,0),O(ti,Mh,!1),O(ti,Dh),bn&&(P(ti,Mh,!0),Ra.workerSrc||(Ra.workerSrc="./pdf.worker.mjs")),ti._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const n=new URL(t,i);return i.origin===n.origin},ti._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let uc=ti;var wa,Rr,jc,zc,Aa,Oh,hd;class r_{constructor(e,t,i,n,s){O(this,Oh);O(this,wa,new Map);O(this,Rr,new Map);O(this,jc,new Map);O(this,zc,new Map);O(this,Aa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Jb,this.fontLoader=new sA({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return xe(this,"annotationStorage",new nm)}getRenderingIntent(e,t=eo.ENABLE,i=null,n=!1,s=!1){let r=cs.DISPLAY,a=i2;switch(e){case"any":r=cs.ANY;break;case"display":break;case"print":r=cs.PRINT;break;default:we(`getRenderingIntent - invalid intent: ${e}`)}const o=r&cs.PRINT&&i instanceof Nb?i:this.annotationStorage;switch(t){case eo.DISABLE:r+=cs.ANNOTATIONS_DISABLE;break;case eo.ENABLE:break;case eo.ENABLE_FORMS:r+=cs.ANNOTATIONS_FORMS;break;case eo.ENABLE_STORAGE:r+=cs.ANNOTATIONS_STORAGE,a=o.serializable;break;default:we(`getRenderingIntent - invalid annotationMode: ${t}`)}n&&(r+=cs.IS_EDITING),s&&(r+=cs.OPLIST);const{ids:c,hash:d}=o.modifiedIds,p=[r,a.hash,d];return{renderingIntent:r,cacheKey:p.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,Aa))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of l(this,Rr).values())e.push(n._destroy());l(this,Rr).clear(),l(this,jc).clear(),l(this,zc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var n,s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,wa).clear(),this.filterFactory.destroy(),wd.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new Oo("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,n)=>{ki(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},n.onPull=()=>{this._fullReader.read().then(function({value:s,done:r}){if(r){n.close();return}ki(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{n.error(s)})},n.onCancel=s=>{this._fullReader.cancel(s),n.ready.catch(r=>{if(!this.destroyed)throw r})}}),e.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:s,contentLength:r}=this._fullReader;return(!n||!s)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=o=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:o.loaded,total:o.total})}),{isStreamingSupported:n,isRangeSupported:s,contentLength:r}}),e.on("GetRangeReader",(i,n)=>{ki(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){n.close();return}n.onPull=()=>{s.read().then(function({value:r,done:a}){if(a){n.close();return}ki(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{s.cancel(r),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new i_(i,this))}),e.on("DocException",i=>{t._capability.reject(jn(i))}),e.on("PasswordRequest",i=>{P(this,Aa,Promise.withResolvers());try{if(!t.onPassword)throw jn(i);const n=s=>{s instanceof Error?l(this,Aa).reject(s):l(this,Aa).resolve({password:s})};t.onPassword(n,i.code)}catch(n){l(this,Aa).reject(n)}return l(this,Aa).promise}),e.on("DataLoaded",i=>{var n;(n=t.onProgress)==null||n.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,Rr).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,n,s])=>{var r;if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":const{disableFontFace:a,fontExtraProperties:o,pdfBug:c}=this._params;if("error"in s){const f=s.error;we(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const d=c&&((r=globalThis.FontInspector)!=null&&r.enabled)?(f,v)=>globalThis.FontInspector.fontAdded(f,v):null,p=new rA(s,{disableFontFace:a,fontExtraProperties:o,inspectFont:d});this.fontLoader.bind(p).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o&&p.data&&(p.data=null),this.commonObjs.resolve(i,p)});break;case"CopyLocalImage":const{imageRef:g}=s;ki(g,"The imageRef must be defined.");for(const f of l(this,Rr).values())for(const[,v]of f.objs)if((v==null?void 0:v.ref)===g)return v.dataLen?(this.commonObjs.resolve(i,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),e.on("obj",([i,n,s,r])=>{var o;if(this.destroyed)return;const a=l(this,Rr).get(n);if(!a.objs.has(i)){if(a._intentStates.size===0){(o=r==null?void 0:r.bitmap)==null||o.close();return}switch(s){case"Image":a.objs.resolve(i,r),(r==null?void 0:r.dataLen)>Fw&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,r);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{var n;this.destroyed||(n=t.onProgress)==null||n.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&we("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,jc).get(t);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&l(this,zc).set(s.refStr,e);const r=new n_(t,s,this,this._params.pdfBug);return l(this,Rr).set(t,r),r});return l(this,jc).set(t,n),n}getPageIndex(e){return L5(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return z(this,Oh,hd).call(this,"GetFieldObjects")}hasJSActions(){return z(this,Oh,hd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return z(this,Oh,hd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return z(this,Oh,hd).call(this,"GetOptionalContentConfig").then(t=>new EA(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,wa).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(n=>{var s,r;return{info:n[0],metadata:n[1]?new LA(n[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((r=this._fullReader)==null?void 0:r.contentLength)??null}});return l(this,wa).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Rr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,wa).clear(),this.filterFactory.destroy(!0),wd.cleanup()}}cachedPageNumber(e){if(!L5(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,zc).get(t)??null}}wa=new WeakMap,Rr=new WeakMap,jc=new WeakMap,zc=new WeakMap,Aa=new WeakMap,Oh=new WeakSet,hd=function(e,t=null){const i=l(this,wa).get(e);if(i)return i;const n=this.messageHandler.sendWithPromise(e,t);return l(this,wa).set(e,n),n};const Zu=Symbol("INITIAL_DATA");var es,df,p2;class Jb{constructor(){O(this,df);O(this,es,Object.create(null))}get(e,t=null){if(t){const n=z(this,df,p2).call(this,e);return n.promise.then(()=>t(n.data)),null}const i=l(this,es)[e];if(!i||i.data===Zu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,es)[e];return!!t&&t.data!==Zu}delete(e){const t=l(this,es)[e];return!t||t.data===Zu?!1:(delete l(this,es)[e],!0)}resolve(e,t=null){const i=z(this,df,p2).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,es)){const{data:i}=l(this,es)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}P(this,es,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,es)){const{data:t}=l(this,es)[e];t!==Zu&&(yield[e,t])}}}es=new WeakMap,df=new WeakSet,p2=function(e){var t;return(t=l(this,es))[e]||(t[e]={...Promise.withResolvers(),data:Zu})};var wo;class a_{constructor(e){O(this,wo,null);P(this,wo,e),this.onContinue=null}get promise(){return l(this,wo).capability.promise}cancel(e=0){l(this,wo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,wo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,wo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}wo=new WeakMap;var Ao,Bh;const rh=class rh{constructor({callback:e,params:t,objs:i,commonObjs:n,annotationCanvasMap:s,operatorList:r,pageIndex:a,canvasFactory:o,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:p=!1,pageColors:g=null}){O(this,Ao,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=a,this.canvasFactory=o,this.filterFactory=c,this._pdfBug=p,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new a_(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,o;if(this.cancelled)return;if(this._canvas){if(l(rh,Bh).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(rh,Bh).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:s,background:r}=this.params;this.gfx=new cc(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:n,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(o=this.graphicsReadyCallback)==null||o.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,Ao)&&(window.cancelAnimationFrame(l(this,Ao)),P(this,Ao,null)),l(rh,Bh).delete(this._canvas),this.callback(e||new Q2(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?P(this,Ao,window.requestAnimationFrame(()=>{P(this,Ao,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(rh,Bh).delete(this._canvas),this.callback())))}};Ao=new WeakMap,Bh=new WeakMap,O(rh,Bh,new WeakSet);let g2=rh;const o_="4.10.38",h_="f9bea397f";function k5(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function Ju(h){return Math.max(0,Math.min(255,255*h))}class E5{static CMYK_G([e,t,i,n]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+n)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ju(e),[e,e,e]}static G_HTML([e]){const t=k5(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Ju)}static RGB_HTML(e){return`#${e.map(k5).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,n]){return["RGB",1-Math.min(1,e+n),1-Math.min(1,i+n),1-Math.min(1,t+n)]}static CMYK_rgb([e,t,i,n]){return[Ju(1-Math.min(1,e+n)),Ju(1-Math.min(1,i+n)),Ju(1-Math.min(1,t+n))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const n=1-e,s=1-t,r=1-i,a=Math.min(n,s,r);return["CMYK",n,s,r,a]}}class l_{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${e} ${t}`),n}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){$e("Abstract method `_createSVG` called.")}}class rm extends l_{_createSVG(e){return document.createElementNS(na,e)}}class Qb{static setupStorage(e,t,i,n,s){const r=n.getValue(t,{value:null});switch(i.name){case"textarea":if(r.value!==null&&(e.textContent=r.value),s==="print")break;e.addEventListener("input",a=>{n.setValue(t,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(r.value===i.attributes.xfaOn?e.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{n.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&e.setAttribute("value",r.value),s==="print")break;e.addEventListener("input",a=>{n.setValue(t,{value:a.target.value})})}break;case"select":if(r.value!==null){e.setAttribute("value",r.value);for(const a of i.children)a.attributes.value===r.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const o=a.target.options,c=o.selectedIndex===-1?"":o[o.selectedIndex].value;n.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:n,linkService:s}){const{attributes:r}=t,a=e instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${n}`);for(const[o,c]of Object.entries(r))if(c!=null)switch(o){case"class":c.length&&e.setAttribute(o,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||o!=="href"&&o!=="newWindow")&&e.setAttribute(o,c)}a&&s.addLinkAttributes(e,r.href,r.newWindow),i&&r.dataId&&this.setupStorage(e,r.dataId,t,i)}static render(e){var p,g;const t=e.annotationStorage,i=e.linkService,n=e.xfaHtml,s=e.intent||"display",r=document.createElement(n.name);n.attributes&&this.setAttributes({html:r,element:n,intent:s,linkService:i});const a=s!=="richText",o=e.div;if(o.append(r),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;o.style.transform=f}a&&o.setAttribute("class","xfaLayer xfaFont");const c=[];if(n.children.length===0){if(n.value){const f=document.createTextNode(n.value);r.append(f),a&&Ad.shouldBuildText(n.name)&&c.push(f)}return{textDivs:c}}const d=[[n,-1,r]];for(;d.length>0;){const[f,v,b]=d.at(-1);if(v+1===f.children.length){d.pop();continue}const _=f.children[++d.at(-1)[1]];if(_===null)continue;const{name:y}=_;if(y==="#text"){const C=document.createTextNode(_.value);c.push(C),b.append(C);continue}const x=(p=_==null?void 0:_.attributes)!=null&&p.xmlns?document.createElementNS(_.attributes.xmlns,y):document.createElement(y);if(b.append(x),_.attributes&&this.setAttributes({html:x,element:_,storage:t,intent:s,linkService:i}),((g=_.children)==null?void 0:g.length)>0)d.push([_,-1,x]);else if(_.value){const C=document.createTextNode(_.value);a&&Ad.shouldBuildText(y)&&c.push(C),x.append(C)}}for(const f of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Kf=1e3,c_=9,fl=new WeakSet;function Fo(h){return{width:h[2]-h[0],height:h[3]-h[1]}}class u_{static create(e){switch(e.data.annotationType){case Pi.LINK:return new tv(e);case Pi.TEXT:return new d_(e);case Pi.WIDGET:switch(e.data.fieldType){case"Tx":return new f_(e);case"Btn":return e.data.radioButton?new nv(e):e.data.checkBox?new g_(e):new m_(e);case"Ch":return new b_(e);case"Sig":return new p_(e)}return new ml(e);case Pi.POPUP:return new b2(e);case Pi.FREETEXT:return new hv(e);case Pi.LINE:return new y_(e);case Pi.SQUARE:return new w_(e);case Pi.CIRCLE:return new A_(e);case Pi.POLYLINE:return new lv(e);case Pi.CARET:return new x_(e);case Pi.INK:return new am(e);case Pi.POLYGON:return new __(e);case Pi.HIGHLIGHT:return new cv(e);case Pi.UNDERLINE:return new S_(e);case Pi.SQUIGGLY:return new L_(e);case Pi.STRIKEOUT:return new k_(e);case Pi.STAMP:return new uv(e);case Pi.FILEATTACHMENT:return new E_(e);default:return new wi(e)}}}var jh,qc,Uc,ff,m2;const cm=class cm{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){O(this,ff);O(this,jh,null);O(this,qc,!1);O(this,Uc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return cm._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,jh)||P(this,jh,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&z(this,ff,m2).call(this,t),(i=l(this,Uc))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,jh)&&(z(this,ff,m2).call(this,l(this,jh).rect),(e=l(this,Uc))==null||e.popup.resetEdited(),P(this,jh,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:n}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof ml||(s.tabIndex=Kf);const{style:r}=s;if(r.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof b2){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,s),s}const{width:a,height:o}=Fo(t.rect);if(!e&&t.borderStyle.width>0){r.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,_=t.borderStyle.verticalCornerRadius;if(b>0||_>0){const x=`calc(${b}px * var(--scale-factor)) / calc(${_}px * var(--scale-factor))`;r.borderRadius=x}else if(this instanceof nv){const x=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;r.borderRadius=x}switch(t.borderStyle.style){case Yu.SOLID:r.borderStyle="solid";break;case Yu.DASHED:r.borderStyle="dashed";break;case Yu.BEVELED:we("Unimplemented border style: beveled");break;case Yu.INSET:we("Unimplemented border style: inset");break;case Yu.UNDERLINE:r.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(P(this,qc,!0),r.borderColor=ee.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):r.borderWidth=0}const c=ee.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:p,pageX:g,pageY:f}=n.rawDims;r.left=`${100*(c[0]-g)/d}%`,r.top=`${100*(c[1]-f)/p}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(r.width=`${100*a/d}%`,r.height=`${100*o/p}%`):this.setRotation(v,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:s,height:r}=Fo(this.data.rect);let a,o;e%180===0?(a=100*s/i,o=100*r/n):(a=100*r/i,o=100*s/n),t.style.width=`${a}%`,t.style.height=`${o}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,n)=>{const s=n.detail[t],r=s[0],a=s.slice(1);n.target.style[i]=E5[`${r}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:E5[`${r}_rgb`](a)})};return xe(this,"_commonActions",{display:t=>{const{display:i}=t.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const n of Object.keys(t.detail)){const s=e[n]||i[n];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[n,s]of Object.entries(t)){const r=i[n];if(r){const a={detail:{[n]:s},target:e};r(a),delete t[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,n,s]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,_,y,x]=e.subarray(2,6);if(n===b&&s===_&&t===y&&i===x)return}const{style:r}=this.container;let a;if(l(this,qc)){const{borderColor:b,borderWidth:_}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const o=n-t,c=s-i,{svgFactory:d}=this,p=d.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0);const g=d.createElement("defs");p.append(g);const f=d.createElement("clipPath"),v=`clippath_${this.data.id}`;f.setAttribute("id",v),f.setAttribute("clipPathUnits","objectBoundingBox"),g.append(f);for(let b=2,_=e.length;b<_;b+=8){const y=e[b],x=e[b+1],C=e[b+2],I=e[b+3],F=d.createElement("rect"),K=(C-t)/o,q=(s-x)/c,U=(y-C)/o,X=(x-I)/c;F.setAttribute("x",K),F.setAttribute("y",q),F.setAttribute("width",U),F.setAttribute("height",X),f.append(F),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${K}" y="${q}" width="${U}" height="${X}"/>`)}l(this,qc)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(p),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:e}=this,t=P(this,Uc,new b2({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){$e("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[e];if(n)for(const{page:s,id:r,exportValues:a}of n){if(s===-1||r===t)continue;const o=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${r}"]`);if(c&&!fl.has(c)){we(`_getElementsByName - element not allowed: ${r}`);continue}i.push({id:r,exportValue:o,domElement:c})}return i}for(const n of document.getElementsByName(e)){const{exportValue:s}=n,r=n.getAttribute("data-element-id");r!==t&&fl.has(n)&&i.push({id:r,exportValue:s,domElement:n})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};jh=new WeakMap,qc=new WeakMap,Uc=new WeakMap,ff=new WeakSet,m2=function(e){const{container:{style:t},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:o}}}}=this;i==null||i.splice(0,4,...e);const{width:c,height:d}=Fo(e);t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(r-e[3]+o)/r}%`,n===0?(t.width=`${100*c/s}%`,t.height=`${100*d/r}%`):this.setRotation(n)};let wi=cm;var us,th,ev,iv;class tv extends wi{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});O(this,us);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let s=!1;return t.url?(i.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action),s=!0):t.attachment?(z(this,us,ev).call(this,n,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(z(this,us,iv).call(this,n,t.setOCGState),s=!0):t.dest?(this._bindLink(n,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&z(this,us,th).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),z(this,us,th).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const r=n.get(s);r&&(t[r]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),z(this,us,th).call(this)}_bindResetFormAction(t,i){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),z(this,us,th).call(this),!this._fieldObjects){we('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{var p;n==null||n();const{fields:s,refs:r,include:a}=i,o=[];if(s.length!==0||r.length!==0){const g=new Set(r);for(const f of s){const v=this._fieldObjects[f]||[];for(const{id:b}of v)g.add(b)}for(const f of Object.values(this._fieldObjects))for(const v of f)g.has(v.id)===a&&o.push(v)}else for(const g of Object.values(this._fieldObjects))o.push(...g);const c=this.annotationStorage,d=[];for(const g of o){const{id:f}=g;switch(d.push(f),g.type){case"text":{const b=g.defaultValue||"";c.setValue(f,{value:b});break}case"checkbox":case"radiobutton":{const b=g.defaultValue===g.exportValues;c.setValue(f,{value:b});break}case"combobox":case"listbox":{const b=g.defaultValue||"";c.setValue(f,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${f}"]`);if(v){if(!fl.has(v)){we(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}us=new WeakSet,th=function(){this.container.setAttribute("data-internal-link","")},ev=function(t,i,n=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(i.content,i.filename,n),!1},z(this,us,th).call(this)},iv=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),z(this,us,th).call(this)};class d_ extends wi{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ml extends wi{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Cn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,n,s){i.includes("mouse")?e.addEventListener(i,r=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(r),shift:r.shiftKey,modifier:this._getKeyModifier(r)}})}):e.addEventListener(i,r=>{var a;if(i==="blur"){if(!t.focused||!r.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(r)}}))})}_setEventListeners(e,t,i,n){var s,r,a;for(const[o,c]of i)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,o,c,n),c==="Focus"&&!((r=this.data.actions)!=null&&r.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ee.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||c_,s=e.style;let r;const a=2,o=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(c/(g0*n))||1,p=c/d;r=Math.min(n,o(p/g0))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);r=Math.min(n,o(c/g0))}s.fontSize=`calc(${r}px * var(--scale-factor))`,s.color=ee.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class f_ extends ml{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,n){const s=this.annotationStorage;for(const r of this._getElementsByName(e.name,e.id))r.domElement&&(r.domElement[t]=i),s.setValue(r.id,{[n]:i})}render(){var n,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let a=r.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let c=r.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=c??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",c??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),fl.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Kf,this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",g=>{e.setValue(t,{value:g.target.value}),this.setPropertyOnSiblings(i,"value",g.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",g=>{const f=this.data.defaultFieldValue??"";i.value=d.userValue=f,d.formattedValue=null});let p=g=>{const{formattedValue:f}=d;f!=null&&(g.target.value=f),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",f=>{var b;if(d.focused)return;const{target:v}=f;d.userValue&&(v.value=d.userValue),d.lastCommittedValue=v.value,d.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const v={value(b){d.userValue=b.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),b.target.value=d.userValue},formattedValue(b){const{formattedValue:_}=b.detail;d.formattedValue=_,_!=null&&b.target!==document.activeElement&&(b.target.value=_),e.setValue(t,{formattedValue:_})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var C;const{charLimit:_}=b.detail,{target:y}=b;if(_===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",_);let x=d.userValue;!x||x.length<=_||(x=x.slice(0,_),y.value=d.userValue=x,e.setValue(t,{value:x}),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(v,f)}),i.addEventListener("keydown",f=>{var _;d.commitKey=1;let v=-1;if(f.key==="Escape"?v=0:f.key==="Enter"&&!this.data.multiLine?v=2:f.key==="Tab"&&(d.commitKey=3),v===-1)return;const{value:b}=f.target;d.lastCommittedValue!==b&&(d.lastCommittedValue=b,d.userValue=b,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:v,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const g=p;p=null,i.addEventListener("blur",f=>{var b,_;if(!d.focused||!f.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(d.focused=!1);const{value:v}=f.target;d.userValue=v,d.lastCommittedValue!==v&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:d.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}})),g(f)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",f=>{var F;d.lastCommittedValue=null;const{data:v,target:b}=f,{value:_,selectionStart:y,selectionEnd:x}=b;let C=y,I=x;switch(f.inputType){case"deleteWordBackward":{const K=_.substring(0,y).match(/\w*[^\w]*$/);K&&(C-=K[0].length);break}case"deleteWordForward":{const K=_.substring(y).match(/^[^\w]*\w*/);K&&(I+=K[0].length);break}case"deleteContentBackward":y===x&&(C-=1);break;case"deleteContentForward":y===x&&(I+=1);break}f.preventDefault(),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:v||"",willCommit:!1,selStart:C,selEnd:I}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(p&&i.addEventListener("blur",p),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class p_ extends ml{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class g_ extends ml{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let n=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",e.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return fl.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,n&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=Kf,s.addEventListener("change",r=>{const{name:a,checked:o}=r.target;for(const c of this._getElementsByName(a,i)){const d=o&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=d),e.setValue(c.id,{value:d})}e.setValue(i,{value:o})}),s.addEventListener("resetform",r=>{const a=t.defaultFieldValue||"Off";r.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",r=>{const a={value(o){o.target.checked=o.detail.value!=="Off",e.setValue(i,{value:o.target.checked})}};this._dispatchEventFromSandbox(a,r)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class nv extends ml{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let n=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof n=="string"&&(n=n!==t.buttonValue,e.setValue(i,{value:n})),n)for(const r of this._getElementsByName(t.fieldName,i))e.setValue(r.id,{value:!1});const s=document.createElement("input");if(fl.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,n&&s.setAttribute("checked",!0),s.tabIndex=Kf,s.addEventListener("change",r=>{const{name:a,checked:o}=r.target;for(const c of this._getElementsByName(a,i))e.setValue(c.id,{value:!1});e.setValue(i,{value:o})}),s.addEventListener("resetform",r=>{const a=t.defaultFieldValue;r.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const r=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const o={value:c=>{const d=r===c.detail.value;for(const p of this._getElementsByName(c.target.name)){const g=d&&p.id===i;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class m_ extends tv{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class b_ extends ml{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");fl.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Kf;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",d=>{const p=this.data.defaultFieldValue;for(const g of n.options)g.selected=g.value===p});for(const d of this.data.options){const p=document.createElement("option");p.textContent=d.displayValue,p.value=d.exportValue,i.value.includes(d.exportValue)&&(p.setAttribute("selected",!0),s=!1),n.append(p)}let r=null;if(s){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),n.prepend(d),r=()=>{d.remove(),n.removeEventListener("input",r),r=null},n.addEventListener("input",r)}const a=d=>{const p=d?"value":"textContent",{options:g,multiple:f}=n;return f?Array.prototype.filter.call(g,v=>v.selected).map(v=>v[p]):g.selectedIndex===-1?null:g[g.selectedIndex][p]};let o=a(!1);const c=d=>{const p=d.target.options;return Array.prototype.map.call(p,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",d=>{const p={value(g){r==null||r();const f=g.detail.value,v=new Set(Array.isArray(f)?f:[f]);for(const b of n.options)b.selected=v.has(b.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(g){n.multiple=!0},remove(g){const f=n.options,v=g.detail.remove;f[v].selected=!1,n.remove(v),f.length>0&&Array.prototype.findIndex.call(f,_=>_.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:a(!0),items:c(g)}),o=a(!1)},clear(g){for(;n.length!==0;)n.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(g){const{index:f,displayValue:v,exportValue:b}=g.detail.insert,_=n.children[f],y=document.createElement("option");y.textContent=v,y.value=b,_?_.before(y):n.append(y),e.setValue(t,{value:a(!0),items:c(g)}),o=a(!1)},items(g){const{items:f}=g.detail;for(;n.length!==0;)n.remove(0);for(const v of f){const{displayValue:b,exportValue:_}=v,y=document.createElement("option");y.textContent=b,y.value=_,n.append(y)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(g)}),o=a(!1)},indices(g){const f=new Set(g.detail.indices);for(const v of g.target.options)v.selected=f.has(v.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(p,d)}),n.addEventListener("input",d=>{var f;const p=a(!0),g=a(!1);e.setValue(t,{value:p}),d.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:g,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):n.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class b2 extends wi{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:wi._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new v_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${J2}${i}`).join(",")),this.container}}var Hc,Q1,tg,Wc,zh,ci,_a,Gc,pf,gf,Vc,xa,Js,Sa,mf,La,bf,qh,Uh,He,m1,v2,sv,rv,av,ov,b1,v1,y2;class v_{constructor({container:e,color:t,elements:i,titleObj:n,modificationDate:s,contentsObj:r,richText:a,parent:o,rect:c,parentRect:d,open:p}){O(this,He);O(this,Hc,z(this,He,av).bind(this));O(this,Q1,z(this,He,y2).bind(this));O(this,tg,z(this,He,v1).bind(this));O(this,Wc,z(this,He,b1).bind(this));O(this,zh,null);O(this,ci,null);O(this,_a,null);O(this,Gc,null);O(this,pf,null);O(this,gf,null);O(this,Vc,null);O(this,xa,!1);O(this,Js,null);O(this,Sa,null);O(this,mf,null);O(this,La,null);O(this,bf,null);O(this,qh,null);O(this,Uh,!1);var g;P(this,ci,e),P(this,bf,n),P(this,_a,r),P(this,La,a),P(this,gf,o),P(this,zh,t),P(this,mf,c),P(this,Vc,d),P(this,pf,i),P(this,Gc,em.toDateObject(s)),this.trigger=i.flatMap(f=>f.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",l(this,Wc)),f.addEventListener("mouseenter",l(this,tg)),f.addEventListener("mouseleave",l(this,Q1)),f.classList.add("popupTriggerArea");for(const f of i)(g=f.container)==null||g.addEventListener("keydown",l(this,Hc));l(this,ci).hidden=!0,p&&z(this,He,b1).call(this)}render(){if(l(this,Js))return;const e=P(this,Js,document.createElement("div"));if(e.className="popup",l(this,zh)){const s=e.style.outlineColor=ee.makeHexColor(...l(this,zh));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=ee.makeHexColor(...l(this,zh).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,bf),e.append(t),l(this,Gc)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Gc).valueOf()})),t.append(s)}const n=l(this,He,m1);if(n)Qb.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(l(this,_a));e.append(s)}l(this,ci).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const n=e.split(/(?:\r\n?|\n)/);for(let s=0,r=n.length;s<r;++s){const a=n[s];i.append(document.createTextNode(a)),s<r-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,qh)||P(this,qh,{contentsObj:l(this,_a),richText:l(this,La)}),e&&P(this,Sa,null),t&&(P(this,La,z(this,He,rv).call(this,t)),P(this,_a,null)),(i=l(this,Js))==null||i.remove(),P(this,Js,null)}resetEdited(){var e;l(this,qh)&&({contentsObj:_n(this,_a)._,richText:_n(this,La)._}=l(this,qh),P(this,qh,null),(e=l(this,Js))==null||e.remove(),P(this,Js,null),P(this,Sa,null))}forceHide(){P(this,Uh,this.isVisible),l(this,Uh)&&(l(this,ci).hidden=!0)}maybeShow(){l(this,Uh)&&(l(this,Js)||z(this,He,v1).call(this),P(this,Uh,!1),l(this,ci).hidden=!1)}get isVisible(){return l(this,ci).hidden===!1}}Hc=new WeakMap,Q1=new WeakMap,tg=new WeakMap,Wc=new WeakMap,zh=new WeakMap,ci=new WeakMap,_a=new WeakMap,Gc=new WeakMap,pf=new WeakMap,gf=new WeakMap,Vc=new WeakMap,xa=new WeakMap,Js=new WeakMap,Sa=new WeakMap,mf=new WeakMap,La=new WeakMap,bf=new WeakMap,qh=new WeakMap,Uh=new WeakMap,He=new WeakSet,m1=function(){const e=l(this,La),t=l(this,_a);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,La).html||null},v2=function(){var e,t,i;return((i=(t=(e=l(this,He,m1))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},sv=function(){var e,t,i;return((i=(t=(e=l(this,He,m1))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},rv=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},n={style:{color:l(this,He,sv),fontSize:l(this,He,v2)?`calc(${l(this,He,v2)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:n});return i},av=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,xa))&&z(this,He,b1).call(this)},ov=function(){if(l(this,Sa)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:n,pageY:s}}}=l(this,gf);let r=!!l(this,Vc),a=r?l(this,Vc):l(this,mf);for(const v of l(this,pf))if(!a||ee.intersect(v.data.rect,a)!==null){a=v.data.rect,r=!0;break}const o=ee.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=r?a[2]-a[0]+5:0,p=o[0]+d,g=o[1];P(this,Sa,[100*(p-n)/t,100*(g-s)/i]);const{style:f}=l(this,ci);f.left=`${l(this,Sa)[0]}%`,f.top=`${l(this,Sa)[1]}%`},b1=function(){P(this,xa,!l(this,xa)),l(this,xa)?(z(this,He,v1).call(this),l(this,ci).addEventListener("click",l(this,Wc)),l(this,ci).addEventListener("keydown",l(this,Hc))):(z(this,He,y2).call(this),l(this,ci).removeEventListener("click",l(this,Wc)),l(this,ci).removeEventListener("keydown",l(this,Hc)))},v1=function(){l(this,Js)||this.render(),this.isVisible?l(this,xa)&&l(this,ci).classList.add("focused"):(z(this,He,ov).call(this),l(this,ci).hidden=!1,l(this,ci).style.zIndex=parseInt(l(this,ci).style.zIndex)+1e3)},y2=function(){l(this,ci).classList.remove("focused"),!(l(this,xa)||!this.isVisible)&&(l(this,ci).hidden=!0,l(this,ci).style.zIndex=parseInt(l(this,ci).style.zIndex)-1e3)};class hv extends wi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ye.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var vf;class y_ extends wi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,vf,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:n}=Fo(t.rect),s=this.svgFactory.create(i,n,!0),r=P(this,vf,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,vf)}addHighlightArea(){this.container.classList.add("highlightArea")}}vf=new WeakMap;var yf;class w_ extends wi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,yf,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:n}=Fo(t.rect),s=this.svgFactory.create(i,n,!0),r=t.borderStyle.width,a=P(this,yf,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",i-r),a.setAttribute("height",n-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,yf)}addHighlightArea(){this.container.classList.add("highlightArea")}}yf=new WeakMap;var wf;class A_ extends wi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,wf,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:n}=Fo(t.rect),s=this.svgFactory.create(i,n,!0),r=t.borderStyle.width,a=P(this,wf,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",n/2),a.setAttribute("rx",i/2-r/2),a.setAttribute("ry",n/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,wf)}addHighlightArea(){this.container.classList.add("highlightArea")}}wf=new WeakMap;var Af;class lv extends wi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,Af,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:n,popupRef:s}}=this;if(!i)return this.container;const{width:r,height:a}=Fo(t),o=this.svgFactory.create(r,a,!0);let c=[];for(let p=0,g=i.length;p<g;p+=2){const f=i[p]-t[0],v=t[3]-i[p+1];c.push(`${f},${v}`)}c=c.join(" ");const d=P(this,Af,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",c),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Af)}addHighlightArea(){this.container.classList.add("highlightArea")}}Af=new WeakMap;class __ extends lv{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class x_ extends wi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var _f,Hh,xf,w2;class am extends wi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,xf);O(this,_f,null);O(this,Hh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ye.HIGHLIGHT:ye.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:n,borderStyle:s,popupRef:r}}=this,{transform:a,width:o,height:c}=z(this,xf,w2).call(this,i,t),d=this.svgFactory.create(o,c,!0),p=P(this,_f,this.svgFactory.createElement("svg:g"));d.append(p),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",a);for(let g=0,f=n.length;g<f;g++){const v=this.svgFactory.createElement(this.svgElementName);l(this,Hh).push(v),v.setAttribute("points",n[g].join(",")),p.append(v)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:n,rect:s}=t,r=l(this,_f);if(i>=0&&r.setAttribute("stroke-width",i||1),n)for(let a=0,o=l(this,Hh).length;a<o;a++)l(this,Hh)[a].setAttribute("points",n[a].join(","));if(s){const{transform:a,width:o,height:c}=z(this,xf,w2).call(this,this.data.rotation,s);r.parentElement.setAttribute("viewBox",`0 0 ${o} ${c}`),r.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,Hh)}addHighlightArea(){this.container.classList.add("highlightArea")}}_f=new WeakMap,Hh=new WeakMap,xf=new WeakSet,w2=function(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class cv extends wi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ye.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class S_ extends wi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class L_ extends wi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class k_ extends wi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class uv extends wi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ye.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Sf,Lf,A2;class E_ extends wi{constructor(t){var n;super(t,{isRenderable:!0});O(this,Lf);O(this,Sf,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let n;i.hasAppearance||i.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),n.addEventListener("dblclick",z(this,Lf,A2).bind(this)),P(this,Sf,n);const{isMac:s}=Cn.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(s?r.metaKey:r.ctrlKey)&&z(this,Lf,A2).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return l(this,Sf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sf=new WeakMap,Lf=new WeakSet,A2=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var kf,Wh,Gh,Ef,pl,dv,_2;class C_{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:n,page:s,viewport:r,structTreeLayer:a}){O(this,pl);O(this,kf,null);O(this,Wh,null);O(this,Gh,new Map);O(this,Ef,null);this.div=e,P(this,kf,t),P(this,Wh,i),P(this,Ef,a||null),this.page=s,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return l(this,Gh).size>0}async render(e){var r;const{annotations:t}=e,i=this.div;ul(i,this.viewport);const n=new Map,s={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new rm,annotationStorage:e.annotationStorage||new nm,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const o=a.annotationType===Pi.POPUP;if(o){const p=n.get(a.id);if(!p)continue;s.elements=p}else{const{width:p,height:g}=Fo(a.rect);if(p<=0||g<=0)continue}s.data=a;const c=u_.create(s);if(!c.isRenderable)continue;if(!o&&a.popupRef){const p=n.get(a.popupRef);p?p.push(c):n.set(a.popupRef,[c])}const d=c.render();a.hidden&&(d.style.visibility="hidden"),await z(this,pl,dv).call(this,d,a.id),c._isEditable&&(l(this,Gh).set(c.data.id,c),(r=this._annotationEditorUIManager)==null||r.renderAnnotationElement(c))}z(this,pl,_2).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,ul(t,{rotation:e.rotation}),z(this,pl,_2).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Gh).values())}getEditableAnnotation(e){return l(this,Gh).get(e)}}kf=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,Ef=new WeakMap,pl=new WeakSet,dv=async function(e,t){var r,a;const i=e.firstChild||e,n=i.id=`${J2}${t}`,s=await((r=l(this,Ef))==null?void 0:r.getAriaAttributes(n));if(s)for(const[o,c]of s)i.setAttribute(o,c);this.div.append(e),(a=l(this,kf))==null||a.moveElementInDOM(this.div,e,i,!1)},_2=function(){if(!l(this,Wh))return;const e=this.div;for(const[t,i]of l(this,Wh)){const n=e.querySelector(`[data-annotation-id="${t}"]`);if(!n)continue;i.className="annotationContent";const{firstChild:s}=n;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):n.append(i)}l(this,Wh).clear()};const Yp=/\r\n?|\n/g;var Qs,is,Cf,Vh,ns,Ei,fv,pv,gv,y1,Ma,w1,A1,mv,S2,bv;const Ke=class Ke extends ai{constructor(t){super({...t,name:"freeTextEditor"});O(this,Ei);O(this,Qs);O(this,is,"");O(this,Cf,`${this.id}-editor`);O(this,Vh,null);O(this,ns);P(this,Qs,t.color||Ke._defaultColor||ai._defaultLineColor),P(this,ns,t.fontSize||Ke._defaultFontSize)}static get _keyboardManager(){const t=Ke.prototype,i=r=>r.isEmpty(),n=dl.TRANSLATE_SMALL,s=dl.TRANSLATE_BIG;return xe(this,"_keyboardManager",new Yf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(t,i){ai.initialize(t,i);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Le.FREETEXT_SIZE:Ke._defaultFontSize=i;break;case Le.FREETEXT_COLOR:Ke._defaultColor=i;break}}updateParams(t,i){switch(t){case Le.FREETEXT_SIZE:z(this,Ei,fv).call(this,i);break;case Le.FREETEXT_COLOR:z(this,Ei,pv).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Le.FREETEXT_SIZE,Ke._defaultFontSize],[Le.FREETEXT_COLOR,Ke._defaultColor||ai._defaultLineColor]]}get propertiesToUpdate(){return[[Le.FREETEXT_SIZE,l(this,ns)],[Le.FREETEXT_COLOR,l(this,Qs)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ke._internalPadding*t,-(Ke._internalPadding+l(this,ns))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ye.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),P(this,Vh,new AbortController);const t=this._uiManager.combinedSignal(l(this,Vh));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Cf)),this._isDraggable=!0,(t=l(this,Vh))==null||t.abort(),P(this,Vh,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var i;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,is),i=P(this,is,z(this,Ei,gv).call(this).trimEnd());if(t===i)return;const n=s=>{if(P(this,is,s),!s){this.remove();return}z(this,Ei,A1).call(this),this._uiManager.rebuild(this),z(this,Ei,y1).call(this)};this.addCommands({cmd:()=>{n(i)},undo:()=>{n(t)},mustExec:!1}),z(this,Ei,y1).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ke._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Cf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${l(this,ns)}px * var(--scale-factor))`,n.color=l(this,Qs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),F1(this,this.div,["dblclick","keydown"]),this.width){const[s,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,c]=this.getInitialTranslation();[o,c]=this.pageTranslationToScreen(o,c);const[d,p]=this.pageDimensions,[g,f]=this.pageTranslation;let v,b;switch(this.rotation){case 0:v=t+(a[0]-g)/d,b=i+this.height-(a[1]-f)/p;break;case 90:v=t+(a[0]-g)/d,b=i-(a[1]-f)/p,[o,c]=[c,-o];break;case 180:v=t-this.width+(a[0]-g)/d,b=i-(a[1]-f)/p,[o,c]=[-o,-c];break;case 270:v=t+(a[0]-g-this.height*p)/d,b=i+(a[1]-f-this.width*d)/p,[o,c]=[-c,o];break}this.setAt(v*s,b*r,o,c)}else this.setAt(t*s,i*r,this.width*s,this.height*r);z(this,Ei,A1).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var v,b,_;const i=t.clipboardData||window.clipboardData,{types:n}=i;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const s=z(v=Ke,Ma,S2).call(v,i.getData("text")||"").replaceAll(Yp,`
`);if(!s)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const a=r.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:o,startOffset:c}=a,d=[],p=[];if(o.nodeType===Node.TEXT_NODE){const y=o.parentElement;if(p.push(o.nodeValue.slice(c).replaceAll(Yp,"")),y!==this.editorDiv){let x=d;for(const C of this.editorDiv.childNodes){if(C===y){x=p;continue}x.push(z(b=Ke,Ma,w1).call(b,C))}}d.push(o.nodeValue.slice(0,c).replaceAll(Yp,""))}else if(o===this.editorDiv){let y=d,x=0;for(const C of this.editorDiv.childNodes)x++===c&&(y=p),y.push(z(_=Ke,Ma,w1).call(_,C))}P(this,is,`${d.join(`
`)}${s}${p.join(`
`)}`),z(this,Ei,A1).call(this);const g=new Range;let f=d.reduce((y,x)=>y+x.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const x=y.nodeValue.length;if(f<=x){g.setStart(y,f),g.setEnd(y,f);break}f-=x}r.removeAllRanges(),r.addRange(g)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,n){var a;let s=null;if(t instanceof hv){const{data:{defaultAppearanceData:{fontSize:o,fontColor:c},rect:d,rotation:p,id:g,popupRef:f},textContent:v,textPosition:b,parent:{page:{pageNumber:_}}}=t;if(!v||v.length===0)return null;s=t={annotationType:ye.FREETEXT,color:Array.from(c),fontSize:o,value:v.join(`
`),position:b,pageIndex:_-1,rect:d.slice(0),rotation:p,id:g,deleted:!1,popupRef:f}}const r=await super.deserialize(t,i,n);return P(r,ns,t.fontSize),P(r,Qs,ee.makeHexColor(...t.color)),P(r,is,z(a=Ke,Ma,S2).call(a,t.value)),r.annotationElementId=t.id||null,r._initialData=s,r}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ke._internalPadding*this.parentScale,n=this.getRect(i,i),s=ai._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Qs)),r={annotationType:ye.FREETEXT,color:s,fontSize:l(this,ns),value:z(this,Ei,mv).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?r:this.annotationElementId&&!z(this,Ei,bv).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:n}=i;n.fontSize=`calc(${l(this,ns)}px * var(--scale-factor))`,n.color=l(this,Qs),i.replaceChildren();for(const r of l(this,is).split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),i.append(a)}const s=Ke._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:l(this,is)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Qs=new WeakMap,is=new WeakMap,Cf=new WeakMap,Vh=new WeakMap,ns=new WeakMap,Ei=new WeakSet,fv=function(t){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-l(this,ns))*this.parentScale),P(this,ns,s),z(this,Ei,y1).call(this)},n=l(this,ns);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},pv=function(t){const i=s=>{P(this,Qs,this.editorDiv.style.color=s)},n=l(this,Qs);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},gv=function(){var n;const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(z(n=Ke,Ma,w1).call(n,s)),i=s);return t.join(`
`)},y1=function(){const[t,i]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:r}=this,a=r.style.display,o=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",s.div.append(this.div),n=r.getBoundingClientRect(),r.remove(),r.style.display=a,r.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/i):(this.width=n.height/t,this.height=n.width/i),this.fixAndSetPosition()},Ma=new WeakSet,w1=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Yp,"")},A1=function(){if(this.editorDiv.replaceChildren(),!!l(this,is))for(const t of l(this,is).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},mv=function(){return l(this,is).replaceAll(" "," ")},S2=function(t){return t.replaceAll(" "," ")},bv=function(t){const{value:i,fontSize:n,color:s,pageIndex:r}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==n||t.color.some((a,o)=>a!==s[o])||t.pageIndex!==r},O(Ke,Ma),re(Ke,"_freeTextDefaultContent",""),re(Ke,"_internalPadding",0),re(Ke,"_defaultColor",null),re(Ke,"_defaultFontSize",10),re(Ke,"_type","freetext"),re(Ke,"_editorType",ye.FREETEXT);let x2=Ke;class Xt{toSVGPath(){$e("Abstract method `toSVGPath` must be implemented.")}get box(){$e("Abstract getter `box` must be implemented.")}serialize(e,t){$e("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,n,s,r){r||(r=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a]*n,r[a+1]=i+e[a+1]*s;return r}static _rescaleAndSwap(e,t,i,n,s,r){r||(r=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a+1]*n,r[a+1]=i+e[a]*s;return r}static _translate(e,t,i,n){n||(n=new Float32Array(e.length));for(let s=0,r=e.length;s<r;s+=2)n[s]=t+e[s],n[s+1]=i+e[s+1];return n}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,n,s){switch(s){case 90:return[1-t/i,e/n];case 180:return[1-e/i,1-t/n];case 270:return[t/i,1-e/n];default:return[e/i,t/n]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,n,s,r){return[(e+5*i)/6,(t+5*n)/6,(5*i+s)/6,(5*n+r)/6,(i+s)/2,(n+r)/2]}}re(Xt,"PRECISION",1e-4);var ss,tr,$c,Xc,Fr,_e,$h,Xh,Nf,Pf,Yc,Kc,_o,If,eg,ig,Fi,ld,vv,yv,wv,Av,_v,xv;const oa=class oa{constructor({x:e,y:t},i,n,s,r,a=0){O(this,Fi);O(this,ss);O(this,tr,[]);O(this,$c);O(this,Xc);O(this,Fr,[]);O(this,_e,new Float32Array(18));O(this,$h);O(this,Xh);O(this,Nf);O(this,Pf);O(this,Yc);O(this,Kc);O(this,_o,[]);P(this,ss,i),P(this,Kc,s*n),P(this,Xc,r),l(this,_e).set([NaN,NaN,NaN,NaN,e,t],6),P(this,$c,a),P(this,Pf,l(oa,If)*n),P(this,Nf,l(oa,ig)*n),P(this,Yc,n),l(this,_o).push(e,t)}isEmpty(){return isNaN(l(this,_e)[8])}add({x:e,y:t}){var X;P(this,$h,e),P(this,Xh,t);const[i,n,s,r]=l(this,ss);let[a,o,c,d]=l(this,_e).subarray(8,12);const p=e-c,g=t-d,f=Math.hypot(p,g);if(f<l(this,Nf))return!1;const v=f-l(this,Pf),b=v/f,_=b*p,y=b*g;let x=a,C=o;a=c,o=d,c+=_,d+=y,(X=l(this,_o))==null||X.push(e,t);const I=-y/v,F=_/v,K=I*l(this,Kc),q=F*l(this,Kc);return l(this,_e).set(l(this,_e).subarray(2,8),0),l(this,_e).set([c+K,d+q],4),l(this,_e).set(l(this,_e).subarray(14,18),12),l(this,_e).set([c-K,d-q],16),isNaN(l(this,_e)[6])?(l(this,Fr).length===0&&(l(this,_e).set([a+K,o+q],2),l(this,Fr).push(NaN,NaN,NaN,NaN,(a+K-i)/s,(o+q-n)/r),l(this,_e).set([a-K,o-q],14),l(this,tr).push(NaN,NaN,NaN,NaN,(a-K-i)/s,(o-q-n)/r)),l(this,_e).set([x,C,a,o,c,d],6),!this.isEmpty()):(l(this,_e).set([x,C,a,o,c,d],6),Math.abs(Math.atan2(C-o,x-a)-Math.atan2(y,_))<Math.PI/2?([a,o,c,d]=l(this,_e).subarray(2,6),l(this,Fr).push(NaN,NaN,NaN,NaN,((a+c)/2-i)/s,((o+d)/2-n)/r),[a,o,x,C]=l(this,_e).subarray(14,18),l(this,tr).push(NaN,NaN,NaN,NaN,((x+a)/2-i)/s,((C+o)/2-n)/r),!0):([x,C,a,o,c,d]=l(this,_e).subarray(0,6),l(this,Fr).push(((x+5*a)/6-i)/s,((C+5*o)/6-n)/r,((5*a+c)/6-i)/s,((5*o+d)/6-n)/r,((a+c)/2-i)/s,((o+d)/2-n)/r),[c,d,a,o,x,C]=l(this,_e).subarray(12,18),l(this,tr).push(((x+5*a)/6-i)/s,((C+5*o)/6-n)/r,((5*a+c)/6-i)/s,((5*o+d)/6-n)/r,((a+c)/2-i)/s,((o+d)/2-n)/r),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Fr),t=l(this,tr);if(isNaN(l(this,_e)[6])&&!this.isEmpty())return z(this,Fi,vv).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let n=6;n<e.length;n+=6)isNaN(e[n])?i.push(`L${e[n+4]} ${e[n+5]}`):i.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);z(this,Fi,wv).call(this,i);for(let n=t.length-6;n>=6;n-=6)isNaN(t[n])?i.push(`L${t[n+4]} ${t[n+5]}`):i.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);return z(this,Fi,yv).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,n,s,r){return new Sv(e,t,i,n,s,r)}getOutlines(){var p;const e=l(this,Fr),t=l(this,tr),i=l(this,_e),[n,s,r,a]=l(this,ss),o=new Float32Array((((p=l(this,_o))==null?void 0:p.length)??0)+2);for(let g=0,f=o.length-2;g<f;g+=2)o[g]=(l(this,_o)[g]-n)/r,o[g+1]=(l(this,_o)[g+1]-s)/a;if(o[o.length-2]=(l(this,$h)-n)/r,o[o.length-1]=(l(this,Xh)-s)/a,isNaN(i[6])&&!this.isEmpty())return z(this,Fi,Av).call(this,o);const c=new Float32Array(l(this,Fr).length+24+l(this,tr).length);let d=e.length;for(let g=0;g<d;g+=2){if(isNaN(e[g])){c[g]=c[g+1]=NaN;continue}c[g]=e[g],c[g+1]=e[g+1]}d=z(this,Fi,xv).call(this,c,d);for(let g=t.length-6;g>=6;g-=6)for(let f=0;f<6;f+=2){if(isNaN(t[g+f])){c[d]=c[d+1]=NaN,d+=2;continue}c[d]=t[g+f],c[d+1]=t[g+f+1],d+=2}return z(this,Fi,_v).call(this,c,d),this.newFreeDrawOutline(c,o,l(this,ss),l(this,Yc),l(this,$c),l(this,Xc))}};ss=new WeakMap,tr=new WeakMap,$c=new WeakMap,Xc=new WeakMap,Fr=new WeakMap,_e=new WeakMap,$h=new WeakMap,Xh=new WeakMap,Nf=new WeakMap,Pf=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,_o=new WeakMap,If=new WeakMap,eg=new WeakMap,ig=new WeakMap,Fi=new WeakSet,ld=function(){const e=l(this,_e).subarray(4,6),t=l(this,_e).subarray(16,18),[i,n,s,r]=l(this,ss);return[(l(this,$h)+(e[0]-t[0])/2-i)/s,(l(this,Xh)+(e[1]-t[1])/2-n)/r,(l(this,$h)+(t[0]-e[0])/2-i)/s,(l(this,Xh)+(t[1]-e[1])/2-n)/r]},vv=function(){const[e,t,i,n]=l(this,ss),[s,r,a,o]=z(this,Fi,ld).call(this);return`M${(l(this,_e)[2]-e)/i} ${(l(this,_e)[3]-t)/n} L${(l(this,_e)[4]-e)/i} ${(l(this,_e)[5]-t)/n} L${s} ${r} L${a} ${o} L${(l(this,_e)[16]-e)/i} ${(l(this,_e)[17]-t)/n} L${(l(this,_e)[14]-e)/i} ${(l(this,_e)[15]-t)/n} Z`},yv=function(e){const t=l(this,tr);e.push(`L${t[4]} ${t[5]} Z`)},wv=function(e){const[t,i,n,s]=l(this,ss),r=l(this,_e).subarray(4,6),a=l(this,_e).subarray(16,18),[o,c,d,p]=z(this,Fi,ld).call(this);e.push(`L${(r[0]-t)/n} ${(r[1]-i)/s} L${o} ${c} L${d} ${p} L${(a[0]-t)/n} ${(a[1]-i)/s}`)},Av=function(e){const t=l(this,_e),[i,n,s,r]=l(this,ss),[a,o,c,d]=z(this,Fi,ld).call(this),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-i)/s,(t[3]-n)/r,NaN,NaN,NaN,NaN,(t[4]-i)/s,(t[5]-n)/r,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(t[16]-i)/s,(t[17]-n)/r,NaN,NaN,NaN,NaN,(t[14]-i)/s,(t[15]-n)/r],0),this.newFreeDrawOutline(p,e,l(this,ss),l(this,Yc),l(this,$c),l(this,Xc))},_v=function(e,t){const i=l(this,tr);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},xv=function(e,t){const i=l(this,_e).subarray(4,6),n=l(this,_e).subarray(16,18),[s,r,a,o]=l(this,ss),[c,d,p,g]=z(this,Fi,ld).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-r)/o,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(n[0]-s)/a,(n[1]-r)/o],t),t+=24},O(oa,If,8),O(oa,eg,2),O(oa,ig,l(oa,If)+l(oa,eg));let O1=oa;var Zc,Yh,ka,Tf,rs,Rf,mi,ng,Lv;class Sv extends Xt{constructor(t,i,n,s,r,a){super();O(this,ng);O(this,Zc);O(this,Yh,new Float32Array(4));O(this,ka);O(this,Tf);O(this,rs);O(this,Rf);O(this,mi);P(this,mi,t),P(this,rs,i),P(this,Zc,n),P(this,Rf,s),P(this,ka,r),P(this,Tf,a),this.lastPoint=[NaN,NaN],z(this,ng,Lv).call(this,a);const[o,c,d,p]=l(this,Yh);for(let g=0,f=t.length;g<f;g+=2)t[g]=(t[g]-o)/d,t[g+1]=(t[g+1]-c)/p;for(let g=0,f=i.length;g<f;g+=2)i[g]=(i[g]-o)/d,i[g+1]=(i[g+1]-c)/p}toSVGPath(){const t=[`M${l(this,mi)[4]} ${l(this,mi)[5]}`];for(let i=6,n=l(this,mi).length;i<n;i+=6){if(isNaN(l(this,mi)[i])){t.push(`L${l(this,mi)[i+4]} ${l(this,mi)[i+5]}`);continue}t.push(`C${l(this,mi)[i]} ${l(this,mi)[i+1]} ${l(this,mi)[i+2]} ${l(this,mi)[i+3]} ${l(this,mi)[i+4]} ${l(this,mi)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,n,s],r){const a=n-t,o=s-i;let c,d;switch(r){case 0:c=Xt._rescale(l(this,mi),t,s,a,-o),d=Xt._rescale(l(this,rs),t,s,a,-o);break;case 90:c=Xt._rescaleAndSwap(l(this,mi),t,i,a,o),d=Xt._rescaleAndSwap(l(this,rs),t,i,a,o);break;case 180:c=Xt._rescale(l(this,mi),n,i,-a,o),d=Xt._rescale(l(this,rs),n,i,-a,o);break;case 270:c=Xt._rescaleAndSwap(l(this,mi),n,s,-a,-o),d=Xt._rescaleAndSwap(l(this,rs),n,s,-a,-o);break}return{outline:Array.from(c),points:[Array.from(d)]}}get box(){return l(this,Yh)}newOutliner(t,i,n,s,r,a=0){return new O1(t,i,n,s,r,a)}getNewOutline(t,i){const[n,s,r,a]=l(this,Yh),[o,c,d,p]=l(this,Zc),g=r*d,f=a*p,v=n*d+o,b=s*p+c,_=this.newOutliner({x:l(this,rs)[0]*g+v,y:l(this,rs)[1]*f+b},l(this,Zc),l(this,Rf),t,l(this,Tf),i??l(this,ka));for(let y=2;y<l(this,rs).length;y+=2)_.add({x:l(this,rs)[y]*g+v,y:l(this,rs)[y+1]*f+b});return _.getOutlines()}}Zc=new WeakMap,Yh=new WeakMap,ka=new WeakMap,Tf=new WeakMap,rs=new WeakMap,Rf=new WeakMap,mi=new WeakMap,ng=new WeakSet,Lv=function(t){const i=l(this,mi);let n=i[4],s=i[5],r=n,a=s,o=n,c=s,d=n,p=s;const g=t?Math.max:Math.min;for(let v=6,b=i.length;v<b;v+=6){if(isNaN(i[v]))r=Math.min(r,i[v+4]),a=Math.min(a,i[v+5]),o=Math.max(o,i[v+4]),c=Math.max(c,i[v+5]),p<i[v+5]?(d=i[v+4],p=i[v+5]):p===i[v+5]&&(d=g(d,i[v+4]));else{const _=ee.bezierBoundingBox(n,s,...i.slice(v,v+6));r=Math.min(r,_[0]),a=Math.min(a,_[1]),o=Math.max(o,_[2]),c=Math.max(c,_[3]),p<_[3]?(d=_[2],p=_[3]):p===_[3]&&(d=g(d,_[2]))}n=i[v+4],s=i[v+5]}const f=l(this,Yh);f[0]=r-l(this,ka),f[1]=a-l(this,ka),f[2]=o-r+2*l(this,ka),f[3]=c-a+2*l(this,ka),this.lastPoint=[d,p]};var Ff,Mf,xo,er,Pn,kv,_1,Ev,Cv,k2;class L2{constructor(e,t=0,i=0,n=!0){O(this,Pn);O(this,Ff);O(this,Mf);O(this,xo,[]);O(this,er,[]);let s=1/0,r=-1/0,a=1/0,o=-1/0;const d=10**-4;for(const{x:y,y:x,width:C,height:I}of e){const F=Math.floor((y-t)/d)*d,K=Math.ceil((y+C+t)/d)*d,q=Math.floor((x-t)/d)*d,U=Math.ceil((x+I+t)/d)*d,X=[F,q,U,!0],rt=[K,q,U,!1];l(this,xo).push(X,rt),s=Math.min(s,F),r=Math.max(r,K),a=Math.min(a,q),o=Math.max(o,U)}const p=r-s+2*i,g=o-a+2*i,f=s-i,v=a-i,b=l(this,xo).at(n?-1:-2),_=[b[0],b[2]];for(const y of l(this,xo)){const[x,C,I]=y;y[0]=(x-f)/p,y[1]=(C-v)/g,y[2]=(I-v)/g}P(this,Ff,new Float32Array([f,v,p,g])),P(this,Mf,_)}getOutlines(){l(this,xo).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,xo))t[3]?(e.push(...z(this,Pn,k2).call(this,t)),z(this,Pn,Ev).call(this,t)):(z(this,Pn,Cv).call(this,t),e.push(...z(this,Pn,k2).call(this,t)));return z(this,Pn,kv).call(this,e)}}Ff=new WeakMap,Mf=new WeakMap,xo=new WeakMap,er=new WeakMap,Pn=new WeakSet,kv=function(e){const t=[],i=new Set;for(const r of e){const[a,o,c]=r;t.push([a,o,r],[a,c,r])}t.sort((r,a)=>r[1]-a[1]||r[0]-a[0]);for(let r=0,a=t.length;r<a;r+=2){const o=t[r][2],c=t[r+1][2];o.push(c),c.push(o),i.add(o),i.add(c)}const n=[];let s;for(;i.size>0;){const r=i.values().next().value;let[a,o,c,d,p]=r;i.delete(r);let g=a,f=o;for(s=[a,c],n.push(s);;){let v;if(i.has(d))v=d;else if(i.has(p))v=p;else break;i.delete(v),[a,o,c,d,p]=v,g!==a&&(s.push(g,f,a,f===o?o:c),g=a),f=f===o?c:o}s.push(g,f)}return new N_(n,l(this,Ff),l(this,Mf))},_1=function(e){const t=l(this,er);let i=0,n=t.length-1;for(;i<=n;){const s=i+n>>1,r=t[s][0];if(r===e)return s;r<e?i=s+1:n=s-1}return n+1},Ev=function([,e,t]){const i=z(this,Pn,_1).call(this,e);l(this,er).splice(i,0,[e,t])},Cv=function([,e,t]){const i=z(this,Pn,_1).call(this,e);for(let n=i;n<l(this,er).length;n++){const[s,r]=l(this,er)[n];if(s!==e)break;if(s===e&&r===t){l(this,er).splice(n,1);return}}for(let n=i-1;n>=0;n--){const[s,r]=l(this,er)[n];if(s!==e)break;if(s===e&&r===t){l(this,er).splice(n,1);return}}},k2=function(e){const[t,i,n]=e,s=[[t,i,n]],r=z(this,Pn,_1).call(this,n);for(let a=0;a<r;a++){const[o,c]=l(this,er)[a];for(let d=0,p=s.length;d<p;d++){const[,g,f]=s[d];if(!(c<=g||f<=o)){if(g>=o){if(f>c)s[d][1]=c;else{if(p===1)return[];s.splice(d,1),d--,p--}continue}s[d][2]=o,f>c&&s.push([t,c,f])}}}return s};var Df,Jc;class N_ extends Xt{constructor(t,i,n){super();O(this,Df);O(this,Jc);P(this,Jc,t),P(this,Df,i),this.lastPoint=n}toSVGPath(){const t=[];for(const i of l(this,Jc)){let[n,s]=i;t.push(`M${n} ${s}`);for(let r=2;r<i.length;r+=2){const a=i[r],o=i[r+1];a===n?(t.push(`V${o}`),s=o):o===s&&(t.push(`H${a}`),n=a)}t.push("Z")}return t.join(" ")}serialize([t,i,n,s],r){const a=[],o=n-t,c=s-i;for(const d of l(this,Jc)){const p=new Array(d.length);for(let g=0;g<d.length;g+=2)p[g]=t+d[g]*o,p[g+1]=s-d[g+1]*c;a.push(p)}return a}get box(){return l(this,Df)}get classNamesForOutlining(){return["highlightOutline"]}}Df=new WeakMap,Jc=new WeakMap;class E2 extends O1{newFreeDrawOutline(e,t,i,n,s,r){return new P_(e,t,i,n,s,r)}}class P_ extends Sv{newOutliner(e,t,i,n,s,r=0){return new E2(e,t,i,n,s,r)}}var ir,Kh,Qc,Ri,Of,tu,Bf,jf,So,nr,eu,zf,Ue,C2,N2,P2,eh,Nv,to;const zn=class zn{constructor({editor:e=null,uiManager:t=null}){O(this,Ue);O(this,ir,null);O(this,Kh,null);O(this,Qc);O(this,Ri,null);O(this,Of,!1);O(this,tu,!1);O(this,Bf,null);O(this,jf);O(this,So,null);O(this,nr,null);O(this,eu);var i;e?(P(this,tu,!1),P(this,eu,Le.HIGHLIGHT_COLOR),P(this,Bf,e)):(P(this,tu,!0),P(this,eu,Le.HIGHLIGHT_DEFAULT_COLOR)),P(this,nr,(e==null?void 0:e._uiManager)||t),P(this,jf,l(this,nr)._eventBus),P(this,Qc,(e==null?void 0:e.color)||((i=l(this,nr))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(zn,zf)||P(zn,zf,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return xe(this,"_keyboardManager",new Yf([[["Escape","mac+Escape"],zn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],zn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],zn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],zn.prototype._moveToPrevious],[["Home","mac+Home"],zn.prototype._moveToBeginning],[["End","mac+End"],zn.prototype._moveToEnd]]))}renderButton(){const e=P(this,ir,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,nr)._signal;e.addEventListener("click",z(this,Ue,eh).bind(this),{signal:t}),e.addEventListener("keydown",z(this,Ue,P2).bind(this),{signal:t});const i=P(this,Kh,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,Qc),e.append(i),e}renderMainDropdown(){const e=P(this,Ri,z(this,Ue,C2).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,ir)){z(this,Ue,eh).call(this,e);return}const t=e.target.getAttribute("data-color");t&&z(this,Ue,N2).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,Ue,to)){z(this,Ue,eh).call(this,e);return}if(e.target===l(this,ir)){(t=l(this,Ri).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,Ri))==null?void 0:t.firstChild)||e.target===l(this,ir)){l(this,Ue,to)&&this._hideDropdownFromKeyboard();return}l(this,Ue,to)||z(this,Ue,eh).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,Ue,to)){z(this,Ue,eh).call(this,e);return}(t=l(this,Ri).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Ue,to)){z(this,Ue,eh).call(this,e);return}(t=l(this,Ri).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Ri))==null||e.classList.add("hidden"),(t=l(this,So))==null||t.abort(),P(this,So,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,tu)){if(!l(this,Ue,to)){(e=l(this,Bf))==null||e.unselect();return}this.hideDropdown(),l(this,ir).focus({preventScroll:!0,focusVisible:l(this,Of)})}}updateColor(e){if(l(this,Kh)&&(l(this,Kh).style.backgroundColor=e),!l(this,Ri))return;const t=l(this,nr).highlightColors.values();for(const i of l(this,Ri).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,ir))==null||e.remove(),P(this,ir,null),P(this,Kh,null),(t=l(this,Ri))==null||t.remove(),P(this,Ri,null)}};ir=new WeakMap,Kh=new WeakMap,Qc=new WeakMap,Ri=new WeakMap,Of=new WeakMap,tu=new WeakMap,Bf=new WeakMap,jf=new WeakMap,So=new WeakMap,nr=new WeakMap,eu=new WeakMap,zf=new WeakMap,Ue=new WeakSet,C2=function(){const e=document.createElement("div"),t=l(this,nr)._signal;e.addEventListener("contextmenu",or,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,n]of l(this,nr).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=i,s.setAttribute("data-l10n-id",l(zn,zf)[i]);const r=document.createElement("span");s.append(r),r.className="swatch",r.style.backgroundColor=n,s.setAttribute("aria-selected",n===l(this,Qc)),s.addEventListener("click",z(this,Ue,N2).bind(this,n),{signal:t}),e.append(s)}return e.addEventListener("keydown",z(this,Ue,P2).bind(this),{signal:t}),e},N2=function(e,t){t.stopPropagation(),l(this,jf).dispatch("switchannotationeditorparams",{source:this,type:l(this,eu),value:e})},P2=function(e){zn._keyboardManager.exec(this,e)},eh=function(e){if(l(this,Ue,to)){this.hideDropdown();return}if(P(this,Of,e.detail===0),l(this,So)||(P(this,So,new AbortController),window.addEventListener("pointerdown",z(this,Ue,Nv).bind(this),{signal:l(this,nr).combinedSignal(l(this,So))})),l(this,Ri)){l(this,Ri).classList.remove("hidden");return}const t=P(this,Ri,z(this,Ue,C2).call(this));l(this,ir).append(t)},Nv=function(e){var t;(t=l(this,Ri))!=null&&t.contains(e.target)||this.hideDropdown()},to=function(){return l(this,Ri)&&!l(this,Ri).classList.contains("hidden")},O(zn,zf,null);let B1=zn;var iu,qf,Ea,Zh,nu,Hn,Uf,Hf,Jh,Es,as,Ki,su,Ca,fn,ru,Cs,Wf,ve,I2,x1,Pv,Iv,Tv,T2,ih,Ts,ec,Rv,S1,cd,Fv,Mv,Dv,Ov,Bv;const Fe=class Fe extends ai{constructor(t){super({...t,name:"highlightEditor"});O(this,ve);O(this,iu,null);O(this,qf,0);O(this,Ea);O(this,Zh,null);O(this,nu,null);O(this,Hn,null);O(this,Uf,null);O(this,Hf,0);O(this,Jh,null);O(this,Es,null);O(this,as,null);O(this,Ki,!1);O(this,su,null);O(this,Ca);O(this,fn,null);O(this,ru,"");O(this,Cs);O(this,Wf,"");this.color=t.color||Fe._defaultColor,P(this,Cs,t.thickness||Fe._defaultThickness),P(this,Ca,t.opacity||Fe._defaultOpacity),P(this,Ea,t.boxes||null),P(this,Wf,t.methodOfCreation||""),P(this,ru,t.text||""),this._isDraggable=!1,t.highlightId>-1?(P(this,Ki,!0),z(this,ve,x1).call(this,t),z(this,ve,ih).call(this)):l(this,Ea)&&(P(this,iu,t.anchorNode),P(this,qf,t.anchorOffset),P(this,Uf,t.focusNode),P(this,Hf,t.focusOffset),z(this,ve,I2).call(this),z(this,ve,ih).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Fe.prototype;return xe(this,"_keyboardManager",new Yf([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Ki)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,Cs),methodOfCreation:l(this,Wf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var n;ai.initialize(t,i),Fe._defaultColor||(Fe._defaultColor=((n=i.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case Le.HIGHLIGHT_DEFAULT_COLOR:Fe._defaultColor=i;break;case Le.HIGHLIGHT_THICKNESS:Fe._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,su)}updateParams(t,i){switch(t){case Le.HIGHLIGHT_COLOR:z(this,ve,Pv).call(this,i);break;case Le.HIGHLIGHT_THICKNESS:z(this,ve,Iv).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Le.HIGHLIGHT_DEFAULT_COLOR,Fe._defaultColor],[Le.HIGHLIGHT_THICKNESS,Fe._defaultThickness]]}get propertiesToUpdate(){return[[Le.HIGHLIGHT_COLOR,this.color||Fe._defaultColor],[Le.HIGHLIGHT_THICKNESS,l(this,Cs)||Fe._defaultThickness],[Le.HIGHLIGHT_FREE,l(this,Ki)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(P(this,nu,new B1({editor:this})),t.addColorPicker(l(this,nu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(z(this,ve,cd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,z(this,ve,cd).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){z(this,ve,T2).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(z(this,ve,ih).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let i=!1;this.parent&&!t?z(this,ve,T2).call(this):t&&(z(this,ve,ih).call(this,t),i=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var s,r,a;const{drawLayer:i}=this.parent;let n;l(this,Ki)?(t=(t-this.rotation+360)%360,n=z(s=Fe,Ts,ec).call(s,l(this,Es).box,t)):n=z(r=Fe,Ts,ec).call(r,[this.x,this.y,this.width,this.height],t),i.updateProperties(l(this,as),{bbox:n,root:{"data-main-rotation":t}}),i.updateProperties(l(this,fn),{bbox:z(a=Fe,Ts,ec).call(a,l(this,Hn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();l(this,ru)&&(t.setAttribute("aria-label",l(this,ru)),t.setAttribute("role","mark")),l(this,Ki)?t.classList.add("free"):this.div.addEventListener("keydown",z(this,ve,Rv).bind(this),{signal:this._uiManager._signal});const i=P(this,Jh,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,Zh);const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),F1(this,l(this,Jh),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,fn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,fn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:z(this,ve,S1).call(this,!0);break;case 1:case 3:z(this,ve,S1).call(this,!1);break}}select(){var t;super.select(),l(this,fn)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,fn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),l(this,fn)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,fn),{rootClass:{selected:!1}}),l(this,Ki)||z(this,ve,S1).call(this,!1))}get _mustFixPosition(){return!l(this,Ki)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,as),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,fn),{rootClass:{hidden:!t}}))}static startHighlighting(t,i,{target:n,x:s,y:r}){const{x:a,y:o,width:c,height:d}=n.getBoundingClientRect(),p=new AbortController,g=t.combinedSignal(p),f=v=>{p.abort(),z(this,Ts,Ov).call(this,t,v)};window.addEventListener("blur",f,{signal:g}),window.addEventListener("pointerup",f,{signal:g}),window.addEventListener("pointerdown",ds,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",or,{signal:g}),n.addEventListener("pointermove",z(this,Ts,Dv).bind(this,t),{signal:g}),this._freeHighlight=new E2({x:s,y:r},[a,o,c,d],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,i,n){var b,_,y,x;let s=null;if(t instanceof cv){const{data:{quadPoints:C,rect:I,rotation:F,id:K,color:q,opacity:U,popupRef:X},parent:{page:{pageNumber:rt}}}=t;s=t={annotationType:ye.HIGHLIGHT,color:Array.from(q),opacity:U,quadPoints:C,boxes:null,pageIndex:rt-1,rect:I.slice(0),rotation:F,id:K,deleted:!1,popupRef:X}}else if(t instanceof am){const{data:{inkLists:C,rect:I,rotation:F,id:K,color:q,borderStyle:{rawWidth:U},popupRef:X},parent:{page:{pageNumber:rt}}}=t;s=t={annotationType:ye.HIGHLIGHT,color:Array.from(q),thickness:U,inkLists:C,boxes:null,pageIndex:rt-1,rect:I.slice(0),rotation:F,id:K,deleted:!1,popupRef:X}}const{color:r,quadPoints:a,inkLists:o,opacity:c}=t,d=await super.deserialize(t,i,n);d.color=ee.makeHexColor(...r),P(d,Ca,c||1),o&&P(d,Cs,t.thickness),d.annotationElementId=t.id||null,d._initialData=s;const[p,g]=d.pageDimensions,[f,v]=d.pageTranslation;if(a){const C=P(d,Ea,[]);for(let I=0;I<a.length;I+=8)C.push({x:(a[I]-f)/p,y:1-(a[I+1]-v)/g,width:(a[I+2]-a[I])/p,height:(a[I+1]-a[I+5])/g});z(b=d,ve,I2).call(b),z(_=d,ve,ih).call(_),d.rotate(d.rotation)}else if(o){P(d,Ki,!0);const C=o[0],I={x:C[0]-f,y:g-(C[1]-v)},F=new E2(I,[0,0,p,g],1,l(d,Cs)/2,!0,.001);for(let U=0,X=C.length;U<X;U+=2)I.x=C[U]-f,I.y=g-(C[U+1]-v),F.add(I);const{id:K,clipPathId:q}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:F.toSVGPath()}},!0,!0);z(y=d,ve,x1).call(y,{highlightOutlines:F.getOutlines(),highlightId:K,clipPathId:q}),z(x=d,ve,ih).call(x)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),n=ai._colorManager.convert(this.color),s={annotationType:ye.HIGHLIGHT,color:n,opacity:l(this,Ca),thickness:l(this,Cs),quadPoints:z(this,ve,Fv).call(this),outlines:z(this,ve,Mv).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:z(this,ve,cd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!z(this,ve,Bv).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};iu=new WeakMap,qf=new WeakMap,Ea=new WeakMap,Zh=new WeakMap,nu=new WeakMap,Hn=new WeakMap,Uf=new WeakMap,Hf=new WeakMap,Jh=new WeakMap,Es=new WeakMap,as=new WeakMap,Ki=new WeakMap,su=new WeakMap,Ca=new WeakMap,fn=new WeakMap,ru=new WeakMap,Cs=new WeakMap,Wf=new WeakMap,ve=new WeakSet,I2=function(){const t=new L2(l(this,Ea),.001);P(this,Es,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,Es).box;const i=new L2(l(this,Ea),.0025,.001,this._uiManager.direction==="ltr");P(this,Hn,i.getOutlines());const{lastPoint:n}=l(this,Hn);P(this,su,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},x1=function({highlightOutlines:t,highlightId:i,clipPathId:n}){var p,g;if(P(this,Es,t),P(this,Hn,t.getNewOutline(l(this,Cs)/2+1.5,.0025)),i>=0)P(this,as,i),P(this,Zh,n),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),P(this,fn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Hn).box,path:{d:l(this,Hn).toSVGPath()}},!0));else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,as),{bbox:z(p=Fe,Ts,ec).call(p,l(this,Es).box,(f-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,fn),{bbox:z(g=Fe,Ts,ec).call(g,l(this,Hn).box,f),path:{d:l(this,Hn).toSVGPath()}})}const[r,a,o,c]=t.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=o,this.height=c;break;case 90:{const[f,v]=this.parentDimensions;this.x=a,this.y=1-r,this.width=o*v/f,this.height=c*f/v;break}case 180:this.x=1-r,this.y=1-a,this.width=o,this.height=c;break;case 270:{const[f,v]=this.parentDimensions;this.x=1-a,this.y=r,this.width=o*v/f,this.height=c*f/v;break}}const{lastPoint:d}=l(this,Hn);P(this,su,[(d[0]-r)/o,(d[1]-a)/c])},Pv=function(t){const i=(r,a)=>{var o,c;this.color=r,P(this,Ca,a),(o=this.parent)==null||o.drawLayer.updateProperties(l(this,as),{root:{fill:r,"fill-opacity":a}}),(c=l(this,nu))==null||c.updateColor(r)},n=this.color,s=l(this,Ca);this.addCommands({cmd:i.bind(this,t,Fe._defaultOpacity),undo:i.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Iv=function(t){const i=l(this,Cs),n=s=>{P(this,Cs,s),z(this,ve,Tv).call(this,s)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Tv=function(t){if(!l(this,Ki))return;z(this,ve,x1).call(this,{highlightOutlines:l(this,Es).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)},T2=function(){l(this,as)===null||!this.parent||(this.parent.drawLayer.remove(l(this,as)),P(this,as,null),this.parent.drawLayer.remove(l(this,fn)),P(this,fn,null))},ih=function(t=this.parent){l(this,as)===null&&({id:_n(this,as)._,clipPathId:_n(this,Zh)._}=t.drawLayer.draw({bbox:l(this,Es).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,Ca)},rootClass:{highlight:!0,free:l(this,Ki)},path:{d:l(this,Es).toSVGPath()}},!1,!0),P(this,fn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Ki)},bbox:l(this,Hn).box,path:{d:l(this,Hn).toSVGPath()}},l(this,Ki))),l(this,Jh)&&(l(this,Jh).style.clipPath=l(this,Zh)))},Ts=new WeakSet,ec=function([t,i,n,s],r){switch(r){case 90:return[1-i-s,t,s,n];case 180:return[1-t-n,1-i-s,n,s];case 270:return[i,1-t-n,s,n]}return[t,i,n,s]},Rv=function(t){Fe._keyboardManager.exec(this,t)},S1=function(t){if(!l(this,iu))return;const i=window.getSelection();t?i.setPosition(l(this,iu),l(this,qf)):i.setPosition(l(this,Uf),l(this,Hf))},cd=function(){return l(this,Ki)?this.rotation:0},Fv=function(){if(l(this,Ki))return null;const[t,i]=this.pageDimensions,[n,s]=this.pageTranslation,r=l(this,Ea),a=new Float32Array(r.length*8);let o=0;for(const{x:c,y:d,width:p,height:g}of r){const f=c*t+n,v=(1-d)*i+s;a[o]=a[o+4]=f,a[o+1]=a[o+3]=v,a[o+2]=a[o+6]=f+p*t,a[o+5]=a[o+7]=v-g*i,o+=8}return a},Mv=function(t){return l(this,Es).serialize(t,z(this,ve,cd).call(this))},Dv=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Ov=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Bv=function(t){const{color:i}=this._initialData;return t.color.some((n,s)=>n!==i[s])},O(Fe,Ts),re(Fe,"_defaultColor",null),re(Fe,"_defaultOpacity",1),re(Fe,"_defaultThickness",12),re(Fe,"_type","highlight"),re(Fe,"_editorType",ye.HIGHLIGHT),re(Fe,"_freeHighlightId",-1),re(Fe,"_freeHighlight",null),re(Fe,"_freeHighlightClipId","");let j1=Fe;var Qh;class I_{constructor(){O(this,Qh,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){l(this,Qh)[e]=t}toSVGProperties(){const e=l(this,Qh);return P(this,Qh,Object.create(null)),{root:e}}reset(){P(this,Qh,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){$e("Not implemented")}}Qh=new WeakMap;var os,au,qi,tl,el,Lo,ko,Eo,il,Ne,F2,M2,D2,ud,jv,L1,dd,ic;const Yt=class Yt extends ai{constructor(t){super(t);O(this,Ne);O(this,os,null);O(this,au);re(this,"_drawId",null);P(this,au,t.mustBeCommitted||!1),t.drawOutlines&&(z(this,Ne,F2).call(this,t),z(this,Ne,ud).call(this))}static _mergeSVGProperties(t,i){const n=new Set(Object.keys(t));for(const[s,r]of Object.entries(i))n.has(s)?Object.assign(t[s],r):t[s]=r;return t}static getDefaultDrawingOptions(t){$e("Not implemented")}static get typesMap(){$e("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,i),this._currentParent&&(l(Yt,qi).updateProperty(n,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)t.push([n,i[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[n,s]of this.constructor.typesMap)t.push([n,i[s]]);return t}_updateProperty(t,i,n){const s=this._drawingOptions,r=s[i],a=o=>{var d;s.updateProperty(i,o);const c=l(this,os).updateProperty(i,o);c&&z(this,Ne,dd).call(this,c),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:a.bind(this,n),undo:a.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Yt._mergeSVGProperties(l(this,os).getPathResizingSVGProperties(z(this,Ne,L1).call(this)),{bbox:z(this,Ne,ic).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Yt._mergeSVGProperties(l(this,os).getPathResizedSVGProperties(z(this,Ne,L1).call(this)),{bbox:z(this,Ne,ic).call(this)}))}_onTranslating(t,i){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{bbox:z(this,Ne,ic).call(this,t,i)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Yt._mergeSVGProperties(l(this,os).getPathTranslatedSVGProperties(z(this,Ne,L1).call(this),this.parentDimensions),{bbox:z(this,Ne,ic).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,au)&&(P(this,au,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){z(this,Ne,D2).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(z(this,Ne,ud).call(this),z(this,Ne,dd).call(this,l(this,os).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),z(this,Ne,D2).call(this)):t&&(this._uiManager.addShouldRescale(this),z(this,Ne,ud).call(this,t),i=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Yt._mergeSVGProperties({bbox:z(this,Ne,ic).call(this)},l(this,os).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&z(this,Ne,dd).call(this,l(this,os).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const i=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,i,n,s,r){$e("Not implemented")}static startDrawing(t,i,n,s){var _;const{target:r,offsetX:a,offsetY:o,pointerId:c,pointerType:d}=s;if(l(Yt,ko)&&l(Yt,ko)!==d)return;const{viewport:{rotation:p}}=t,{width:g,height:f}=r.getBoundingClientRect(),v=P(Yt,tl,new AbortController),b=t.combinedSignal(v);if(l(Yt,Lo)||P(Yt,Lo,c),l(Yt,ko)??P(Yt,ko,d),window.addEventListener("pointerup",y=>{var x;l(Yt,Lo)===y.pointerId?this._endDraw(y):(x=l(Yt,Eo))==null||x.delete(y.pointerId)},{signal:b}),window.addEventListener("pointercancel",y=>{var x;l(Yt,Lo)===y.pointerId?this._currentParent.endDrawingSession():(x=l(Yt,Eo))==null||x.delete(y.pointerId)},{signal:b}),window.addEventListener("pointerdown",y=>{l(Yt,ko)===y.pointerType&&((l(Yt,Eo)||P(Yt,Eo,new Set)).add(y.pointerId),l(Yt,qi).isCancellable()&&(l(Yt,qi).removeLastElement(),l(Yt,qi).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",or,{signal:b}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),r.addEventListener("touchmove",y=>{y.timeStamp===l(Yt,il)&&ds(y)},{signal:b}),t.toggleDrawing(),(_=i._editorUndoBar)==null||_.hide(),l(Yt,qi)){t.drawLayer.updateProperties(this._currentDrawId,l(Yt,qi).startNew(a,o,g,f,p));return}i.updateUIForDefaultProperties(this),P(Yt,qi,this.createDrawerInstance(a,o,g,f,p)),P(Yt,el,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(Yt,el).toSVGProperties(),l(Yt,qi).defaultSVGProperties),!0,!1)}static _drawMove(t){var r;if(P(Yt,il,-1),!l(Yt,qi))return;const{offsetX:i,offsetY:n,pointerId:s}=t;if(l(Yt,Lo)===s){if(((r=l(Yt,Eo))==null?void 0:r.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(Yt,qi).add(i,n)),P(Yt,il,t.timeStamp),ds(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,P(Yt,qi,null),P(Yt,el,null),P(Yt,ko,null),P(Yt,il,NaN)),l(Yt,tl)&&(l(Yt,tl).abort(),P(Yt,tl,null),P(Yt,Lo,NaN),P(Yt,Eo,null))}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t&&i.drawLayer.updateProperties(this._currentDrawId,l(Yt,qi).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=l(Yt,qi),s=this._currentDrawId,r=n.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(s,n.setLastElement(r))},undo:()=>{i.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:Le.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Le.DRAW_STEP),!l(Yt,qi).isEmpty()){const{pageDimensions:[n,s],scale:r}=i,a=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(Yt,qi).getOutlines(n*r,s*r,r,this._INNER_MARGIN),drawingOptions:l(Yt,el),mustBeCommitted:!t});return this._cleanup(!0),a}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,n,s,r,a){$e("Not implemented")}static async deserialize(t,i,n){var p,g;const{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:o}}=i.viewport,c=this.deserializeDraw(a,o,s,r,this._INNER_MARGIN,t),d=await super.deserialize(t,i,n);return d.createDrawingOptions(t),z(p=d,Ne,F2).call(p,{drawOutlines:c}),z(g=d,Ne,ud).call(g),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[i,n]=this.pageTranslation,[s,r]=this.pageDimensions;return l(this,os).serialize([i,n,s,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};os=new WeakMap,au=new WeakMap,qi=new WeakMap,tl=new WeakMap,el=new WeakMap,Lo=new WeakMap,ko=new WeakMap,Eo=new WeakMap,il=new WeakMap,Ne=new WeakSet,F2=function({drawOutlines:t,drawId:i,drawingOptions:n}){P(this,os,t),this._drawingOptions||(this._drawingOptions=n),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=z(this,Ne,M2).call(this,t,this.parent),z(this,Ne,dd).call(this,t.box)},M2=function(t,i){const{id:n}=i.drawLayer.draw(Yt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n},D2=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},ud=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=z(this,Ne,M2).call(this,l(this,os),t)}},jv=function([t,i,n,s]){const{parentDimensions:[r,a],rotation:o}=this;switch(o){case 90:return[i,1-t,n*(a/r),s*(r/a)];case 180:return[1-t,1-i,n,s];case 270:return[1-i,t,n*(a/r),s*(r/a)];default:return[t,i,n,s]}},L1=function(){const{x:t,y:i,width:n,height:s,parentDimensions:[r,a],rotation:o}=this;switch(o){case 90:return[1-i,t,n*(r/a),s*(a/r)];case 180:return[1-t,1-i,n,s];case 270:return[i,1-t,n*(r/a),s*(a/r)];default:return[t,i,n,s]}},dd=function(t){if([this.x,this.y,this.width,this.height]=z(this,Ne,jv).call(this,t),this.div){this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)}this._onResized()},ic=function(){const{x:t,y:i,width:n,height:s,rotation:r,parentRotation:a,parentDimensions:[o,c]}=this;switch((r*4+a)/90){case 1:return[1-i-s,t,s,n];case 2:return[1-t-n,1-i-s,n,s];case 3:return[i,1-t-n,s,n];case 4:return[t,i-n*(o/c),s*(c/o),n*(o/c)];case 5:return[1-i,t,n*(o/c),s*(c/o)];case 6:return[1-t-s*(c/o),1-i,s*(c/o),n*(o/c)];case 7:return[i-n*(o/c),1-t-s*(c/o),n*(o/c),s*(c/o)];case 8:return[t-n,i-s,n,s];case 9:return[1-i,t-n,s,n];case 10:return[1-t,1-i,n,s];case 11:return[i-s,1-t,s,n];case 12:return[t-s*(c/o),i,s*(c/o),n*(o/c)];case 13:return[1-i-n*(o/c),t-s*(c/o),n*(o/c),s*(c/o)];case 14:return[1-t,1-i-n*(o/c),s*(c/o),n*(o/c)];case 15:return[i,1-t,n*(o/c),s*(c/o)];default:return[t,i,n,s]}},re(Yt,"_currentDrawId",-1),re(Yt,"_currentParent",null),O(Yt,qi,null),O(Yt,tl,null),O(Yt,el,null),O(Yt,Lo,NaN),O(Yt,ko,null),O(Yt,Eo,null),O(Yt,il,NaN),re(Yt,"_INNER_MARGIN",3);let R2=Yt;var Mr,Ui,Hi,nl,ou,Ln,Zi,Ns,sl,rl,al,hu,k1;class T_{constructor(e,t,i,n,s,r){O(this,hu);O(this,Mr,new Float64Array(6));O(this,Ui);O(this,Hi);O(this,nl);O(this,ou);O(this,Ln);O(this,Zi,"");O(this,Ns,0);O(this,sl,new z1);O(this,rl);O(this,al);P(this,rl,i),P(this,al,n),P(this,nl,s),P(this,ou,r),[e,t]=z(this,hu,k1).call(this,e,t);const a=P(this,Ui,[NaN,NaN,NaN,NaN,e,t]);P(this,Ln,[e,t]),P(this,Hi,[{line:a,points:l(this,Ln)}]),l(this,Mr).set(a,0)}updateProperty(e,t){e==="stroke-width"&&P(this,ou,t)}isEmpty(){return!l(this,Hi)||l(this,Hi).length===0}isCancellable(){return l(this,Ln).length<=10}add(e,t){[e,t]=z(this,hu,k1).call(this,e,t);const[i,n,s,r]=l(this,Mr).subarray(2,6),a=e-s,o=t-r;return Math.hypot(l(this,rl)*a,l(this,al)*o)<=2?null:(l(this,Ln).push(e,t),isNaN(i)?(l(this,Mr).set([s,r,e,t],2),l(this,Ui).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,Mr)[0])&&l(this,Ui).splice(6,6),l(this,Mr).set([i,n,s,r,e,t],0),l(this,Ui).push(...Xt.createBezierPoints(i,n,s,r,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(l(this,Ln).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,n,s){P(this,rl,i),P(this,al,n),P(this,nl,s),[e,t]=z(this,hu,k1).call(this,e,t);const r=P(this,Ui,[NaN,NaN,NaN,NaN,e,t]);P(this,Ln,[e,t]);const a=l(this,Hi).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,Hi).push({line:r,points:l(this,Ln)}),l(this,Mr).set(r,0),P(this,Ns,0),this.toSVGPath(),null}getLastElement(){return l(this,Hi).at(-1)}setLastElement(e){return l(this,Hi)?(l(this,Hi).push(e),P(this,Ui,e.line),P(this,Ln,e.points),P(this,Ns,0),{path:{d:this.toSVGPath()}}):l(this,sl).setLastElement(e)}removeLastElement(){if(!l(this,Hi))return l(this,sl).removeLastElement();l(this,Hi).pop(),P(this,Zi,"");for(let e=0,t=l(this,Hi).length;e<t;e++){const{line:i,points:n}=l(this,Hi)[e];P(this,Ui,i),P(this,Ln,n),P(this,Ns,0),this.toSVGPath()}return{path:{d:l(this,Zi)}}}toSVGPath(){const e=Xt.svgRound(l(this,Ui)[4]),t=Xt.svgRound(l(this,Ui)[5]);if(l(this,Ln).length===2)return P(this,Zi,`${l(this,Zi)} M ${e} ${t} Z`),l(this,Zi);if(l(this,Ln).length<=6){const n=l(this,Zi).lastIndexOf("M");P(this,Zi,`${l(this,Zi).slice(0,n)} M ${e} ${t}`),P(this,Ns,6)}if(l(this,Ln).length===4){const n=Xt.svgRound(l(this,Ui)[10]),s=Xt.svgRound(l(this,Ui)[11]);return P(this,Zi,`${l(this,Zi)} L ${n} ${s}`),P(this,Ns,12),l(this,Zi)}const i=[];l(this,Ns)===0&&(i.push(`M ${e} ${t}`),P(this,Ns,6));for(let n=l(this,Ns),s=l(this,Ui).length;n<s;n+=6){const[r,a,o,c,d,p]=l(this,Ui).slice(n,n+6).map(Xt.svgRound);i.push(`C${r} ${a} ${o} ${c} ${d} ${p}`)}return P(this,Zi,l(this,Zi)+i.join(" ")),P(this,Ns,l(this,Ui).length),l(this,Zi)}getOutlines(e,t,i,n){const s=l(this,Hi).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),l(this,sl).build(l(this,Hi),e,t,i,l(this,nl),l(this,ou),n),P(this,Mr,null),P(this,Ui,null),P(this,Hi,null),P(this,Zi,null),l(this,sl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Mr=new WeakMap,Ui=new WeakMap,Hi=new WeakMap,nl=new WeakMap,ou=new WeakMap,Ln=new WeakMap,Zi=new WeakMap,Ns=new WeakMap,sl=new WeakMap,rl=new WeakMap,al=new WeakMap,hu=new WeakSet,k1=function(e,t){return Xt._normalizePoint(e,t,l(this,rl),l(this,al),l(this,nl))};var kn,Gf,Vf,hs,Dr,Or,lu,cu,uu,Qi,ra,zv,qv,Uv;const um=class um extends Xt{constructor(){super(...arguments);O(this,Qi);O(this,kn);O(this,Gf,0);O(this,Vf);O(this,hs);O(this,Dr);O(this,Or);O(this,lu);O(this,cu);O(this,uu)}build(t,i,n,s,r,a,o){P(this,Dr,i),P(this,Or,n),P(this,lu,s),P(this,cu,r),P(this,uu,a),P(this,Vf,o??0),P(this,hs,t),z(this,Qi,qv).call(this)}setLastElement(t){return l(this,hs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,hs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of l(this,hs)){if(t.push(`M${Xt.svgRound(i[4])} ${Xt.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12){t.push(`L${Xt.svgRound(i[10])} ${Xt.svgRound(i[11])}`);continue}for(let n=6,s=i.length;n<s;n+=6){const[r,a,o,c,d,p]=i.subarray(n,n+6).map(Xt.svgRound);t.push(`C${r} ${a} ${o} ${c} ${d} ${p}`)}}return t.join("")}serialize([t,i,n,s],r){const a=[],o=[],[c,d,p,g]=z(this,Qi,zv).call(this);let f,v,b,_,y,x,C,I,F;switch(l(this,cu)){case 0:F=Xt._rescale,f=t,v=i+s,b=n,_=-s,y=t+c*n,x=i+(1-d-g)*s,C=t+(c+p)*n,I=i+(1-d)*s;break;case 90:F=Xt._rescaleAndSwap,f=t,v=i,b=n,_=s,y=t+d*n,x=i+c*s,C=t+(d+g)*n,I=i+(c+p)*s;break;case 180:F=Xt._rescale,f=t+n,v=i,b=-n,_=s,y=t+(1-c-p)*n,x=i+d*s,C=t+(1-c)*n,I=i+(d+g)*s;break;case 270:F=Xt._rescaleAndSwap,f=t+n,v=i+s,b=-n,_=-s,y=t+(1-d-g)*n,x=i+(1-c-p)*s,C=t+(1-d)*n,I=i+(1-c)*s;break}for(const{line:K,points:q}of l(this,hs))a.push(F(K,f,v,b,_,r?new Array(K.length):null)),o.push(F(q,f,v,b,_,r?new Array(q.length):null));return{lines:a,points:o,rect:[y,x,C,I]}}static deserialize(t,i,n,s,r,{paths:{lines:a,points:o},rotation:c,thickness:d}){const p=[];let g,f,v,b,_;switch(c){case 0:_=Xt._rescale,g=-t/n,f=i/s+1,v=1/n,b=-1/s;break;case 90:_=Xt._rescaleAndSwap,g=-i/s,f=-t/n,v=1/s,b=1/n;break;case 180:_=Xt._rescale,g=t/n+1,f=-i/s,v=-1/n,b=1/s;break;case 270:_=Xt._rescaleAndSwap,g=i/s+1,f=t/n+1,v=-1/s,b=-1/n;break}if(!a){a=[];for(const x of o){const C=x.length;if(C===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(C===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const I=new Float32Array(3*(C-2));a.push(I);let[F,K,q,U]=x.subarray(0,4);I.set([NaN,NaN,NaN,NaN,F,K],0);for(let X=4;X<C;X+=2){const rt=x[X],M=x[X+1];I.set(Xt.createBezierPoints(F,K,q,U,rt,M),(X-2)*3),[F,K,q,U]=[q,U,rt,M]}}}for(let x=0,C=a.length;x<C;x++)p.push({line:_(a[x].map(I=>I??NaN),g,f,v,b),points:_(o[x].map(I=>I??NaN),g,f,v,b)});const y=new um;return y.build(p,n,s,1,c,d,r),y}get box(){return l(this,kn)}updateProperty(t,i){return t==="stroke-width"?z(this,Qi,Uv).call(this,i):null}updateParentDimensions([t,i],n){const[s,r]=z(this,Qi,ra).call(this);P(this,Dr,t),P(this,Or,i),P(this,lu,n);const[a,o]=z(this,Qi,ra).call(this),c=a-s,d=o-r,p=l(this,kn);return p[0]-=c,p[1]-=d,p[2]+=2*c,p[3]+=2*d,p}updateRotation(t){return P(this,Gf,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,kn).map(Xt.svgRound).join(" ")}get defaultProperties(){const[t,i]=l(this,kn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=l(this,kn);let n=0,s=0,r=0,a=0,o=0,c=0;switch(l(this,Gf)){case 90:s=i/t,r=-t/i,o=t;break;case 180:n=-1,a=-1,o=t,c=i;break;case 270:s=-i/t,r=t/i,c=i;break;default:return""}return`matrix(${n} ${s} ${r} ${a} ${Xt.svgRound(o)} ${Xt.svgRound(c)})`}getPathResizingSVGProperties([t,i,n,s]){const[r,a]=z(this,Qi,ra).call(this),[o,c,d,p]=l(this,kn);if(Math.abs(d-r)<=Xt.PRECISION||Math.abs(p-a)<=Xt.PRECISION){const _=t+n/2-(o+d/2),y=i+s/2-(c+p/2);return{path:{"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(i)}`,transform:`${this.rotationTransform} translate(${_} ${y})`}}}const g=(n-2*r)/(d-2*r),f=(s-2*a)/(p-2*a),v=d/n,b=p/s;return{path:{"transform-origin":`${Xt.svgRound(o)} ${Xt.svgRound(c)}`,transform:`${this.rotationTransform} scale(${v} ${b}) translate(${Xt.svgRound(r)} ${Xt.svgRound(a)}) scale(${g} ${f}) translate(${Xt.svgRound(-r)} ${Xt.svgRound(-a)})`}}}getPathResizedSVGProperties([t,i,n,s]){const[r,a]=z(this,Qi,ra).call(this),o=l(this,kn),[c,d,p,g]=o;if(o[0]=t,o[1]=i,o[2]=n,o[3]=s,Math.abs(p-r)<=Xt.PRECISION||Math.abs(g-a)<=Xt.PRECISION){const y=t+n/2-(c+p/2),x=i+s/2-(d+g/2);for(const{line:C,points:I}of l(this,hs))Xt._translate(C,y,x,C),Xt._translate(I,y,x,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(n-2*r)/(p-2*r),v=(s-2*a)/(g-2*a),b=-f*(c+r)+t+r,_=-v*(d+a)+i+a;if(f!==1||v!==1||b!==0||_!==0)for(const{line:y,points:x}of l(this,hs))Xt._rescale(y,b,_,f,v,y),Xt._rescale(x,b,_,f,v,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],n){const[s,r]=n,a=l(this,kn),o=t-a[0],c=i-a[1];if(l(this,Dr)===s&&l(this,Or)===r)for(const{line:d,points:p}of l(this,hs))Xt._translate(d,o,c,d),Xt._translate(p,o,c,p);else{const d=l(this,Dr)/s,p=l(this,Or)/r;P(this,Dr,s),P(this,Or,r);for(const{line:g,points:f}of l(this,hs))Xt._rescale(g,o,c,d,p,g),Xt._rescale(f,o,c,d,p,f);a[2]*=d,a[3]*=p}return a[0]=t,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Xt.svgRound(t)} ${Xt.svgRound(i)}`}}}get defaultSVGProperties(){const t=l(this,kn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Xt.svgRound(t[0])} ${Xt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};kn=new WeakMap,Gf=new WeakMap,Vf=new WeakMap,hs=new WeakMap,Dr=new WeakMap,Or=new WeakMap,lu=new WeakMap,cu=new WeakMap,uu=new WeakMap,Qi=new WeakSet,ra=function(t=l(this,uu)){const i=l(this,Vf)+t/2*l(this,lu);return l(this,cu)%180===0?[i/l(this,Dr),i/l(this,Or)]:[i/l(this,Or),i/l(this,Dr)]},zv=function(){const[t,i,n,s]=l(this,kn),[r,a]=z(this,Qi,ra).call(this,0);return[t+r,i+a,n-2*r,s-2*a]},qv=function(){const t=P(this,kn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of l(this,hs)){if(s.length<=12){for(let o=4,c=s.length;o<c;o+=6){const[d,p]=s.subarray(o,o+2);t[0]=Math.min(t[0],d),t[1]=Math.min(t[1],p),t[2]=Math.max(t[2],d),t[3]=Math.max(t[3],p)}continue}let r=s[4],a=s[5];for(let o=6,c=s.length;o<c;o+=6){const[d,p,g,f,v,b]=s.subarray(o,o+6);ee.bezierBoundingBox(r,a,d,p,g,f,v,b,t),r=v,a=b}}const[i,n]=z(this,Qi,ra).call(this);t[0]=Math.min(1,Math.max(0,t[0]-i)),t[1]=Math.min(1,Math.max(0,t[1]-n)),t[2]=Math.min(1,Math.max(0,t[2]+i)),t[3]=Math.min(1,Math.max(0,t[3]+n)),t[2]-=t[0],t[3]-=t[1]},Uv=function(t){const[i,n]=z(this,Qi,ra).call(this);P(this,uu,t);const[s,r]=z(this,Qi,ra).call(this),[a,o]=[s-i,r-n],c=l(this,kn);return c[0]-=a,c[1]-=o,c[2]+=2*a,c[3]+=2*o,c};let z1=um;var du;const dm=class dm extends I_{constructor(t){super();O(this,du);P(this,du,t),super.updateProperties({fill:"none",stroke:ai._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??(i=this["stroke-width"]),i*=l(this,du).realScale),super.updateSVGProperty(t,i)}clone(){const t=new dm(l(this,du));return t.updateAll(this),t}};du=new WeakMap;let O2=dm;var sg,Hv;const rc=class rc extends R2{constructor(t){super({...t,name:"inkEditor"});O(this,sg);this._willKeepAspectRatio=!0}static initialize(t,i){ai.initialize(t,i),this._defaultDrawingOptions=new O2(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return xe(this,"typesMap",new Map([[Le.INK_THICKNESS,"stroke-width"],[Le.INK_COLOR,"stroke"],[Le.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,n,s,r){return new T_(t,i,n,s,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,n,s,r,a){return z1.deserialize(t,i,n,s,r,a)}static async deserialize(t,i,n){let s=null;if(t instanceof am){const{data:{inkLists:a,rect:o,rotation:c,id:d,color:p,opacity:g,borderStyle:{rawWidth:f},popupRef:v},parent:{page:{pageNumber:b}}}=t;s=t={annotationType:ye.INK,color:Array.from(p),thickness:f,opacity:g,paths:{points:a},boxes:null,pageIndex:b-1,rect:o.slice(0),rotation:c,id:d,deleted:!1,popupRef:v}}const r=await super.deserialize(t,i,n);return r.annotationElementId=t.id||null,r._initialData=s,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:n}=this;i.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:n}){this._drawingOptions=rc.getDefaultDrawingOptions({stroke:ee.makeHexColor(...t),"stroke-width":i,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:n,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":o}}=this,c={annotationType:ye.INK,color:ai._colorManager.convert(r),opacity:a,thickness:o,paths:{lines:i,points:n},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?c:this.annotationElementId&&!z(this,sg,Hv).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const{points:i,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:i}),null}};sg=new WeakSet,Hv=function(t){const{color:i,thickness:n,opacity:s,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,o)=>a!==i[o])||t.thickness!==n||t.opacity!==s||t.pageIndex!==r},re(rc,"_type","ink"),re(rc,"_editorType",ye.INK),re(rc,"_defaultDrawingOptions",null);let B2=rc;var ri,Ji,Co,Na,No,fu,Br,jr,ls,pu,Ie,fd,pd,E1,z2,C1,q2,N1,Wv;const bd=class bd extends ai{constructor(t){super({...t,name:"stampEditor"});O(this,Ie);O(this,ri,null);O(this,Ji,null);O(this,Co,null);O(this,Na,null);O(this,No,null);O(this,fu,"");O(this,Br,null);O(this,jr,null);O(this,ls,!1);O(this,pu,!1);P(this,Na,t.bitmapUrl),P(this,No,t.bitmapFile)}static initialize(t,i){ai.initialize(t,i)}static get supportedTypes(){return xe(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return xe(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(ye.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:r,height:a}=t||this.copyCanvas(null,null,!0).imageData,o=await n.guess({name:"altText",request:{data:s,width:r,height:a,channels:s.length/(r*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const c=o.output;return await this.setGuessedAltText(c),i&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;l(this,Ji)&&(P(this,ri,null),this._uiManager.imageManager.deleteId(l(this,Ji)),(t=l(this,Br))==null||t.remove(),P(this,Br,null),l(this,jr)&&(clearTimeout(l(this,jr)),P(this,jr,null))),super.remove()}rebuild(){if(!this.parent){l(this,Ji)&&z(this,Ie,E1).call(this);return}super.rebuild(),this.div!==null&&(l(this,Ji)&&l(this,Br)===null&&z(this,Ie,E1).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,Co)||l(this,ri)||l(this,Na)||l(this,No)||l(this,Ji))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,ri)?z(this,Ie,z2).call(this):z(this,Ie,E1).call(this),this.width&&!this.annotationElementId){const[n,s]=this.parentDimensions;this.setAt(t*n,i*s,this.width*n,this.height*s)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,jr)!==null&&clearTimeout(l(this,jr)),P(this,jr,setTimeout(()=>{P(this,jr,null),z(this,Ie,q2).call(this)},200))}copyCanvas(t,i,n=!1){var f;t||(t=224);const{width:s,height:r}=l(this,ri),a=new O0;let o=l(this,ri),c=s,d=r,p=null;if(i){if(s>i||r>i){const U=Math.min(i/s,i/r);c=Math.floor(s*U),d=Math.floor(r*U)}p=document.createElement("canvas");const v=p.width=Math.ceil(c*a.sx),b=p.height=Math.ceil(d*a.sy);l(this,ls)||(o=z(this,Ie,C1).call(this,v,b));const _=p.getContext("2d");_.filter=this._uiManager.hcmFilter;let y="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":(f=window.matchMedia)!=null&&f.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",x="#42414d");const C=15,I=C*a.sx,F=C*a.sy,K=new OffscreenCanvas(I*2,F*2),q=K.getContext("2d");q.fillStyle=y,q.fillRect(0,0,I*2,F*2),q.fillStyle=x,q.fillRect(0,0,I,F),q.fillRect(I,F,I,F),_.fillStyle=_.createPattern(K,"repeat"),_.fillRect(0,0,v,b),_.drawImage(o,0,0,o.width,o.height,0,0,v,b)}let g=null;if(n){let v,b;if(a.symmetric&&o.width<t&&o.height<t)v=o.width,b=o.height;else if(o=l(this,ri),s>t||r>t){const x=Math.min(t/s,t/r);v=Math.floor(s*x),b=Math.floor(r*x),l(this,ls)||(o=z(this,Ie,C1).call(this,v,b))}const y=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});y.drawImage(o,0,0,o.width,o.height,0,0,v,b),g={width:v,height:b,data:y.getImageData(0,0,v,b).data}}return{canvas:p,width:c,height:d,imageData:g}}getImageForAltText(){return l(this,Br)}static async deserialize(t,i,n){var b;let s=null;if(t instanceof uv){const{data:{rect:_,rotation:y,id:x,structParent:C,popupRef:I},container:F,parent:{page:{pageNumber:K}}}=t,q=F.querySelector("canvas"),U=n.imageManager.getFromCanvas(F.id,q);q.remove();const X=((b=await i._structTree.getAriaAttributes(`${J2}${x}`))==null?void 0:b.get("aria-label"))||"";s=t={annotationType:ye.STAMP,bitmapId:U.id,bitmap:U.bitmap,pageIndex:K-1,rect:_.slice(0),rotation:y,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:X},isSvg:!1,structParent:C,popupRef:I}}const r=await super.deserialize(t,i,n),{rect:a,bitmap:o,bitmapUrl:c,bitmapId:d,isSvg:p,accessibilityData:g}=t;d&&n.imageManager.isValidId(d)?(P(r,Ji,d),o&&P(r,ri,o)):P(r,Na,c),P(r,ls,p);const[f,v]=r.pageDimensions;return r.width=(a[2]-a[0])/f,r.height=(a[3]-a[1])/v,r.annotationElementId=t.id||null,g&&(r.altTextData=g),r._initialData=s,P(r,pu,!!s),r}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:ye.STAMP,bitmapId:l(this,Ji),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,ls),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=z(this,Ie,N1).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:s,altText:r}=this.serializeAltText(!1);if(!s&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const o=z(this,Ie,Wv).call(this,n);if(o.isSame)return null;o.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,i===null)return n;i.stamps||(i.stamps=new Map);const a=l(this,ls)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!i.stamps.has(l(this,Ji)))i.stamps.set(l(this,Ji),{area:a,serialized:n}),n.bitmap=z(this,Ie,N1).call(this,!1);else if(l(this,ls)){const o=i.stamps.get(l(this,Ji));a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=z(this,Ie,N1).call(this,!1))}return n}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ri=new WeakMap,Ji=new WeakMap,Co=new WeakMap,Na=new WeakMap,No=new WeakMap,fu=new WeakMap,Br=new WeakMap,jr=new WeakMap,ls=new WeakMap,pu=new WeakMap,Ie=new WeakSet,fd=function(t,i=!1){if(!t){this.remove();return}P(this,ri,t.bitmap),i||(P(this,Ji,t.id),P(this,ls,t.isSvg)),t.file&&P(this,fu,t.file.name),z(this,Ie,z2).call(this)},pd=function(){if(P(this,Co,null),this._uiManager.enableWaiting(!1),!!l(this,Br)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ri)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ri)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},E1=function(){if(l(this,Ji)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Ji)).then(n=>z(this,Ie,fd).call(this,n,!0)).finally(()=>z(this,Ie,pd).call(this));return}if(l(this,Na)){const n=l(this,Na);P(this,Na,null),this._uiManager.enableWaiting(!0),P(this,Co,this._uiManager.imageManager.getFromUrl(n).then(s=>z(this,Ie,fd).call(this,s)).finally(()=>z(this,Ie,pd).call(this)));return}if(l(this,No)){const n=l(this,No);P(this,No,null),this._uiManager.enableWaiting(!0),P(this,Co,this._uiManager.imageManager.getFromFile(n).then(s=>z(this,Ie,fd).call(this,s)).finally(()=>z(this,Ie,pd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=bd.supportedTypesStr;const i=this._uiManager._signal;P(this,Co,new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),z(this,Ie,fd).call(this,s)}n()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:i})}).finally(()=>z(this,Ie,pd).call(this))),t.click()},z2=function(){var p;const{div:t}=this;let{width:i,height:n}=l(this,ri);const[s,r]=this.pageDimensions,a=.75;if(this.width)i=this.width*s,n=this.height*r;else if(i>a*s||n>a*r){const g=Math.min(a*s/i,a*r/n);i*=g,n*=g}const[o,c]=this.parentDimensions;this.setDims(i*o/s,n*c/r),this._uiManager.enableWaiting(!1);const d=P(this,Br,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=i/s,this.height=n/r,(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),z(this,Ie,q2).call(this),l(this,pu)||(this.parent.addUndoableEditor(this),P(this,pu,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,fu)&&d.setAttribute("aria-label",l(this,fu))},C1=function(t,i){const{width:n,height:s}=l(this,ri);let r=n,a=s,o=l(this,ri);for(;r>2*t||a>2*i;){const c=r,d=a;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const p=new OffscreenCanvas(r,a);p.getContext("2d").drawImage(o,0,0,c,d,0,0,r,a),o=p.transferToImageBitmap()}return o},q2=function(){const[t,i]=this.parentDimensions,{width:n,height:s}=this,r=new O0,a=Math.ceil(n*t*r.sx),o=Math.ceil(s*i*r.sy),c=l(this,Br);if(!c||c.width===a&&c.height===o)return;c.width=a,c.height=o;const d=l(this,ls)?l(this,ri):z(this,Ie,C1).call(this,a,o),p=c.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,a,o)},N1=function(t){if(t){if(l(this,ls)){const s=this._uiManager.imageManager.getSvgUrl(l(this,Ji));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,ri),i.getContext("2d").drawImage(l(this,ri),0,0),i.toDataURL()}if(l(this,ls)){const[i,n]=this.pageDimensions,s=Math.round(this.width*i*Bo.PDF_TO_CSS_UNITS),r=Math.round(this.height*n*Bo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,r);return a.getContext("2d").drawImage(l(this,ri),0,0,l(this,ri).width,l(this,ri).height,0,0,s,r),a.transferToImageBitmap()}return structuredClone(l(this,ri))},Wv=function(t){var a;const{pageIndex:i,accessibilityData:{altText:n}}=this._initialData,s=t.pageIndex===i,r=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&r,isSameAltText:r}},re(bd,"_type","stamp"),re(bd,"_editorType",ye.STAMP);let j2=bd;var ol,gu,zr,Po,Pa,Ps,Io,mu,hl,sr,Ia,pn,Ta,te,To,ii,Gv,xr,H2,W2,P1;const Gs=class Gs{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:n,accessibilityManager:s,annotationLayer:r,drawLayer:a,textLayer:o,viewport:c,l10n:d}){O(this,ii);O(this,ol);O(this,gu,!1);O(this,zr,null);O(this,Po,null);O(this,Pa,null);O(this,Ps,new Map);O(this,Io,!1);O(this,mu,!1);O(this,hl,!1);O(this,sr,null);O(this,Ia,null);O(this,pn,null);O(this,Ta,null);O(this,te);const p=[...l(Gs,To).values()];if(!Gs._initialized){Gs._initialized=!0;for(const g of p)g.initialize(d,e)}e.registerEditorTypes(p),P(this,te,e),this.pageIndex=t,this.div=i,P(this,ol,s),P(this,zr,r),this.viewport=c,P(this,pn,o),this.drawLayer=a,this._structTree=n,l(this,te).addLayer(this)}get isEmpty(){return l(this,Ps).size===0}get isInvisible(){return this.isEmpty&&l(this,te).getMode()===ye.NONE}updateToolbar(e){l(this,te).updateToolbar(e)}updateMode(e=l(this,te).getMode()){switch(z(this,ii,P1).call(this),e){case ye.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ye.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ye.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(Gs,To).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,pn))==null?void 0:t.div)}setEditingState(e){l(this,te).setEditingState(e)}addCommands(e){l(this,te).addCommands(e)}cleanUndoStack(e){l(this,te).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,zr))==null||t.div.classList.toggle("disabled",!e)}async enable(){P(this,hl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,Ps).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,te).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,zr)){P(this,hl,!1);return}const t=l(this,zr).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,te).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const n=await this.deserialize(i);n&&(this.addOrRebuild(n),n.enableEditing())}P(this,hl,!1)}disable(){var n;P(this,mu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of l(this,Ps).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(n=this.getEditableAnnotation(s.annotationElementId))==null||n.show(),s.remove()}if(l(this,zr)){const s=l(this,zr).getEditableAnnotations();for(const r of s){const{id:a}=r.data;if(l(this,te).isDeletedAnnotationElement(a))continue;let o=t.get(a);if(o){o.resetAnnotationElement(r),o.show(!1),r.show();continue}o=e.get(a),o&&(l(this,te).addChangedExistingAnnotation(o),o.renderAnnotationElement(r)&&o.show(!1)),r.show()}}z(this,ii,P1).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of l(Gs,To).values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),P(this,mu,!1)}getEditableAnnotation(e){var t;return((t=l(this,zr))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,te).getActive()!==e&&l(this,te).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,pn))!=null&&e.div&&!l(this,Ta)){P(this,Ta,new AbortController);const t=l(this,te).combinedSignal(l(this,Ta));l(this,pn).div.addEventListener("pointerdown",z(this,ii,Gv).bind(this),{signal:t}),l(this,pn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,pn))!=null&&e.div&&l(this,Ta)&&(l(this,Ta).abort(),P(this,Ta,null),l(this,pn).div.classList.remove("highlighting"))}enableClick(){if(l(this,Po))return;P(this,Po,new AbortController);const e=l(this,te).combinedSignal(l(this,Po));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=l(this,Po))==null||e.abort(),P(this,Po,null)}attach(e){l(this,Ps).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,te).isDeletedAnnotationElement(t)&&l(this,te).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Ps).delete(e.id),(t=l(this,ol))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,mu)&&e.annotationElementId&&l(this,te).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,te).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,te).addDeletedAnnotationElement(e.annotationElementId),ai.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,te).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,hl)),l(this,te).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Pa)&&(e._focusEventsAllowed=!1,P(this,Pa,setTimeout(()=>{P(this,Pa,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,te)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,ol))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,te).getId()}combinedSignal(e){return l(this,te).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,ii,xr))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,te).updateToolbar(e),l(this,te).updateMode(e);const{offsetX:i,offsetY:n}=z(this,ii,W2).call(this),s=this.getNextId(),r=z(this,ii,H2).call(this,{parent:this,id:s,x:i,y:n,uiManager:l(this,te),isCentered:!0,...t});r&&this.add(r)}async deserialize(e){var t;return await((t=l(Gs,To).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,te)))||null}createAndAddNewEditor(e,t,i={}){const n=this.getNextId(),s=z(this,ii,H2).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:l(this,te),isCentered:t,...i});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(z(this,ii,W2).call(this),!0)}setSelected(e){l(this,te).setSelected(e)}toggleSelected(e){l(this,te).toggleSelected(e)}unselect(e){l(this,te).unselect(e)}pointerup(e){var i;const{isMac:t}=Cn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Io)&&(P(this,Io,!1),!((i=l(this,ii,xr))!=null&&i.isDrawer&&l(this,ii,xr).supportMultipleDrawings))){if(!l(this,gu)){P(this,gu,!0);return}if(l(this,te).getMode()===ye.STAMP){l(this,te).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var n;if(l(this,te).getMode()===ye.HIGHLIGHT&&this.enableTextSelection(),l(this,Io)){P(this,Io,!1);return}const{isMac:t}=Cn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(P(this,Io,!0),(n=l(this,ii,xr))!=null&&n.isDrawer){this.startDrawingSession(e);return}const i=l(this,te).getActive();P(this,gu,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus(),l(this,sr)){l(this,ii,xr).startDrawing(this,l(this,te),!1,e);return}l(this,te).setCurrentDrawingSession(this),P(this,sr,new AbortController);const t=l(this,te).combinedSignal(l(this,sr));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(P(this,Ia,null),this.commitOrRemove())},{signal:t}),l(this,ii,xr).startDrawing(this,l(this,te),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&P(this,Ia,t);return}l(this,Ia)&&setTimeout(()=>{var t;(t=l(this,Ia))==null||t.focus(),P(this,Ia,null)},0)}endDrawingSession(e=!1){return l(this,sr)?(l(this,te).setCurrentDrawingSession(null),l(this,sr).abort(),P(this,sr,null),P(this,Ia,null),l(this,ii,xr).endDrawing(e)):null}findNewParent(e,t,i){const n=l(this,te).findParent(t,i);return n===null||n===this?!1:(n.changeParent(e),!0)}commitOrRemove(){return l(this,sr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,sr)&&l(this,ii,xr).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=l(this,te).getActive())==null?void 0:e.parent)===this&&(l(this,te).commitOrRemove(),l(this,te).setActiveEditor(null)),l(this,Pa)&&(clearTimeout(l(this,Pa)),P(this,Pa,null));for(const i of l(this,Ps).values())(t=l(this,ol))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,Ps).clear(),l(this,te).removeLayer(this)}render({viewport:e}){this.viewport=e,ul(this.div,e);for(const t of l(this,te).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,te).commitOrRemove(),z(this,ii,P1).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,ul(this.div,{rotation:i}),t!==i)for(const n of l(this,Ps).values())n.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,te).viewParameters.realScale}};ol=new WeakMap,gu=new WeakMap,zr=new WeakMap,Po=new WeakMap,Pa=new WeakMap,Ps=new WeakMap,Io=new WeakMap,mu=new WeakMap,hl=new WeakMap,sr=new WeakMap,Ia=new WeakMap,pn=new WeakMap,Ta=new WeakMap,te=new WeakMap,To=new WeakMap,ii=new WeakSet,Gv=function(e){l(this,te).unselectAll();const{target:t}=e;if(t===l(this,pn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,pn).div.contains(t)){const{isMac:i}=Cn.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,te).showAllEditors("highlight",!0,!0),l(this,pn).div.classList.add("free"),this.toggleDrawing(),j1.startHighlighting(this,l(this,te).direction==="ltr",{target:l(this,pn).div,x:e.x,y:e.y}),l(this,pn).div.addEventListener("pointerup",()=>{l(this,pn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,te)._signal}),e.preventDefault()}},xr=function(){return l(Gs,To).get(l(this,te).getMode())},H2=function(e){const t=l(this,ii,xr);return t?new t.prototype.constructor(e):null},W2=function(){const{x:e,y:t,width:i,height:n}=this.div.getBoundingClientRect(),s=Math.max(0,e),r=Math.max(0,t),a=Math.min(window.innerWidth,e+i),o=Math.min(window.innerHeight,t+n),c=(s+a)/2-e,d=(r+o)/2-t,[p,g]=this.viewport.rotation%180===0?[c,d]:[d,c];return{offsetX:p,offsetY:g}},P1=function(){for(const e of l(this,Ps).values())e.isEmpty()&&e.remove()},re(Gs,"_initialized",!1),O(Gs,To,new Map([x2,B2,j2,j1].map(e=>[e._editorType,e])));let U2=Gs;var rr,$f,En,ll,rg,Vv,Hr,V2,$v,$2;const cn=class cn{constructor({pageIndex:e}){O(this,Hr);O(this,rr,null);O(this,$f,0);O(this,En,new Map);O(this,ll,new Map);this.pageIndex=e}setParent(e){if(!l(this,rr)){P(this,rr,e);return}if(l(this,rr)!==e){if(l(this,En).size>0)for(const t of l(this,En).values())t.remove(),e.append(t);P(this,rr,e)}}static get _svgFactory(){return xe(this,"_svgFactory",new rm)}draw(e,t=!1,i=!1){const n=_n(this,$f)._++,s=z(this,Hr,V2).call(this),r=cn._svgFactory.createElement("defs");s.append(r);const a=cn._svgFactory.createElement("path");r.append(a);const o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,ll).set(n,a);const c=i?z(this,Hr,$v).call(this,r,o):null,d=cn._svgFactory.createElement("use");return s.append(d),d.setAttribute("href",`#${o}`),this.updateProperties(s,e),l(this,En).set(n,s),{id:n,clipPathId:`url(#${c})`}}drawOutline(e,t){const i=_n(this,$f)._++,n=z(this,Hr,V2).call(this),s=cn._svgFactory.createElement("defs");n.append(s);const r=cn._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${i}`;r.setAttribute("id",a),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(t){const p=cn._svgFactory.createElement("mask");s.append(p),o=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",o),p.setAttribute("maskUnits","objectBoundingBox");const g=cn._svgFactory.createElement("rect");p.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const f=cn._svgFactory.createElement("use");p.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=cn._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${a}`),o&&c.setAttribute("mask",`url(#${o})`);const d=c.cloneNode();return n.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(n,e),l(this,En).set(i,n),i}finalizeDraw(e,t){l(this,ll).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var o;if(!t)return;const{root:i,bbox:n,rootClass:s,path:r}=t,a=typeof e=="number"?l(this,En).get(e):e;if(a){if(i&&z(this,Hr,$2).call(this,a,i),n&&z(o=cn,rg,Vv).call(o,a,n),s){const{classList:c}=a;for(const[d,p]of Object.entries(s))c.toggle(d,p)}if(r){const d=a.firstChild.firstChild;z(this,Hr,$2).call(this,d,r)}}}updateParent(e,t){if(t===this)return;const i=l(this,En).get(e);i&&(l(t,rr).append(i),l(this,En).delete(e),l(t,En).set(e,i))}remove(e){l(this,ll).delete(e),l(this,rr)!==null&&(l(this,En).get(e).remove(),l(this,En).delete(e))}destroy(){P(this,rr,null);for(const e of l(this,En).values())e.remove();l(this,En).clear(),l(this,ll).clear()}};rr=new WeakMap,$f=new WeakMap,En=new WeakMap,ll=new WeakMap,rg=new WeakSet,Vv=function(e,[t,i,n,s]){const{style:r}=e;r.top=`${100*i}%`,r.left=`${100*t}%`,r.width=`${100*n}%`,r.height=`${100*s}%`},Hr=new WeakSet,V2=function(){const e=cn._svgFactory.create(1,1,!0);return l(this,rr).append(e),e.setAttribute("aria-hidden",!0),e},$v=function(e,t){const i=cn._svgFactory.createElement("clipPath");e.append(i);const n=`clip_${t}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const s=cn._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),n},$2=function(e,t){for(const[i,n]of Object.entries(t))n===null?e.removeAttribute(i):e.setAttribute(i,n)},O(cn,rg);let G2=cn;globalThis.pdfjsTestingUtils={HighlightOutliner:L2};ce.AbortException;ce.AnnotationEditorLayer;ce.AnnotationEditorParamsType;ce.AnnotationEditorType;ce.AnnotationEditorUIManager;ce.AnnotationLayer;ce.AnnotationMode;ce.ColorPicker;ce.DOMSVGFactory;ce.DrawLayer;ce.FeatureTest;var D_=ce.GlobalWorkerOptions;ce.ImageKind;ce.InvalidPDFException;ce.MissingPDFException;ce.OPS;ce.OutputScale;ce.PDFDataRangeTransport;ce.PDFDateString;ce.PDFWorker;ce.PasswordResponses;ce.PermissionFlag;ce.PixelsPerInch;ce.RenderingCancelledException;ce.TextLayer;ce.TouchManager;ce.UnexpectedResponseException;ce.Util;ce.VerbosityLevel;ce.XfaLayer;ce.build;ce.createValidAbsoluteUrl;ce.fetchData;var O_=ce.getDocument;ce.getFilenameFromUrl;ce.getPdfFilenameFromUrl;ce.getXfaPageViewport;ce.isDataScheme;ce.isPdfFile;ce.noContextMenu;ce.normalizeUnicode;ce.setLayerDimensions;ce.shadow;ce.stopEvent;ce.version;function Kp(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xv={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(h,e){(function(t){h.exports=t()})(function(){return function t(i,n,s){function r(c,d){if(!n[c]){if(!i[c]){var p=typeof Kp=="function"&&Kp;if(!d&&p)return p(c,!0);if(a)return a(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var f=n[c]={exports:{}};i[c][0].call(f.exports,function(v){var b=i[c][1][v];return r(b||v)},f,f.exports,t,i,n,s)}return n[c].exports}for(var a=typeof Kp=="function"&&Kp,o=0;o<s.length;o++)r(s[o]);return r}({1:[function(t,i,n){var s=t("./utils"),r=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(o){for(var c,d,p,g,f,v,b,_=[],y=0,x=o.length,C=x,I=s.getTypeOf(o)!=="string";y<o.length;)C=x-y,p=I?(c=o[y++],d=y<x?o[y++]:0,y<x?o[y++]:0):(c=o.charCodeAt(y++),d=y<x?o.charCodeAt(y++):0,y<x?o.charCodeAt(y++):0),g=c>>2,f=(3&c)<<4|d>>4,v=1<C?(15&d)<<2|p>>6:64,b=2<C?63&p:64,_.push(a.charAt(g)+a.charAt(f)+a.charAt(v)+a.charAt(b));return _.join("")},n.decode=function(o){var c,d,p,g,f,v,b=0,_=0,y="data:";if(o.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var x,C=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===a.charAt(64)&&C--,o.charAt(o.length-2)===a.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=r.uint8array?new Uint8Array(0|C):new Array(0|C);b<o.length;)c=a.indexOf(o.charAt(b++))<<2|(g=a.indexOf(o.charAt(b++)))>>4,d=(15&g)<<4|(f=a.indexOf(o.charAt(b++)))>>2,p=(3&f)<<6|(v=a.indexOf(o.charAt(b++))),x[_++]=c,f!==64&&(x[_++]=d),v!==64&&(x[_++]=p);return x}},{"./support":30,"./utils":32}],2:[function(t,i,n){var s=t("./external"),r=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function c(d,p,g,f,v){this.compressedSize=d,this.uncompressedSize=p,this.crc32=g,this.compression=f,this.compressedContent=v}c.prototype={getContentWorker:function(){var d=new r(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),p=this;return d.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new r(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,p,g){return d.pipe(new a).pipe(new o("uncompressedSize")).pipe(p.compressWorker(g)).pipe(new o("compressedSize")).withStreamInfo("compression",p)},i.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,n){var s=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,n){var s=t("./utils"),r=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();i.exports=function(a,o){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,d,p,g){var f=r,v=g+p;c^=-1;for(var b=g;b<v;b++)c=c>>>8^f[255&(c^d[b])];return-1^c}(0|o,a,a.length,0):function(c,d,p,g){var f=r,v=g+p;c^=-1;for(var b=g;b<v;b++)c=c>>>8^f[255&(c^d.charCodeAt(b))];return-1^c}(0|o,a,a.length,0):0}},{"./utils":32}],5:[function(t,i,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,i,n){var s=null;s=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:s}},{lie:37}],7:[function(t,i,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=t("pako"),a=t("./utils"),o=t("./stream/GenericWorker"),c=s?"uint8array":"array";function d(p,g){o.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=g,this.meta={}}n.magic="\b\0",a.inherits(d,o),d.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,p.data),!1)},d.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(g){p.push({data:g,meta:p.meta})}},n.compressWorker=function(p){return new d("Deflate",p)},n.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,n){function s(f,v){var b,_="";for(b=0;b<v;b++)_+=String.fromCharCode(255&f),f>>>=8;return _}function r(f,v,b,_,y,x){var C,I,F=f.file,K=f.compression,q=x!==c.utf8encode,U=a.transformTo("string",x(F.name)),X=a.transformTo("string",c.utf8encode(F.name)),rt=F.comment,M=a.transformTo("string",x(rt)),E=a.transformTo("string",c.utf8encode(rt)),W=X.length!==F.name.length,S=E.length!==rt.length,nt="",st="",tt="",dt=F.dir,ot=F.date,At={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(At.crc32=f.crc32,At.compressedSize=f.compressedSize,At.uncompressedSize=f.uncompressedSize);var lt=0;v&&(lt|=8),q||!W&&!S||(lt|=2048);var k=0,G=0;dt&&(k|=16),y==="UNIX"?(G=798,k|=function(Z,ct){var gt=Z;return Z||(gt=ct?16893:33204),(65535&gt)<<16}(F.unixPermissions,dt)):(G=20,k|=function(Z){return 63&(Z||0)}(F.dosPermissions)),C=ot.getUTCHours(),C<<=6,C|=ot.getUTCMinutes(),C<<=5,C|=ot.getUTCSeconds()/2,I=ot.getUTCFullYear()-1980,I<<=4,I|=ot.getUTCMonth()+1,I<<=5,I|=ot.getUTCDate(),W&&(st=s(1,1)+s(d(U),4)+X,nt+="up"+s(st.length,2)+st),S&&(tt=s(1,1)+s(d(M),4)+E,nt+="uc"+s(tt.length,2)+tt);var Y="";return Y+=`
\0`,Y+=s(lt,2),Y+=K.magic,Y+=s(C,2),Y+=s(I,2),Y+=s(At.crc32,4),Y+=s(At.compressedSize,4),Y+=s(At.uncompressedSize,4),Y+=s(U.length,2),Y+=s(nt.length,2),{fileRecord:p.LOCAL_FILE_HEADER+Y+U+nt,dirRecord:p.CENTRAL_FILE_HEADER+s(G,2)+Y+s(M.length,2)+"\0\0\0\0"+s(k,4)+s(_,4)+U+nt+M}}var a=t("../utils"),o=t("../stream/GenericWorker"),c=t("../utf8"),d=t("../crc32"),p=t("../signature");function g(f,v,b,_){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=_,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(g,o),g.prototype.push=function(f){var v=f.meta.percent||0,b=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,o.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-_-1))/b:100}}))},g.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var v=this.streamFiles&&!f.file.dir;if(v){var b=r(f,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(f){this.accumulate=!1;var v=this.streamFiles&&!f.file.dir,b=r(f,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(_){return p.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var f=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-f,_=function(y,x,C,I,F){var K=a.transformTo("string",F(I));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(x,4)+s(C,4)+s(K.length,2)+K}(this.dirRecords.length,b,f,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(f){this._sources.push(f);var v=this;return f.on("data",function(b){v.processChunk(b)}),f.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),f.on("error",function(b){v.error(b)}),this},g.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(f){var v=this._sources;if(!o.prototype.error.call(this,f))return!1;for(var b=0;b<v.length;b++)try{v[b].error(f)}catch{}return!0},g.prototype.lock=function(){o.prototype.lock.call(this);for(var f=this._sources,v=0;v<f.length;v++)f[v].lock()},i.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,n){var s=t("../compressions"),r=t("./ZipFileWorker");n.generateWorker=function(a,o,c){var d=new r(o.streamFiles,c,o.platform,o.encodeFileName),p=0;try{a.forEach(function(g,f){p++;var v=function(x,C){var I=x||C,F=s[I];if(!F)throw new Error(I+" is not a valid compression method !");return F}(f.options.compression,o.compression),b=f.options.compressionOptions||o.compressionOptions||{},_=f.dir,y=f.date;f._compressWorker(v,b).withStreamInfo("file",{name:g,dir:_,date:y,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(d)}),d.entriesCount=p}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new s;for(var a in this)typeof this[a]!="function"&&(r[a]=this[a]);return r}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(r,a){return new s().loadAsync(r,a)},s.external=t("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,n){var s=t("./utils"),r=t("./external"),a=t("./utf8"),o=t("./zipEntries"),c=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function p(g){return new r.Promise(function(f,v){var b=g.decompressed.getContentWorker().pipe(new c);b.on("error",function(_){v(_)}).on("end",function(){b.streamInfo.crc32!==g.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}i.exports=function(g,f){var v=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(g)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",g,!0,f.optimizedBinaryString,f.base64).then(function(b){var _=new o(f);return _.load(b),_}).then(function(b){var _=[r.Promise.resolve(b)],y=b.files;if(f.checkCRC32)for(var x=0;x<y.length;x++)_.push(p(y[x]));return r.Promise.all(_)}).then(function(b){for(var _=b.shift(),y=_.files,x=0;x<y.length;x++){var C=y[x],I=C.fileNameStr,F=s.resolve(C.fileNameStr);v.file(F,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:f.createFolders}),C.dir||(v.file(F).unsafeOriginalName=I)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,n){var s=t("../utils"),r=t("../stream/GenericWorker");function a(o,c){r.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,r),a.prototype._bindStream=function(o){var c=this;(this._stream=o).pause(),o.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,n){var s=t("readable-stream").Readable;function r(a,o,c){s.call(this,o),this._helper=a;var d=this;a.on("data",function(p,g){d.push(p)||d._helper.pause(),c&&c(g)}).on("error",function(p){d.emit("error",p)}).on("end",function(){d.push(null)})}t("../utils").inherits(r,s),r.prototype._read=function(){this._helper.resume()},i.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,i,n){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,r);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,r)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var r=new Buffer(s);return r.fill(0),r},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,i,n){function s(F,K,q){var U,X=a.getTypeOf(K),rt=a.extend(q||{},d);rt.date=rt.date||new Date,rt.compression!==null&&(rt.compression=rt.compression.toUpperCase()),typeof rt.unixPermissions=="string"&&(rt.unixPermissions=parseInt(rt.unixPermissions,8)),rt.unixPermissions&&16384&rt.unixPermissions&&(rt.dir=!0),rt.dosPermissions&&16&rt.dosPermissions&&(rt.dir=!0),rt.dir&&(F=y(F)),rt.createFolders&&(U=_(F))&&x.call(this,U,!0);var M=X==="string"&&rt.binary===!1&&rt.base64===!1;q&&q.binary!==void 0||(rt.binary=!M),(K instanceof p&&K.uncompressedSize===0||rt.dir||!K||K.length===0)&&(rt.base64=!1,rt.binary=!0,K="",rt.compression="STORE",X="string");var E=null;E=K instanceof p||K instanceof o?K:v.isNode&&v.isStream(K)?new b(F,K):a.prepareContent(F,K,rt.binary,rt.optimizedBinaryString,rt.base64);var W=new g(F,E,rt);this.files[F]=W}var r=t("./utf8"),a=t("./utils"),o=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),d=t("./defaults"),p=t("./compressedObject"),g=t("./zipObject"),f=t("./generate"),v=t("./nodejsUtils"),b=t("./nodejs/NodejsStreamInputAdapter"),_=function(F){F.slice(-1)==="/"&&(F=F.substring(0,F.length-1));var K=F.lastIndexOf("/");return 0<K?F.substring(0,K):""},y=function(F){return F.slice(-1)!=="/"&&(F+="/"),F},x=function(F,K){return K=K!==void 0?K:d.createFolders,F=y(F),this.files[F]||s.call(this,F,null,{dir:!0,createFolders:K}),this.files[F]};function C(F){return Object.prototype.toString.call(F)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(F){var K,q,U;for(K in this.files)U=this.files[K],(q=K.slice(this.root.length,K.length))&&K.slice(0,this.root.length)===this.root&&F(q,U)},filter:function(F){var K=[];return this.forEach(function(q,U){F(q,U)&&K.push(U)}),K},file:function(F,K,q){if(arguments.length!==1)return F=this.root+F,s.call(this,F,K,q),this;if(C(F)){var U=F;return this.filter(function(rt,M){return!M.dir&&U.test(rt)})}var X=this.files[this.root+F];return X&&!X.dir?X:null},folder:function(F){if(!F)return this;if(C(F))return this.filter(function(X,rt){return rt.dir&&F.test(X)});var K=this.root+F,q=x.call(this,K),U=this.clone();return U.root=q.name,U},remove:function(F){F=this.root+F;var K=this.files[F];if(K||(F.slice(-1)!=="/"&&(F+="/"),K=this.files[F]),K&&!K.dir)delete this.files[F];else for(var q=this.filter(function(X,rt){return rt.name.slice(0,F.length)===F}),U=0;U<q.length;U++)delete this.files[q[U].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(F){var K,q={};try{if((q=a.extend(F||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=q.type.toLowerCase(),q.compression=q.compression.toUpperCase(),q.type==="binarystring"&&(q.type="string"),!q.type)throw new Error("No output type specified.");a.checkSupport(q.type),q.platform!=="darwin"&&q.platform!=="freebsd"&&q.platform!=="linux"&&q.platform!=="sunos"||(q.platform="UNIX"),q.platform==="win32"&&(q.platform="DOS");var U=q.comment||this.comment||"";K=f.generateWorker(this,q,U)}catch(X){(K=new o("error")).error(X)}return new c(K,q.type||"string",q.mimeType)},generateAsync:function(F,K){return this.generateInternalStream(F).accumulate(K)},generateNodeStream:function(F,K){return(F=F||{}).type||(F.type="nodebuffer"),this.generateInternalStream(F).toNodejsStream(K)}};i.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,n){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,n){var s=t("./DataReader");function r(a){s.call(this,a);for(var o=0;o<this.data.length;o++)a[o]=255&a[o]}t("../utils").inherits(r,s),r.prototype.byteAt=function(a){return this.data[this.zero+a]},r.prototype.lastIndexOfSignature=function(a){for(var o=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),p=a.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===o&&this.data[g+1]===c&&this.data[g+2]===d&&this.data[g+3]===p)return g-this.zero;return-1},r.prototype.readAndCheckSignature=function(a){var o=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),p=a.charCodeAt(3),g=this.readData(4);return o===g[0]&&c===g[1]&&d===g[2]&&p===g[3]},r.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},i.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,i,n){var s=t("../utils");function r(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var o,c=0;for(this.checkOffset(a),o=this.index+a-1;o>=this.index;o--)c=(c<<8)+this.byteAt(o);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},i.exports=r},{"../utils":32}],19:[function(t,i,n){var s=t("./Uint8ArrayReader");function r(a){s.call(this,a)}t("../utils").inherits(r,s),r.prototype.readData=function(a){this.checkOffset(a);var o=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},i.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,n){var s=t("./DataReader");function r(a){s.call(this,a)}t("../utils").inherits(r,s),r.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},r.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},r.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},r.prototype.readData=function(a){this.checkOffset(a);var o=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},i.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,i,n){var s=t("./ArrayReader");function r(a){s.call(this,a)}t("../utils").inherits(r,s),r.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},i.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,n){var s=t("../utils"),r=t("../support"),a=t("./ArrayReader"),o=t("./StringReader"),c=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");i.exports=function(p){var g=s.getTypeOf(p);return s.checkSupport(g),g!=="string"||r.uint8array?g==="nodebuffer"?new c(p):r.uint8array?new d(s.transformTo("uint8array",p)):new a(s.transformTo("array",p)):new o(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,n){var s=t("./GenericWorker"),r=t("../utils");function a(o){s.call(this,"ConvertWorker to "+o),this.destType=o}r.inherits(a,s),a.prototype.processChunk=function(o){this.push({data:r.transformTo(this.destType,o.data),meta:o.meta})},i.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,n){var s=t("./GenericWorker"),r=t("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,s),a.prototype.processChunk=function(o){this.streamInfo.crc32=r(o.data,this.streamInfo.crc32||0),this.push(o)},i.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,n){var s=t("../utils"),r=t("./GenericWorker");function a(o){r.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}s.inherits(a,r),a.prototype.processChunk=function(o){if(o){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+o.data.length}r.prototype.processChunk.call(this,o)},i.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,n){var s=t("../utils"),r=t("./GenericWorker");function a(o){r.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=s.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}s.inherits(a,r),a.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,c);break;case"uint8array":o=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":o=this.data.slice(this.index,c)}return this.index=c,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,n){function s(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,a){return this._listeners[r].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,a){if(this._listeners[r])for(var o=0;o<this._listeners[r].length;o++)this._listeners[r][o].call(this,a)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var a=this;return r.on("data",function(o){a.processChunk(o)}),r.on("end",function(){a.end()}),r.on("error",function(o){a.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,a){return this.extraStreamInfo[r]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},i.exports=s},{}],29:[function(t,i,n){var s=t("../utils"),r=t("./ConvertWorker"),a=t("./GenericWorker"),o=t("../base64"),c=t("../support"),d=t("../external"),p=null;if(c.nodestream)try{p=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(v,b){return new d.Promise(function(_,y){var x=[],C=v._internalType,I=v._outputType,F=v._mimeType;v.on("data",function(K,q){x.push(K),b&&b(q)}).on("error",function(K){x=[],y(K)}).on("end",function(){try{var K=function(q,U,X){switch(q){case"blob":return s.newBlob(s.transformTo("arraybuffer",U),X);case"base64":return o.encode(U);default:return s.transformTo(q,U)}}(I,function(q,U){var X,rt=0,M=null,E=0;for(X=0;X<U.length;X++)E+=U[X].length;switch(q){case"string":return U.join("");case"array":return Array.prototype.concat.apply([],U);case"uint8array":for(M=new Uint8Array(E),X=0;X<U.length;X++)M.set(U[X],rt),rt+=U[X].length;return M;case"nodebuffer":return Buffer.concat(U);default:throw new Error("concat : unsupported type '"+q+"'")}}(C,x),F);_(K)}catch(q){y(q)}x=[]}).resume()})}function f(v,b,_){var y=b;switch(b){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=b,this._mimeType=_,s.checkSupport(y),this._worker=v.pipe(new r(y)),v.lock()}catch(x){this._worker=new a("error"),this._worker.error(x)}}f.prototype={accumulate:function(v){return g(this,v)},on:function(v,b){var _=this;return v==="data"?this._worker.on(v,function(y){b.call(_,y.data,y.meta)}):this._worker.on(v,function(){s.delay(b,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},v)}},i.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(s),n.blob=r.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,n){for(var s=t("./utils"),r=t("./support"),a=t("./nodejsUtils"),o=t("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function p(){o.call(this,"utf-8 decode"),this.leftOver=null}function g(){o.call(this,"utf-8 encode")}n.utf8encode=function(f){return r.nodebuffer?a.newBufferFrom(f,"utf-8"):function(v){var b,_,y,x,C,I=v.length,F=0;for(x=0;x<I;x++)(64512&(_=v.charCodeAt(x)))==55296&&x+1<I&&(64512&(y=v.charCodeAt(x+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),x++),F+=_<128?1:_<2048?2:_<65536?3:4;for(b=r.uint8array?new Uint8Array(F):new Array(F),x=C=0;C<F;x++)(64512&(_=v.charCodeAt(x)))==55296&&x+1<I&&(64512&(y=v.charCodeAt(x+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),x++),_<128?b[C++]=_:(_<2048?b[C++]=192|_>>>6:(_<65536?b[C++]=224|_>>>12:(b[C++]=240|_>>>18,b[C++]=128|_>>>12&63),b[C++]=128|_>>>6&63),b[C++]=128|63&_);return b}(f)},n.utf8decode=function(f){return r.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):function(v){var b,_,y,x,C=v.length,I=new Array(2*C);for(b=_=0;b<C;)if((y=v[b++])<128)I[_++]=y;else if(4<(x=c[y]))I[_++]=65533,b+=x-1;else{for(y&=x===2?31:x===3?15:7;1<x&&b<C;)y=y<<6|63&v[b++],x--;1<x?I[_++]=65533:y<65536?I[_++]=y:(y-=65536,I[_++]=55296|y>>10&1023,I[_++]=56320|1023&y)}return I.length!==_&&(I.subarray?I=I.subarray(0,_):I.length=_),s.applyFromCharCode(I)}(f=s.transformTo(r.uint8array?"uint8array":"array",f))},s.inherits(p,o),p.prototype.processChunk=function(f){var v=s.transformTo(r.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(x,C){var I;for((C=C||x.length)>x.length&&(C=x.length),I=C-1;0<=I&&(192&x[I])==128;)I--;return I<0||I===0?C:I+c[x[I]]>C?I:C}(v),y=v;_!==v.length&&(r.uint8array?(y=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(y=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:n.utf8decode(y),meta:f.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=p,s.inherits(g,o),g.prototype.processChunk=function(f){this.push({data:n.utf8encode(f.data),meta:f.meta})},n.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,n){var s=t("./support"),r=t("./base64"),a=t("./nodejsUtils"),o=t("./external");function c(b){return b}function d(b,_){for(var y=0;y<b.length;++y)_[y]=255&b.charCodeAt(y);return _}t("setimmediate"),n.newBlob=function(b,_){n.checkSupport("blob");try{return new Blob([b],{type:_})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(b),y.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(b,_,y){var x=[],C=0,I=b.length;if(I<=y)return String.fromCharCode.apply(null,b);for(;C<I;)_==="array"||_==="nodebuffer"?x.push(String.fromCharCode.apply(null,b.slice(C,Math.min(C+y,I)))):x.push(String.fromCharCode.apply(null,b.subarray(C,Math.min(C+y,I)))),C+=y;return x.join("")},stringifyByChar:function(b){for(var _="",y=0;y<b.length;y++)_+=String.fromCharCode(b[y]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function g(b){var _=65536,y=n.getTypeOf(b),x=!0;if(y==="uint8array"?x=p.applyCanBeUsed.uint8array:y==="nodebuffer"&&(x=p.applyCanBeUsed.nodebuffer),x)for(;1<_;)try{return p.stringifyByChunk(b,y,_)}catch{_=Math.floor(_/2)}return p.stringifyByChar(b)}function f(b,_){for(var y=0;y<b.length;y++)_[y]=b[y];return _}n.applyFromCharCode=g;var v={};v.string={string:c,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,a.allocBuffer(b.length))}},v.array={string:g,array:c,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return a.newBufferFrom(b)}},v.arraybuffer={string:function(b){return g(new Uint8Array(b))},array:function(b){return f(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:c,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return a.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:g,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:c,nodebuffer:function(b){return a.newBufferFrom(b)}},v.nodebuffer={string:g,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return f(b,new Uint8Array(b.length))},nodebuffer:c},n.transformTo=function(b,_){if(_=_||"",!b)return _;n.checkSupport(b);var y=n.getTypeOf(_);return v[y][b](_)},n.resolve=function(b){for(var _=b.split("/"),y=[],x=0;x<_.length;x++){var C=_[x];C==="."||C===""&&x!==0&&x!==_.length-1||(C===".."?y.pop():y.push(C))}return y.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(b)?"nodebuffer":s.uint8array&&b instanceof Uint8Array?"uint8array":s.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!s[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var _,y,x="";for(y=0;y<(b||"").length;y++)x+="\\x"+((_=b.charCodeAt(y))<16?"0":"")+_.toString(16).toUpperCase();return x},n.delay=function(b,_,y){setImmediate(function(){b.apply(y||null,_||[])})},n.inherits=function(b,_){function y(){}y.prototype=_.prototype,b.prototype=new y},n.extend=function(){var b,_,y={};for(b=0;b<arguments.length;b++)for(_ in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],_)&&y[_]===void 0&&(y[_]=arguments[b][_]);return y},n.prepareContent=function(b,_,y,x,C){return o.Promise.resolve(_).then(function(I){return s.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new o.Promise(function(F,K){var q=new FileReader;q.onload=function(U){F(U.target.result)},q.onerror=function(U){K(U.target.error)},q.readAsArrayBuffer(I)}):I}).then(function(I){var F=n.getTypeOf(I);return F?(F==="arraybuffer"?I=n.transformTo("uint8array",I):F==="string"&&(C?I=r.decode(I):y&&x!==!0&&(I=function(K){return d(K,s.uint8array?new Uint8Array(K.length):new Array(K.length))}(I))),I):o.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,n){var s=t("./reader/readerFor"),r=t("./utils"),a=t("./signature"),o=t("./zipEntry"),c=t("./support");function d(p){this.files=[],this.loadOptions=p}d.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(g)+", expected "+r.pretty(p)+")")}},isSignature:function(p,g){var f=this.reader.index;this.reader.setIndex(p);var v=this.reader.readString(4)===g;return this.reader.setIndex(f),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),g=c.uint8array?"uint8array":"array",f=r.transformTo(g,p);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,g,f,v=this.zip64EndOfCentralSize-44;0<v;)p=this.reader.readInt(2),g=this.reader.readInt(4),f=this.reader.readData(g),this.zip64ExtensibleData[p]={id:p,length:g,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,g;for(p=0;p<this.files.length;p++)g=this.files[p],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(p=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var g=p;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var v=g-f;if(0<v)this.isSignature(g,a.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(p){this.reader=s(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,n){var s=t("./reader/readerFor"),r=t("./utils"),a=t("./compressedObject"),o=t("./crc32"),c=t("./utf8"),d=t("./compressions"),p=t("./support");function g(f,v){this.options=f,this.loadOptions=v}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var v,b;if(f.skip(22),this.fileNameLength=f.readInt(2),b=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)&&d[y].magic===_)return d[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,v,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var v=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(v),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var v,b,_,y=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<y;)v=f.readInt(2),b=f.readInt(2),_=f.readData(b),this.extraFields[v]={id:v,length:b,value:_};f.setIndex(y)},handleUTF8:function(){var f=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=r.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var y=r.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var v=s(f.value);return v.readInt(1)!==1||o(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var v=s(f.value);return v.readInt(1)!==1||o(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(f.length-5))}return null}},i.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,n){function s(v,b,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=b,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var r=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),o=t("./utf8"),c=t("./compressedObject"),d=t("./stream/GenericWorker");s.prototype={internalStream:function(v){var b=null,_="string";try{if(!v)throw new Error("No output type specified.");var y=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),b=this._decompressWorker();var x=!this._dataBinary;x&&!y&&(b=b.pipe(new o.Utf8EncodeWorker)),!x&&y&&(b=b.pipe(new o.Utf8DecodeWorker))}catch(C){(b=new d("error")).error(C)}return new r(b,_,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new o.Utf8EncodeWorker)),c.createWorkerFrom(_,v,b)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<p.length;f++)s.prototype[p[f]]=g;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,n){(function(s){var r,a,o=s.MutationObserver||s.WebKitMutationObserver;if(o){var c=0,d=new o(v),p=s.document.createTextNode("");d.observe(p,{characterData:!0}),r=function(){p.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)r="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var b=s.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},s.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var g=new s.MessageChannel;g.port1.onmessage=v,r=function(){g.port2.postMessage(0)}}var f=[];function v(){var b,_;a=!0;for(var y=f.length;y;){for(_=f,f=[],b=-1;++b<y;)_[b]();y=f.length}a=!1}i.exports=function(b){f.push(b)!==1||a||r()}}).call(this,typeof qp<"u"?qp:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,n){var s=t("immediate");function r(){}var a={},o=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function p(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,y!==r&&b(this,y)}function g(y,x,C){this.promise=y,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function f(y,x,C){s(function(){var I;try{I=x(C)}catch(F){return a.reject(y,F)}I===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,I)})}function v(y){var x=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof x=="function")return function(){x.apply(y,arguments)}}function b(y,x){var C=!1;function I(q){C||(C=!0,a.reject(y,q))}function F(q){C||(C=!0,a.resolve(y,q))}var K=_(function(){x(F,I)});K.status==="error"&&I(K.value)}function _(y,x){var C={};try{C.value=y(x),C.status="success"}catch(I){C.status="error",C.value=I}return C}(i.exports=p).prototype.finally=function(y){if(typeof y!="function")return this;var x=this.constructor;return this.then(function(C){return x.resolve(y()).then(function(){return C})},function(C){return x.resolve(y()).then(function(){throw C})})},p.prototype.catch=function(y){return this.then(null,y)},p.prototype.then=function(y,x){if(typeof y!="function"&&this.state===c||typeof x!="function"&&this.state===o)return this;var C=new this.constructor(r);return this.state!==d?f(C,this.state===c?y:x,this.outcome):this.queue.push(new g(C,y,x)),C},g.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},g.prototype.otherCallFulfilled=function(y){f(this.promise,this.onFulfilled,y)},g.prototype.callRejected=function(y){a.reject(this.promise,y)},g.prototype.otherCallRejected=function(y){f(this.promise,this.onRejected,y)},a.resolve=function(y,x){var C=_(v,x);if(C.status==="error")return a.reject(y,C.value);var I=C.value;if(I)b(y,I);else{y.state=c,y.outcome=x;for(var F=-1,K=y.queue.length;++F<K;)y.queue[F].callFulfilled(x)}return y},a.reject=function(y,x){y.state=o,y.outcome=x;for(var C=-1,I=y.queue.length;++C<I;)y.queue[C].callRejected(x);return y},p.resolve=function(y){return y instanceof this?y:a.resolve(new this(r),y)},p.reject=function(y){var x=new this(r);return a.reject(x,y)},p.all=function(y){var x=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=y.length,I=!1;if(!C)return this.resolve([]);for(var F=new Array(C),K=0,q=-1,U=new this(r);++q<C;)X(y[q],q);return U;function X(rt,M){x.resolve(rt).then(function(E){F[M]=E,++K!==C||I||(I=!0,a.resolve(U,F))},function(E){I||(I=!0,a.reject(U,E))})}},p.race=function(y){var x=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=y.length,I=!1;if(!C)return this.resolve([]);for(var F=-1,K=new this(r);++F<C;)q=y[F],x.resolve(q).then(function(U){I||(I=!0,a.resolve(K,U))},function(U){I||(I=!0,a.reject(K,U))});var q;return K}},{immediate:36}],38:[function(t,i,n){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,n){var s=t("./zlib/deflate"),r=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/messages"),c=t("./zlib/zstream"),d=Object.prototype.toString,p=0,g=-1,f=0,v=8;function b(y){if(!(this instanceof b))return new b(y);this.options=r.assign({level:g,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},y||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var C=s.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(C!==p)throw new Error(o[C]);if(x.header&&s.deflateSetHeader(this.strm,x.header),x.dictionary){var I;if(I=typeof x.dictionary=="string"?a.string2buf(x.dictionary):d.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(C=s.deflateSetDictionary(this.strm,I))!==p)throw new Error(o[C]);this._dict_set=!0}}function _(y,x){var C=new b(x);if(C.push(y,!0),C.err)throw C.msg||o[C.err];return C.result}b.prototype.push=function(y,x){var C,I,F=this.strm,K=this.options.chunkSize;if(this.ended)return!1;I=x===~~x?x:x===!0?4:0,typeof y=="string"?F.input=a.string2buf(y):d.call(y)==="[object ArrayBuffer]"?F.input=new Uint8Array(y):F.input=y,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new r.Buf8(K),F.next_out=0,F.avail_out=K),(C=s.deflate(F,I))!==1&&C!==p)return this.onEnd(C),!(this.ended=!0);F.avail_out!==0&&(F.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(r.shrinkBuf(F.output,F.next_out))):this.onData(r.shrinkBuf(F.output,F.next_out)))}while((0<F.avail_in||F.avail_out===0)&&C!==1);return I===4?(C=s.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===p):I!==2||(this.onEnd(p),!(F.avail_out=0))},b.prototype.onData=function(y){this.chunks.push(y)},b.prototype.onEnd=function(y){y===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},n.Deflate=b,n.deflate=_,n.deflateRaw=function(y,x){return(x=x||{}).raw=!0,_(y,x)},n.gzip=function(y,x){return(x=x||{}).gzip=!0,_(y,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,n){var s=t("./zlib/inflate"),r=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/constants"),c=t("./zlib/messages"),d=t("./zlib/zstream"),p=t("./zlib/gzheader"),g=Object.prototype.toString;function f(b){if(!(this instanceof f))return new f(b);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},b||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||b&&b.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,_.windowBits);if(y!==o.Z_OK)throw new Error(c[y]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}function v(b,_){var y=new f(_);if(y.push(b,!0),y.err)throw y.msg||c[y.err];return y.result}f.prototype.push=function(b,_){var y,x,C,I,F,K,q=this.strm,U=this.options.chunkSize,X=this.options.dictionary,rt=!1;if(this.ended)return!1;x=_===~~_?_:_===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof b=="string"?q.input=a.binstring2buf(b):g.call(b)==="[object ArrayBuffer]"?q.input=new Uint8Array(b):q.input=b,q.next_in=0,q.avail_in=q.input.length;do{if(q.avail_out===0&&(q.output=new r.Buf8(U),q.next_out=0,q.avail_out=U),(y=s.inflate(q,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&X&&(K=typeof X=="string"?a.string2buf(X):g.call(X)==="[object ArrayBuffer]"?new Uint8Array(X):X,y=s.inflateSetDictionary(this.strm,K)),y===o.Z_BUF_ERROR&&rt===!0&&(y=o.Z_OK,rt=!1),y!==o.Z_STREAM_END&&y!==o.Z_OK)return this.onEnd(y),!(this.ended=!0);q.next_out&&(q.avail_out!==0&&y!==o.Z_STREAM_END&&(q.avail_in!==0||x!==o.Z_FINISH&&x!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=a.utf8border(q.output,q.next_out),I=q.next_out-C,F=a.buf2string(q.output,C),q.next_out=I,q.avail_out=U-I,I&&r.arraySet(q.output,q.output,C,I,0),this.onData(F)):this.onData(r.shrinkBuf(q.output,q.next_out)))),q.avail_in===0&&q.avail_out===0&&(rt=!0)}while((0<q.avail_in||q.avail_out===0)&&y!==o.Z_STREAM_END);return y===o.Z_STREAM_END&&(x=o.Z_FINISH),x===o.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===o.Z_OK):x!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(q.avail_out=0))},f.prototype.onData=function(b){this.chunks.push(b)},f.prototype.onEnd=function(b){b===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=f,n.inflate=v,n.inflateRaw=function(b,_){return(_=_||{}).raw=!0,v(b,_)},n.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(o){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var p in d)d.hasOwnProperty(p)&&(o[p]=d[p])}}return o},n.shrinkBuf=function(o,c){return o.length===c?o:o.subarray?o.subarray(0,c):(o.length=c,o)};var r={arraySet:function(o,c,d,p,g){if(c.subarray&&o.subarray)o.set(c.subarray(d,d+p),g);else for(var f=0;f<p;f++)o[g+f]=c[d+f]},flattenChunks:function(o){var c,d,p,g,f,v;for(c=p=0,d=o.length;c<d;c++)p+=o[c].length;for(v=new Uint8Array(p),c=g=0,d=o.length;c<d;c++)f=o[c],v.set(f,g),g+=f.length;return v}},a={arraySet:function(o,c,d,p,g){for(var f=0;f<p;f++)o[g+f]=c[d+f]},flattenChunks:function(o){return[].concat.apply([],o)}};n.setTyped=function(o){o?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(s)},{}],42:[function(t,i,n){var s=t("./common"),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var o=new s.Buf8(256),c=0;c<256;c++)o[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(p,g){if(g<65537&&(p.subarray&&a||!p.subarray&&r))return String.fromCharCode.apply(null,s.shrinkBuf(p,g));for(var f="",v=0;v<g;v++)f+=String.fromCharCode(p[v]);return f}o[254]=o[254]=1,n.string2buf=function(p){var g,f,v,b,_,y=p.length,x=0;for(b=0;b<y;b++)(64512&(f=p.charCodeAt(b)))==55296&&b+1<y&&(64512&(v=p.charCodeAt(b+1)))==56320&&(f=65536+(f-55296<<10)+(v-56320),b++),x+=f<128?1:f<2048?2:f<65536?3:4;for(g=new s.Buf8(x),b=_=0;_<x;b++)(64512&(f=p.charCodeAt(b)))==55296&&b+1<y&&(64512&(v=p.charCodeAt(b+1)))==56320&&(f=65536+(f-55296<<10)+(v-56320),b++),f<128?g[_++]=f:(f<2048?g[_++]=192|f>>>6:(f<65536?g[_++]=224|f>>>12:(g[_++]=240|f>>>18,g[_++]=128|f>>>12&63),g[_++]=128|f>>>6&63),g[_++]=128|63&f);return g},n.buf2binstring=function(p){return d(p,p.length)},n.binstring2buf=function(p){for(var g=new s.Buf8(p.length),f=0,v=g.length;f<v;f++)g[f]=p.charCodeAt(f);return g},n.buf2string=function(p,g){var f,v,b,_,y=g||p.length,x=new Array(2*y);for(f=v=0;f<y;)if((b=p[f++])<128)x[v++]=b;else if(4<(_=o[b]))x[v++]=65533,f+=_-1;else{for(b&=_===2?31:_===3?15:7;1<_&&f<y;)b=b<<6|63&p[f++],_--;1<_?x[v++]=65533:b<65536?x[v++]=b:(b-=65536,x[v++]=55296|b>>10&1023,x[v++]=56320|1023&b)}return d(x,v)},n.utf8border=function(p,g){var f;for((g=g||p.length)>p.length&&(g=p.length),f=g-1;0<=f&&(192&p[f])==128;)f--;return f<0||f===0?g:f+o[p[f]]>g?f:g}},{"./common":41}],43:[function(t,i,n){i.exports=function(s,r,a,o){for(var c=65535&s|0,d=s>>>16&65535|0,p=0;a!==0;){for(a-=p=2e3<a?2e3:a;d=d+(c=c+r[o++]|0)|0,--p;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(t,i,n){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,n){var s=function(){for(var r,a=[],o=0;o<256;o++){r=o;for(var c=0;c<8;c++)r=1&r?3988292384^r>>>1:r>>>1;a[o]=r}return a}();i.exports=function(r,a,o,c){var d=s,p=c+o;r^=-1;for(var g=c;g<p;g++)r=r>>>8^d[255&(r^a[g])];return-1^r}},{}],46:[function(t,i,n){var s,r=t("../utils/common"),a=t("./trees"),o=t("./adler32"),c=t("./crc32"),d=t("./messages"),p=0,g=4,f=0,v=-2,b=-1,_=4,y=2,x=8,C=9,I=286,F=30,K=19,q=2*I+1,U=15,X=3,rt=258,M=rt+X+1,E=42,W=113,S=1,nt=2,st=3,tt=4;function dt(N,at){return N.msg=d[at],at}function ot(N){return(N<<1)-(4<N?9:0)}function At(N){for(var at=N.length;0<=--at;)N[at]=0}function lt(N){var at=N.state,B=at.pending;B>N.avail_out&&(B=N.avail_out),B!==0&&(r.arraySet(N.output,at.pending_buf,at.pending_out,B,N.next_out),N.next_out+=B,at.pending_out+=B,N.total_out+=B,N.avail_out-=B,at.pending-=B,at.pending===0&&(at.pending_out=0))}function k(N,at){a._tr_flush_block(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,at),N.block_start=N.strstart,lt(N.strm)}function G(N,at){N.pending_buf[N.pending++]=at}function Y(N,at){N.pending_buf[N.pending++]=at>>>8&255,N.pending_buf[N.pending++]=255&at}function Z(N,at){var B,J,$=N.max_chain_length,et=N.strstart,vt=N.prev_length,_t=N.nice_match,ht=N.strstart>N.w_size-M?N.strstart-(N.w_size-M):0,kt=N.window,Ft=N.w_mask,Nt=N.prev,Bt=N.strstart+rt,Jt=kt[et+vt-1],Zt=kt[et+vt];N.prev_length>=N.good_match&&($>>=2),_t>N.lookahead&&(_t=N.lookahead);do if(kt[(B=at)+vt]===Zt&&kt[B+vt-1]===Jt&&kt[B]===kt[et]&&kt[++B]===kt[et+1]){et+=2,B++;do;while(kt[++et]===kt[++B]&&kt[++et]===kt[++B]&&kt[++et]===kt[++B]&&kt[++et]===kt[++B]&&kt[++et]===kt[++B]&&kt[++et]===kt[++B]&&kt[++et]===kt[++B]&&kt[++et]===kt[++B]&&et<Bt);if(J=rt-(Bt-et),et=Bt-rt,vt<J){if(N.match_start=at,_t<=(vt=J))break;Jt=kt[et+vt-1],Zt=kt[et+vt]}}while((at=Nt[at&Ft])>ht&&--$!=0);return vt<=N.lookahead?vt:N.lookahead}function ct(N){var at,B,J,$,et,vt,_t,ht,kt,Ft,Nt=N.w_size;do{if($=N.window_size-N.lookahead-N.strstart,N.strstart>=Nt+(Nt-M)){for(r.arraySet(N.window,N.window,Nt,Nt,0),N.match_start-=Nt,N.strstart-=Nt,N.block_start-=Nt,at=B=N.hash_size;J=N.head[--at],N.head[at]=Nt<=J?J-Nt:0,--B;);for(at=B=Nt;J=N.prev[--at],N.prev[at]=Nt<=J?J-Nt:0,--B;);$+=Nt}if(N.strm.avail_in===0)break;if(vt=N.strm,_t=N.window,ht=N.strstart+N.lookahead,kt=$,Ft=void 0,Ft=vt.avail_in,kt<Ft&&(Ft=kt),B=Ft===0?0:(vt.avail_in-=Ft,r.arraySet(_t,vt.input,vt.next_in,Ft,ht),vt.state.wrap===1?vt.adler=o(vt.adler,_t,Ft,ht):vt.state.wrap===2&&(vt.adler=c(vt.adler,_t,Ft,ht)),vt.next_in+=Ft,vt.total_in+=Ft,Ft),N.lookahead+=B,N.lookahead+N.insert>=X)for(et=N.strstart-N.insert,N.ins_h=N.window[et],N.ins_h=(N.ins_h<<N.hash_shift^N.window[et+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[et+X-1])&N.hash_mask,N.prev[et&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=et,et++,N.insert--,!(N.lookahead+N.insert<X)););}while(N.lookahead<M&&N.strm.avail_in!==0)}function gt(N,at){for(var B,J;;){if(N.lookahead<M){if(ct(N),N.lookahead<M&&at===p)return S;if(N.lookahead===0)break}if(B=0,N.lookahead>=X&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+X-1])&N.hash_mask,B=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),B!==0&&N.strstart-B<=N.w_size-M&&(N.match_length=Z(N,B)),N.match_length>=X)if(J=a._tr_tally(N,N.strstart-N.match_start,N.match_length-X),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=X){for(N.match_length--;N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+X-1])&N.hash_mask,B=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else J=a._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(J&&(k(N,!1),N.strm.avail_out===0))return S}return N.insert=N.strstart<X-1?N.strstart:X-1,at===g?(k(N,!0),N.strm.avail_out===0?st:tt):N.last_lit&&(k(N,!1),N.strm.avail_out===0)?S:nt}function bt(N,at){for(var B,J,$;;){if(N.lookahead<M){if(ct(N),N.lookahead<M&&at===p)return S;if(N.lookahead===0)break}if(B=0,N.lookahead>=X&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+X-1])&N.hash_mask,B=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=X-1,B!==0&&N.prev_length<N.max_lazy_match&&N.strstart-B<=N.w_size-M&&(N.match_length=Z(N,B),N.match_length<=5&&(N.strategy===1||N.match_length===X&&4096<N.strstart-N.match_start)&&(N.match_length=X-1)),N.prev_length>=X&&N.match_length<=N.prev_length){for($=N.strstart+N.lookahead-X,J=a._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-X),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=$&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+X-1])&N.hash_mask,B=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=X-1,N.strstart++,J&&(k(N,!1),N.strm.avail_out===0))return S}else if(N.match_available){if((J=a._tr_tally(N,0,N.window[N.strstart-1]))&&k(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return S}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(J=a._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<X-1?N.strstart:X-1,at===g?(k(N,!0),N.strm.avail_out===0?st:tt):N.last_lit&&(k(N,!1),N.strm.avail_out===0)?S:nt}function wt(N,at,B,J,$){this.good_length=N,this.max_lazy=at,this.nice_length=B,this.max_chain=J,this.func=$}function Mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*q),this.dyn_dtree=new r.Buf16(2*(2*F+1)),this.bl_tree=new r.Buf16(2*(2*K+1)),At(this.dyn_ltree),At(this.dyn_dtree),At(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(U+1),this.heap=new r.Buf16(2*I+1),At(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*I+1),At(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function It(N){var at;return N&&N.state?(N.total_in=N.total_out=0,N.data_type=y,(at=N.state).pending=0,at.pending_out=0,at.wrap<0&&(at.wrap=-at.wrap),at.status=at.wrap?E:W,N.adler=at.wrap===2?0:1,at.last_flush=p,a._tr_init(at),f):dt(N,v)}function zt(N){var at=It(N);return at===f&&function(B){B.window_size=2*B.w_size,At(B.head),B.max_lazy_match=s[B.level].max_lazy,B.good_match=s[B.level].good_length,B.nice_match=s[B.level].nice_length,B.max_chain_length=s[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=X-1,B.match_available=0,B.ins_h=0}(N.state),at}function jt(N,at,B,J,$,et){if(!N)return v;var vt=1;if(at===b&&(at=6),J<0?(vt=0,J=-J):15<J&&(vt=2,J-=16),$<1||C<$||B!==x||J<8||15<J||at<0||9<at||et<0||_<et)return dt(N,v);J===8&&(J=9);var _t=new Mt;return(N.state=_t).strm=N,_t.wrap=vt,_t.gzhead=null,_t.w_bits=J,_t.w_size=1<<_t.w_bits,_t.w_mask=_t.w_size-1,_t.hash_bits=$+7,_t.hash_size=1<<_t.hash_bits,_t.hash_mask=_t.hash_size-1,_t.hash_shift=~~((_t.hash_bits+X-1)/X),_t.window=new r.Buf8(2*_t.w_size),_t.head=new r.Buf16(_t.hash_size),_t.prev=new r.Buf16(_t.w_size),_t.lit_bufsize=1<<$+6,_t.pending_buf_size=4*_t.lit_bufsize,_t.pending_buf=new r.Buf8(_t.pending_buf_size),_t.d_buf=1*_t.lit_bufsize,_t.l_buf=3*_t.lit_bufsize,_t.level=at,_t.strategy=et,_t.method=B,zt(N)}s=[new wt(0,0,0,0,function(N,at){var B=65535;for(B>N.pending_buf_size-5&&(B=N.pending_buf_size-5);;){if(N.lookahead<=1){if(ct(N),N.lookahead===0&&at===p)return S;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var J=N.block_start+B;if((N.strstart===0||N.strstart>=J)&&(N.lookahead=N.strstart-J,N.strstart=J,k(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-M&&(k(N,!1),N.strm.avail_out===0))return S}return N.insert=0,at===g?(k(N,!0),N.strm.avail_out===0?st:tt):(N.strstart>N.block_start&&(k(N,!1),N.strm.avail_out),S)}),new wt(4,4,8,4,gt),new wt(4,5,16,8,gt),new wt(4,6,32,32,gt),new wt(4,4,16,16,bt),new wt(8,16,32,32,bt),new wt(8,16,128,128,bt),new wt(8,32,128,256,bt),new wt(32,128,258,1024,bt),new wt(32,258,258,4096,bt)],n.deflateInit=function(N,at){return jt(N,at,x,15,8,0)},n.deflateInit2=jt,n.deflateReset=zt,n.deflateResetKeep=It,n.deflateSetHeader=function(N,at){return N&&N.state?N.state.wrap!==2?v:(N.state.gzhead=at,f):v},n.deflate=function(N,at){var B,J,$,et;if(!N||!N.state||5<at||at<0)return N?dt(N,v):v;if(J=N.state,!N.output||!N.input&&N.avail_in!==0||J.status===666&&at!==g)return dt(N,N.avail_out===0?-5:v);if(J.strm=N,B=J.last_flush,J.last_flush=at,J.status===E)if(J.wrap===2)N.adler=0,G(J,31),G(J,139),G(J,8),J.gzhead?(G(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),G(J,255&J.gzhead.time),G(J,J.gzhead.time>>8&255),G(J,J.gzhead.time>>16&255),G(J,J.gzhead.time>>24&255),G(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),G(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(G(J,255&J.gzhead.extra.length),G(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(N.adler=c(N.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(G(J,0),G(J,0),G(J,0),G(J,0),G(J,0),G(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),G(J,3),J.status=W);else{var vt=x+(J.w_bits-8<<4)<<8;vt|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(vt|=32),vt+=31-vt%31,J.status=W,Y(J,vt),J.strstart!==0&&(Y(J,N.adler>>>16),Y(J,65535&N.adler)),N.adler=1}if(J.status===69)if(J.gzhead.extra){for($=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>$&&(N.adler=c(N.adler,J.pending_buf,J.pending-$,$)),lt(N),$=J.pending,J.pending!==J.pending_buf_size));)G(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>$&&(N.adler=c(N.adler,J.pending_buf,J.pending-$,$)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){$=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>$&&(N.adler=c(N.adler,J.pending_buf,J.pending-$,$)),lt(N),$=J.pending,J.pending===J.pending_buf_size)){et=1;break}et=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,G(J,et)}while(et!==0);J.gzhead.hcrc&&J.pending>$&&(N.adler=c(N.adler,J.pending_buf,J.pending-$,$)),et===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){$=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>$&&(N.adler=c(N.adler,J.pending_buf,J.pending-$,$)),lt(N),$=J.pending,J.pending===J.pending_buf_size)){et=1;break}et=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,G(J,et)}while(et!==0);J.gzhead.hcrc&&J.pending>$&&(N.adler=c(N.adler,J.pending_buf,J.pending-$,$)),et===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&lt(N),J.pending+2<=J.pending_buf_size&&(G(J,255&N.adler),G(J,N.adler>>8&255),N.adler=0,J.status=W)):J.status=W),J.pending!==0){if(lt(N),N.avail_out===0)return J.last_flush=-1,f}else if(N.avail_in===0&&ot(at)<=ot(B)&&at!==g)return dt(N,-5);if(J.status===666&&N.avail_in!==0)return dt(N,-5);if(N.avail_in!==0||J.lookahead!==0||at!==p&&J.status!==666){var _t=J.strategy===2?function(ht,kt){for(var Ft;;){if(ht.lookahead===0&&(ct(ht),ht.lookahead===0)){if(kt===p)return S;break}if(ht.match_length=0,Ft=a._tr_tally(ht,0,ht.window[ht.strstart]),ht.lookahead--,ht.strstart++,Ft&&(k(ht,!1),ht.strm.avail_out===0))return S}return ht.insert=0,kt===g?(k(ht,!0),ht.strm.avail_out===0?st:tt):ht.last_lit&&(k(ht,!1),ht.strm.avail_out===0)?S:nt}(J,at):J.strategy===3?function(ht,kt){for(var Ft,Nt,Bt,Jt,Zt=ht.window;;){if(ht.lookahead<=rt){if(ct(ht),ht.lookahead<=rt&&kt===p)return S;if(ht.lookahead===0)break}if(ht.match_length=0,ht.lookahead>=X&&0<ht.strstart&&(Nt=Zt[Bt=ht.strstart-1])===Zt[++Bt]&&Nt===Zt[++Bt]&&Nt===Zt[++Bt]){Jt=ht.strstart+rt;do;while(Nt===Zt[++Bt]&&Nt===Zt[++Bt]&&Nt===Zt[++Bt]&&Nt===Zt[++Bt]&&Nt===Zt[++Bt]&&Nt===Zt[++Bt]&&Nt===Zt[++Bt]&&Nt===Zt[++Bt]&&Bt<Jt);ht.match_length=rt-(Jt-Bt),ht.match_length>ht.lookahead&&(ht.match_length=ht.lookahead)}if(ht.match_length>=X?(Ft=a._tr_tally(ht,1,ht.match_length-X),ht.lookahead-=ht.match_length,ht.strstart+=ht.match_length,ht.match_length=0):(Ft=a._tr_tally(ht,0,ht.window[ht.strstart]),ht.lookahead--,ht.strstart++),Ft&&(k(ht,!1),ht.strm.avail_out===0))return S}return ht.insert=0,kt===g?(k(ht,!0),ht.strm.avail_out===0?st:tt):ht.last_lit&&(k(ht,!1),ht.strm.avail_out===0)?S:nt}(J,at):s[J.level].func(J,at);if(_t!==st&&_t!==tt||(J.status=666),_t===S||_t===st)return N.avail_out===0&&(J.last_flush=-1),f;if(_t===nt&&(at===1?a._tr_align(J):at!==5&&(a._tr_stored_block(J,0,0,!1),at===3&&(At(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),lt(N),N.avail_out===0))return J.last_flush=-1,f}return at!==g?f:J.wrap<=0?1:(J.wrap===2?(G(J,255&N.adler),G(J,N.adler>>8&255),G(J,N.adler>>16&255),G(J,N.adler>>24&255),G(J,255&N.total_in),G(J,N.total_in>>8&255),G(J,N.total_in>>16&255),G(J,N.total_in>>24&255)):(Y(J,N.adler>>>16),Y(J,65535&N.adler)),lt(N),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?f:1)},n.deflateEnd=function(N){var at;return N&&N.state?(at=N.state.status)!==E&&at!==69&&at!==73&&at!==91&&at!==103&&at!==W&&at!==666?dt(N,v):(N.state=null,at===W?dt(N,-3):f):v},n.deflateSetDictionary=function(N,at){var B,J,$,et,vt,_t,ht,kt,Ft=at.length;if(!N||!N.state||(et=(B=N.state).wrap)===2||et===1&&B.status!==E||B.lookahead)return v;for(et===1&&(N.adler=o(N.adler,at,Ft,0)),B.wrap=0,Ft>=B.w_size&&(et===0&&(At(B.head),B.strstart=0,B.block_start=0,B.insert=0),kt=new r.Buf8(B.w_size),r.arraySet(kt,at,Ft-B.w_size,B.w_size,0),at=kt,Ft=B.w_size),vt=N.avail_in,_t=N.next_in,ht=N.input,N.avail_in=Ft,N.next_in=0,N.input=at,ct(B);B.lookahead>=X;){for(J=B.strstart,$=B.lookahead-(X-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[J+X-1])&B.hash_mask,B.prev[J&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=J,J++,--$;);B.strstart=J,B.lookahead=X-1,ct(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=X-1,B.match_available=0,N.next_in=_t,N.input=ht,N.avail_in=vt,B.wrap=et,f},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,n){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,n){i.exports=function(s,r){var a,o,c,d,p,g,f,v,b,_,y,x,C,I,F,K,q,U,X,rt,M,E,W,S,nt;a=s.state,o=s.next_in,S=s.input,c=o+(s.avail_in-5),d=s.next_out,nt=s.output,p=d-(r-s.avail_out),g=d+(s.avail_out-257),f=a.dmax,v=a.wsize,b=a.whave,_=a.wnext,y=a.window,x=a.hold,C=a.bits,I=a.lencode,F=a.distcode,K=(1<<a.lenbits)-1,q=(1<<a.distbits)-1;t:do{C<15&&(x+=S[o++]<<C,C+=8,x+=S[o++]<<C,C+=8),U=I[x&K];e:for(;;){if(x>>>=X=U>>>24,C-=X,(X=U>>>16&255)===0)nt[d++]=65535&U;else{if(!(16&X)){if(!(64&X)){U=I[(65535&U)+(x&(1<<X)-1)];continue e}if(32&X){a.mode=12;break t}s.msg="invalid literal/length code",a.mode=30;break t}rt=65535&U,(X&=15)&&(C<X&&(x+=S[o++]<<C,C+=8),rt+=x&(1<<X)-1,x>>>=X,C-=X),C<15&&(x+=S[o++]<<C,C+=8,x+=S[o++]<<C,C+=8),U=F[x&q];i:for(;;){if(x>>>=X=U>>>24,C-=X,!(16&(X=U>>>16&255))){if(!(64&X)){U=F[(65535&U)+(x&(1<<X)-1)];continue i}s.msg="invalid distance code",a.mode=30;break t}if(M=65535&U,C<(X&=15)&&(x+=S[o++]<<C,(C+=8)<X&&(x+=S[o++]<<C,C+=8)),f<(M+=x&(1<<X)-1)){s.msg="invalid distance too far back",a.mode=30;break t}if(x>>>=X,C-=X,(X=d-p)<M){if(b<(X=M-X)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break t}if(W=y,(E=0)===_){if(E+=v-X,X<rt){for(rt-=X;nt[d++]=y[E++],--X;);E=d-M,W=nt}}else if(_<X){if(E+=v+_-X,(X-=_)<rt){for(rt-=X;nt[d++]=y[E++],--X;);if(E=0,_<rt){for(rt-=X=_;nt[d++]=y[E++],--X;);E=d-M,W=nt}}}else if(E+=_-X,X<rt){for(rt-=X;nt[d++]=y[E++],--X;);E=d-M,W=nt}for(;2<rt;)nt[d++]=W[E++],nt[d++]=W[E++],nt[d++]=W[E++],rt-=3;rt&&(nt[d++]=W[E++],1<rt&&(nt[d++]=W[E++]))}else{for(E=d-M;nt[d++]=nt[E++],nt[d++]=nt[E++],nt[d++]=nt[E++],2<(rt-=3););rt&&(nt[d++]=nt[E++],1<rt&&(nt[d++]=nt[E++]))}break}}break}}while(o<c&&d<g);o-=rt=C>>3,x&=(1<<(C-=rt<<3))-1,s.next_in=o,s.next_out=d,s.avail_in=o<c?c-o+5:5-(o-c),s.avail_out=d<g?g-d+257:257-(d-g),a.hold=x,a.bits=C}},{}],49:[function(t,i,n){var s=t("../utils/common"),r=t("./adler32"),a=t("./crc32"),o=t("./inffast"),c=t("./inftrees"),d=1,p=2,g=0,f=-2,v=1,b=852,_=592;function y(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(E){var W;return E&&E.state?(W=E.state,E.total_in=E.total_out=W.total=0,E.msg="",W.wrap&&(E.adler=1&W.wrap),W.mode=v,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new s.Buf32(b),W.distcode=W.distdyn=new s.Buf32(_),W.sane=1,W.back=-1,g):f}function I(E){var W;return E&&E.state?((W=E.state).wsize=0,W.whave=0,W.wnext=0,C(E)):f}function F(E,W){var S,nt;return E&&E.state?(nt=E.state,W<0?(S=0,W=-W):(S=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?f:(nt.window!==null&&nt.wbits!==W&&(nt.window=null),nt.wrap=S,nt.wbits=W,I(E))):f}function K(E,W){var S,nt;return E?(nt=new x,(E.state=nt).window=null,(S=F(E,W))!==g&&(E.state=null),S):f}var q,U,X=!0;function rt(E){if(X){var W;for(q=new s.Buf32(512),U=new s.Buf32(32),W=0;W<144;)E.lens[W++]=8;for(;W<256;)E.lens[W++]=9;for(;W<280;)E.lens[W++]=7;for(;W<288;)E.lens[W++]=8;for(c(d,E.lens,0,288,q,0,E.work,{bits:9}),W=0;W<32;)E.lens[W++]=5;c(p,E.lens,0,32,U,0,E.work,{bits:5}),X=!1}E.lencode=q,E.lenbits=9,E.distcode=U,E.distbits=5}function M(E,W,S,nt){var st,tt=E.state;return tt.window===null&&(tt.wsize=1<<tt.wbits,tt.wnext=0,tt.whave=0,tt.window=new s.Buf8(tt.wsize)),nt>=tt.wsize?(s.arraySet(tt.window,W,S-tt.wsize,tt.wsize,0),tt.wnext=0,tt.whave=tt.wsize):(nt<(st=tt.wsize-tt.wnext)&&(st=nt),s.arraySet(tt.window,W,S-nt,st,tt.wnext),(nt-=st)?(s.arraySet(tt.window,W,S-nt,nt,0),tt.wnext=nt,tt.whave=tt.wsize):(tt.wnext+=st,tt.wnext===tt.wsize&&(tt.wnext=0),tt.whave<tt.wsize&&(tt.whave+=st))),0}n.inflateReset=I,n.inflateReset2=F,n.inflateResetKeep=C,n.inflateInit=function(E){return K(E,15)},n.inflateInit2=K,n.inflate=function(E,W){var S,nt,st,tt,dt,ot,At,lt,k,G,Y,Z,ct,gt,bt,wt,Mt,It,zt,jt,N,at,B,J,$=0,et=new s.Buf8(4),vt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return f;(S=E.state).mode===12&&(S.mode=13),dt=E.next_out,st=E.output,At=E.avail_out,tt=E.next_in,nt=E.input,ot=E.avail_in,lt=S.hold,k=S.bits,G=ot,Y=At,at=g;t:for(;;)switch(S.mode){case v:if(S.wrap===0){S.mode=13;break}for(;k<16;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if(2&S.wrap&&lt===35615){et[S.check=0]=255&lt,et[1]=lt>>>8&255,S.check=a(S.check,et,2,0),k=lt=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&lt)<<8)+(lt>>8))%31){E.msg="incorrect header check",S.mode=30;break}if((15&lt)!=8){E.msg="unknown compression method",S.mode=30;break}if(k-=4,N=8+(15&(lt>>>=4)),S.wbits===0)S.wbits=N;else if(N>S.wbits){E.msg="invalid window size",S.mode=30;break}S.dmax=1<<N,E.adler=S.check=1,S.mode=512&lt?10:12,k=lt=0;break;case 2:for(;k<16;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if(S.flags=lt,(255&S.flags)!=8){E.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){E.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=lt>>8&1),512&S.flags&&(et[0]=255&lt,et[1]=lt>>>8&255,S.check=a(S.check,et,2,0)),k=lt=0,S.mode=3;case 3:for(;k<32;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}S.head&&(S.head.time=lt),512&S.flags&&(et[0]=255&lt,et[1]=lt>>>8&255,et[2]=lt>>>16&255,et[3]=lt>>>24&255,S.check=a(S.check,et,4,0)),k=lt=0,S.mode=4;case 4:for(;k<16;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}S.head&&(S.head.xflags=255&lt,S.head.os=lt>>8),512&S.flags&&(et[0]=255&lt,et[1]=lt>>>8&255,S.check=a(S.check,et,2,0)),k=lt=0,S.mode=5;case 5:if(1024&S.flags){for(;k<16;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}S.length=lt,S.head&&(S.head.extra_len=lt),512&S.flags&&(et[0]=255&lt,et[1]=lt>>>8&255,S.check=a(S.check,et,2,0)),k=lt=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(ot<(Z=S.length)&&(Z=ot),Z&&(S.head&&(N=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),s.arraySet(S.head.extra,nt,tt,Z,N)),512&S.flags&&(S.check=a(S.check,nt,Z,tt)),ot-=Z,tt+=Z,S.length-=Z),S.length))break t;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(ot===0)break t;for(Z=0;N=nt[tt+Z++],S.head&&N&&S.length<65536&&(S.head.name+=String.fromCharCode(N)),N&&Z<ot;);if(512&S.flags&&(S.check=a(S.check,nt,Z,tt)),ot-=Z,tt+=Z,N)break t}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(ot===0)break t;for(Z=0;N=nt[tt+Z++],S.head&&N&&S.length<65536&&(S.head.comment+=String.fromCharCode(N)),N&&Z<ot;);if(512&S.flags&&(S.check=a(S.check,nt,Z,tt)),ot-=Z,tt+=Z,N)break t}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;k<16;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if(lt!==(65535&S.check)){E.msg="header crc mismatch",S.mode=30;break}k=lt=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),E.adler=S.check=0,S.mode=12;break;case 10:for(;k<32;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}E.adler=S.check=y(lt),k=lt=0,S.mode=11;case 11:if(S.havedict===0)return E.next_out=dt,E.avail_out=At,E.next_in=tt,E.avail_in=ot,S.hold=lt,S.bits=k,2;E.adler=S.check=1,S.mode=12;case 12:if(W===5||W===6)break t;case 13:if(S.last){lt>>>=7&k,k-=7&k,S.mode=27;break}for(;k<3;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}switch(S.last=1&lt,k-=1,3&(lt>>>=1)){case 0:S.mode=14;break;case 1:if(rt(S),S.mode=20,W!==6)break;lt>>>=2,k-=2;break t;case 2:S.mode=17;break;case 3:E.msg="invalid block type",S.mode=30}lt>>>=2,k-=2;break;case 14:for(lt>>>=7&k,k-=7&k;k<32;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if((65535&lt)!=(lt>>>16^65535)){E.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&lt,k=lt=0,S.mode=15,W===6)break t;case 15:S.mode=16;case 16:if(Z=S.length){if(ot<Z&&(Z=ot),At<Z&&(Z=At),Z===0)break t;s.arraySet(st,nt,tt,Z,dt),ot-=Z,tt+=Z,At-=Z,dt+=Z,S.length-=Z;break}S.mode=12;break;case 17:for(;k<14;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if(S.nlen=257+(31&lt),lt>>>=5,k-=5,S.ndist=1+(31&lt),lt>>>=5,k-=5,S.ncode=4+(15&lt),lt>>>=4,k-=4,286<S.nlen||30<S.ndist){E.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;k<3;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}S.lens[vt[S.have++]]=7&lt,lt>>>=3,k-=3}for(;S.have<19;)S.lens[vt[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,B={bits:S.lenbits},at=c(0,S.lens,0,19,S.lencode,0,S.work,B),S.lenbits=B.bits,at){E.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;wt=($=S.lencode[lt&(1<<S.lenbits)-1])>>>16&255,Mt=65535&$,!((bt=$>>>24)<=k);){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if(Mt<16)lt>>>=bt,k-=bt,S.lens[S.have++]=Mt;else{if(Mt===16){for(J=bt+2;k<J;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if(lt>>>=bt,k-=bt,S.have===0){E.msg="invalid bit length repeat",S.mode=30;break}N=S.lens[S.have-1],Z=3+(3&lt),lt>>>=2,k-=2}else if(Mt===17){for(J=bt+3;k<J;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}k-=bt,N=0,Z=3+(7&(lt>>>=bt)),lt>>>=3,k-=3}else{for(J=bt+7;k<J;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}k-=bt,N=0,Z=11+(127&(lt>>>=bt)),lt>>>=7,k-=7}if(S.have+Z>S.nlen+S.ndist){E.msg="invalid bit length repeat",S.mode=30;break}for(;Z--;)S.lens[S.have++]=N}}if(S.mode===30)break;if(S.lens[256]===0){E.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,B={bits:S.lenbits},at=c(d,S.lens,0,S.nlen,S.lencode,0,S.work,B),S.lenbits=B.bits,at){E.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,B={bits:S.distbits},at=c(p,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,B),S.distbits=B.bits,at){E.msg="invalid distances set",S.mode=30;break}if(S.mode=20,W===6)break t;case 20:S.mode=21;case 21:if(6<=ot&&258<=At){E.next_out=dt,E.avail_out=At,E.next_in=tt,E.avail_in=ot,S.hold=lt,S.bits=k,o(E,Y),dt=E.next_out,st=E.output,At=E.avail_out,tt=E.next_in,nt=E.input,ot=E.avail_in,lt=S.hold,k=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;wt=($=S.lencode[lt&(1<<S.lenbits)-1])>>>16&255,Mt=65535&$,!((bt=$>>>24)<=k);){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if(wt&&!(240&wt)){for(It=bt,zt=wt,jt=Mt;wt=($=S.lencode[jt+((lt&(1<<It+zt)-1)>>It)])>>>16&255,Mt=65535&$,!(It+(bt=$>>>24)<=k);){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}lt>>>=It,k-=It,S.back+=It}if(lt>>>=bt,k-=bt,S.back+=bt,S.length=Mt,wt===0){S.mode=26;break}if(32&wt){S.back=-1,S.mode=12;break}if(64&wt){E.msg="invalid literal/length code",S.mode=30;break}S.extra=15&wt,S.mode=22;case 22:if(S.extra){for(J=S.extra;k<J;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}S.length+=lt&(1<<S.extra)-1,lt>>>=S.extra,k-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;wt=($=S.distcode[lt&(1<<S.distbits)-1])>>>16&255,Mt=65535&$,!((bt=$>>>24)<=k);){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if(!(240&wt)){for(It=bt,zt=wt,jt=Mt;wt=($=S.distcode[jt+((lt&(1<<It+zt)-1)>>It)])>>>16&255,Mt=65535&$,!(It+(bt=$>>>24)<=k);){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}lt>>>=It,k-=It,S.back+=It}if(lt>>>=bt,k-=bt,S.back+=bt,64&wt){E.msg="invalid distance code",S.mode=30;break}S.offset=Mt,S.extra=15&wt,S.mode=24;case 24:if(S.extra){for(J=S.extra;k<J;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}S.offset+=lt&(1<<S.extra)-1,lt>>>=S.extra,k-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){E.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(At===0)break t;if(Z=Y-At,S.offset>Z){if((Z=S.offset-Z)>S.whave&&S.sane){E.msg="invalid distance too far back",S.mode=30;break}ct=Z>S.wnext?(Z-=S.wnext,S.wsize-Z):S.wnext-Z,Z>S.length&&(Z=S.length),gt=S.window}else gt=st,ct=dt-S.offset,Z=S.length;for(At<Z&&(Z=At),At-=Z,S.length-=Z;st[dt++]=gt[ct++],--Z;);S.length===0&&(S.mode=21);break;case 26:if(At===0)break t;st[dt++]=S.length,At--,S.mode=21;break;case 27:if(S.wrap){for(;k<32;){if(ot===0)break t;ot--,lt|=nt[tt++]<<k,k+=8}if(Y-=At,E.total_out+=Y,S.total+=Y,Y&&(E.adler=S.check=S.flags?a(S.check,st,Y,dt-Y):r(S.check,st,Y,dt-Y)),Y=At,(S.flags?lt:y(lt))!==S.check){E.msg="incorrect data check",S.mode=30;break}k=lt=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;k<32;){if(ot===0)break t;ot--,lt+=nt[tt++]<<k,k+=8}if(lt!==(4294967295&S.total)){E.msg="incorrect length check",S.mode=30;break}k=lt=0}S.mode=29;case 29:at=1;break t;case 30:at=-3;break t;case 31:return-4;case 32:default:return f}return E.next_out=dt,E.avail_out=At,E.next_in=tt,E.avail_in=ot,S.hold=lt,S.bits=k,(S.wsize||Y!==E.avail_out&&S.mode<30&&(S.mode<27||W!==4))&&M(E,E.output,E.next_out,Y-E.avail_out)?(S.mode=31,-4):(G-=E.avail_in,Y-=E.avail_out,E.total_in+=G,E.total_out+=Y,S.total+=Y,S.wrap&&Y&&(E.adler=S.check=S.flags?a(S.check,st,Y,E.next_out-Y):r(S.check,st,Y,E.next_out-Y)),E.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(G==0&&Y===0||W===4)&&at===g&&(at=-5),at)},n.inflateEnd=function(E){if(!E||!E.state)return f;var W=E.state;return W.window&&(W.window=null),E.state=null,g},n.inflateGetHeader=function(E,W){var S;return E&&E.state&&2&(S=E.state).wrap?((S.head=W).done=!1,g):f},n.inflateSetDictionary=function(E,W){var S,nt=W.length;return E&&E.state?(S=E.state).wrap!==0&&S.mode!==11?f:S.mode===11&&r(1,W,nt,0)!==S.check?-3:M(E,W,nt,nt)?(S.mode=31,-4):(S.havedict=1,g):f},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,n){var s=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(d,p,g,f,v,b,_,y){var x,C,I,F,K,q,U,X,rt,M=y.bits,E=0,W=0,S=0,nt=0,st=0,tt=0,dt=0,ot=0,At=0,lt=0,k=null,G=0,Y=new s.Buf16(16),Z=new s.Buf16(16),ct=null,gt=0;for(E=0;E<=15;E++)Y[E]=0;for(W=0;W<f;W++)Y[p[g+W]]++;for(st=M,nt=15;1<=nt&&Y[nt]===0;nt--);if(nt<st&&(st=nt),nt===0)return v[b++]=20971520,v[b++]=20971520,y.bits=1,0;for(S=1;S<nt&&Y[S]===0;S++);for(st<S&&(st=S),E=ot=1;E<=15;E++)if(ot<<=1,(ot-=Y[E])<0)return-1;if(0<ot&&(d===0||nt!==1))return-1;for(Z[1]=0,E=1;E<15;E++)Z[E+1]=Z[E]+Y[E];for(W=0;W<f;W++)p[g+W]!==0&&(_[Z[p[g+W]]++]=W);if(q=d===0?(k=ct=_,19):d===1?(k=r,G-=257,ct=a,gt-=257,256):(k=o,ct=c,-1),E=S,K=b,dt=W=lt=0,I=-1,F=(At=1<<(tt=st))-1,d===1&&852<At||d===2&&592<At)return 1;for(;;){for(U=E-dt,rt=_[W]<q?(X=0,_[W]):_[W]>q?(X=ct[gt+_[W]],k[G+_[W]]):(X=96,0),x=1<<E-dt,S=C=1<<tt;v[K+(lt>>dt)+(C-=x)]=U<<24|X<<16|rt|0,C!==0;);for(x=1<<E-1;lt&x;)x>>=1;if(x!==0?(lt&=x-1,lt+=x):lt=0,W++,--Y[E]==0){if(E===nt)break;E=p[g+_[W]]}if(st<E&&(lt&F)!==I){for(dt===0&&(dt=st),K+=S,ot=1<<(tt=E-dt);tt+dt<nt&&!((ot-=Y[tt+dt])<=0);)tt++,ot<<=1;if(At+=1<<tt,d===1&&852<At||d===2&&592<At)return 1;v[I=lt&F]=st<<24|tt<<16|K-b|0}}return lt!==0&&(v[K+lt]=E-dt<<24|64<<16|0),y.bits=st,0}},{"../utils/common":41}],51:[function(t,i,n){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,n){var s=t("../utils/common"),r=0,a=1;function o($){for(var et=$.length;0<=--et;)$[et]=0}var c=0,d=29,p=256,g=p+1+d,f=30,v=19,b=2*g+1,_=15,y=16,x=7,C=256,I=16,F=17,K=18,q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(2*(g+2));o(M);var E=new Array(2*f);o(E);var W=new Array(512);o(W);var S=new Array(256);o(S);var nt=new Array(d);o(nt);var st,tt,dt,ot=new Array(f);function At($,et,vt,_t,ht){this.static_tree=$,this.extra_bits=et,this.extra_base=vt,this.elems=_t,this.max_length=ht,this.has_stree=$&&$.length}function lt($,et){this.dyn_tree=$,this.max_code=0,this.stat_desc=et}function k($){return $<256?W[$]:W[256+($>>>7)]}function G($,et){$.pending_buf[$.pending++]=255&et,$.pending_buf[$.pending++]=et>>>8&255}function Y($,et,vt){$.bi_valid>y-vt?($.bi_buf|=et<<$.bi_valid&65535,G($,$.bi_buf),$.bi_buf=et>>y-$.bi_valid,$.bi_valid+=vt-y):($.bi_buf|=et<<$.bi_valid&65535,$.bi_valid+=vt)}function Z($,et,vt){Y($,vt[2*et],vt[2*et+1])}function ct($,et){for(var vt=0;vt|=1&$,$>>>=1,vt<<=1,0<--et;);return vt>>>1}function gt($,et,vt){var _t,ht,kt=new Array(_+1),Ft=0;for(_t=1;_t<=_;_t++)kt[_t]=Ft=Ft+vt[_t-1]<<1;for(ht=0;ht<=et;ht++){var Nt=$[2*ht+1];Nt!==0&&($[2*ht]=ct(kt[Nt]++,Nt))}}function bt($){var et;for(et=0;et<g;et++)$.dyn_ltree[2*et]=0;for(et=0;et<f;et++)$.dyn_dtree[2*et]=0;for(et=0;et<v;et++)$.bl_tree[2*et]=0;$.dyn_ltree[2*C]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function wt($){8<$.bi_valid?G($,$.bi_buf):0<$.bi_valid&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function Mt($,et,vt,_t){var ht=2*et,kt=2*vt;return $[ht]<$[kt]||$[ht]===$[kt]&&_t[et]<=_t[vt]}function It($,et,vt){for(var _t=$.heap[vt],ht=vt<<1;ht<=$.heap_len&&(ht<$.heap_len&&Mt(et,$.heap[ht+1],$.heap[ht],$.depth)&&ht++,!Mt(et,_t,$.heap[ht],$.depth));)$.heap[vt]=$.heap[ht],vt=ht,ht<<=1;$.heap[vt]=_t}function zt($,et,vt){var _t,ht,kt,Ft,Nt=0;if($.last_lit!==0)for(;_t=$.pending_buf[$.d_buf+2*Nt]<<8|$.pending_buf[$.d_buf+2*Nt+1],ht=$.pending_buf[$.l_buf+Nt],Nt++,_t===0?Z($,ht,et):(Z($,(kt=S[ht])+p+1,et),(Ft=q[kt])!==0&&Y($,ht-=nt[kt],Ft),Z($,kt=k(--_t),vt),(Ft=U[kt])!==0&&Y($,_t-=ot[kt],Ft)),Nt<$.last_lit;);Z($,C,et)}function jt($,et){var vt,_t,ht,kt=et.dyn_tree,Ft=et.stat_desc.static_tree,Nt=et.stat_desc.has_stree,Bt=et.stat_desc.elems,Jt=-1;for($.heap_len=0,$.heap_max=b,vt=0;vt<Bt;vt++)kt[2*vt]!==0?($.heap[++$.heap_len]=Jt=vt,$.depth[vt]=0):kt[2*vt+1]=0;for(;$.heap_len<2;)kt[2*(ht=$.heap[++$.heap_len]=Jt<2?++Jt:0)]=1,$.depth[ht]=0,$.opt_len--,Nt&&($.static_len-=Ft[2*ht+1]);for(et.max_code=Jt,vt=$.heap_len>>1;1<=vt;vt--)It($,kt,vt);for(ht=Bt;vt=$.heap[1],$.heap[1]=$.heap[$.heap_len--],It($,kt,1),_t=$.heap[1],$.heap[--$.heap_max]=vt,$.heap[--$.heap_max]=_t,kt[2*ht]=kt[2*vt]+kt[2*_t],$.depth[ht]=($.depth[vt]>=$.depth[_t]?$.depth[vt]:$.depth[_t])+1,kt[2*vt+1]=kt[2*_t+1]=ht,$.heap[1]=ht++,It($,kt,1),2<=$.heap_len;);$.heap[--$.heap_max]=$.heap[1],function(Zt,Qt){var ge,qt,oi,ne,tn,Te,ke=Qt.dyn_tree,Vn=Qt.max_code,Pe=Qt.stat_desc.static_tree,Gr=Qt.stat_desc.has_stree,Qe=Qt.stat_desc.extra_bits,In=Qt.stat_desc.extra_base,vn=Qt.stat_desc.max_length,We=0;for(ne=0;ne<=_;ne++)Zt.bl_count[ne]=0;for(ke[2*Zt.heap[Zt.heap_max]+1]=0,ge=Zt.heap_max+1;ge<b;ge++)vn<(ne=ke[2*ke[2*(qt=Zt.heap[ge])+1]+1]+1)&&(ne=vn,We++),ke[2*qt+1]=ne,Vn<qt||(Zt.bl_count[ne]++,tn=0,In<=qt&&(tn=Qe[qt-In]),Te=ke[2*qt],Zt.opt_len+=Te*(ne+tn),Gr&&(Zt.static_len+=Te*(Pe[2*qt+1]+tn)));if(We!==0){do{for(ne=vn-1;Zt.bl_count[ne]===0;)ne--;Zt.bl_count[ne]--,Zt.bl_count[ne+1]+=2,Zt.bl_count[vn]--,We-=2}while(0<We);for(ne=vn;ne!==0;ne--)for(qt=Zt.bl_count[ne];qt!==0;)Vn<(oi=Zt.heap[--ge])||(ke[2*oi+1]!==ne&&(Zt.opt_len+=(ne-ke[2*oi+1])*ke[2*oi],ke[2*oi+1]=ne),qt--)}}($,et),gt(kt,Jt,$.bl_count)}function N($,et,vt){var _t,ht,kt=-1,Ft=et[1],Nt=0,Bt=7,Jt=4;for(Ft===0&&(Bt=138,Jt=3),et[2*(vt+1)+1]=65535,_t=0;_t<=vt;_t++)ht=Ft,Ft=et[2*(_t+1)+1],++Nt<Bt&&ht===Ft||(Nt<Jt?$.bl_tree[2*ht]+=Nt:ht!==0?(ht!==kt&&$.bl_tree[2*ht]++,$.bl_tree[2*I]++):Nt<=10?$.bl_tree[2*F]++:$.bl_tree[2*K]++,kt=ht,Jt=(Nt=0)===Ft?(Bt=138,3):ht===Ft?(Bt=6,3):(Bt=7,4))}function at($,et,vt){var _t,ht,kt=-1,Ft=et[1],Nt=0,Bt=7,Jt=4;for(Ft===0&&(Bt=138,Jt=3),_t=0;_t<=vt;_t++)if(ht=Ft,Ft=et[2*(_t+1)+1],!(++Nt<Bt&&ht===Ft)){if(Nt<Jt)for(;Z($,ht,$.bl_tree),--Nt!=0;);else ht!==0?(ht!==kt&&(Z($,ht,$.bl_tree),Nt--),Z($,I,$.bl_tree),Y($,Nt-3,2)):Nt<=10?(Z($,F,$.bl_tree),Y($,Nt-3,3)):(Z($,K,$.bl_tree),Y($,Nt-11,7));kt=ht,Jt=(Nt=0)===Ft?(Bt=138,3):ht===Ft?(Bt=6,3):(Bt=7,4)}}o(ot);var B=!1;function J($,et,vt,_t){Y($,(c<<1)+(_t?1:0),3),function(ht,kt,Ft,Nt){wt(ht),G(ht,Ft),G(ht,~Ft),s.arraySet(ht.pending_buf,ht.window,kt,Ft,ht.pending),ht.pending+=Ft}($,et,vt)}n._tr_init=function($){B||(function(){var et,vt,_t,ht,kt,Ft=new Array(_+1);for(ht=_t=0;ht<d-1;ht++)for(nt[ht]=_t,et=0;et<1<<q[ht];et++)S[_t++]=ht;for(S[_t-1]=ht,ht=kt=0;ht<16;ht++)for(ot[ht]=kt,et=0;et<1<<U[ht];et++)W[kt++]=ht;for(kt>>=7;ht<f;ht++)for(ot[ht]=kt<<7,et=0;et<1<<U[ht]-7;et++)W[256+kt++]=ht;for(vt=0;vt<=_;vt++)Ft[vt]=0;for(et=0;et<=143;)M[2*et+1]=8,et++,Ft[8]++;for(;et<=255;)M[2*et+1]=9,et++,Ft[9]++;for(;et<=279;)M[2*et+1]=7,et++,Ft[7]++;for(;et<=287;)M[2*et+1]=8,et++,Ft[8]++;for(gt(M,g+1,Ft),et=0;et<f;et++)E[2*et+1]=5,E[2*et]=ct(et,5);st=new At(M,q,p+1,g,_),tt=new At(E,U,0,f,_),dt=new At(new Array(0),X,0,v,x)}(),B=!0),$.l_desc=new lt($.dyn_ltree,st),$.d_desc=new lt($.dyn_dtree,tt),$.bl_desc=new lt($.bl_tree,dt),$.bi_buf=0,$.bi_valid=0,bt($)},n._tr_stored_block=J,n._tr_flush_block=function($,et,vt,_t){var ht,kt,Ft=0;0<$.level?($.strm.data_type===2&&($.strm.data_type=function(Nt){var Bt,Jt=4093624447;for(Bt=0;Bt<=31;Bt++,Jt>>>=1)if(1&Jt&&Nt.dyn_ltree[2*Bt]!==0)return r;if(Nt.dyn_ltree[18]!==0||Nt.dyn_ltree[20]!==0||Nt.dyn_ltree[26]!==0)return a;for(Bt=32;Bt<p;Bt++)if(Nt.dyn_ltree[2*Bt]!==0)return a;return r}($)),jt($,$.l_desc),jt($,$.d_desc),Ft=function(Nt){var Bt;for(N(Nt,Nt.dyn_ltree,Nt.l_desc.max_code),N(Nt,Nt.dyn_dtree,Nt.d_desc.max_code),jt(Nt,Nt.bl_desc),Bt=v-1;3<=Bt&&Nt.bl_tree[2*rt[Bt]+1]===0;Bt--);return Nt.opt_len+=3*(Bt+1)+5+5+4,Bt}($),ht=$.opt_len+3+7>>>3,(kt=$.static_len+3+7>>>3)<=ht&&(ht=kt)):ht=kt=vt+5,vt+4<=ht&&et!==-1?J($,et,vt,_t):$.strategy===4||kt===ht?(Y($,2+(_t?1:0),3),zt($,M,E)):(Y($,4+(_t?1:0),3),function(Nt,Bt,Jt,Zt){var Qt;for(Y(Nt,Bt-257,5),Y(Nt,Jt-1,5),Y(Nt,Zt-4,4),Qt=0;Qt<Zt;Qt++)Y(Nt,Nt.bl_tree[2*rt[Qt]+1],3);at(Nt,Nt.dyn_ltree,Bt-1),at(Nt,Nt.dyn_dtree,Jt-1)}($,$.l_desc.max_code+1,$.d_desc.max_code+1,Ft+1),zt($,$.dyn_ltree,$.dyn_dtree)),bt($),_t&&wt($)},n._tr_tally=function($,et,vt){return $.pending_buf[$.d_buf+2*$.last_lit]=et>>>8&255,$.pending_buf[$.d_buf+2*$.last_lit+1]=255&et,$.pending_buf[$.l_buf+$.last_lit]=255&vt,$.last_lit++,et===0?$.dyn_ltree[2*vt]++:($.matches++,et--,$.dyn_ltree[2*(S[vt]+p+1)]++,$.dyn_dtree[2*k(et)]++),$.last_lit===$.lit_bufsize-1},n._tr_align=function($){Y($,2,3),Z($,C,M),function(et){et.bi_valid===16?(G(et,et.bi_buf),et.bi_buf=0,et.bi_valid=0):8<=et.bi_valid&&(et.pending_buf[et.pending++]=255&et.bi_buf,et.bi_buf>>=8,et.bi_valid-=8)}($)}},{"../utils/common":41}],53:[function(t,i,n){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,n){(function(s){(function(r,a){if(!r.setImmediate){var o,c,d,p,g=1,f={},v=!1,b=r.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(r);_=_&&_.setTimeout?_:r,o={}.toString.call(r.process)==="[object process]"?function(I){process.nextTick(function(){x(I)})}:function(){if(r.postMessage&&!r.importScripts){var I=!0,F=r.onmessage;return r.onmessage=function(){I=!1},r.postMessage("","*"),r.onmessage=F,I}}()?(p="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",C,!1):r.attachEvent("onmessage",C),function(I){r.postMessage(p+I,"*")}):r.MessageChannel?((d=new MessageChannel).port1.onmessage=function(I){x(I.data)},function(I){d.port2.postMessage(I)}):b&&"onreadystatechange"in b.createElement("script")?(c=b.documentElement,function(I){var F=b.createElement("script");F.onreadystatechange=function(){x(I),F.onreadystatechange=null,c.removeChild(F),F=null},c.appendChild(F)}):function(I){setTimeout(x,0,I)},_.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var F=new Array(arguments.length-1),K=0;K<F.length;K++)F[K]=arguments[K+1];var q={callback:I,args:F};return f[g]=q,o(g),g++},_.clearImmediate=y}function y(I){delete f[I]}function x(I){if(v)setTimeout(x,0,I);else{var F=f[I];if(F){v=!0;try{(function(K){var q=K.callback,U=K.args;switch(U.length){case 0:q();break;case 1:q(U[0]);break;case 2:q(U[0],U[1]);break;case 3:q(U[0],U[1],U[2]);break;default:q.apply(a,U)}})(F)}finally{y(I),v=!1}}}}function C(I){I.source===r&&typeof I.data=="string"&&I.data.indexOf(p)===0&&x(+I.data.slice(p.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof qp<"u"?qp:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Xv);var R_=Xv.exports;const B_=Fy(R_);export{le as E,B_ as J,ze as _,D_ as a,O_ as b};
